"use strict";(self.webpackChunkCRUDApp1=self.webpackChunkCRUDApp1||[]).push([[179],{2011:(Lt,Le,U)=>{U.d(Le,{Dh:()=>Se,GT:()=>he,cc:()=>Be,hO:()=>at,on:()=>Z,pX:()=>de,xv:()=>_e});var c=U(4650),se=U(9260),B=U(2122);Lt=U.hmd(Lt);const ge=["ngOnDestroy"],de=(Ge,Ve,nt,ke={})=>new Proxy(Ge,{get:(Ie,Ue)=>nt.runOutsideAngular(()=>{var it;if(Ge[Ue])return!(null===(it=ke?.spy)||void 0===it)&&it.get&&ke.spy.get(Ue,Ge[Ue]),Ge[Ue];if(ge.indexOf(Ue)>-1)return()=>{};const Ze=Ve.toPromise().then(q=>{const Pe=q&&q[Ue];return"function"==typeof Pe?Pe.bind(q):Pe&&Pe.then?Pe.then(tt=>nt.run(()=>tt)):nt.run(()=>Pe)});return new Proxy(()=>{},{get:(q,Pe)=>Ze[Pe],apply:(q,Pe,tt)=>Ze.then(dt=>{var Gt;const St=dt&&dt(...tt);return!(null===(Gt=ke?.spy)||void 0===Gt)&&Gt.apply&&ke.spy.apply(Ue,tt,St),St})})})}),he=(Ge,Ve)=>{Ve.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(ke=>{Object.defineProperty(Ge.prototype,ke,Object.getOwnPropertyDescriptor(nt.prototype||nt,ke))})})};class Oe{constructor(Ve){return Ve}}const Se=new c.OlP("angularfire2.app.options"),_e=new c.OlP("angularfire2.app.name");function Z(Ge,Ve,nt){const Ie="object"==typeof nt&&nt||{};Ie.name=Ie.name||"string"==typeof nt&&nt||"[DEFAULT]";const it=se.Z.apps.filter(Ze=>Ze&&Ze.name===Ie.name)[0]||Ve.runOutsideAngular(()=>se.Z.initializeApp(Ge,Ie));try{JSON.stringify(Ge)!==JSON.stringify(it.options)&&Q("error",`${it.name} Firebase App already initialized with different options${Lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Oe(it)}const Q=(Ge,...Ve)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Ge](...Ve)},ie={provide:Oe,useFactory:Z,deps:[Se,c.R0b,[new c.FiY,_e]]};let at=(()=>{class Ge{constructor(nt){se.Z.registerVersion("angularfire",B.q4.full,"core"),se.Z.registerVersion("angularfire",B.q4.full,"app-compat"),se.Z.registerVersion("angular",c.q4F.full,nt.toString())}static initializeApp(nt,ke){return{ngModule:Ge,providers:[{provide:Se,useValue:nt},{provide:_e,useValue:ke}]}}}return Ge.\u0275fac=function(nt){return new(nt||Ge)(c.LFG(c.Lbi))},Ge.\u0275mod=c.oAB({type:Ge}),Ge.\u0275inj=c.cJS({providers:[ie]}),Ge})();function Be(Ge,Ve,nt,ke,Ie){const[,Ue,it]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===Ge)||[];if(Ue)return function ct(Ge,Ve){try{return Ge.toString()===Ve.toString()}catch{return Ge===Ve}}(Ie,it)||(De("error",`${Ve} was already initialized on the ${nt} Firebase App with different settings.${Ft?" You may need to reload as Firebase is not HMR aware.":""}`),De("warn",{is:Ie,was:it})),Ue;{const Ze=ke();return globalThis.\u0275AngularfireInstanceCache.push([Ge,Ze,Ie]),Ze}}const Ft=!!Lt.hot,De=(Ge,...Ve)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Ge](...Ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Lt,Le,U)=>{U.d(Le,{q4:()=>Ul,iC:()=>jl,fc:()=>jh,HU:()=>Ca,vb:()=>Tt,JM:()=>Ho});var c=U(4650),se=U(259),B=U(5861),ge=U(9681),de=U(2090),he=U(4859),Oe=U(1877),Se=U(8766);const _e="@firebase/installations",Z="0.6.4",Q=1e4,ie=`w:${Z}`,at="FIS_v2",Be="https://firebaseinstallations.googleapis.com/v1",ct=36e5,Ve=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(O){return O instanceof de.ZR&&O.code.includes("request-failed")}function ke({projectId:O}){return`${Be}/projects/${O}/installations`}function Ie(O){return{token:O.token,requestStatus:2,expiresIn:dt(O.expiresIn),creationTime:Date.now()}}function Ue(O,A){return it.apply(this,arguments)}function it(){return(it=(0,B.Z)(function*(O,A){const $=(yield A.json()).error;return Ve.create("request-failed",{requestName:O,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function Ze({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function Pe(O){return tt.apply(this,arguments)}function tt(){return(tt=(0,B.Z)(function*(O){const A=yield O();return A.status>=500&&A.status<600?O():A})).apply(this,arguments)}function dt(O){return Number(O.replace("s","000"))}function ve(){return(ve=(0,B.Z)(function*({appConfig:O,heartbeatServiceProvider:A},{fid:x}){const $=ke(O),X=Ze(O),fe=A.getImmediate({optional:!0});if(fe){const Ht=yield fe.getHeartbeatsHeader();Ht&&X.append("x-firebase-client",Ht)}const Mt={method:"POST",headers:X,body:JSON.stringify({fid:x,authVersion:at,appId:O.appId,sdkVersion:ie})},xt=yield Pe(()=>fetch($,Mt));if(xt.ok){const Ht=yield xt.json();return{fid:Ht.fid||x,registrationStatus:2,refreshToken:Ht.refreshToken,authToken:Ie(Ht.authToken)}}throw yield Ue("Create Installation",xt)})).apply(this,arguments)}function Ee(O){return new Promise(A=>{setTimeout(A,O)})}const je=/^[cdef][\w-]{21}$/,et="";function st(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const x=function yt(O){return function Ae(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return je.test(x)?x:et}catch{return et}}function gt(O){return`${O.appName}!${O.appId}`}const Gn=new Map;function $t(O,A){const x=gt(O);qt(x,A),function Pr(O,A){const x=function sr(){return!Xn&&"BroadcastChannel"in self&&(Xn=new BroadcastChannel("[Firebase] FID Change"),Xn.onmessage=O=>{qt(O.data.key,O.data.fid)}),Xn}();x&&x.postMessage({key:O,fid:A}),function mr(){0===Gn.size&&Xn&&(Xn.close(),Xn=null)}()}(x,A)}function qt(O,A){const x=Gn.get(O);if(x)for(const $ of x)$(A)}let Xn=null;const yi="firebase-installations-database",ps=1,Gi="firebase-installations-store";let ae=null;function oe(){return ae||(ae=(0,Se.X3)(yi,ps,{upgrade:(O,A)=>{0===A&&O.createObjectStore(Gi)}})),ae}function pe(O,A){return xe.apply(this,arguments)}function xe(){return(xe=(0,B.Z)(function*(O,A){const x=gt(O),X=(yield oe()).transaction(Gi,"readwrite"),fe=X.objectStore(Gi),ze=yield fe.get(x);return yield fe.put(A,x),yield X.done,(!ze||ze.fid!==A.fid)&&$t(O,A.fid),A})).apply(this,arguments)}function be(O){return wt.apply(this,arguments)}function wt(){return(wt=(0,B.Z)(function*(O){const A=gt(O),$=(yield oe()).transaction(Gi,"readwrite");yield $.objectStore(Gi).delete(A),yield $.done})).apply(this,arguments)}function Kn(O,A){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,B.Z)(function*(O,A){const x=gt(O),X=(yield oe()).transaction(Gi,"readwrite"),fe=X.objectStore(Gi),ze=yield fe.get(x),Mt=A(ze);return void 0===Mt?yield fe.delete(x):yield fe.put(Mt,x),yield X.done,Mt&&(!ze||ze.fid!==Mt.fid)&&$t(O,Mt.fid),Mt})).apply(this,arguments)}function un(O){return ar.apply(this,arguments)}function ar(){return ar=(0,B.Z)(function*(O){let A;const x=yield Kn(O.appConfig,$=>{const X=function Yt(O){return Nr(O||{fid:st(),registrationStatus:0})}($),fe=function Vt(O,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Ve.create("app-offline"))};const x={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},$=function zt(O,A){return Po.apply(this,arguments)}(O,x);return{installationEntry:x,registrationPromise:$}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Tn(O)}:{installationEntry:A}}(O,X);return A=fe.registrationPromise,fe.installationEntry});return x.fid===et?{installationEntry:yield A}:{installationEntry:x,registrationPromise:A}}),ar.apply(this,arguments)}function Po(){return Po=(0,B.Z)(function*(O,A){try{const x=yield function St(O,A){return ve.apply(this,arguments)}(O,A);return pe(O.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield be(O.appConfig):yield pe(O.appConfig,{fid:A.fid,registrationStatus:0}),x}}),Po.apply(this,arguments)}function Tn(O){return lr.apply(this,arguments)}function lr(){return(lr=(0,B.Z)(function*(O){let A=yield An(O.appConfig);for(;1===A.registrationStatus;)yield Ee(100),A=yield An(O.appConfig);if(0===A.registrationStatus){const{installationEntry:x,registrationPromise:$}=yield un(O);return $||x}return A})).apply(this,arguments)}function An(O){return Kn(O,A=>{if(!A)throw Ve.create("installation-not-found");return Nr(A)})}function Nr(O){return function sa(O){return 1===O.registrationStatus&&O.registrationTime+Q<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function No(){return(No=(0,B.Z)(function*({appConfig:O,heartbeatServiceProvider:A},x){const $=function Pn(O,{fid:A}){return`${ke(O)}/${A}/authTokens:generate`}(O,x),X=function q(O,{refreshToken:A}){const x=Ze(O);return x.append("Authorization",function Gt(O){return`${at} ${O}`}(A)),x}(O,x),fe=A.getImmediate({optional:!0});if(fe){const Ht=yield fe.getHeartbeatsHeader();Ht&&X.append("x-firebase-client",Ht)}const Mt={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ie,appId:O.appId}})},xt=yield Pe(()=>fetch($,Mt));if(xt.ok)return Ie(yield xt.json());throw yield Ue("Generate Auth Token",xt)})).apply(this,arguments)}function io(O){return gs.apply(this,arguments)}function gs(){return gs=(0,B.Z)(function*(O,A=!1){let x;const $=yield Kn(O.appConfig,fe=>{if(!pn(fe))throw Ve.create("not-registered");const ze=fe.authToken;if(!A&&function Vi(O){return 2===O.requestStatus&&!function Y(O){const A=Date.now();return A<O.creationTime||O.creationTime+O.expiresIn<A+ct}(O)}(ze))return fe;if(1===ze.requestStatus)return x=function ht(O,A){return He.apply(this,arguments)}(O,A),fe;{if(!navigator.onLine)throw Ve.create("app-offline");const Mt=function K(O){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:A})}(fe);return x=function Xt(O,A){return sn.apply(this,arguments)}(O,Mt),Mt}});return x?yield x:$.authToken}),gs.apply(this,arguments)}function He(){return(He=(0,B.Z)(function*(O,A){let x=yield It(O.appConfig);for(;1===x.authToken.requestStatus;)yield Ee(100),x=yield It(O.appConfig);const $=x.authToken;return 0===$.requestStatus?io(O,A):$})).apply(this,arguments)}function It(O){return Kn(O,A=>{if(!pn(A))throw Ve.create("not-registered");return function te(O){return 1===O.requestStatus&&O.requestTime+Q<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function sn(){return sn=(0,B.Z)(function*(O,A){try{const x=yield function Hn(O,A){return No.apply(this,arguments)}(O,A),$=Object.assign(Object.assign({},A),{authToken:x});return yield pe(O.appConfig,$),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const $=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield pe(O.appConfig,$)}else yield be(O.appConfig);throw x}}),sn.apply(this,arguments)}function pn(O){return void 0!==O&&2===O.registrationStatus}function ue(){return(ue=(0,B.Z)(function*(O){const A=O,{installationEntry:x,registrationPromise:$}=yield un(A);return $?$.catch(console.error):io(A).catch(console.error),x.fid})).apply(this,arguments)}function mt(){return mt=(0,B.Z)(function*(O,A=!1){const x=O;return yield function er(O){return Dr.apply(this,arguments)}(x),(yield io(x,A)).token}),mt.apply(this,arguments)}function Dr(){return(Dr=(0,B.Z)(function*(O){const{registrationPromise:A}=yield un(O);A&&(yield A)})).apply(this,arguments)}function Rc(O){return Ve.create("missing-app-config-values",{valueName:O})}const Oc="installations",xr=O=>{const A=O.getProvider("app").getImmediate(),x=function gh(O){if(!O||!O.options)throw Rc("App Configuration");if(!O.name)throw Rc("App Name");const A=["projectId","apiKey","appId"];for(const x of A)if(!O.options[x])throw Rc(x);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(A);return{app:A,appConfig:x,heartbeatServiceProvider:(0,ge._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},mh=O=>{const A=O.getProvider("app").getImmediate(),x=(0,ge._getProvider)(A,Oc).getImmediate();return{getId:()=>function Ne(O){return ue.apply(this,arguments)}(x),getToken:X=>function Et(O){return mt.apply(this,arguments)}(x,X)}};(function vh(){(0,ge._registerComponent)(new he.wA(Oc,xr,"PUBLIC")),(0,ge._registerComponent)(new he.wA("installations-internal",mh,"PRIVATE"))})(),(0,ge.registerVersion)(_e,Z),(0,ge.registerVersion)(_e,Z,"esm2017");const Mn="@firebase/remote-config",Hi=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wl{constructor(A,x,$,X){this.client=A,this.storage=x,this.storageCache=$,this.logger=X}isCachedDataFresh(A,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-x,X=$<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${X}.`),X}fetch(A){var x=this;return(0,B.Z)(function*(){const[$,X]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(X&&x.isCachedDataFresh(A.cacheMaxAgeMillis,$))return X;A.eTag=X&&X.eTag;const fe=yield x.client.fetch(A),ze=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&ze.push(x.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(ze),fe})()}}function la(O=navigator){return O.languages&&O.languages[0]||O.language}class so{constructor(A,x,$,X,fe,ze){this.firebaseInstallations=A,this.sdkVersion=x,this.namespace=$,this.projectId=X,this.apiKey=fe,this.appId=ze}fetch(A){var x=this;return(0,B.Z)(function*(){const[$,X]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),ze=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},xt={sdk_version:x.sdkVersion,app_instance_id:$,app_instance_id_token:X,app_id:x.appId,language_code:la()},Ht={method:"POST",headers:Mt,body:JSON.stringify(xt)},wn=fetch(ze,Ht),Zt=new Promise((Lr,Co)=>{A.signal.addEventListener(()=>{const Ir=new Error("The operation was aborted.");Ir.name="AbortError",Co(Ir)})});let dr;try{yield Promise.race([wn,Zt]),dr=yield wn}catch(Lr){let Co="fetch-client-network";throw"AbortError"===Lr?.name&&(Co="fetch-timeout"),Hi.create(Co,{originalErrorMessage:Lr?.message})}let Qr=dr.status;const ju=dr.headers.get("ETag")||void 0;let Bo,Ss;if(200===dr.status){let Lr;try{Lr=yield dr.json()}catch(Co){throw Hi.create("fetch-client-parse",{originalErrorMessage:Co?.message})}Bo=Lr.entries,Ss=Lr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ss?Qr=500:"NO_CHANGE"===Ss?Qr=304:("NO_TEMPLATE"===Ss||"EMPTY_CONFIG"===Ss)&&(Bo={}),304!==Qr&&200!==Qr)throw Hi.create("fetch-status",{httpStatus:Qr});return{status:Qr,eTag:ju,config:Bo}})()}}class On{constructor(A,x){this.client=A,this.storage=x}fetch(A){var x=this;return(0,B.Z)(function*(){const $=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(A,$)})()}attemptFetch(A,{throttleEndTimeMillis:x,backoffCount:$}){var X=this;return(0,B.Z)(function*(){yield function Tr(O,A){return new Promise((x,$)=>{const X=Math.max(A-Date.now(),0),fe=setTimeout(x,X);O.addEventListener(()=>{clearTimeout(fe),$(Hi.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,x);try{const fe=yield X.client.fetch(A);return yield X.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function yh(O){if(!(O instanceof de.ZR&&O.customData))return!1;const A=Number(O.customData.httpStatus);return 429===A||500===A||503===A||504===A}(fe))throw fe;const ze={throttleEndTimeMillis:Date.now()+(0,de.$s)($),backoffCount:$+1};return yield X.storage.setThrottleMetadata(ze),X.attemptFetch(A,ze)}})()}}class Ac{constructor(A,x,$,X,fe){this.app=A,this._client=x,this._storageCache=$,this._storage=X,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ga(O,A){const x=O.target.error||void 0;return Hi.create(A,{originalErrorMessage:x&&x?.message})}const xo="app_namespace_store";class po{constructor(A,x,$,X=function u_(){return new Promise((O,A)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=$=>{A(Ga($,"storage-open"))},x.onsuccess=$=>{O($.target.result)},x.onupgradeneeded=$=>{0===$.oldVersion&&$.target.result.createObjectStore(xo,{keyPath:"compositeKey"})}}catch(x){A(Hi.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=A,this.appName=x,this.namespace=$,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var x=this;return(0,B.Z)(function*(){const $=yield x.openDbPromise;return new Promise((X,fe)=>{const Mt=$.transaction([xo],"readonly").objectStore(xo),xt=x.createCompositeKey(A);try{const Ht=Mt.get(xt);Ht.onerror=wn=>{fe(Ga(wn,"storage-get"))},Ht.onsuccess=wn=>{const Zt=wn.target.result;X(Zt?Zt.value:void 0)}}catch(Ht){fe(Hi.create("storage-get",{originalErrorMessage:Ht?.message}))}})})()}set(A,x){var $=this;return(0,B.Z)(function*(){const X=yield $.openDbPromise;return new Promise((fe,ze)=>{const xt=X.transaction([xo],"readwrite").objectStore(xo),Ht=$.createCompositeKey(A);try{const wn=xt.put({compositeKey:Ht,value:x});wn.onerror=Zt=>{ze(Ga(Zt,"storage-set"))},wn.onsuccess=()=>{fe()}}catch(wn){ze(Hi.create("storage-set",{originalErrorMessage:wn?.message}))}})})()}delete(A){var x=this;return(0,B.Z)(function*(){const $=yield x.openDbPromise;return new Promise((X,fe)=>{const Mt=$.transaction([xo],"readwrite").objectStore(xo),xt=x.createCompositeKey(A);try{const Ht=Mt.delete(xt);Ht.onerror=wn=>{fe(Ga(wn,"storage-delete"))},Ht.onsuccess=()=>{X()}}catch(Ht){fe(Hi.create("storage-delete",{originalErrorMessage:Ht?.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class go{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,B.Z)(function*(){const x=A.storage.getLastFetchStatus(),$=A.storage.getLastSuccessfulFetchTimestampMillis(),X=A.storage.getActiveConfig(),fe=yield x;fe&&(A.lastFetchStatus=fe);const ze=yield $;ze&&(A.lastSuccessfulFetchTimestampMillis=ze);const Mt=yield X;Mt&&(A.activeConfig=Mt)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Bi(){return ip.apply(this,arguments)}function ip(){return(ip=(0,B.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function Fs(){(0,ge._registerComponent)(new he.wA("remote-config",function O(A,{instanceIdentifier:x}){const $=A.getProvider("app").getImmediate(),X=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Hi.create("registration-window");if(!(0,de.hl)())throw Hi.create("indexed-db-unavailable");const{projectId:fe,apiKey:ze,appId:Mt}=$.options;if(!fe)throw Hi.create("registration-project-id");if(!ze)throw Hi.create("registration-api-key");if(!Mt)throw Hi.create("registration-app-id");const xt=new po(Mt,$.name,x=x||"firebase"),Ht=new go(xt),wn=new Oe.Yd(Mn);wn.logLevel=Oe.in.ERROR;const Zt=new so(X,ge.SDK_VERSION,x,fe,ze,Mt),dr=new On(Zt,xt),Qr=new wl(dr,xt,Ht,wn),ju=new Ac($,Qr,Ht,xt,wn);return function La(O){const A=(0,de.m9)(O);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(ju),ju},"PUBLIC").setMultipleInstances(!0)),(0,ge.registerVersion)(Mn,"0.4.4"),(0,ge.registerVersion)(Mn,"0.4.4","esm2017")}();const op="/firebase-messaging-sw.js",Ls="/firebase-cloud-messaging-push-scope",Va="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bu="https://fcmregistrations.googleapis.com/v1",Ch="google.c.a.c_id",vm="google.c.a.c_l",sp="google.c.a.ts",c_="google.c.a.e";var Ha=(()=>{return(O=Ha||(Ha={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",Ha;var O})();function ys(O){const A=new Uint8Array(O);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function d_(O){const x=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(x),X=new Uint8Array($.length);for(let fe=0;fe<$.length;++fe)X[fe]=$.charCodeAt(fe);return X}const wh="fcm_token_details_db",Sh=5,Fo="fcm_token_object_Store";function Nc(){return Nc=(0,B.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(wh))return null;let A=null;return(yield(0,Se.X3)(wh,Sh,{upgrade:($=(0,B.Z)(function*(X,fe,ze,Mt){var xt;if(fe<2||!X.objectStoreNames.contains(Fo))return;const Ht=Mt.objectStore(Fo),wn=yield Ht.index("fcmSenderId").get(O);if(yield Ht.clear(),wn)if(2===fe){const Zt=wn;if(!Zt.auth||!Zt.p256dh||!Zt.endpoint)return;A={token:Zt.fcmToken,createTime:null!==(xt=Zt.createTime)&&void 0!==xt?xt:Date.now(),subscriptionOptions:{auth:Zt.auth,p256dh:Zt.p256dh,endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:"string"==typeof Zt.vapidKey?Zt.vapidKey:ys(Zt.vapidKey)}}}else if(3===fe){const Zt=wn;A={token:Zt.fcmToken,createTime:Zt.createTime,subscriptionOptions:{auth:ys(Zt.auth),p256dh:ys(Zt.p256dh),endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:ys(Zt.vapidKey)}}}else if(4===fe){const Zt=wn;A={token:Zt.fcmToken,createTime:Zt.createTime,subscriptionOptions:{auth:ys(Zt.auth),p256dh:ys(Zt.p256dh),endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:ys(Zt.vapidKey)}}}}),function(fe,ze,Mt,xt){return $.apply(this,arguments)})})).close(),yield(0,Se.Lj)(wh),yield(0,Se.Lj)("fcm_vapid_details_db"),yield(0,Se.Lj)("undefined"),function ap(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:A}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}(A)?A:null;var $}),Nc.apply(this,arguments)}const Mc="firebase-messaging-database",h_=1,mo="firebase-messaging-store";let lp=null;function Ba(){return lp||(lp=(0,Se.X3)(Mc,h_,{upgrade:(O,A)=>{0===A&&O.createObjectStore(mo)}})),lp}function Du(O){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,B.Z)(function*(O){const A=ua(O),$=yield(yield Ba()).transaction(mo).objectStore(mo).get(A);if($)return $;{const X=yield function Eh(O){return Nc.apply(this,arguments)}(O.appConfig.senderId);if(X)return yield Tl(O,X),X}}),Dl.apply(this,arguments)}function Tl(O,A){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,B.Z)(function*(O,A){const x=ua(O),X=(yield Ba()).transaction(mo,"readwrite");return yield X.objectStore(mo).put(A,x),yield X.done,A})).apply(this,arguments)}function xc(){return(xc=(0,B.Z)(function*(O){const A=ua(O),$=(yield Ba()).transaction(mo,"readwrite");yield $.objectStore(mo).delete(A),yield $.done})).apply(this,arguments)}function ua({appConfig:O}){return O.appId}const Bn=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Fc(O,A){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,B.Z)(function*(O,A){const x=yield Dh(O),$=si(A),X={method:"POST",headers:x,body:JSON.stringify($)};let fe;try{fe=yield(yield fetch(Ou(O.appConfig),X)).json()}catch(ze){throw Bn.create("token-subscribe-failed",{errorInfo:ze?.toString()})}if(fe.error)throw Bn.create("token-subscribe-failed",{errorInfo:fe.error.message});if(!fe.token)throw Bn.create("token-subscribe-no-token");return fe.token})).apply(this,arguments)}function Lc(){return(Lc=(0,B.Z)(function*(O,A){const x=yield Dh(O),$=si(A.subscriptionOptions),X={method:"PATCH",headers:x,body:JSON.stringify($)};let fe;try{fe=yield(yield fetch(`${Ou(O.appConfig)}/${A.token}`,X)).json()}catch(ze){throw Bn.create("token-update-failed",{errorInfo:ze?.toString()})}if(fe.error)throw Bn.create("token-update-failed",{errorInfo:fe.error.message});if(!fe.token)throw Bn.create("token-update-no-token");return fe.token})).apply(this,arguments)}function _s(O,A){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,B.Z)(function*(O,A){const $={method:"DELETE",headers:yield Dh(O)};try{const fe=yield(yield fetch(`${Ou(O.appConfig)}/${A}`,$)).json();if(fe.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:fe.error.message})}catch(X){throw Bn.create("token-unsubscribe-failed",{errorInfo:X?.toString()})}})).apply(this,arguments)}function Ou({projectId:O}){return`${bu}/projects/${O}/registrations`}function Dh(O){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,B.Z)(function*({appConfig:O,installations:A}){const x=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function si({p256dh:O,auth:A,endpoint:x,vapidKey:$}){const X={web:{endpoint:x,auth:A,p256dh:O}};return $!==Va&&(X.web.applicationPubKey=$),X}const Th=6048e5;function Iu(){return Iu=(0,B.Z)(function*(O){const A=yield function dp(O,A){return Au.apply(this,arguments)}(O.swRegistration,O.vapidKey),x={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:A.endpoint,auth:ys(A.getKey("auth")),p256dh:ys(A.getKey("p256dh"))},$=yield Du(O.firebaseDependencies);if($){if(function ym(O,A){return A.vapidKey===O.vapidKey&&A.endpoint===O.endpoint&&A.auth===O.auth&&A.p256dh===O.p256dh}($.subscriptionOptions,x))return Date.now()>=$.createTime+Th?function Rh(O,A){return nn.apply(this,arguments)}(O,{token:$.token,createTime:Date.now(),subscriptionOptions:x}):$.token;try{yield _s(O.firebaseDependencies,$.token)}catch(X){console.warn(X)}return cp(O.firebaseDependencies,x)}return cp(O.firebaseDependencies,x)}),Iu.apply(this,arguments)}function Ol(){return Ol=(0,B.Z)(function*(O){const A=yield Du(O.firebaseDependencies);A&&(yield _s(O.firebaseDependencies,A.token),yield function bh(O){return xc.apply(this,arguments)}(O.firebaseDependencies));const x=yield O.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),Ol.apply(this,arguments)}function nn(){return nn=(0,B.Z)(function*(O,A){try{const x=yield function Rr(O,A){return Lc.apply(this,arguments)}(O.firebaseDependencies,A),$=Object.assign(Object.assign({},A),{token:x,createTime:Date.now()});return yield Tl(O.firebaseDependencies,$),x}catch(x){throw yield function ks(O){return Ol.apply(this,arguments)}(O),x}}),nn.apply(this,arguments)}function cp(O,A){return kc.apply(this,arguments)}function kc(){return(kc=(0,B.Z)(function*(O,A){const $={token:yield Fc(O,A),createTime:Date.now(),subscriptionOptions:A};return yield Tl(O,$),$.token})).apply(this,arguments)}function Au(){return(Au=(0,B.Z)(function*(O,A){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:d_(A)})})).apply(this,arguments)}function Gc(O){const A={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function _m(O,A){if(!A.notification)return;O.notification={};const x=A.notification.title;x&&(O.notification.title=x);const $=A.notification.body;$&&(O.notification.body=$);const X=A.notification.image;X&&(O.notification.image=X);const fe=A.notification.icon;fe&&(O.notification.icon=fe)}(A,O),function Er(O,A){A.data&&(O.data=A.data)}(A,O),function $e(O,A){var x,$,X,fe,ze;if(!(A.fcmOptions||null!==(x=A.notification)&&void 0!==x&&x.click_action))return;O.fcmOptions={};const Mt=null!==(X=null===($=A.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==X?X:null===(fe=A.notification)||void 0===fe?void 0:fe.click_action;Mt&&(O.fcmOptions.link=Mt);const xt=null===(ze=A.fcmOptions)||void 0===ze?void 0:ze.analytics_label;xt&&(O.fcmOptions.analyticsLabel=xt)}(A,O),A}function Vc(O,A){const x=[];for(let $=0;$<O.length;$++)x.push(O.charAt($)),$<A.length&&x.push(A.charAt($));return x.join("")}function ai(O){return Bn.create("missing-app-config-values",{valueName:O})}Vc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Oh{constructor(A,x,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Cm(O){if(!O||!O.options)throw ai("App Configuration Object");if(!O.name)throw ai("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:x}=O;for(const $ of A)if(!x[$])throw ai($);return{appName:O.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:X,installations:x,analyticsProvider:$}}_delete(){return Promise.resolve()}}function Il(O){return vo.apply(this,arguments)}function vo(){return(vo=(0,B.Z)(function*(O){try{O.swRegistration=yield navigator.serviceWorker.register(op,{scope:Ls}),O.swRegistration.update().catch(()=>{})}catch(A){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:A?.message})}})).apply(this,arguments)}function Al(){return(Al=(0,B.Z)(function*(O,A){if(!A&&!O.swRegistration&&(yield Il(O)),A||!O.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");O.swRegistration=A}})).apply(this,arguments)}function Hc(){return(Hc=(0,B.Z)(function*(O,A){A?O.vapidKey=A:O.vapidKey||(O.vapidKey=Va)})).apply(this,arguments)}function Fr(){return Fr=(0,B.Z)(function*(O,A){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield function fp(O,A){return Hc.apply(this,arguments)}(O,A?.vapidKey),yield function hp(O,A){return Al.apply(this,arguments)}(O,A?.serviceWorkerRegistration),function Rl(O){return Iu.apply(this,arguments)}(O)}),Fr.apply(this,arguments)}function Pu(){return(Pu=(0,B.Z)(function*(O,A,x){const $=function Nu(O){switch(O){case Ha.NOTIFICATION_CLICKED:return"notification_open";case Ha.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(A);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:x[Ch],message_name:x[vm],message_time:x[sp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bc(){return Bc=(0,B.Z)(function*(O,A){const x=A.data;if(!x.isFirebaseMessaging)return;O.onMessageHandler&&x.messageType===Ha.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(Gc(x)):O.onMessageHandler.next(Gc(x)));const $=x.data;(function xn(O){return"object"==typeof O&&!!O&&Ch in O})($)&&"1"===$[c_]&&(yield function yo(O,A,x){return Pu.apply(this,arguments)}(O,x.messageType,$))}),Bc.apply(this,arguments)}const pp="@firebase/messaging",Ah=O=>{const A=new Oh(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Lo(O,A){return Bc.apply(this,arguments)}(A,x)),A},Uc=O=>{const A=O.getProvider("messaging").getImmediate();return{getToken:$=>function Ih(O,A){return Fr.apply(this,arguments)}(A,$)}};function Ph(){return jc.apply(this,arguments)}function jc(){return(jc=(0,B.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ua(){(0,ge._registerComponent)(new he.wA("messaging",Ah,"PUBLIC")),(0,ge._registerComponent)(new he.wA("messaging-internal",Uc,"PRIVATE")),(0,ge.registerVersion)(pp,"0.12.4"),(0,ge.registerVersion)(pp,"0.12.4","esm2017")}();const vp="analytics",m_="firebase_id",ao="origin",Mu=6e4,vr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ca="https://www.googletagmanager.com/gtag/js",Zr=new Oe.Yd("@firebase/analytics"),_o=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function y_(O){if(!O.startsWith(ca)){const A=_o.create("invalid-gtag-resource",{gtagURL:O});return Zr.warn(A.message),""}return O}function __(O){return Promise.all(O.map(A=>A.catch(x=>x)))}function da(){return(da=(0,B.Z)(function*(O,A,x,$,X,fe){const ze=$[X];try{if(ze)yield A[ze];else{const xt=(yield __(x)).find(Ht=>Ht.measurementId===X);xt&&(yield A[xt.appId])}}catch(Mt){Zr.error(Mt)}O("config",X,fe)})).apply(this,arguments)}function ko(){return(ko=(0,B.Z)(function*(O,A,x,$,X){try{let fe=[];if(X&&X.send_to){let ze=X.send_to;Array.isArray(ze)||(ze=[ze]);const Mt=yield __(x);for(const xt of ze){const Ht=Mt.find(Zt=>Zt.measurementId===xt),wn=Ht&&A[Ht.appId];if(!wn){fe=[];break}fe.push(wn)}}0===fe.length&&(fe=Object.values(A)),yield Promise.all(fe),O("event",$,X||{})}catch(fe){Zr.error(fe)}})).apply(this,arguments)}const _p=30,Go=new class w_{constructor(A={},x=1e3){this.throttleMetadata=A,this.intervalMillis=x}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,x){this.throttleMetadata[A]=x}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function kh(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function ws(){return(ws=(0,B.Z)(function*(O){var A;const{appId:x,apiKey:$}=O,X={method:"GET",headers:kh($)},fe=vr.replace("{app-id}",x),ze=yield fetch(fe,X);if(200!==ze.status&&304!==ze.status){let Mt="";try{const xt=yield ze.json();null!==(A=xt.error)&&void 0!==A&&A.message&&(Mt=xt.error.message)}catch{}throw _o.create("config-fetch-failed",{httpStatus:ze.status,responseMessage:Mt})}return ze.json()})).apply(this,arguments)}function yr(){return(yr=(0,B.Z)(function*(O,A=Go,x){const{appId:$,apiKey:X,measurementId:fe}=O.options;if(!$)throw _o.create("no-app-id");if(!X){if(fe)return{measurementId:fe,appId:$};throw _o.create("no-api-key")}const ze=A.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Mt=new Em;return setTimeout((0,B.Z)(function*(){Mt.abort()}),void 0!==x?x:Mu),ha({appId:$,apiKey:X,measurementId:fe},ze,Mt,A)})).apply(this,arguments)}function ha(O,A,x){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,B.Z)(function*(O,{throttleEndTimeMillis:A,backoffCount:x},$,X=Go){var fe;const{appId:ze,measurementId:Mt}=O;try{yield function Gh(O,A){return new Promise((x,$)=>{const X=Math.max(A-Date.now(),0),fe=setTimeout(x,X);O.addEventListener(()=>{clearTimeout(fe),$(_o.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}($,A)}catch(xt){if(Mt)return Zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Mt} provided in the "measurementId" field in the local Firebase config. [${xt?.message}]`),{appId:ze,measurementId:Mt};throw xt}try{const xt=yield function Sm(O){return ws.apply(this,arguments)}(O);return X.deleteThrottleMetadata(ze),xt}catch(xt){const Ht=xt;if(!function Ml(O){if(!(O instanceof de.ZR&&O.customData))return!1;const A=Number(O.customData.httpStatus);return 429===A||500===A||503===A||504===A}(Ht)){if(X.deleteThrottleMetadata(ze),Mt)return Zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Mt} provided in the "measurementId" field in the local Firebase config. [${Ht?.message}]`),{appId:ze,measurementId:Mt};throw xt}const wn=503===Number(null===(fe=Ht?.customData)||void 0===fe?void 0:fe.httpStatus)?(0,de.$s)(x,X.intervalMillis,_p):(0,de.$s)(x,X.intervalMillis),Zt={throttleEndTimeMillis:Date.now()+wn,backoffCount:x+1};return X.setThrottleMetadata(ze,Zt),Zr.debug(`Calling attemptFetch again in ${wn} millis`),ha(O,Zt,$,X)}}),Wa.apply(this,arguments)}class Em{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let xl,$c;function Fl(){return(Fl=(0,B.Z)(function*(O,A,x,$,X){if(X&&X.global)O("event",x,$);else{const fe=yield A;O("event",x,Object.assign(Object.assign({},$),{send_to:fe}))}})).apply(this,arguments)}function ku(){return(ku=(0,B.Z)(function*(){if(!(0,de.hl)())return Zr.warn(_o.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(O){return Zr.warn(_o.create("indexeddb-unavailable",{errorInfo:O?.toString()}).message),!1}return!0})).apply(this,arguments)}function Gs(){return Gs=(0,B.Z)(function*(O,A,x,$,X,fe,ze){var Mt;const xt=function Nl(O){return yr.apply(this,arguments)}(O);xt.then(Qr=>{x[Qr.measurementId]=Qr.appId,O.options.measurementId&&Qr.measurementId!==O.options.measurementId&&Zr.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${Qr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Qr=>Zr.error(Qr)),A.push(xt);const Ht=function bm(){return ku.apply(this,arguments)}().then(Qr=>{if(Qr)return $.getId()}),[wn,Zt]=yield Promise.all([xt,Ht]);(function C_(O){const A=window.document.getElementsByTagName("script");for(const x of Object.values(A))if(x.src&&x.src.includes(ca)&&x.src.includes(O))return x;return null})(fe)||function Fh(O,A){const x=function xh(O,A){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(O,A)),x}("firebase-js-sdk-policy",{createScriptURL:y_}),$=document.createElement("script"),X=`${ca}?l=${O}&id=${A}`;$.src=x?x?.createScriptURL(X):X,$.async=!0,document.head.appendChild($)}(fe,wn.measurementId),$c&&(X("consent","default",$c),function ga(O){$c=O}(void 0)),X("js",new Date);const dr=null!==(Mt=ze?.config)&&void 0!==Mt?Mt:{};return dr[ao]="firebase",dr.update=!0,null!=Zt&&(dr[m_]=Zt),X("config",wn.measurementId,dr),xl&&(X("set",xl),function Gl(O){xl=O}(void 0)),wn.measurementId}),Gs.apply(this,arguments)}class Cp{constructor(A){this.app=A}_delete(){return delete Jo[this.app.options.appId],Promise.resolve()}}let Jo={},zc=[];const za={};let Kc,ji,Ka="dataLayer",wp="gtag",Hh=!1;function Ep(O,A,x){!function Vl(){const O=[];if((0,de.ru)()&&O.push("This is a browser extension environment."),(0,de.zI)()||O.push("Cookies are not available."),O.length>0){const A=O.map(($,X)=>`(${X+1}) ${$}`).join(" "),x=_o.create("invalid-analytics-context",{errorInfo:A});Zr.warn(x.message)}}();const $=O.options.appId;if(!$)throw _o.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw _o.create("no-api-key");Zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jo[$])throw _o.create("already-exists",{id:$});if(!Hh){!function Pl(O){let A=[];Array.isArray(window[O])?A=window[O]:window[O]=A}(Ka);const{wrappedGtag:fe,gtagCore:ze}=function yp(O,A,x,$,X){let fe=function(...ze){window[$].push(arguments)};return window[X]&&"function"==typeof window[X]&&(fe=window[X]),window[X]=function xu(O,A,x,$){function fe(){return fe=(0,B.Z)(function*(ze,Mt,xt){try{"event"===ze?yield function Wc(O,A,x,$,X){return ko.apply(this,arguments)}(O,A,x,Mt,xt):"config"===ze?yield function ja(O,A,x,$,X,fe){return da.apply(this,arguments)}(O,A,x,$,Mt,xt):"consent"===ze?O("consent","update",xt):O("set",Mt)}catch(Ht){Zr.error(Ht)}}),fe.apply(this,arguments)}return function X(ze,Mt,xt){return fe.apply(this,arguments)}}(fe,O,A,x),{gtagCore:fe,wrappedGtag:window[X]}}(Jo,zc,za,Ka,wp);ji=fe,Kc=ze,Hh=!0}return Jo[$]=function Dm(O,A,x,$,X,fe,ze){return Gs.apply(this,arguments)}(O,zc,za,A,Kc,Ka,x),new Cp(O)}function ma(){return qa.apply(this,arguments)}function qa(){return(qa=(0,B.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const Rm="@firebase/analytics";!function Om(){(0,ge._registerComponent)(new he.wA(vp,(A,{options:x})=>Ep(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ge._registerComponent)(new he.wA("analytics-internal",function O(A){try{const x=A.getProvider(vp).getImmediate();return{logEvent:($,X,fe)=>function va(O,A,x,$){O=(0,de.m9)(O),function Fu(O,A,x,$,X){return Fl.apply(this,arguments)}(ji,Jo[O.app.options.appId],A,x,$).catch(X=>Zr.error(X))}(x,$,X,fe)}}catch(x){throw _o.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ge.registerVersion)(Rm,"0.9.5"),(0,ge.registerVersion)(Rm,"0.9.5","esm2017")}();var Im=U(4408),Am=U(7565);const Bl=new class E_ extends Am.v{}(class vS extends Im.o{constructor(A,x){super(A,x),this.scheduler=A,this.work=x}schedule(A,x=0){return x>0?super.schedule(A,x):(this.delay=x,this.state=A,this.scheduler.flush(this),this)}execute(A,x){return x>0||this.closed?super.execute(A,x):this._execute(A,x)}requestAsyncId(A,x,$=0){return null!=$&&$>0||null==$&&this.delay>0?super.requestAsyncId(A,x,$):(A.flush(this),0)}});var Nm=U(4986),li=U(8505),Hu=U(5363),Vs=U(9468);const Ul=new c.GfV("7.5.0"),Wi="__angularfire_symbol__analyticsIsSupportedValue",ya="__angularfire_symbol__analyticsIsSupported",Bh="__angularfire_symbol__remoteConfigIsSupportedValue",Bu="__angularfire_symbol__remoteConfigIsSupported",_a="__angularfire_symbol__messagingIsSupportedValue",Uh="__angularfire_symbol__messagingIsSupported";function Ho(O,A,x){if(A){if(1===A.length)return A[0];const fe=A.filter(ze=>ze.app===x);if(1===fe.length)return fe[0]}return x.container.getProvider(O).getImmediate({optional:!0})}globalThis[ya]||(globalThis[ya]=ma().then(O=>globalThis[Wi]=O).catch(()=>globalThis[Wi]=!1)),globalThis[Uh]||(globalThis[Uh]=Ph().then(O=>globalThis[_a]=O).catch(()=>globalThis[_a]=!1)),globalThis[Bu]||(globalThis[Bu]=Bi().then(O=>globalThis[Bh]=O).catch(()=>globalThis[Bh]=!1));const Tt=(O,A)=>{const x=A?[A]:(0,se.C6)(),$=[];return x.forEach(X=>{X.container.getProvider(O).instances.forEach(ze=>{$.includes(ze)||$.push(ze)})}),$};function Un(){}class Or{constructor(A,x=Bl){this.zone=A,this.delegate=x}now(){return this.delegate.now()}schedule(A,x,$){const X=this.zone;return this.delegate.schedule(function(ze){X.runGuarded(()=>{A.apply(this,[ze])})},x,$)}}class xm{constructor(A){this.zone=A,this.task=null}call(A,x){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Un,{},Un,Un)),x.pipe((0,li.b)({next:$,complete:$,error:$})).subscribe(A).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ca=(()=>{class O{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Or(Zone.current)),this.insideAngular=x.run(()=>new Or(Zone.current,Nm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(x){return new(x||O)(c.LFG(c.R0b))},O.\u0275prov=c.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function br(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function jh(O){return O.pipe((0,Hu.Q)(br().outsideAngular))}function jl(O){return br(),function Uu(O){return function(x){return(x=x.lift(new xm(O.ngZone))).pipe((0,Vs.R)(O.outsideAngular),(0,Hu.Q)(O.insideAngular))}}(br())(O)}},2090:(Lt,Le,U)=>{U.d(Le,{$s:()=>Xt,BH:()=>Ue,DV:()=>ae,Dv:()=>lr,G6:()=>je,GJ:()=>ps,L:()=>_e,LL:()=>$t,Pz:()=>Ie,Sg:()=>it,UG:()=>Pe,UI:()=>pe,US:()=>he,Wj:()=>sa,Wl:()=>Pr,Yr:()=>Ae,ZB:()=>ie,ZR:()=>Gn,aH:()=>ke,b$:()=>Gt,cI:()=>qt,dS:()=>No,eu:()=>st,g5:()=>B,gK:()=>An,gQ:()=>ar,h$:()=>Se,hl:()=>et,hu:()=>se,jU:()=>tt,lb:()=>Hn,m9:()=>Vi,ne:()=>Yt,p$:()=>Q,pd:()=>un,r3:()=>Gi,ru:()=>dt,tV:()=>Z,uI:()=>q,ug:()=>Pn,vZ:()=>xe,w1:()=>ve,w9:()=>yi,xO:()=>Kn,xb:()=>oe,z$:()=>Ze,zI:()=>yt,zd:()=>Jt});const c={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},se=function(Y,K){if(!Y)throw B(K)},B=function(Y){return new Error("Firebase Database ("+c.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Y)},ge=function(Y){const K=[];let te=0;for(let Ne=0;Ne<Y.length;Ne++){let ue=Y.charCodeAt(Ne);ue<128?K[te++]=ue:ue<2048?(K[te++]=ue>>6|192,K[te++]=63&ue|128):55296==(64512&ue)&&Ne+1<Y.length&&56320==(64512&Y.charCodeAt(Ne+1))?(ue=65536+((1023&ue)<<10)+(1023&Y.charCodeAt(++Ne)),K[te++]=ue>>18|240,K[te++]=ue>>12&63|128,K[te++]=ue>>6&63|128,K[te++]=63&ue|128):(K[te++]=ue>>12|224,K[te++]=ue>>6&63|128,K[te++]=63&ue|128)}return K},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,K){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=K?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ne=[];for(let ue=0;ue<Y.length;ue+=3){const Et=Y[ue],mt=ue+1<Y.length,er=mt?Y[ue+1]:0,Dr=ue+2<Y.length,Mr=Dr?Y[ue+2]:0;let oo=(15&er)<<2|Mr>>6,ms=63&Mr;Dr||(ms=64,mt||(oo=64)),Ne.push(te[Et>>2],te[(3&Et)<<4|er>>4],te[oo],te[ms])}return Ne.join("")},encodeString(Y,K){return this.HAS_NATIVE_SUPPORT&&!K?btoa(Y):this.encodeByteArray(ge(Y),K)},decodeString(Y,K){return this.HAS_NATIVE_SUPPORT&&!K?atob(Y):function(Y){const K=[];let te=0,Ne=0;for(;te<Y.length;){const ue=Y[te++];if(ue<128)K[Ne++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const Et=Y[te++];K[Ne++]=String.fromCharCode((31&ue)<<6|63&Et)}else if(ue>239&&ue<365){const Dr=((7&ue)<<18|(63&Y[te++])<<12|(63&Y[te++])<<6|63&Y[te++])-65536;K[Ne++]=String.fromCharCode(55296+(Dr>>10)),K[Ne++]=String.fromCharCode(56320+(1023&Dr))}else{const Et=Y[te++],mt=Y[te++];K[Ne++]=String.fromCharCode((15&ue)<<12|(63&Et)<<6|63&mt)}}return K.join("")}(this.decodeStringToByteArray(Y,K))},decodeStringToByteArray(Y,K){this.init_();const te=K?this.charToByteMapWebSafe_:this.charToByteMap_,Ne=[];for(let ue=0;ue<Y.length;){const Et=te[Y.charAt(ue++)],er=ue<Y.length?te[Y.charAt(ue)]:0;++ue;const Mr=ue<Y.length?te[Y.charAt(ue)]:64;++ue;const cn=ue<Y.length?te[Y.charAt(ue)]:64;if(++ue,null==Et||null==er||null==Mr||null==cn)throw new Oe;Ne.push(Et<<2|er>>4),64!==Mr&&(Ne.push(er<<4&240|Mr>>2),64!==cn&&Ne.push(Mr<<6&192|cn))}return Ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}};class Oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(Y){const K=ge(Y);return he.encodeByteArray(K,!0)},_e=function(Y){return Se(Y).replace(/\./g,"")},Z=function(Y){try{return he.decodeString(Y,!0)}catch(K){console.error("base64Decode failed: ",K)}return null};function Q(Y){return ie(void 0,Y)}function ie(Y,K){if(!(K instanceof Object))return K;switch(K.constructor){case Date:return new Date(K.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return K}for(const te in K)!K.hasOwnProperty(te)||!at(te)||(Y[te]=ie(Y[te],K[te]));return Y}function at(Y){return"__proto__"!==Y}const Ge=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Y=process.env.__FIREBASE_DEFAULTS__;return Y?JSON.parse(Y):void 0})()||(()=>{if(typeof document>"u")return;let Y;try{Y=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const K=Y&&Z(Y[1]);return K&&JSON.parse(K)})()}catch(Y){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Y}`)}},ke=()=>{var Y;return null===(Y=Ge())||void 0===Y?void 0:Y.config},Ie=Y=>{var K;return null===(K=Ge())||void 0===K?void 0:K[`_${Y}`]};class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((K,te)=>{this.resolve=K,this.reject=te})}wrapCallback(K){return(te,Ne)=>{te?this.reject(te):this.resolve(Ne),"function"==typeof K&&(this.promise.catch(()=>{}),1===K.length?K(te):K(te,Ne))}}}function it(Y,K){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ne=K||"demo-project",ue=Y.iat||0,Et=Y.sub||Y.user_id;if(!Et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${Ne}`,aud:Ne,iat:ue,exp:ue+3600,auth_time:ue,sub:Et,user_id:Et,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(mt)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function q(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Pe(){var Y;const K=null===(Y=Ge())||void 0===Y?void 0:Y.forceEnvironment;if("node"===K)return!0;if("browser"===K)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function dt(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function Gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){const Y=Ze();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function Ae(){return!0===c.NODE_CLIENT||!0===c.NODE_ADMIN}function je(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function et(){try{return"object"==typeof indexedDB}catch{return!1}}function st(){return new Promise((Y,K)=>{try{let te=!0;const Ne="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(Ne);ue.onsuccess=()=>{ue.result.close(),te||self.indexedDB.deleteDatabase(Ne),Y(!0)},ue.onupgradeneeded=()=>{te=!1},ue.onerror=()=>{var Et;K((null===(Et=ue.error)||void 0===Et?void 0:Et.message)||"")}}catch(te){K(te)}})}function yt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Gn extends Error{constructor(K,te,Ne){super(te),this.code=K,this.customData=Ne,this.name="FirebaseError",Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}}class $t{constructor(K,te,Ne){this.service=K,this.serviceName=te,this.errors=Ne}create(K,...te){const Ne=te[0]||{},ue=`${this.service}/${K}`,Et=this.errors[K],mt=Et?function Nn(Y,K){return Y.replace(_t,(te,Ne)=>{const ue=K[Ne];return null!=ue?String(ue):`<${Ne}?>`})}(Et,Ne):"Error";return new Gn(ue,`${this.serviceName}: ${mt} (${ue}).`,Ne)}}const _t=/\{\$([^}]+)}/g;function qt(Y){return JSON.parse(Y)}function Pr(Y){return JSON.stringify(Y)}const Xn=function(Y){let K={},te={},Ne={},ue="";try{const Et=Y.split(".");K=qt(Z(Et[0])||""),te=qt(Z(Et[1])||""),ue=Et[2],Ne=te.d||{},delete te.d}catch{}return{header:K,claims:te,data:Ne,signature:ue}},yi=function(Y){const te=Xn(Y).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},ps=function(Y){const K=Xn(Y).claims;return"object"==typeof K&&!0===K.admin};function Gi(Y,K){return Object.prototype.hasOwnProperty.call(Y,K)}function ae(Y,K){if(Object.prototype.hasOwnProperty.call(Y,K))return Y[K]}function oe(Y){for(const K in Y)if(Object.prototype.hasOwnProperty.call(Y,K))return!1;return!0}function pe(Y,K,te){const Ne={};for(const ue in Y)Object.prototype.hasOwnProperty.call(Y,ue)&&(Ne[ue]=K.call(te,Y[ue],ue,Y));return Ne}function xe(Y,K){if(Y===K)return!0;const te=Object.keys(Y),Ne=Object.keys(K);for(const ue of te){if(!Ne.includes(ue))return!1;const Et=Y[ue],mt=K[ue];if(be(Et)&&be(mt)){if(!xe(Et,mt))return!1}else if(Et!==mt)return!1}for(const ue of Ne)if(!te.includes(ue))return!1;return!0}function be(Y){return null!==Y&&"object"==typeof Y}function Kn(Y){const K=[];for(const[te,Ne]of Object.entries(Y))Array.isArray(Ne)?Ne.forEach(ue=>{K.push(encodeURIComponent(te)+"="+encodeURIComponent(ue))}):K.push(encodeURIComponent(te)+"="+encodeURIComponent(Ne));return K.length?"&"+K.join("&"):""}function Jt(Y){const K={};return Y.replace(/^\?/,"").split("&").forEach(Ne=>{if(Ne){const[ue,Et]=Ne.split("=");K[decodeURIComponent(ue)]=decodeURIComponent(Et)}}),K}function un(Y){const K=Y.indexOf("?");if(!K)return"";const te=Y.indexOf("#",K);return Y.substring(K,te>0?te:void 0)}class ar{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let K=1;K<this.blockSize;++K)this.pad_[K]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(K,te){te||(te=0);const Ne=this.W_;if("string"==typeof K)for(let cn=0;cn<16;cn++)Ne[cn]=K.charCodeAt(te)<<24|K.charCodeAt(te+1)<<16|K.charCodeAt(te+2)<<8|K.charCodeAt(te+3),te+=4;else for(let cn=0;cn<16;cn++)Ne[cn]=K[te]<<24|K[te+1]<<16|K[te+2]<<8|K[te+3],te+=4;for(let cn=16;cn<80;cn++){const oo=Ne[cn-3]^Ne[cn-8]^Ne[cn-14]^Ne[cn-16];Ne[cn]=4294967295&(oo<<1|oo>>>31)}let Mr,ii,ue=this.chain_[0],Et=this.chain_[1],mt=this.chain_[2],er=this.chain_[3],Dr=this.chain_[4];for(let cn=0;cn<80;cn++){cn<40?cn<20?(Mr=er^Et&(mt^er),ii=1518500249):(Mr=Et^mt^er,ii=1859775393):cn<60?(Mr=Et&mt|er&(Et|mt),ii=2400959708):(Mr=Et^mt^er,ii=3395469782);const oo=(ue<<5|ue>>>27)+Mr+Dr+ii+Ne[cn]&4294967295;Dr=er,er=mt,mt=4294967295&(Et<<30|Et>>>2),Et=ue,ue=oo}this.chain_[0]=this.chain_[0]+ue&4294967295,this.chain_[1]=this.chain_[1]+Et&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+er&4294967295,this.chain_[4]=this.chain_[4]+Dr&4294967295}update(K,te){if(null==K)return;void 0===te&&(te=K.length);const Ne=te-this.blockSize;let ue=0;const Et=this.buf_;let mt=this.inbuf_;for(;ue<te;){if(0===mt)for(;ue<=Ne;)this.compress_(K,ue),ue+=this.blockSize;if("string"==typeof K){for(;ue<te;)if(Et[mt]=K.charCodeAt(ue),++mt,++ue,mt===this.blockSize){this.compress_(Et),mt=0;break}}else for(;ue<te;)if(Et[mt]=K[ue],++mt,++ue,mt===this.blockSize){this.compress_(Et),mt=0;break}}this.inbuf_=mt,this.total_+=te}digest(){const K=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ue=this.blockSize-1;ue>=56;ue--)this.buf_[ue]=255&te,te/=256;this.compress_(this.buf_);let Ne=0;for(let ue=0;ue<5;ue++)for(let Et=24;Et>=0;Et-=8)K[Ne]=this.chain_[ue]>>Et&255,++Ne;return K}}function Yt(Y,K){const te=new Vt(Y,K);return te.subscribe.bind(te)}class Vt{constructor(K,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{K(this)}).catch(Ne=>{this.error(Ne)})}next(K){this.forEachObserver(te=>{te.next(K)})}error(K){this.forEachObserver(te=>{te.error(K)}),this.close(K)}complete(){this.forEachObserver(K=>{K.complete()}),this.close()}subscribe(K,te,Ne){let ue;if(void 0===K&&void 0===te&&void 0===Ne)throw new Error("Missing Observer.");ue=function Po(Y,K){if("object"!=typeof Y||null===Y)return!1;for(const te of K)if(te in Y&&"function"==typeof Y[te])return!0;return!1}(K,["next","error","complete"])?K:{next:K,error:te,complete:Ne},void 0===ue.next&&(ue.next=Tn),void 0===ue.error&&(ue.error=Tn),void 0===ue.complete&&(ue.complete=Tn);const Et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch{}}),this.observers.push(ue),Et}unsubscribeOne(K){void 0===this.observers||void 0===this.observers[K]||(delete this.observers[K],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(K){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,K)}sendOne(K,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[K])try{te(this.observers[K])}catch(Ne){typeof console<"u"&&console.error&&console.error(Ne)}})}close(K){this.finalized||(this.finalized=!0,void 0!==K&&(this.finalError=K),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tn(){}const lr=function(Y,K,te,Ne){let ue;if(Ne<K?ue="at least "+K:Ne>te&&(ue=0===te?"none":"no more than "+te),ue)throw new Error(Y+" failed: Was called with "+Ne+(1===Ne?" argument.":" arguments.")+" Expects "+ue+".")};function An(Y,K){return`${Y} failed: ${K} argument `}function sa(Y,K,te,Ne){if((!Ne||te)&&"function"!=typeof te)throw new Error(An(Y,K)+"must be a valid function.")}function Hn(Y,K,te,Ne){if((!Ne||te)&&("object"!=typeof te||null===te))throw new Error(An(Y,K)+"must be a valid context object.")}const No=function(Y){const K=[];let te=0;for(let Ne=0;Ne<Y.length;Ne++){let ue=Y.charCodeAt(Ne);if(ue>=55296&&ue<=56319){const Et=ue-55296;Ne++,se(Ne<Y.length,"Surrogate pair missing trail surrogate."),ue=65536+(Et<<10)+(Y.charCodeAt(Ne)-56320)}ue<128?K[te++]=ue:ue<2048?(K[te++]=ue>>6|192,K[te++]=63&ue|128):ue<65536?(K[te++]=ue>>12|224,K[te++]=ue>>6&63|128,K[te++]=63&ue|128):(K[te++]=ue>>18|240,K[te++]=ue>>12&63|128,K[te++]=ue>>6&63|128,K[te++]=63&ue|128)}return K},Pn=function(Y){let K=0;for(let te=0;te<Y.length;te++){const Ne=Y.charCodeAt(te);Ne<128?K++:Ne<2048?K+=2:Ne>=55296&&Ne<=56319?(K+=4,te++):K+=3}return K},gs=1e3,ht=2,He=144e5,It=.5;function Xt(Y,K=gs,te=ht){const Ne=K*Math.pow(te,Y),ue=Math.round(It*Ne*(Math.random()-.5)*2);return Math.min(He,Ne+ue)}function Vi(Y){return Y&&Y._delegate?Y._delegate:Y}},6122:(Lt,Le,U)=>{var c=U(4650);let se=null;function B(){return se}class de{}const he=new c.OlP("DocumentToken");let Oe=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return function Se(){return(0,c.LFG)(Z)}()},providedIn:"platform"}),r})();const _e=new c.OlP("Location Initialized");let Z=(()=>{class r extends Oe{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(e){const n=B().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=B().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,i){Q()?this._history.pushState(e,n,i):this._location.hash=i}replaceState(e,n,i){Q()?this._history.replaceState(e,n,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(he))},r.\u0275prov=c.Yz7({token:r,factory:function(){return function ie(){return new Z((0,c.LFG)(he))}()},providedIn:"platform"}),r})();function Q(){return!!window.history.pushState}function at(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function Be(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function ct(r){return r&&"?"!==r[0]?"?"+r:r}let Ft=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return(0,c.f3M)(Ge)},providedIn:"root"}),r})();const De=new c.OlP("appBaseHref");let Ge=(()=>{class r extends Ft{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return at(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+ct(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${n}${i}`:n}pushState(e,n,i,o){const s=this.prepareExternalUrl(i+ct(o));this._platformLocation.pushState(e,n,s)}replaceState(e,n,i,o){const s=this.prepareExternalUrl(i+ct(o));this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Oe),c.LFG(De,8))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ve=(()=>{class r extends Ft{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=at(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,i,o){let s=this.prepareExternalUrl(i+ct(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,n,s)}replaceState(e,n,i,o){let s=this.prepareExternalUrl(i+ct(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Oe),c.LFG(De,8))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),nt=(()=>{class r{constructor(e){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._basePath=function it(r){if(new RegExp("^(https?:)?//").test(r)){const[,e]=r.split(/\/\/[^\/]+/);return e}return r}(Be(Ue(n))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+ct(n))}normalize(e){return r.stripTrailingSlash(function Ie(r,t){if(!r||!t.startsWith(r))return t;const e=t.substring(r.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,Ue(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",i=null){this._locationStrategy.pushState(i,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ct(n)),i)}replaceState(e,n="",i=null){this._locationStrategy.replaceState(i,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ct(n)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(i=>i(e,n))}subscribe(e,n,i){return this._subject.subscribe({next:e,error:n,complete:i})}}return r.normalizeQueryParams=ct,r.joinWithSlash=at,r.stripTrailingSlash=Be,r.\u0275fac=function(e){return new(e||r)(c.LFG(Ft))},r.\u0275prov=c.Yz7({token:r,factory:function(){return function ke(){return new nt((0,c.LFG)(Ft))}()},providedIn:"root"}),r})();function Ue(r){return r.replace(/\/index.html$/,"")}var q=(()=>((q=q||{})[q.Decimal=0]="Decimal",q[q.Percent=1]="Percent",q[q.Currency=2]="Currency",q[q.Scientific=3]="Scientific",q))(),tt=(()=>((tt=tt||{})[tt.Format=0]="Format",tt[tt.Standalone=1]="Standalone",tt))(),dt=(()=>((dt=dt||{})[dt.Narrow=0]="Narrow",dt[dt.Abbreviated=1]="Abbreviated",dt[dt.Wide=2]="Wide",dt[dt.Short=3]="Short",dt))(),Gt=(()=>((Gt=Gt||{})[Gt.Short=0]="Short",Gt[Gt.Medium=1]="Medium",Gt[Gt.Long=2]="Long",Gt[Gt.Full=3]="Full",Gt))(),St=(()=>((St=St||{})[St.Decimal=0]="Decimal",St[St.Group=1]="Group",St[St.List=2]="List",St[St.PercentSign=3]="PercentSign",St[St.PlusSign=4]="PlusSign",St[St.MinusSign=5]="MinusSign",St[St.Exponential=6]="Exponential",St[St.SuperscriptingExponent=7]="SuperscriptingExponent",St[St.PerMille=8]="PerMille",St[St.Infinity=9]="Infinity",St[St.NaN=10]="NaN",St[St.TimeSeparator=11]="TimeSeparator",St[St.CurrencyDecimal=12]="CurrencyDecimal",St[St.CurrencyGroup=13]="CurrencyGroup",St))();function Ae(r,t,e){const n=(0,c.cg1)(r),o=pe([n[c.wAp.DayPeriodsFormat],n[c.wAp.DayPeriodsStandalone]],t);return pe(o,e)}function je(r,t,e){const n=(0,c.cg1)(r),o=pe([n[c.wAp.DaysFormat],n[c.wAp.DaysStandalone]],t);return pe(o,e)}function et(r,t,e){const n=(0,c.cg1)(r),o=pe([n[c.wAp.MonthsFormat],n[c.wAp.MonthsStandalone]],t);return pe(o,e)}function Gn(r,t){return pe((0,c.cg1)(r)[c.wAp.DateFormat],t)}function $t(r,t){return pe((0,c.cg1)(r)[c.wAp.TimeFormat],t)}function Nn(r,t){return pe((0,c.cg1)(r)[c.wAp.DateTimeFormat],t)}function _t(r,t){const e=(0,c.cg1)(r),n=e[c.wAp.NumberSymbols][t];if(typeof n>"u"){if(t===St.CurrencyDecimal)return e[c.wAp.NumberSymbols][St.Decimal];if(t===St.CurrencyGroup)return e[c.wAp.NumberSymbols][St.Group]}return n}function ps(r){if(!r[c.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${r[c.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pe(r,t){for(let e=t;e>-1;e--)if(typeof r[e]<"u")return r[e];throw new Error("Locale data API: locale data undefined")}function xe(r){const[t,e]=r.split(":");return{hours:+t,minutes:+e}}const Jt=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,un={},ar=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Yt=(()=>((Yt=Yt||{})[Yt.Short=0]="Short",Yt[Yt.ShortGMT=1]="ShortGMT",Yt[Yt.Long=2]="Long",Yt[Yt.Extended=3]="Extended",Yt))(),Vt=(()=>((Vt=Vt||{})[Vt.FullYear=0]="FullYear",Vt[Vt.Month=1]="Month",Vt[Vt.Date=2]="Date",Vt[Vt.Hours=3]="Hours",Vt[Vt.Minutes=4]="Minutes",Vt[Vt.Seconds=5]="Seconds",Vt[Vt.FractionalSeconds=6]="FractionalSeconds",Vt[Vt.Day=7]="Day",Vt))(),zt=(()=>((zt=zt||{})[zt.DayPeriods=0]="DayPeriods",zt[zt.Days=1]="Days",zt[zt.Months=2]="Months",zt[zt.Eras=3]="Eras",zt))();function Po(r,t,e,n){let i=function ue(r){if(mt(r))return r;if("number"==typeof r&&!isNaN(r))return new Date(r);if("string"==typeof r){if(r=r.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(r)){const[i,o=1,s=1]=r.split("-").map(a=>+a);return Tn(i,o-1,s)}const e=parseFloat(r);if(!isNaN(r-e))return new Date(e);let n;if(n=r.match(Jt))return function Et(r){const t=new Date(0);let e=0,n=0;const i=r[8]?t.setUTCFullYear:t.setFullYear,o=r[8]?t.setUTCHours:t.setHours;r[9]&&(e=Number(r[9]+r[10]),n=Number(r[9]+r[11])),i.call(t,Number(r[1]),Number(r[2])-1,Number(r[3]));const s=Number(r[4]||0)-e,a=Number(r[5]||0)-n,d=Number(r[6]||0),f=Math.floor(1e3*parseFloat("0."+(r[7]||0)));return o.call(t,s,a,d,f),t}(n)}const t=new Date(r);if(!mt(t))throw new Error(`Unable to convert "${r}" into a date`);return t}(r);t=lr(e,t)||t;let a,s=[];for(;t;){if(a=ar.exec(t),!a){s.push(t);break}{s=s.concat(a.slice(1));const g=s.pop();if(!g)break;t=g}}let d=i.getTimezoneOffset();n&&(d=K(n,d),i=function Ne(r,t,e){const n=e?-1:1,i=r.getTimezoneOffset();return function te(r,t){return(r=new Date(r.getTime())).setMinutes(r.getMinutes()+t),r}(r,n*(K(t,i)-i))}(i,n,!0));let f="";return s.forEach(g=>{const C=function Y(r){if(Vi[r])return Vi[r];let t;switch(r){case"G":case"GG":case"GGG":t=Pn(zt.Eras,dt.Abbreviated);break;case"GGGG":t=Pn(zt.Eras,dt.Wide);break;case"GGGGG":t=Pn(zt.Eras,dt.Narrow);break;case"y":t=Hn(Vt.FullYear,1,0,!1,!0);break;case"yy":t=Hn(Vt.FullYear,2,0,!0,!0);break;case"yyy":t=Hn(Vt.FullYear,3,0,!1,!0);break;case"yyyy":t=Hn(Vt.FullYear,4,0,!1,!0);break;case"Y":t=pn(1);break;case"YY":t=pn(2,!0);break;case"YYY":t=pn(3);break;case"YYYY":t=pn(4);break;case"M":case"L":t=Hn(Vt.Month,1,1);break;case"MM":case"LL":t=Hn(Vt.Month,2,1);break;case"MMM":t=Pn(zt.Months,dt.Abbreviated);break;case"MMMM":t=Pn(zt.Months,dt.Wide);break;case"MMMMM":t=Pn(zt.Months,dt.Narrow);break;case"LLL":t=Pn(zt.Months,dt.Abbreviated,tt.Standalone);break;case"LLLL":t=Pn(zt.Months,dt.Wide,tt.Standalone);break;case"LLLLL":t=Pn(zt.Months,dt.Narrow,tt.Standalone);break;case"w":t=sn(1);break;case"ww":t=sn(2);break;case"W":t=sn(1,!0);break;case"d":t=Hn(Vt.Date,1);break;case"dd":t=Hn(Vt.Date,2);break;case"c":case"cc":t=Hn(Vt.Day,1);break;case"ccc":t=Pn(zt.Days,dt.Abbreviated,tt.Standalone);break;case"cccc":t=Pn(zt.Days,dt.Wide,tt.Standalone);break;case"ccccc":t=Pn(zt.Days,dt.Narrow,tt.Standalone);break;case"cccccc":t=Pn(zt.Days,dt.Short,tt.Standalone);break;case"E":case"EE":case"EEE":t=Pn(zt.Days,dt.Abbreviated);break;case"EEEE":t=Pn(zt.Days,dt.Wide);break;case"EEEEE":t=Pn(zt.Days,dt.Narrow);break;case"EEEEEE":t=Pn(zt.Days,dt.Short);break;case"a":case"aa":case"aaa":t=Pn(zt.DayPeriods,dt.Abbreviated);break;case"aaaa":t=Pn(zt.DayPeriods,dt.Wide);break;case"aaaaa":t=Pn(zt.DayPeriods,dt.Narrow);break;case"b":case"bb":case"bbb":t=Pn(zt.DayPeriods,dt.Abbreviated,tt.Standalone,!0);break;case"bbbb":t=Pn(zt.DayPeriods,dt.Wide,tt.Standalone,!0);break;case"bbbbb":t=Pn(zt.DayPeriods,dt.Narrow,tt.Standalone,!0);break;case"B":case"BB":case"BBB":t=Pn(zt.DayPeriods,dt.Abbreviated,tt.Format,!0);break;case"BBBB":t=Pn(zt.DayPeriods,dt.Wide,tt.Format,!0);break;case"BBBBB":t=Pn(zt.DayPeriods,dt.Narrow,tt.Format,!0);break;case"h":t=Hn(Vt.Hours,1,-12);break;case"hh":t=Hn(Vt.Hours,2,-12);break;case"H":t=Hn(Vt.Hours,1);break;case"HH":t=Hn(Vt.Hours,2);break;case"m":t=Hn(Vt.Minutes,1);break;case"mm":t=Hn(Vt.Minutes,2);break;case"s":t=Hn(Vt.Seconds,1);break;case"ss":t=Hn(Vt.Seconds,2);break;case"S":t=Hn(Vt.FractionalSeconds,1);break;case"SS":t=Hn(Vt.FractionalSeconds,2);break;case"SSS":t=Hn(Vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=gs(Yt.Short);break;case"ZZZZZ":t=gs(Yt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=gs(Yt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=gs(Yt.Long);break;default:return null}return Vi[r]=t,t}(g);f+=C?C(i,e,d):"''"===g?"'":g.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function Tn(r,t,e){const n=new Date(0);return n.setFullYear(r,t,e),n.setHours(0,0,0),n}function lr(r,t){const e=function Ee(r){return(0,c.cg1)(r)[c.wAp.LocaleId]}(r);if(un[e]=un[e]||{},un[e][t])return un[e][t];let n="";switch(t){case"shortDate":n=Gn(r,Gt.Short);break;case"mediumDate":n=Gn(r,Gt.Medium);break;case"longDate":n=Gn(r,Gt.Long);break;case"fullDate":n=Gn(r,Gt.Full);break;case"shortTime":n=$t(r,Gt.Short);break;case"mediumTime":n=$t(r,Gt.Medium);break;case"longTime":n=$t(r,Gt.Long);break;case"fullTime":n=$t(r,Gt.Full);break;case"short":const i=lr(r,"shortTime"),o=lr(r,"shortDate");n=An(Nn(r,Gt.Short),[i,o]);break;case"medium":const s=lr(r,"mediumTime"),a=lr(r,"mediumDate");n=An(Nn(r,Gt.Medium),[s,a]);break;case"long":const d=lr(r,"longTime"),f=lr(r,"longDate");n=An(Nn(r,Gt.Long),[d,f]);break;case"full":const g=lr(r,"fullTime"),C=lr(r,"fullDate");n=An(Nn(r,Gt.Full),[g,C])}return n&&(un[e][t]=n),n}function An(r,t){return t&&(r=r.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),r}function Nr(r,t,e="-",n,i){let o="";(r<0||i&&r<=0)&&(i?r=1-r:(r=-r,o=e));let s=String(r);for(;s.length<t;)s="0"+s;return n&&(s=s.slice(s.length-t)),o+s}function Hn(r,t,e=0,n=!1,i=!1){return function(o,s){let a=function No(r,t){switch(r){case Vt.FullYear:return t.getFullYear();case Vt.Month:return t.getMonth();case Vt.Date:return t.getDate();case Vt.Hours:return t.getHours();case Vt.Minutes:return t.getMinutes();case Vt.Seconds:return t.getSeconds();case Vt.FractionalSeconds:return t.getMilliseconds();case Vt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${r}".`)}}(r,o);if((e>0||a>-e)&&(a+=e),r===Vt.Hours)0===a&&-12===e&&(a=12);else if(r===Vt.FractionalSeconds)return function sa(r,t){return Nr(r,3).substring(0,t)}(a,t);const d=_t(s,St.MinusSign);return Nr(a,t,d,n,i)}}function Pn(r,t,e=tt.Format,n=!1){return function(i,o){return function io(r,t,e,n,i,o){switch(e){case zt.Months:return et(t,i,n)[r.getMonth()];case zt.Days:return je(t,i,n)[r.getDay()];case zt.DayPeriods:const s=r.getHours(),a=r.getMinutes();if(o){const f=function Gi(r){const t=(0,c.cg1)(r);return ps(t),(t[c.wAp.ExtraData][2]||[]).map(n=>"string"==typeof n?xe(n):[xe(n[0]),xe(n[1])])}(t),g=function ae(r,t,e){const n=(0,c.cg1)(r);ps(n);const o=pe([n[c.wAp.ExtraData][0],n[c.wAp.ExtraData][1]],t)||[];return pe(o,e)||[]}(t,i,n),C=f.findIndex(E=>{if(Array.isArray(E)){const[T,I]=E,M=s>=T.hours&&a>=T.minutes,k=s<I.hours||s===I.hours&&a<I.minutes;if(T.hours<I.hours){if(M&&k)return!0}else if(M||k)return!0}else if(E.hours===s&&E.minutes===a)return!0;return!1});if(-1!==C)return g[C]}return Ae(t,i,n)[s<12?0:1];case zt.Eras:return function st(r,t){return pe((0,c.cg1)(r)[c.wAp.Eras],t)}(t,n)[r.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,o,r,t,e,n)}}function gs(r){return function(t,e,n){const i=-1*n,o=_t(e,St.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(r){case Yt.Short:return(i>=0?"+":"")+Nr(s,2,o)+Nr(Math.abs(i%60),2,o);case Yt.ShortGMT:return"GMT"+(i>=0?"+":"")+Nr(s,1,o);case Yt.Long:return"GMT"+(i>=0?"+":"")+Nr(s,2,o)+":"+Nr(Math.abs(i%60),2,o);case Yt.Extended:return 0===n?"Z":(i>=0?"+":"")+Nr(s,2,o)+":"+Nr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${r}"`)}}}const ht=0,He=4;function Xt(r){return Tn(r.getFullYear(),r.getMonth(),r.getDate()+(He-r.getDay()))}function sn(r,t=!1){return function(e,n){let i;if(t){const o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{const o=Xt(e),s=function It(r){const t=Tn(r,ht,1).getDay();return Tn(r,0,1+(t<=He?He:He+7)-t)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Nr(i,r,_t(n,St.MinusSign))}}function pn(r,t=!1){return function(e,n){return Nr(Xt(e).getFullYear(),r,_t(n,St.MinusSign),t)}}const Vi={};function K(r,t){r=r.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+r)/6e4;return isNaN(e)?t:e}function mt(r){return r instanceof Date&&!isNaN(r.valueOf())}const er=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Dr=22,Mr=".",ii="0",cn=";",oo=",",ms="#";function qr(r){const t=parseInt(r);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+r);return t}class vs{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $n=(()=>{class r{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,i){this._viewContainer=e,this._template=n,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((i,o,s)=>{if(null==i.previousIndex)n.createEmbeddedView(this._template,new vs(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)n.remove(null===o?void 0:o);else if(null!==o){const a=n.get(o);n.move(a,s),La(a,i)}});for(let i=0,o=n.length;i<o;i++){const a=n.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{La(n.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,n){return!0}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),r})();function La(r,t){r.context.$implicit=t.item}let Yr=(()=>{class r{constructor(e,n){this._viewContainer=e,this._context=new Su,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){vn("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){vn("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.s_b),c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),r})();class Su{constructor(){this.$implicit=null,this.ngIf=null}}function vn(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${(0,c.AaK)(t)}'.`)}let Tr=(()=>{class r{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=n.createEmbeddedView(i,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.s_b))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[c.TTD]}),r})();let sp=(()=>{class r{constructor(e){this._locale=e}transform(e,n,i){if(!function bl(r){return!(null==r||""===r||r!=r)}(e))return null;i=i||this._locale;try{return function Oc(r,t,e){return function gh(r,t,e,n,i,o,s=!1){let a="",d=!1;if(isFinite(r)){let f=function vh(r){let n,i,o,s,a,t=Math.abs(r)+"",e=0;for((i=t.indexOf(Mr))>-1&&(t=t.replace(Mr,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===ii;o++);if(o===(a=t.length))n=[0],i=1;else{for(a--;t.charAt(a)===ii;)a--;for(i-=o,n=[],s=0;o<=a;o++,s++)n[s]=Number(t.charAt(o))}return i>Dr&&(n=n.splice(0,Dr-1),e=i-1,i=1),{digits:n,exponent:e,integerLen:i}}(r);s&&(f=function mh(r){if(0===r.digits[0])return r;const t=r.digits.length-r.integerLen;return r.exponent?r.exponent+=2:(0===t?r.digits.push(0,0):1===t&&r.digits.push(0),r.integerLen+=2),r}(f));let g=t.minInt,C=t.minFrac,E=t.maxFrac;if(o){const z=o.match(er);if(null===z)throw new Error(`${o} is not a valid digit info`);const J=z[1],re=z[3],ce=z[5];null!=J&&(g=qr(J)),null!=re&&(C=qr(re)),null!=ce?E=qr(ce):null!=re&&C>E&&(E=C)}!function Mn(r,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let n=r.digits,i=n.length-r.integerLen;const o=Math.min(Math.max(t,i),e);let s=o+r.integerLen,a=n[s];if(s>0){n.splice(Math.max(r.integerLen,s));for(let C=s;C<n.length;C++)n[C]=0}else{i=Math.max(0,i),r.integerLen=1,n.length=Math.max(1,s=o+1),n[0]=0;for(let C=1;C<s;C++)n[C]=0}if(a>=5)if(s-1<0){for(let C=0;C>s;C--)n.unshift(0),r.integerLen++;n.unshift(1),r.integerLen++}else n[s-1]++;for(;i<Math.max(0,o);i++)n.push(0);let d=0!==o;const f=t+r.integerLen,g=n.reduceRight(function(C,E,T,I){return I[T]=(E+=C)<10?E:E-10,d&&(0===I[T]&&T>=f?I.pop():d=!1),E>=10?1:0},0);g&&(n.unshift(g),r.integerLen++)}(f,C,E);let T=f.digits,I=f.integerLen;const M=f.exponent;let k=[];for(d=T.every(z=>!z);I<g;I++)T.unshift(0);for(;I<0;I++)T.unshift(0);I>0?k=T.splice(I,T.length):(k=T,T=[0]);const W=[];for(T.length>=t.lgSize&&W.unshift(T.splice(-t.lgSize,T.length).join(""));T.length>t.gSize;)W.unshift(T.splice(-t.gSize,T.length).join(""));T.length&&W.unshift(T.join("")),a=W.join(_t(e,n)),k.length&&(a+=_t(e,i)+k.join("")),M&&(a+=_t(e,St.Exponential)+"+"+M)}else a=_t(e,St.Infinity);return a=r<0&&!d?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(r,function xr(r,t="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=r.split(cn),i=n[0],o=n[1],s=-1!==i.indexOf(Mr)?i.split(Mr):[i.substring(0,i.lastIndexOf(ii)+1),i.substring(i.lastIndexOf(ii)+1)],a=s[0],d=s[1]||"";e.posPre=a.substring(0,a.indexOf(ms));for(let g=0;g<d.length;g++){const C=d.charAt(g);C===ii?e.minFrac=e.maxFrac=g+1:C===ms?e.maxFrac=g+1:e.posSuf+=C}const f=a.split(oo);if(e.gSize=f[1]?f[1].length:0,e.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){const g=i.length-e.posPre.length-e.posSuf.length,C=o.indexOf(ms);e.negPre=o.substring(0,C).replace(/'/g,""),e.negSuf=o.slice(C+g).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}(function qt(r,t){return(0,c.cg1)(r)[c.wAp.NumberFormats][t]}(t,q.Percent),_t(t,St.MinusSign)),t,St.Group,St.Decimal,e,!0).replace(new RegExp("%","g"),_t(t,St.PercentSign))}(function Ha(r){if("string"==typeof r&&!isNaN(Number(r)-parseFloat(r)))return Number(r);if("number"!=typeof r)throw new Error(`${r} is not a number`);return r}(e),i,n)}catch(o){throw function On(r,t){return new c.vHH(2100,!1)}()}}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.soG,16))},r.\u0275pipe=c.Yjl({name:"percent",type:r,pure:!0,standalone:!0}),r})();let wh=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})();const Sh="browser",Fo="server";function Mc(r){return r===Fo}let Ba=(()=>{class r{}return r.\u0275prov=(0,c.Yz7)({token:r,providedIn:"root",factory:()=>new Du((0,c.LFG)(he),window)}),r})();class Du{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Tl(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Dl(this.window.history)||Dl(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Dl(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class Pl extends de{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ja extends Pl{static makeCurrent(){!function ge(r){se||(se=r)}(new ja)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Wc(){return da=da||document.querySelector("base"),da?da.getAttribute("href"):null}();return null==e?null:function xu(r){ko=ko||document.createElement("a"),ko.setAttribute("href",r);const t=ko.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){da=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Ic(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const n=e.indexOf("="),[i,o]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let ko,da=null;const yp=new c.OlP("TRANSITION_ID"),_p=[{provide:c.ip1,useFactory:function C_(r,t,e){return()=>{e.get(c.CZH).donePromise.then(()=>{const n=B(),i=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let o=0;o<i.length;o++)n.remove(i[o])})}},deps:[yp,he,c.zs3],multi:!0}];let w_=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();const Go=new c.OlP("EventManagerPlugins");let kh=(()=>{class r{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,i){return this._findPluginFor(n).addEventListener(e,n,i)}addGlobalEventListener(e,n,i){return this._findPluginFor(n).addGlobalEventListener(e,n,i)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Go),c.LFG(c.R0b))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();class Sm{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=B().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let ws=(()=>{class r{constructor(){this.usageCount=new Map}addStyles(e){for(const n of e)1===this.changeUsageCount(n,1)&&this.onStyleAdded(n)}removeStyles(e){for(const n of e)0===this.changeUsageCount(n,-1)&&this.onStyleRemoved(n)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,n){const i=this.usageCount;let o=i.get(e)??0;return o+=n,o>0?i.set(e,o):i.delete(e),o}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),Nl=(()=>{class r extends ws{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){const n=this.styleRef;n.get(e)?.forEach(o=>o.remove()),n.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,n){const i=this.doc.createElement("style");i.textContent=n,e.appendChild(i);const o=this.styleRef.get(n);o?o.push(i):this.styleRef.set(n,[i])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(he))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();const yr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ha=/%COMP%/g,Fu=new c.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ll(r,t){return t.flat(100).map(e=>e.replace(ha,r))}function $a(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let fa=(()=>{class r{constructor(e,n,i,o){this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new Vo(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;const i=this.getOrCreateRenderer(e,n);return i instanceof Gl?i.applyToHost(e):i instanceof ga&&i.applyStyles(),i}getOrCreateRenderer(e,n){const i=this.rendererByCompId;let o=i.get(n.id);if(!o){const s=this.eventManager,a=this.sharedStylesHost,d=this.removeStylesOnCompDestory;switch(n.encapsulation){case c.ifc.Emulated:o=new Gl(s,a,n,this.appId,d);break;case c.ifc.ShadowDom:return new $c(s,a,e,n);default:o=new ga(s,a,n,d)}o.onDestroy=()=>i.delete(n.id),i.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(kh),c.LFG(Nl),c.LFG(c.AFp),c.LFG(Fu))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();class Vo{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(yr[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(pa(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(pa(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const o=yr[i];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=yr[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(c.JOm.DashCase|c.JOm.Important)?t.style.setProperty(e,n,i&c.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&c.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,$a(n)):this.eventManager.addEventListener(t,e,$a(n))}}function pa(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class $c extends Vo{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ll(i.id,i.styles);for(const s of o){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ga extends Vo{constructor(t,e,n,i,o=n.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Ll(o,n.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Gl extends ga{constructor(t,e,n,i,o){const s=i+"-"+n.id;super(t,e,n,o,s),this.contentAttr=function Fl(r){return"_ngcontent-%COMP%".replace(ha,r)}(s),this.hostAttr=function Vh(r){return"_nghost-%COMP%".replace(ha,r)}(s)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}let bm=(()=>{class r extends Sm{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,i){return e.addEventListener(n,i,!1),()=>this.removeEventListener(e,n,i)}removeEventListener(e,n,i){return e.removeEventListener(n,i)}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(he))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();const ku=["alt","control","meta","shift"],Dm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gs={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let Cp=(()=>{class r extends Sm{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,n,i){const o=r.parseEventName(n),s=r.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const o=r._normalizeKey(n.pop());let s="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),s="code."),ku.forEach(f=>{const g=n.indexOf(f);g>-1&&(n.splice(g,1),s+=f+".")}),s+=o,0!=n.length||0===o.length)return null;const d={};return d.domEventName=i,d.fullKey=s,d}static matchEventFullKeyCode(e,n){let i=Dm[e.key]||e.key,o="";return n.indexOf("code.")>-1&&(i=e.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ku.forEach(s=>{s!==i&&(0,Gs[s])(e)&&(o+=s+".")}),o+=i,o===n)}static eventCallback(e,n,i){return o=>{r.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>n(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(he))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();const Vl=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Sh},{provide:c.g9A,useValue:function Kc(){ja.makeCurrent()},multi:!0},{provide:he,useFactory:function Hh(){return(0,c.RDi)(document),document},deps:[]}]),Ep=new c.OlP(""),bp=[{provide:c.rWj,useClass:class Lh{addToWindow(t){c.dqk.getAngularTestability=(n,i=!0)=>{const o=t.findTestabilityInTree(n,i);if(null==o)throw new Error("Could not find testability for element.");return o},c.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(n=>{const i=c.dqk.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(d){s=s||d,o--,0==o&&n(s)};i.forEach(function(d){d.whenStable(a)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?B().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],qc=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function ji(){return new c.qLn},deps:[]},{provide:Go,useClass:bm,multi:!0,deps:[he,c.R0b,c.Lbi]},{provide:Go,useClass:Cp,multi:!0,deps:[he]},{provide:fa,useClass:fa,deps:[kh,Nl,c.AFp,Fu]},{provide:c.FYo,useExisting:fa},{provide:ws,useExisting:Nl},{provide:Nl,useClass:Nl,deps:[he]},{provide:kh,useClass:kh,deps:[Go,c.R0b]},{provide:class bh{},useClass:w_,deps:[]},[]];let ma=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:c.AFp,useValue:e.appId},{provide:yp,useExisting:c.AFp},_p]}}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Ep,12))},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[...qc,...bp],imports:[wh,c.hGG]}),r})(),Hl=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(he))},r.\u0275prov=c.Yz7({token:r,factory:function(e){let n=null;return n=e?new e:function Dp(){return new Hl((0,c.LFG)(he))}(),n},providedIn:"root"}),r})();typeof window<"u"&&window;var yn=U(8996),Ho=U(3269);function Tt(...r){const t=(0,Ho.yG)(r);return(0,yn.D)(r,t)}var Un=U(7579);class Or extends Un.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const Ca=(0,U(3888).d)(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});var br=U(9751);const{isArray:Fm}=Array,{getPrototypeOf:Hs,prototype:jh,keys:Yc}=Object;function jl(r){if(1===r.length){const t=r[0];if(Fm(t))return{args:t,keys:null};if(function Uu(r){return r&&"object"==typeof r&&Hs(r)===jh}(t)){const e=Yc(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:r,keys:null}}var Xo=U(4671),Pt=U(4004);const{isArray:O}=Array;function x(r){return(0,Pt.U)(t=>function A(r,t){return O(t)?r(...t):r(t)}(r,t))}function $(r,t){return r.reduce((e,n,i)=>(e[n]=t[i],e),{})}var X=U(5403),fe=U(9672);function ze(...r){const t=(0,Ho.yG)(r),e=(0,Ho.jO)(r),{args:n,keys:i}=jl(r);if(0===n.length)return(0,yn.D)([],t);const o=new br.y(function Mt(r,t,e=Xo.y){return n=>{xt(t,()=>{const{length:i}=r,o=new Array(i);let s=i,a=i;for(let d=0;d<i;d++)xt(t,()=>{const f=(0,yn.D)(r[d],t);let g=!1;f.subscribe((0,X.x)(n,C=>{o[d]=C,g||(g=!0,a--),a||n.next(e(o.slice()))},()=>{--s||n.complete()}))},n)},n)}}(n,t,i?s=>$(i,s):Xo.y));return e?o.pipe(x(e)):o}function xt(r,t,e){r?(0,fe.f)(e,r,t):t()}var Ht=U(8189);function Zt(...r){return function wn(){return(0,Ht.J)(1)}()((0,yn.D)(r,(0,Ho.yG)(r)))}var dr=U(8421);function Qr(r){return new br.y(t=>{(0,dr.Xf)(r()).subscribe(t)})}var ju=U(9635),Bo=U(576);function Ss(r,t){const e=(0,Bo.m)(r)?r:()=>r,n=i=>i.error(e());return new br.y(t?i=>t.schedule(n,0,i):n)}var Lr=U(515),Co=U(727),Ir=U(4482);function Tp(){return(0,Ir.e)((r,t)=>{let e=null;r._refCount++;const n=(0,X.x)(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(e=null);const i=r._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});r.subscribe(n),n.closed||(e=r.connect())})}class Wh extends br.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Ir.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Co.w0;const e=this.getSubject();t.add(this.source.subscribe((0,X.x)(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Co.w0.EMPTY)}return t}refCount(){return Tp()(this)}}function Ur(r,t){return(0,Ir.e)((e,n)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&n.complete();e.subscribe((0,X.x)(n,d=>{i?.unsubscribe();let f=0;const g=o++;(0,dr.Xf)(r(d,g)).subscribe(i=(0,X.x)(n,C=>n.next(t?t(d,C,g,f++):C),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Jr(r){return r<=0?()=>Lr.E:(0,Ir.e)((t,e)=>{let n=0;t.subscribe((0,X.x)(e,i=>{++n<=r&&(e.next(i),r<=n&&e.complete())}))})}function Zc(...r){const t=(0,Ho.yG)(r);return(0,Ir.e)((e,n)=>{(t?Zt(r,e,t):Zt(r,e)).subscribe(n)})}function kr(r,t){return(0,Ir.e)((e,n)=>{let i=0;e.subscribe((0,X.x)(n,o=>r.call(t,o,i++)&&n.next(o)))})}var $i=U(5577);function Qc(r){return(0,Ir.e)((t,e)=>{let n=!1;t.subscribe((0,X.x)(e,i=>{n=!0,e.next(i)},()=>{n||e.next(r),e.complete()}))})}function T_(r=JD){return(0,Ir.e)((t,e)=>{let n=!1;t.subscribe((0,X.x)(e,i=>{n=!0,e.next(i)},()=>n?e.complete():e.error(r())))})}function JD(){return new Ca}function Uo(r,t){const e=arguments.length>=2;return n=>n.pipe(r?kr((i,o)=>r(i,o,n)):Xo.y,Jr(1),e?Qc(t):T_(()=>new Ca))}function Jc(r,t){return(0,Bo.m)(t)?(0,$i.z)(r,t,1):(0,$i.z)(r,1)}var zi=U(8505);function Wu(r){return(0,Ir.e)((t,e)=>{let o,n=null,i=!1;n=t.subscribe((0,X.x)(e,void 0,void 0,s=>{o=(0,dr.Xf)(r(s,Wu(r)(t))),n?(n.unsubscribe(),n=null,o.subscribe(e)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(e))})}function Xc(r,t){return(0,Ir.e)(function XD(r,t,e,n,i){return(o,s)=>{let a=e,d=t,f=0;o.subscribe((0,X.x)(s,g=>{const C=f++;d=a?r(d,g,C):(a=!0,g),n&&s.next(d)},i&&(()=>{a&&s.next(d),s.complete()})))}}(r,t,arguments.length>=2,!0))}function Lm(r){return r<=0?()=>Lr.E:(0,Ir.e)((t,e)=>{let n=[];t.subscribe((0,X.x)(e,i=>{n.push(i),r<n.length&&n.shift()},()=>{for(const i of n)e.next(i);e.complete()},void 0,()=>{n=null}))})}function km(r,t){const e=arguments.length>=2;return n=>n.pipe(r?kr((i,o)=>r(i,o,n)):Xo.y,Lm(1),e?Qc(t):T_(()=>new Ca))}function Rp(r){return(0,Ir.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}const fn="primary",jo=Symbol("RouteTitle");class yS{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ed(r){return new yS(r)}function R_(r,t,e){const n=e.path.split("/");if(n.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<r.length))return null;const i={};for(let o=0;o<n.length;o++){const s=n[o],a=r[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function Es(r,t){const e=r?Object.keys(r):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!I_(r[i],t[i]))return!1;return!0}function I_(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),n=[...t].sort();return e.every((i,o)=>n[o]===i)}return r===t}function A_(r){return Array.prototype.concat.apply([],r)}function Op(r){return r.length>0?r[r.length-1]:null}function Si(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function Wl(r){return(0,c.CqO)(r)?r:(0,c.QGY)(r)?(0,yn.D)(Promise.resolve(r)):Tt(r)}const Oi=!1,Vm={exact:function $l(r,t,e){if(!$u(r.segments,t.segments)||!nd(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!r.children[n]||!$l(r.children[n],t.children[n],e))return!1;return!0},subset:td},zh={exact:function wo(r,t){return Es(r,t)},subset:function Hm(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>I_(r[e],t[e]))},ignored:()=>!0};function Ip(r,t,e){return Vm[e.paths](r.root,t.root,e.matrixParams)&&zh[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function td(r,t,e){return Bm(r,t,t.segments,e)}function Bm(r,t,e,n){if(r.segments.length>e.length){const i=r.segments.slice(0,e.length);return!(!$u(i,e)||t.hasChildren()||!nd(i,e,n))}if(r.segments.length===e.length){if(!$u(r.segments,e)||!nd(r.segments,e,n))return!1;for(const i in t.children)if(!r.children[i]||!td(r.children[i],t.children[i],n))return!1;return!0}{const i=e.slice(0,r.segments.length),o=e.slice(r.segments.length);return!!($u(r.segments,i)&&nd(r.segments,i,n)&&r.children[fn])&&Bm(r.children[fn],t,o,n)}}function nd(r,t,e){return t.every((n,i)=>zh[e](r[i].parameters,n.parameters))}class zl{constructor(t=new Sn([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ed(this.queryParams)),this._queryParamMap}toString(){return Ku.serialize(this)}}class Sn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Si(e,(n,i)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kl(this)}}class Kh{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ed(this.parameters)),this._parameterMap}toString(){return Um(this)}}function $u(r,t){return r.length===t.length&&r.every((e,n)=>e.path===t[n].path)}let zu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return new Ap},providedIn:"root"}),r})();class Ap{parse(t){const e=new xp(t);return new zl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${qh(t.root,!0)}`,n=function Zh(r){const t=Object.keys(r).map(e=>{const n=r[e];return Array.isArray(n)?n.map(i=>`${rd(e)}=${rd(i)}`).join("&"):`${rd(e)}=${rd(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function Yh(r){return encodeURI(r)}(t.fragment)}`:""}`}}const Ku=new Ap;function Kl(r){return r.segments.map(t=>Um(t)).join("/")}function qh(r,t){if(!r.hasChildren())return Kl(r);if(t){const e=r.children[fn]?qh(r.children[fn],!1):"",n=[];return Si(r.children,(i,o)=>{o!==fn&&n.push(`${o}:${qh(i,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function N_(r,t){let e=[];return Si(r.children,(n,i)=>{i===fn&&(e=e.concat(t(n,i)))}),Si(r.children,(n,i)=>{i!==fn&&(e=e.concat(t(n,i)))}),e}(r,(n,i)=>i===fn?[qh(r.children[fn],!1)]:[`${i}:${qh(n,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[fn]?`${Kl(r)}/${e[0]}`:`${Kl(r)}/(${e.join("//")})`}}function Pp(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rd(r){return Pp(r).replace(/%3B/gi,";")}function Np(r){return Pp(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ya(r){return decodeURIComponent(r)}function id(r){return Ya(r.replace(/\+/g,"%20"))}function Um(r){return`${Np(r.path)}${function CS(r){return Object.keys(r).map(t=>`;${Np(t)}=${Np(r[t])}`).join("")}(r.parameters)}`}const wS=/^[^\/()?;=#]+/;function Mp(r){const t=r.match(wS);return t?t[0]:""}const SS=/^[^=?&#]+/,bS=/^[^&#]+/;class xp{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sn([],{}):new Sn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[fn]=new Sn(t,e)),n}parseSegment(){const t=Mp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new c.vHH(4009,Oi);return this.capture(t),new Kh(Ya(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Mp(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const i=Mp(this.remaining);i&&(n=i,this.capture(n))}t[Ya(e)]=Ya(n)}parseQueryParam(t){const e=function ES(r){const t=r.match(SS);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const s=function M_(r){const t=r.match(bS);return t?t[0]:""}(this.remaining);s&&(n=s,this.capture(n))}const i=id(e),o=id(n);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Mp(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,Oi);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=fn);const s=this.parseChildren();e[o]=1===Object.keys(s).length?s[fn]:new Sn([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new c.vHH(4011,Oi)}}function Qh(r){return r.segments.length>0?new Sn([],{[fn]:r}):r}function Jh(r){const t={};for(const n of Object.keys(r.children)){const o=Jh(r.children[n]);(o.segments.length>0||o.hasChildren())&&(t[n]=o)}return function Xh(r){if(1===r.numberOfChildren&&r.children[fn]){const t=r.children[fn];return new Sn(r.segments.concat(t.segments),t.children)}return r}(new Sn(r.segments,t))}function Za(r){return r instanceof zl}const jm=!1;function x_(r,t,e,n,i){if(0===e.length)return ef(t.root,t.root,t.root,n,i);const o=function Wm(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new F_(!0,0,r);let t=0,e=!1;const n=r.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Si(o.outlets,(d,f)=>{a[f]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,d)=>{0==d&&"."===a||(0==d&&""===a?e=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new F_(e,t,n)}(e);return o.toRoot()?ef(t.root,t.root,new Sn([],{}),n,i):function s(d){const f=function Fp(r,t,e,n){if(r.isAbsolute)return new Bs(t.root,!0,0);if(-1===n)return new Bs(e,e===t.root,0);return function $m(r,t,e){let n=r,i=t,o=e;for(;o>i;){if(o-=i,n=n.parent,!n)throw new c.vHH(4005,jm&&"Invalid number of '../'");i=n.segments.length}return new Bs(n,!1,i-o)}(e,n+(sd(r.commands[0])?0:1),r.numberOfDoubleDots)}(o,t,r.snapshot?._urlSegment,d),g=f.processChildren?qu(f.segmentGroup,f.index,o.commands):ld(f.segmentGroup,f.index,o.commands);return ef(t.root,f.segmentGroup,g,n,i)}(r.snapshot?._lastPathIndex)}function sd(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function ad(r){return"object"==typeof r&&null!=r&&r.outlets}function ef(r,t,e,n,i){let s,o={};n&&Si(n,(d,f)=>{o[f]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),s=r===t?e:tf(r,t,e);const a=Qh(Jh(s));return new zl(a,o,i)}function tf(r,t,e){const n={};return Si(r.children,(i,o)=>{n[o]=i===t?e:tf(i,t,e)}),new Sn(r.segments,n)}class F_{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&sd(n[0]))throw new c.vHH(4003,jm&&"Root segment cannot have matrix parameters");const i=n.find(ad);if(i&&i!==Op(n))throw new c.vHH(4004,jm&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bs{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ld(r,t,e){if(r||(r=new Sn([],{})),0===r.segments.length&&r.hasChildren())return qu(r,t,e);const n=function kp(r,t,e){let n=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=e.length)return o;const s=r.segments[i],a=e[n];if(ad(a))break;const d=`${a}`,f=n<e.length-1?e[n+1]:null;if(i>0&&void 0===d)break;if(d&&f&&"object"==typeof f&&void 0===f.outlets){if(!k_(d,f,s))return o;n+=2}else{if(!k_(d,{},s))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}(r,t,e),i=e.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){const o=new Sn(r.segments.slice(0,n.pathIndex),{});return o.children[fn]=new Sn(r.segments.slice(n.pathIndex),r.children),qu(o,0,i)}return n.match&&0===i.length?new Sn(r.segments,{}):n.match&&!r.hasChildren()?Yu(r,t,e):n.match?qu(r,0,i):Yu(r,t,e)}function qu(r,t,e){if(0===e.length)return new Sn(r.segments,{});{const n=function Lp(r){return ad(r[0])?r[0].outlets:{[fn]:r}}(e),i={};if(!n[fn]&&r.children[fn]&&1===r.numberOfChildren&&0===r.children[fn].segments.length){const o=qu(r.children[fn],t,e);return new Sn(r.segments,o.children)}return Si(n,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=ld(r.children[s],t,o))}),Si(r.children,(o,s)=>{void 0===n[s]&&(i[s]=o)}),new Sn(r.segments,i)}}function Yu(r,t,e){const n=r.segments.slice(0,t);let i=0;for(;i<e.length;){const o=e[i];if(ad(o)){const d=nf(o.outlets);return new Sn(n,d)}if(0===i&&sd(e[0])){n.push(new Kh(r.segments[t].path,Zu(e[0]))),i++;continue}const s=ad(o)?o.outlets[fn]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&sd(a)?(n.push(new Kh(s,Zu(a))),i+=2):(n.push(new Kh(s,{})),i++)}return new Sn(n,{})}function nf(r){const t={};return Si(r,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Yu(new Sn([],{}),0,e))}),t}function Zu(r){const t={};return Si(r,(e,n)=>t[n]=`${e}`),t}function k_(r,t,e){return r==e.path&&Es(t,e.parameters)}const Yl="imperative";class wa{constructor(t,e){this.id=t,this.url=e}}class So extends wa{constructor(t,e,n="imperative",i=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Us extends wa{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ud extends wa{constructor(t,e,n,i){super(t,e),this.reason=n,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rf extends wa{constructor(t,e,n,i){super(t,e),this.reason=n,this.code=i,this.type=16}}class Zl extends wa{constructor(t,e,n,i){super(t,e),this.error=n,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sf extends wa{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cd extends wa{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G_ extends wa{constructor(t,e,n,i,o){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class TS extends wa{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qu extends wa{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V_{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zm{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RS{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H_{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class af{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lo{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lf{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Sa=(()=>{class r{createUrlTree(e,n,i,o,s,a){return x_(e||n.root,i,o,s,a)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),U_=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(t){return Sa.\u0275fac(t)},providedIn:"root"}),r})();class Km{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=qm(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=qm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=cf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return cf(t,this._root).map(e=>e.value)}}function qm(r,t){if(r===t.value)return t;for(const e of t.children){const n=qm(r,e);if(n)return n}return null}function cf(r,t){if(r===t.value)return[t];for(const e of t.children){const n=cf(r,e);if(n.length)return n.unshift(t),n}return[]}class uo{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ea(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class j_ extends Km{constructor(t,e){super(t),this.snapshot=e,ne(this,t)}toString(){return this.snapshot.toString()}}function OS(r,t){const e=function w(r,t){const s=new P([],{},{},"",{},fn,t,null,r.root,-1,{});return new G("",new uo(s,[]))}(r,t),n=new Or([new Kh("",{})]),i=new Or({}),o=new Or({}),s=new Or({}),a=new Or(""),d=new v(n,i,s,a,o,fn,t,e.root);return d.snapshot=e.root,new j_(new uo(d,[]),e)}class v{constructor(t,e,n,i,o,s,a,d){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe((0,Pt.U)(f=>f[jo]))??Tt(void 0),this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pt.U)(t=>ed(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pt.U)(t=>ed(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function y(r,t="emptyOnly"){const e=r.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const i=e[n],o=e[n-1];if(i.routeConfig&&""===i.routeConfig.path)n--;else{if(o.component)break;n--}}return function b(r){return r.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class P{get title(){return this.data?.[jo]}constructor(t,e,n,i,o,s,a,d,f,g,C){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=d,this._urlSegment=f,this._lastPathIndex=g,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ed(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ed(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class G extends Km{constructor(t,e){super(e),this.url=t,ne(this,e)}toString(){return Ce(this._root)}}function ne(r,t){t.value._routerState=r,t.children.forEach(e=>ne(r,e))}function Ce(r){const t=r.children.length>0?` { ${r.children.map(Ce).join(", ")} } `:"";return`${r.value}${t}`}function lt(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,Es(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),Es(t.params,e.params)||r.params.next(e.params),function O_(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!Es(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),Es(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function bt(r,t){const e=Es(r.params,t.params)&&function P_(r,t){return $u(r,t)&&r.every((e,n)=>Es(e.parameters,t[n].parameters))}(r.url,t.url);return e&&!(!r.parent!=!t.parent)&&(!r.parent||bt(r.parent,t.parent))}function kt(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const i=function ui(r,t,e){return t.children.map(n=>{for(const i of e.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return kt(r,n,i);return kt(r,n)})}(r,t,e);return new uo(n,i)}{if(r.shouldAttach(t.value)){const o=r.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>kt(r,a)),s}}const n=function bs(r){return new v(new Or(r.url),new Or(r.params),new Or(r.queryParams),new Or(r.fragment),new Or(r.data),r.outlet,r.component,r)}(t.value),i=t.children.map(o=>kt(r,o));return new uo(n,i)}}const Ju="ngNavigationCancelingError";function W_(r,t){const{redirectTo:e,navigationBehaviorOptions:n}=Za(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Ym(!1,0,t);return i.url=e,i.navigationBehaviorOptions=n,i}function Ym(r,t,e){const n=new Error("NavigationCancelingError: "+(r||""));return n[Ju]=!0,n.cancellationCode=t,e&&(n.url=e),n}function $_(r){return df(r)&&Za(r.url)}function df(r){return r&&r[Ju]}class hf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ff,this.attachRef=null}}let ff=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const i=this.getOrCreateContext(e);i.outlet=n,this.contexts.set(e,i)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new hf,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Vp=!1;let dd=(()=>{class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=fn,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(ff),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(e){if(e.name){const{firstChange:n,previousValue:i}=e.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,Vp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,Vp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,Vp);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new c.vHH(4013,Vp);this._activatedRoute=e;const i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,d=new z_(e,a,i.injector);if(n&&function IS(r){return!!r.resolveComponentFactory}(n)){const f=n.resolveComponentFactory(s);this.activated=i.createComponent(f,i.length,d)}else this.activated=i.createComponent(s,{index:i.length,injector:d,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=c.lG2({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),r})();class z_{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===v?this.route:t===ff?this.childContexts:this.parent.get(t,e)}}let pf=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(e,n){1&e&&c._UZ(0,"router-outlet")},dependencies:[dd],encapsulation:2}),r})();function K_(r,t){return r.providers&&!r._injector&&(r._injector=(0,c.MMx)(r.providers,t,`Route: ${r.path}`)),r._injector??t}function q_(r){const t=r.children&&r.children.map(q_),e=t?{...r,children:t}:{...r};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==fn&&(e.component=pf),e}function js(r){return r.outlet||fn}function tT(r,t){const e=r.filter(n=>js(n)===t);return e.push(...r.filter(n=>js(n)!==t)),e}function Zm(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class gN{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),lt(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=Ea(e);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],n),delete i[s]}),Si(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(t,e,n){const i=t.value,o=e?e.value:null;if(i===o)if(i.component){const s=n.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,o=Ea(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(n&&n.outlet){const s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,o=Ea(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const i=Ea(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],n),this.forwardEvent(new lo(o.value.snapshot))}),t.children.length&&this.forwardEvent(new H_(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,o=e?e.value:null;if(lt(i),i===o)if(i.component){const s=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const s=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),lt(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=Zm(i.snapshot),d=a?.get(c._Vd)??null;s.attachRef=null,s.route=i,s.resolver=d,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,n)}}class NS{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class MS{constructor(t,e){this.component=t,this.route=e}}function KV(r,t,e){const n=r._root;return Hp(n,t?t._root:null,e,[n.value])}function hd(r,t){const e=Symbol(),n=t.get(r,e);return n===e?"function"!=typeof r||(0,c.Z0I)(r)?t.get(r):r:n}function Hp(r,t,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ea(t);return r.children.forEach(s=>{(function nT(r,t,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=r.value,s=t?t.value:null,a=e?e.getContext(r.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const d=function rT(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!$u(r.url,t.url);case"pathParamsOrQueryParamsChange":return!$u(r.url,t.url)||!Es(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bt(r,t)||!Es(r.queryParams,t.queryParams);default:return!bt(r,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new NS(n)):(o.data=s.data,o._resolvedData=s._resolvedData),Hp(r,t,o.component?a?a.children:null:e,n,i),d&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new MS(a.outlet.component,s))}else s&&Y_(t,a,i),i.canActivateChecks.push(new NS(n)),Hp(r,null,o.component?a?a.children:null:e,n,i)})(s,o[s.value.outlet],e,n.concat([s.value]),i),delete o[s.value.outlet]}),Si(o,(s,a)=>Y_(s,e.getContext(a),i)),i}function Y_(r,t,e){const n=Ea(r),i=r.value;Si(n,(o,s)=>{Y_(o,i.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new MS(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Jm(r){return"function"==typeof r}function Z_(r){return r instanceof Ca||"EmptyError"===r?.name}const Ql=Symbol("INITIAL_VALUE");function Bp(){return Ur(r=>ze(r.map(t=>t.pipe(Jr(1),Zc(Ql)))).pipe((0,Pt.U)(t=>{for(const e of t)if(!0!==e){if(e===Ql)return Ql;if(!1===e||e instanceof zl)return e}return!0}),kr(t=>t!==Ql),Jr(1)))}function uT(r){return(0,ju.z)((0,zi.b)(t=>{if(Za(t))throw W_(0,t)}),(0,Pt.U)(t=>!0===t))}const fd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dT(r,t,e,n,i){const o=VS(r,t,e);return o.matched?function cT(r,t,e,n){const i=t.canMatch;return i&&0!==i.length?Tt(i.map(s=>{const a=hd(s,r);return Wl(function mN(r){return r&&Jm(r.canMatch)}(a)?a.canMatch(t,e):r.runInContext(()=>a(t,e)))})).pipe(Bp(),uT()):Tt(!0)}(n=K_(t,n),t,e).pipe((0,Pt.U)(s=>!0===s?o:{...fd})):Tt(o)}function VS(r,t,e){if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?{...fd}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const i=(t.matcher||R_)(e,r,t);if(!i)return{...fd};const o={};Si(i.posParams,(a,d)=>{o[d]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function X_(r,t,e,n){if(e.length>0&&function hT(r,t,e){return e.some(n=>Xm(r,t,n)&&js(n)!==fn)}(r,e,n)){const o=new Sn(t,function _N(r,t,e,n){const i={};i[fn]=n,n._sourceSegment=r,n._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&js(o)!==fn){const s=new Sn([],{});s._sourceSegment=r,s._segmentIndexShift=t.length,i[js(o)]=s}return i}(r,t,n,new Sn(e,r.children)));return o._sourceSegment=r,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function CN(r,t,e){return e.some(n=>Xm(r,t,n))}(r,e,n)){const o=new Sn(r.segments,function HS(r,t,e,n,i){const o={};for(const s of n)if(Xm(r,e,s)&&!i[js(s)]){const a=new Sn([],{});a._sourceSegment=r,a._segmentIndexShift=t.length,o[js(s)]=a}return{...i,...o}}(r,t,e,n,r.children));return o._sourceSegment=r,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const i=new Sn(r.segments,r.children);return i._sourceSegment=r,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:e}}function Xm(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function wN(r,t,e,n){return!!(js(r)===n||n!==fn&&Xm(t,e,r))&&("**"===r.path||VS(t,r,e).matched)}function fT(r,t,e){return 0===t.length&&!r.children[e]}const pd=!1;class eC{constructor(t){this.segmentGroup=t||null}}class mf{constructor(t){this.urlTree=t}}function Xu(r){return Ss(new eC(r))}function pT(r){return Ss(new mf(r))}class bN{constructor(t,e,n,i,o){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=X_(this.urlTree.root,[],[],this.config).segmentGroup,e=new Sn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,fn).pipe((0,Pt.U)(o=>this.createUrlTree(Jh(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wu(o=>{if(o instanceof mf)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof eC?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,fn).pipe((0,Pt.U)(i=>this.createUrlTree(Jh(i),t.queryParams,t.fragment))).pipe(Wu(i=>{throw i instanceof eC?this.noMatchError(i):i}))}noMatchError(t){return new c.vHH(4002,pd)}createUrlTree(t,e,n){const i=Qh(t);return new zl(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Pt.U)(o=>new Sn([],o))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){const i=[];for(const o of Object.keys(n.children))"primary"===o?i.unshift(o):i.push(o);return(0,yn.D)(i).pipe(Jc(o=>{const s=n.children[o],a=tT(e,o);return this.expandSegmentGroup(t,a,s,o).pipe((0,Pt.U)(d=>({segment:d,outlet:o})))}),Xc((o,s)=>(o[s.outlet]=s.segment,o),{}),km())}expandSegment(t,e,n,i,o,s){return(0,yn.D)(n).pipe(Jc(a=>this.expandSegmentAgainstRoute(t,e,n,a,i,o,s).pipe(Wu(f=>{if(f instanceof eC)return Tt(null);throw f}))),Uo(a=>!!a),Wu((a,d)=>{if(Z_(a))return fT(e,i,o)?Tt(new Sn([],{})):Xu(e);throw a}))}expandSegmentAgainstRoute(t,e,n,i,o,s,a){return wN(i,e,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,o,s):Xu(e):Xu(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?pT(o):this.lineralizeSegments(n,o).pipe((0,$i.z)(s=>{const a=new Sn(s,{});return this.expandSegment(t,a,e,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,o,s){const{matched:a,consumedSegments:d,remainingSegments:f,positionalParamSegments:g}=VS(e,i,o);if(!a)return Xu(e);const C=this.applyRedirectCommands(d,i.redirectTo,g);return i.redirectTo.startsWith("/")?pT(C):this.lineralizeSegments(i,C).pipe((0,$i.z)(E=>this.expandSegment(t,e,n,E.concat(f),s,!1)))}matchSegmentAgainstRoute(t,e,n,i,o){return"**"===n.path?(t=K_(n,t),n.loadChildren?(n._loadedRoutes?Tt({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe((0,Pt.U)(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new Sn(i,{})))):Tt(new Sn(i,{}))):dT(e,n,i,t).pipe(Ur(({matched:s,consumedSegments:a,remainingSegments:d})=>s?this.getChildConfig(t=n._injector??t,n,i).pipe((0,$i.z)(g=>{const C=g.injector??t,E=g.routes,{segmentGroup:T,slicedSegments:I}=X_(e,a,d,E),M=new Sn(T.segments,T.children);if(0===I.length&&M.hasChildren())return this.expandChildren(C,E,M).pipe((0,Pt.U)(J=>new Sn(a,J)));if(0===E.length&&0===I.length)return Tt(new Sn(a,{}));const k=js(n)===o;return this.expandSegment(C,M,E,I,k?fn:o,!0).pipe((0,Pt.U)(z=>new Sn(a.concat(z.segments),z.children)))})):Xu(e)))}getChildConfig(t,e,n){return e.children?Tt({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Tt({routes:e._loadedRoutes,injector:e._loadedInjector}):function yN(r,t,e,n){const i=t.canLoad;return void 0===i||0===i.length?Tt(!0):Tt(i.map(s=>{const a=hd(s,r);return Wl(function oT(r){return r&&Jm(r.canLoad)}(a)?a.canLoad(t,e):r.runInContext(()=>a(t,e)))})).pipe(Bp(),uT())}(t,e,n).pipe((0,$i.z)(i=>i?this.configLoader.loadChildren(t,e).pipe((0,zi.b)(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function SN(r){return Ss(Ym(pd,3))}())):Tt({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Tt(n);if(i.numberOfChildren>1||!i.children[fn])return t.redirectTo,Ss(new c.vHH(4e3,pd));i=i.children[fn]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,i){const o=this.createSegmentGroup(t,e.root,n,i);return new zl(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Si(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);n[o]=e[a]}else n[o]=i}),n}createSegmentGroup(t,e,n,i){const o=this.createSegments(t,e.segments,n,i);let s={};return Si(e.children,(a,d)=>{s[d]=this.createSegmentGroup(t,a,n,i)}),new Sn(o,s)}createSegments(t,e,n,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new c.vHH(4001,pd);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}class US{}class WS{constructor(t,e,n,i,o,s,a){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const t=X_(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,fn).pipe((0,Pt.U)(e=>{if(null===e)return null;const n=new P([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new uo(n,e),o=new G(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const e=t.value,n=y(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,i)}processChildren(t,e,n){return(0,yn.D)(Object.keys(n.children)).pipe(Jc(i=>{const o=n.children[i],s=tT(e,i);return this.processSegmentGroup(t,s,o,i)}),Xc((i,o)=>i&&o?(i.push(...o),i):null),function Gm(r,t=!1){return(0,Ir.e)((e,n)=>{let i=0;e.subscribe((0,X.x)(n,o=>{const s=r(o,i++);(s||t)&&n.next(o),!s&&n.complete()}))})}(i=>null!==i),Qc(null),km(),(0,Pt.U)(i=>{if(null===i)return null;const o=vT(i);return function ev(r){r.sort((t,e)=>t.value.outlet===fn?-1:e.value.outlet===fn?1:t.value.outlet.localeCompare(e.value.outlet))}(o),o}))}processSegment(t,e,n,i,o){return(0,yn.D)(e).pipe(Jc(s=>this.processSegmentAgainstRoute(s._injector??t,s,n,i,o)),Uo(s=>!!s),Wu(s=>{if(Z_(s))return fT(n,i,o)?Tt([]):Tt(null);throw s}))}processSegmentAgainstRoute(t,e,n,i,o){if(e.redirectTo||!wN(e,n,i,o))return Tt(null);let s;if("**"===e.path){const a=i.length>0?Op(i).parameters:{},d=_T(n)+i.length;s=Tt({snapshot:new P(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vf(e),js(e),e.component??e._loadedComponent??null,e,yT(n),d,Jl(e)),consumedSegments:[],remainingSegments:[]})}else s=dT(n,e,i,t).pipe((0,Pt.U)(({matched:a,consumedSegments:d,remainingSegments:f,parameters:g})=>{if(!a)return null;const C=_T(n)+d.length;return{snapshot:new P(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vf(e),js(e),e.component??e._loadedComponent??null,e,yT(n),C,Jl(e)),consumedSegments:d,remainingSegments:f}}));return s.pipe(Ur(a=>{if(null===a)return Tt(null);const{snapshot:d,consumedSegments:f,remainingSegments:g}=a;t=e._injector??t;const C=e._loadedInjector??t,E=function TN(r){return r.children?r.children:r.loadChildren?r._loadedRoutes:[]}(e),{segmentGroup:T,slicedSegments:I}=X_(n,f,g,E.filter(k=>void 0===k.redirectTo));if(0===I.length&&T.hasChildren())return this.processChildren(C,E,T).pipe((0,Pt.U)(k=>null===k?null:[new uo(d,k)]));if(0===E.length&&0===I.length)return Tt([new uo(d,[])]);const M=js(e)===o;return this.processSegment(C,E,T,I,M?fn:o).pipe((0,Pt.U)(k=>null===k?null:[new uo(d,k)]))}))}}function RN(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function vT(r){const t=[],e=new Set;for(const n of r){if(!RN(n)){t.push(n);continue}const i=t.find(o=>n.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...n.children),e.add(i)):t.push(n)}for(const n of e){const i=vT(n.children);t.push(new uo(n.value,i))}return t.filter(n=>!e.has(n))}function yT(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function _T(r){let t=r,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function vf(r){return r.data||{}}function Jl(r){return r.resolve||{}}function AN(r,t){return(0,$i.z)(e=>{const{targetSnapshot:n,guards:{canActivateChecks:i}}=e;if(!i.length)return Tt(e);let o=0;return(0,yn.D)(i).pipe(Jc(s=>function ZV(r,t,e,n){const i=r.routeConfig,o=r._resolve;return void 0!==i?.title&&!$S(i)&&(o[jo]=i.title),function QV(r,t,e,n){const i=function CT(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}(r);if(0===i.length)return Tt({});const o={};return(0,yn.D)(i).pipe((0,$i.z)(s=>function JV(r,t,e,n){const i=Zm(t)??n,o=hd(r,i);return Wl(o.resolve?o.resolve(t,e):i.runInContext(()=>o(t,e)))}(r[s],t,e,n).pipe(Uo(),(0,zi.b)(a=>{o[s]=a}))),Lm(1),function $h(r){return(0,Pt.U)(()=>r)}(o),Wu(s=>Z_(s)?Lr.E:Ss(s)))}(o,r,t,n).pipe((0,Pt.U)(s=>(r._resolvedData=s,r.data=y(r,e).resolve,i&&$S(i)&&(r.data[jo]=i.title),null)))}(s.route,n,r,t)),(0,zi.b)(()=>o++),Lm(1),(0,$i.z)(s=>o===i.length?Tt(e):Lr.E))})}function $S(r){return"string"==typeof r.title||null===r.title}function tC(r){return Ur(t=>{const e=r(t);return e?(0,yn.D)(e).pipe((0,Pt.U)(()=>t)):Tt(t)})}const yf=new c.OlP("ROUTES");let zS=(()=>{class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Tt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Wl(e.loadComponent()).pipe((0,Pt.U)(ba),(0,zi.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Rp(()=>{this.componentLoaders.delete(e)})),i=new Wh(n,()=>new Un.x).pipe(Tp());return this.componentLoaders.set(e,i),i}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Tt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const o=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe((0,Pt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let d,f,g=!1;Array.isArray(a)?f=a:(d=a.create(e).injector,f=A_(d.get(yf,[],c.XFs.Self|c.XFs.Optional)));return{routes:f.map(q_),injector:d}}),Rp(()=>{this.childrenLoaders.delete(n)})),s=new Wh(o,()=>new Un.x).pipe(Tp());return this.childrenLoaders.set(n,s),s}loadModuleFactoryOrRoutes(e){return Wl(e()).pipe((0,Pt.U)(ba),(0,$i.z)(n=>n instanceof c.YKP||Array.isArray(n)?Tt(n):(0,yn.D)(this.compiler.compileModuleAsync(n))))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function ba(r){return function PN(r){return r&&"object"==typeof r&&"default"in r}(r)?r.default:r}let tv=(()=>{class r{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Un.x,this.configLoader=(0,c.f3M)(zS),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(zu),this.rootContexts=(0,c.f3M)(ff),this.navigationId=0,this.afterPreactivation=()=>Tt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new zm(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new V_(i))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:n})}setupNavigations(e){return this.transitions=new Or({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Yl,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kr(n=>0!==n.id),(0,Pt.U)(n=>({...n,extractedUrl:e.urlHandlingStrategy.extract(n.rawUrl)})),Ur(n=>{let i=!1,o=!1;return Tt(n).pipe((0,zi.b)(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ur(s=>{const a=e.browserUrlTree.toString(),d=!e.navigated||s.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!d&&"reload"!==(s.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const g="";return this.events.next(new rf(s.id,e.serializeUrl(n.rawUrl),g,0)),e.rawUrlTree=s.rawUrl,s.resolve(null),Lr.E}if(e.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ST(s.source)&&(e.browserUrlTree=s.extractedUrl),Tt(s).pipe(Ur(g=>{const C=this.transitions?.getValue();return this.events.next(new So(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),C!==this.transitions?.getValue()?Lr.E:Promise.resolve(g)}),function mT(r,t,e,n){return Ur(i=>function EN(r,t,e,n,i){return new bN(r,t,e,n,i).apply()}(r,t,e,i.extractedUrl,n).pipe((0,Pt.U)(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),(0,zi.b)(g=>{this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects},n.urlAfterRedirects=g.urlAfterRedirects}),function IN(r,t,e,n,i){return(0,$i.z)(o=>function DN(r,t,e,n,i,o,s="emptyOnly"){return new WS(r,t,e,n,i,s,o).recognize().pipe(Ur(a=>null===a?function jS(r){return new br.y(t=>t.error(r))}(new US):Tt(a)))}(r,t,e,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,i).pipe((0,Pt.U)(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,zi.b)(g=>{if(n.targetSnapshot=g.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!g.extras.skipLocationChange){const E=e.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl);e.setBrowserUrl(E,g)}e.browserUrlTree=g.urlAfterRedirects}const C=new sf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(C)}));if(d&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:g,extractedUrl:C,source:E,restoredState:T,extras:I}=s,M=new So(g,this.urlSerializer.serialize(C),E,T);this.events.next(M);const k=OS(C,this.rootComponentType).snapshot;return Tt(n={...s,targetSnapshot:k,urlAfterRedirects:C,extras:{...I,skipLocationChange:!1,replaceUrl:!1}})}{const g="";return this.events.next(new rf(s.id,e.serializeUrl(n.extractedUrl),g,1)),e.rawUrlTree=s.rawUrl,s.resolve(null),Lr.E}}),(0,zi.b)(s=>{const a=new cd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),(0,Pt.U)(s=>n={...s,guards:KV(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function LS(r,t){return(0,$i.z)(e=>{const{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return 0===s.length&&0===o.length?Tt({...e,guardsResult:!0}):function Q_(r,t,e,n){return(0,yn.D)(r).pipe((0,$i.z)(i=>function GS(r,t,e,n,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Tt(o.map(a=>{const d=Zm(t)??i,f=hd(a,d);return Wl(function FS(r){return r&&Jm(r.canDeactivate)}(f)?f.canDeactivate(r,t,e,n):d.runInContext(()=>f(r,t,e,n))).pipe(Uo())})).pipe(Bp()):Tt(!0)}(i.component,i.route,e,t,n)),Uo(i=>!0!==i,!0))}(s,n,i,r).pipe((0,$i.z)(a=>a&&function iT(r){return"boolean"==typeof r}(a)?function vN(r,t,e,n){return(0,yn.D)(t).pipe(Jc(i=>Zt(function J_(r,t){return null!==r&&t&&t(new RS(r)),Tt(!0)}(i.route.parent,n),function kS(r,t){return null!==r&&t&&t(new af(r)),Tt(!0)}(i.route,n),function lT(r,t,e){const n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function Qm(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(s)).filter(s=>null!==s).map(s=>Qr(()=>Tt(s.guards.map(d=>{const f=Zm(s.node)??e,g=hd(d,f);return Wl(function qV(r){return r&&Jm(r.canActivateChild)}(g)?g.canActivateChild(n,r):f.runInContext(()=>g(n,r))).pipe(Uo())})).pipe(Bp())));return Tt(o).pipe(Bp())}(r,i.path,e),function gf(r,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return Tt(!0);const i=n.map(o=>Qr(()=>{const s=Zm(t)??e,a=hd(o,s);return Wl(function xS(r){return r&&Jm(r.canActivate)}(a)?a.canActivate(t,r):s.runInContext(()=>a(t,r))).pipe(Uo())}));return Tt(i).pipe(Bp())}(r,i.route,e))),Uo(i=>!0!==i,!0))}(n,o,r,t):Tt(a)),(0,Pt.U)(a=>({...e,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),(0,zi.b)(s=>{if(n.guardsResult=s.guardsResult,Za(s.guardsResult))throw W_(0,s.guardsResult);const a=new G_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),kr(s=>!!s.guardsResult||(e.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),tC(s=>{if(s.guards.canActivateChecks.length)return Tt(s).pipe((0,zi.b)(a=>{const d=new TS(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(d)}),Ur(a=>{let d=!1;return Tt(a).pipe(AN(e.paramsInheritanceStrategy,this.environmentInjector),(0,zi.b)({next:()=>d=!0,complete:()=>{d||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),(0,zi.b)(a=>{const d=new Qu(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(d)}))}),tC(s=>{const a=d=>{const f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe((0,zi.b)(g=>{d.component=g}),(0,Pt.U)(()=>{})));for(const g of d.children)f.push(...a(g));return f};return ze(a(s.targetSnapshot.root)).pipe(Qc(),Jr(1))}),tC(()=>this.afterPreactivation()),(0,Pt.U)(s=>{const a=function jt(r,t,e){const n=kt(r,t._root,e?e._root:void 0);return new j_(n,t)}(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return n={...s,targetRouterState:a}}),(0,zi.b)(s=>{e.currentUrlTree=s.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),e.routerState=s.targetRouterState,"deferred"===e.urlUpdateStrategy&&(s.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,s),e.browserUrlTree=s.urlAfterRedirects)}),((r,t,e)=>(0,Pt.U)(n=>(new gN(t,n.targetRouterState,n.currentRouterState,e).activate(r),n)))(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s)),Jr(1),(0,zi.b)({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Us(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Rp(()=>{i||o||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),Wu(s=>{if(o=!0,df(s)){$_(s)||(e.navigated=!0,e.restoreHistory(n,!0));const a=new ud(n.id,this.urlSerializer.serialize(n.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),$_(s)){const d=e.urlHandlingStrategy.merge(s.url,e.rawUrlTree),f={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||ST(n.source)};e.scheduleNavigation(d,Yl,null,f,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{e.restoreHistory(n,!0);const a=new Zl(n.id,this.urlSerializer.serialize(n.extractedUrl),s,n.targetSnapshot??void 0);this.events.next(a);try{n.resolve(e.errorHandler(s))}catch(d){n.reject(d)}}return Lr.E}))}))}cancelNavigationTransition(e,n,i){const o=new ud(e.id,this.urlSerializer.serialize(e.extractedUrl),n,i);this.events.next(o),e.resolve(!1)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function ST(r){return r!==Yl}let ET=(()=>{class r{buildTitle(e){let n,i=e.root;for(;void 0!==i;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(o=>o.outlet===fn);return n}getResolvedTitleForRoute(e){return e.data[jo]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return(0,c.f3M)(NN)},providedIn:"root"}),r})(),NN=(()=>{class r extends ET{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Hl))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),MN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return(0,c.f3M)(xN)},providedIn:"root"}),r})();class bT{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let xN=(()=>{class r extends bT{}return r.\u0275fac=function(){let t;return function(n){return(t||(t=c.n5z(r)))(n||r)}}(),r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const rC=new c.OlP("",{providedIn:"root",factory:()=>({})});let _n=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return(0,c.f3M)(DT)},providedIn:"root"}),r})(),DT=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function TT(r){throw r}function LN(r,t,e){return t.parse("/")}const kN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ws=(()=>{class r{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)(rC,{optional:!0})||{},this.errorHandler=this.options.errorHandler||TT,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||LN,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(_n),this.routeReuseStrategy=(0,c.f3M)(MN),this.urlCreationStrategy=(0,c.f3M)(U_),this.titleStrategy=(0,c.f3M)(ET),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=A_((0,c.f3M)(yf,{optional:!0})??[]),this.navigationTransitions=(0,c.f3M)(tv),this.urlSerializer=(0,c.f3M)(zu),this.location=(0,c.f3M)(nt),this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new zl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=OS(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Yl,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,n,e.state)},0)}))}navigateToSyncWithBrowser(e,n,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const d={...i};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(o.state=d)}const a=this.parseUrl(e);this.scheduleNavigation(a,n,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(q_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:d}=n,f=d?this.currentUrlTree.fragment:s;let g=null;switch(a){case"merge":g={...this.currentUrlTree.queryParams,...o};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}return null!==g&&(g=this.removeEmptyProps(g)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,e,g,f??null)}navigateByUrl(e,n={skipLocationChange:!1}){const i=Za(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Yl,null,n)}navigate(e,n={skipLocationChange:!1}){return function OT(r){for(let t=0;t<r.length;t++){const e=r[t];if(null==e)throw new c.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(i){n=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return n}isActive(e,n){let i;if(i=!0===n?{...kN}:!1===n?{...RT}:n,Za(e))return Ip(this.currentUrlTree,e,i);const o=this.parseUrl(e);return Ip(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.keys(e).reduce((n,i)=>{const o=e[i];return null!=o&&(n[i]=o),n},{})}scheduleNavigation(e,n,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,d,f,g;return s?(a=s.resolve,d=s.reject,f=s.promise):f=new Promise((C,E)=>{a=C,d=E}),g="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:g,source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(C=>Promise.reject(C))}setBrowserUrl(e,n){const i=this.urlSerializer.serialize(e),o={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class qS{}let HN=(()=>{class r{constructor(e,n,i,o,s){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(kr(e=>e instanceof Us),Jc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const i=[];for(const o of n){o.providers&&!o._injector&&(o._injector=(0,c.MMx)(o.providers,e,`Route: ${o.path}`));const s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return(0,yn.D)(i).pipe((0,Ht.J)())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let i;i=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):Tt(null);const o=i.pipe((0,$i.z)(s=>null===s?Tt(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(n.loadComponent&&!n._loadedComponent){const s=this.loader.loadComponent(n);return(0,yn.D)([o,s]).pipe((0,Ht.J)())}return o})}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Ws),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(qS),c.LFG(zS))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const nv=new c.OlP("");let oC=(()=>{class r{constructor(e,n,i,o,s={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof So?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Us&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof lf&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lf(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return r.\u0275fac=function(e){c.$Z()},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var $s=(()=>(($s=$s||{})[$s.COMPLETE=0]="COMPLETE",$s[$s.FAILED=1]="FAILED",$s[$s.REDIRECTING=2]="REDIRECTING",$s))();const rv=!1;function ec(r,t){return{\u0275kind:r,\u0275providers:t}}const AT=new c.OlP("",{providedIn:"root",factory:()=>!1});function YS(){const r=(0,c.f3M)(c.zs3);return t=>{const e=r.get(c.z2F);if(t!==e.components[0])return;const n=r.get(Ws),i=r.get(ov);1===r.get(ZS)&&n.initialNavigation(),r.get(NT,null,c.XFs.Optional)?.setUpPreloading(),r.get(nv,null,c.XFs.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const ov=new c.OlP(rv?"bootstrap done indicator":"",{factory:()=>new Un.x}),ZS=new c.OlP(rv?"initial navigation":"",{providedIn:"root",factory:()=>1});function jN(){let r=[];return r=rv?[{provide:c.Xts,multi:!0,useFactory:()=>{const t=(0,c.f3M)(Ws);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function Gp(r){if(!("type"in r))return`Unknown Router Event: ${r.constructor.name}`;switch(r.type){case 14:return`ActivationEnd(path: '${r.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${r.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${r.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${r.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${r.id}, url: '${r.url}', urlAfterRedirects: '${r.urlAfterRedirects}', state: ${r.state}, shouldActivate: ${r.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${r.id}, url: '${r.url}', urlAfterRedirects: '${r.urlAfterRedirects}', state: ${r.state})`;case 2:return`NavigationCancel(id: ${r.id}, url: '${r.url}')`;case 16:return`NavigationSkipped(id: ${r.id}, url: '${r.url}')`;case 1:return`NavigationEnd(id: ${r.id}, url: '${r.url}', urlAfterRedirects: '${r.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${r.id}, url: '${r.url}', error: ${r.error})`;case 0:return`NavigationStart(id: ${r.id}, url: '${r.url}')`;case 6:return`ResolveEnd(id: ${r.id}, url: '${r.url}', urlAfterRedirects: '${r.urlAfterRedirects}', state: ${r.state})`;case 5:return`ResolveStart(id: ${r.id}, url: '${r.url}', urlAfterRedirects: '${r.urlAfterRedirects}', state: ${r.state})`;case 10:return`RouteConfigLoadEnd(path: ${r.route.path})`;case 9:return`RouteConfigLoadStart(path: ${r.route.path})`;case 4:return`RoutesRecognized(id: ${r.id}, url: '${r.url}', urlAfterRedirects: '${r.urlAfterRedirects}', state: ${r.state})`;case 15:return`Scroll(anchor: '${r.anchor}', position: '${r.position?`${r.position[0]}, ${r.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],ec(1,r)}const NT=new c.OlP(rv?"router preloader":"");function WN(r){return ec(0,[{provide:NT,useExisting:HN},{provide:qS,useExisting:r}])}const jp=!1,sC=new c.OlP(jp?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),iH=[nt,{provide:zu,useClass:Ap},Ws,ff,{provide:v,useFactory:function IT(r){return r.routerState.root},deps:[Ws]},zS,jp?{provide:AT,useValue:!0}:[]];function QS(){return new c.PXZ("Router",Ws)}let MT=(()=>{class r{constructor(e){}static forRoot(e,n){return{ngModule:r,providers:[iH,jp&&n?.enableTracing?jN().\u0275providers:[],{provide:yf,multi:!0,useValue:e},{provide:sC,useFactory:KN,deps:[[Ws,new c.FiY,new c.tp0]]},{provide:rC,useValue:n||{}},n?.useHash?{provide:Ft,useClass:Ve}:{provide:Ft,useClass:Ge},{provide:nv,useFactory:()=>{const r=(0,c.f3M)(Ba),t=(0,c.f3M)(c.R0b),e=(0,c.f3M)(rC),n=(0,c.f3M)(tv),i=(0,c.f3M)(zu);return e.scrollOffset&&r.setOffset(e.scrollOffset),new oC(i,n,r,t,e)}},n?.preloadingStrategy?WN(n.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:QS},n?.initialNavigation?FT(n):[],[{provide:LT,useFactory:YS},{provide:c.tb,multi:!0,useExisting:LT}]]}}static forChild(e){return{ngModule:r,providers:[{provide:yf,multi:!0,useValue:e}]}}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(sC,8))},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[pf]}),r})();function KN(r){if(jp&&r)throw new c.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function FT(r){return["disabled"===r.initialNavigation?ec(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const t=(0,c.f3M)(Ws);return()=>{t.setUpLocationChangeListener()}}},{provide:ZS,useValue:2}]).\u0275providers:[],"enabledBlocking"===r.initialNavigation?ec(2,[{provide:ZS,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:t=>{const e=t.get(_e,Promise.resolve());return()=>e.then(()=>new Promise(n=>{const i=t.get(Ws),o=t.get(ov);(function eH(r,t){r.events.pipe(kr(e=>e instanceof Us||e instanceof ud||e instanceof Zl||e instanceof rf),(0,Pt.U)(e=>e instanceof Us||e instanceof rf?$s.COMPLETE:e instanceof ud&&(0===e.code||1===e.code)?$s.REDIRECTING:$s.FAILED),kr(e=>e!==$s.REDIRECTING),Jr(1)).subscribe(()=>{t()})})(i,()=>{n(!0)}),t.get(tv).afterPreactivation=()=>(n(!0),o.closed?Tt(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const LT=new c.OlP(jp?"Router Initializer":"");let $p=(()=>{class r{agInit(e){this.params=e,this.label=this.params.label||null}refresh(e){return!0}onClick(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-button-renderer"]],decls:2,vars:1,consts:[["type","button",1,"btn","btn-link",3,"click"]],template:function(e,n){1&e&&(c.TgZ(0,"button",0),c.NdJ("click",function(o){return n.onClick(o)}),c._uU(1),c.qZA()),2&e&&(c.xp6(1),c.Oqu(n.label))},encapsulation:2}),r})();var Bt,Te=U(5861),Ki=U(9681),zs=U(4859),Ds=U(1877),H=U(2090),XS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qa={},aC=aC||{},hn=XS||self;function lC(){}function uC(r){var t=typeof r;return"array"==(t="object"!=t?t:r?Array.isArray(r)?"array":t:"null")||"object"==t&&"number"==typeof r.length}function zp(r){var t=typeof r;return"object"==t&&null!=r||"function"==t}var cC="closure_uid_"+(1e9*Math.random()>>>0),kT=0;function ZN(r,t,e){return r.call.apply(r.bind,arguments)}function QN(r,t,e){if(!r)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),r.apply(t,i)}}return function(){return r.apply(t,arguments)}}function _r(r,t,e){return(_r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ZN:QN).apply(null,arguments)}function sv(r,t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),r.apply(this,n)}}function Eo(r,t){function e(){}e.prototype=t.prototype,r.X=t.prototype,r.prototype=new e,r.prototype.constructor=r,r.Wb=function(n,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[i].apply(n,s)}}function _f(){this.s=this.s,this.o=this.o}_f.prototype.s=!1,_f.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function YN(r){Object.prototype.hasOwnProperty.call(r,cC)&&r[cC]||(r[cC]=++kT)}(this)},_f.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tE=Array.prototype.indexOf?function(r,t){return Array.prototype.indexOf.call(r,t,void 0)}:function(r,t){if("string"==typeof r)return"string"!=typeof t||1!=t.length?-1:r.indexOf(t,0);for(let e=0;e<r.length;e++)if(e in r&&r[e]===t)return e;return-1};function nE(r){const t=r.length;if(0<t){const e=Array(t);for(let n=0;n<t;n++)e[n]=r[n];return e}return[]}function GT(r,t){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(uC(n)){const i=r.length||0,o=n.length||0;r.length=i+o;for(let s=0;s<o;s++)r[i+s]=n[s]}else r.push(n)}}function Wo(r,t){this.type=r,this.g=this.target=t,this.defaultPrevented=!1}Wo.prototype.h=function(){this.defaultPrevented=!0};var VT=function(){if(!hn.addEventListener||!Object.defineProperty)return!1;var r=!1,t=Object.defineProperty({},"passive",{get:function(){r=!0}});try{hn.addEventListener("test",lC,t),hn.removeEventListener("test",lC,t)}catch{}return r}();function dC(r){return/^[\s\xa0]*$/.test(r)}var HT=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function av(r,t){return r<t?-1:r>t?1:0}function hC(){var r=hn.navigator;return r&&(r=r.userAgent)?r:""}function Xl(r){return-1!=hC().indexOf(r)}function rE(r){return rE[" "](r),r}rE[" "]=lC;var pC,r,XN=Xl("Opera"),es=Xl("Trident")||Xl("MSIE"),fC=Xl("Edge"),iE=fC||es,BT=Xl("Gecko")&&!(-1!=hC().toLowerCase().indexOf("webkit")&&!Xl("Edge"))&&!(Xl("Trident")||Xl("MSIE"))&&!Xl("Edge"),UT=-1!=hC().toLowerCase().indexOf("webkit")&&!Xl("Edge");function jT(){var r=hn.document;return r?r.documentMode:void 0}e:{var oE="",lv=(r=hC(),BT?/rv:([^\);]+)(\)|;)/.exec(r):fC?/Edge\/([\d\.]+)/.exec(r):es?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):UT?/WebKit\/(\S+)/.exec(r):XN?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(lv&&(oE=lv?lv[1]:""),es){var sE=jT();if(null!=sE&&sE>parseFloat(oE)){pC=String(sE);break e}}pC=oE}var eM={};var sH=hn.document&&es&&(jT()||parseInt(pC,10))||void 0;function Cf(r,t){if(Wo.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var e=this.type=r.type,n=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=t,t=r.relatedTarget){if(BT){e:{try{rE(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else"mouseover"==e?t=r.fromElement:"mouseout"==e&&(t=r.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:aH[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Cf.X.h.call(this)}}Eo(Cf,Wo);var aH={2:"touch",3:"pen",4:"mouse"};Cf.prototype.h=function(){Cf.X.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Kp="closure_listenable_"+(1e6*Math.random()|0),WT=0;function $T(r,t,e,n,i){this.listener=r,this.proxy=null,this.src=t,this.type=e,this.capture=!!n,this.ha=i,this.key=++WT,this.ba=this.ea=!1}function dv(r){r.ba=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function hv(r,t,e){for(const n in r)t.call(e,r[n],n,r)}function eu(r){const t={};for(const e in r)t[e]=r[e];return t}const fv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pv(r,t){let e,n;for(let i=1;i<arguments.length;i++){for(e in n=arguments[i],n)r[e]=n[e];for(let o=0;o<fv.length;o++)e=fv[o],Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}}function gd(r){this.src=r,this.g={},this.h=0}function aE(r,t){var e=t.type;if(e in r.g){var o,n=r.g[e],i=tE(n,t);(o=0<=i)&&Array.prototype.splice.call(n,i,1),o&&(dv(t),0==r.g[e].length&&(delete r.g[e],r.h--))}}function mC(r,t,e,n){for(var i=0;i<r.length;++i){var o=r[i];if(!o.ba&&o.listener==t&&o.capture==!!e&&o.ha==n)return i}return-1}gd.prototype.add=function(r,t,e,n,i){var o=r.toString();(r=this.g[o])||(r=this.g[o]=[],this.h++);var s=mC(r,t,n,i);return-1<s?(t=r[s],e||(t.ea=!1)):((t=new $T(t,this.src,o,!!n,i)).ea=e,r.push(t)),t};var vC="closure_lm_"+(1e6*Math.random()|0),lE={};function zT(r,t,e,n,i){if(n&&n.once)return nM(r,t,e,n,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)zT(r,t[o],e,n,i);return null}return e=hE(e),r&&r[Kp]?r.N(t,e,zp(n)?!!n.capture:!!n,i):qp(r,t,e,!1,n,i)}function qp(r,t,e,n,i,o){if(!t)throw Error("Invalid event type");var s=zp(i)?!!i.capture:!!i,a=cE(r);if(a||(r[vC]=a=new gd(r)),(e=a.add(t,e,n,s,o)).proxy)return e;if(n=function tM(){const t=rM;return function r(e){return t.call(r.src,r.listener,e)}}(),e.proxy=n,n.src=r,n.listener=e,r.addEventListener)VT||(i=s),void 0===i&&(i=!1),r.addEventListener(t.toString(),n,i);else if(r.attachEvent)r.attachEvent(qT(t.toString()),n);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(n)}return e}function nM(r,t,e,n,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)nM(r,t[o],e,n,i);return null}return e=hE(e),r&&r[Kp]?r.O(t,e,zp(n)?!!n.capture:!!n,i):qp(r,t,e,!0,n,i)}function KT(r,t,e,n,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)KT(r,t[o],e,n,i);else n=zp(n)?!!n.capture:!!n,e=hE(e),r&&r[Kp]?(r=r.i,(t=String(t).toString())in r.g&&-1<(e=mC(o=r.g[t],e,n,i))&&(dv(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete r.g[t],r.h--))):r&&(r=cE(r))&&(t=r.g[t.toString()],r=-1,t&&(r=mC(t,e,n,i)),(e=-1<r?t[r]:null)&&uE(e))}function uE(r){if("number"!=typeof r&&r&&!r.ba){var t=r.src;if(t&&t[Kp])aE(t.i,r);else{var e=r.type,n=r.proxy;t.removeEventListener?t.removeEventListener(e,n,r.capture):t.detachEvent?t.detachEvent(qT(e),n):t.addListener&&t.removeListener&&t.removeListener(n),(e=cE(t))?(aE(e,r),0==e.h&&(e.src=null,t[vC]=null)):dv(r)}}}function qT(r){return r in lE?lE[r]:lE[r]="on"+r}function rM(r,t){if(r.ba)r=!0;else{t=new Cf(t,this);var e=r.listener,n=r.ha||r.src;r.ea&&uE(r),r=e.call(n,t)}return r}function cE(r){return(r=r[vC])instanceof gd?r:null}var dE="__closure_events_fn_"+(1e9*Math.random()>>>0);function hE(r){return"function"==typeof r?r:(r[dE]||(r[dE]=function(t){return r.handleEvent(t)}),r[dE])}function qi(){_f.call(this),this.i=new gd(this),this.P=this,this.I=null}function Yi(r,t){var e,n=r.I;if(n)for(e=[];n;n=n.I)e.push(n);if(r=r.P,n=t.type||t,"string"==typeof t)t=new Wo(t,r);else if(t instanceof Wo)t.target=t.target||r;else{var i=t;pv(t=new Wo(n,r),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.g=e[o];i=yC(s,n,!0,t)&&i}if(i=yC(s=t.g=r,n,!0,t)&&i,i=yC(s,n,!1,t)&&i,e)for(o=0;o<e.length;o++)i=yC(s=t.g=e[o],n,!1,t)&&i}function yC(r,t,e,n){if(!(t=r.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ba&&s.capture==e){var a=s.listener,d=s.ha||s.src;s.ea&&aE(r.i,s),i=!1!==a.call(d,n)&&i}}return i&&!n.defaultPrevented}Eo(qi,_f),qi.prototype[Kp]=!0,qi.prototype.removeEventListener=function(r,t,e,n){KT(this,r,t,e,n)},qi.prototype.M=function(){if(qi.X.M.call(this),this.i){var t,r=this.i;for(t in r.g){for(var e=r.g[t],n=0;n<e.length;n++)dv(e[n]);delete r.g[t],r.h--}}this.I=null},qi.prototype.N=function(r,t,e,n){return this.i.add(String(r),t,!1,e,n)},qi.prototype.O=function(r,t,e,n){return this.i.add(String(r),t,!0,e,n)};var gv=hn.JSON.stringify;function iM(){var r=JT;let t=null;return r.g&&(t=r.g,r.g=r.g.next,r.g||(r.h=null),t.next=null),t}var _C,YT=new class{constructor(r,t){this.i=r,this.j=t,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new sM,r=>r.reset());class sM{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function aM(r){hn.setTimeout(()=>{throw r},0)}function ZT(r,t){_C||function QT(){var r=hn.Promise.resolve(void 0);_C=function(){r.then(lH)}}(),CC||(_C(),CC=!0),JT.add(r,t)}var CC=!1,JT=new class oM{constructor(){this.h=this.g=null}add(t,e){const n=YT.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function lH(){for(var r;r=iM();){try{r.h.call(r.g)}catch(e){aM(e)}var t=YT;t.j(r),100>t.h&&(t.h++,r.next=t.g,t.g=r)}CC=!1}function mv(r,t){qi.call(this),this.h=r||1,this.g=t||hn,this.j=_r(this.lb,this),this.l=Date.now()}function XT(r){r.ca=!1,r.R&&(r.g.clearTimeout(r.R),r.R=null)}function Yp(r,t,e){if("function"==typeof r)e&&(r=_r(r,e));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=_r(r.handleEvent,r)}return 2147483647<Number(t)?-1:hn.setTimeout(r,t||0)}function eR(r){r.g=Yp(()=>{r.g=null,r.i&&(r.i=!1,eR(r))},r.j);const t=r.h;r.h=null,r.m.apply(null,t)}Eo(mv,qi),(Bt=mv.prototype).ca=!1,Bt.R=null,Bt.lb=function(){if(this.ca){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-r):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Yi(this,"tick"),this.ca&&(XT(this),this.start()))}},Bt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Bt.M=function(){mv.X.M.call(this),XT(this),delete this.g};class lM extends _f{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:eR(this)}M(){super.M(),this.g&&(hn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wf(r){_f.call(this),this.h=r,this.g={}}Eo(wf,_f);var tR=[];function Ja(r,t,e,n){Array.isArray(e)||(e&&(tR[0]=e.toString()),e=tR);for(var i=0;i<e.length;i++){var o=zT(t,e[i],n||r.handleEvent,!1,r.h||r);if(!o)break;r.g[o.key]=o}}function Zp(r){hv(r.g,function(t,e){this.g.hasOwnProperty(e)&&uE(t)},r),r.g={}}function Zi(){this.g=!0}function bo(r,t,e,n){r.info(function(){return"XMLHTTP TEXT ("+t+"): "+function Qp(r,t){if(!r.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(r=0;r<e.length;r++)if(Array.isArray(e[r])){var n=e[r];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return gv(e)}catch{return t}}(r,e)+(n?" "+n:"")})}wf.prototype.M=function(){wf.X.M.call(this),Zp(this)},wf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zi.prototype.Aa=function(){this.g=!1},Zi.prototype.info=function(){};var Da={},Ef=null;function tc(){return Ef=Ef||new qi}function bf(r){Wo.call(this,Da.Pa,r)}function tu(r){const t=tc();Yi(t,new bf(t))}function Df(r,t){Wo.call(this,Da.STAT_EVENT,r),this.stat=t}function Ai(r){const t=tc();Yi(t,new Df(t,r))}function Tf(r,t){Wo.call(this,Da.Qa,r),this.size=t}function Jp(r,t){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return hn.setTimeout(function(){r()},t)}Da.Pa="serverreachability",Eo(bf,Wo),Da.STAT_EVENT="statevent",Eo(Df,Wo),Da.Qa="timingevent",Eo(Tf,Wo);var vv={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},pE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function SC(){}function mE(){}SC.prototype.h=null;var vE,Xp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function EC(){Wo.call(this,"d")}function bC(){Wo.call(this,"c")}function DC(){}function eg(r,t,e,n){this.l=r,this.j=t,this.m=e,this.U=n||1,this.S=new wf(this),this.O=rR,this.T=new mv(r=iE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new nR}function nR(){this.i=null,this.g="",this.h=!1}Eo(EC,Wo),Eo(bC,Wo),Eo(DC,SC),DC.prototype.g=function(){return new XMLHttpRequest},DC.prototype.i=function(){return{}},vE=new DC;var rR=45e3,yv={},tg={};function yE(r,t,e){r.K=1,r.v=rg(nu(t)),r.s=e,r.P=!0,_v(r,null)}function _v(r,t){r.F=Date.now(),md(r),r.A=nu(r.v);var e=r.A,n=r.U;Array.isArray(n)||(n=[String(n)]),fR(e.i,"t",n),r.C=0,e=r.l.H,r.h=new nR,r.g=UE(r.l,e?t:null,!r.s),0<r.N&&(r.L=new lM(_r(r.La,r,r.g),r.N)),Ja(r.S,r.g,"readystatechange",r.ib),t=r.H?eu(r.H):{},r.s?(r.u||(r.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",r.g.da(r.A,r.u,r.s,t)):(r.u="GET",r.g.da(r.A,r.u,null,t)),tu(),function Sf(r,t,e,n,i,o){r.info(function(){if(r.g)if(o)for(var s="",a=o.split("&"),d=0;d<a.length;d++){var f=a[d].split("=");if(1<f.length){var g=f[0];f=f[1];var C=g.split("_");s=2<=C.length&&"type"==C[1]?s+(g+"=")+f+"&":s+(g+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+t+"\n"+e+"\n"+s})}(r.j,r.u,r.A,r.m,r.U,r.s)}function Cv(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Da}function TC(r,t,e){let i,n=!0;for(;!r.I&&r.C<e.length;){if(i=uM(r,e),i==tg){4==t&&(r.o=4,Ai(14),n=!1),bo(r.j,r.m,null,"[Incomplete Response]");break}if(i==yv){r.o=4,Ai(15),bo(r.j,r.m,e,"[Invalid Chunk]"),n=!1;break}bo(r.j,r.m,i,null),RC(r,i)}Cv(r)&&i!=tg&&i!=yv&&(r.h.g="",r.C=0),4!=t||0!=e.length||r.h.h||(r.o=1,Ai(16),n=!1),r.i=r.i&&n,n?0<e.length&&!r.$&&(r.$=!0,(t=r.l).g==r&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),PC(t),t.K=!0,Ai(11))):(bo(r.j,r.m,e,"[Invalid Chunked Response]"),nc(r),ng(r))}function uM(r,t){var e=r.C,n=t.indexOf("\n",e);return-1==n?tg:(e=Number(t.substring(e,n)),isNaN(e)?yv:(n+=1)+e>t.length?tg:(t=t.substr(n,e),r.C=n+e,t))}function md(r){r.V=Date.now()+r.O,wv(r,r.O)}function wv(r,t){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Jp(_r(r.gb,r),t)}function Sv(r){r.B&&(hn.clearTimeout(r.B),r.B=null)}function ng(r){0==r.l.G||r.I||Pv(r.l,r)}function nc(r){Sv(r);var t=r.L;t&&"function"==typeof t.na&&t.na(),r.L=null,XT(r.T),Zp(r.S),r.g&&(t=r.g,r.g=null,t.abort(),t.na())}function RC(r,t){try{var e=r.l;if(0!=e.G&&(e.g==r||DE(e.h,r)))if(!r.J&&DE(e.h,r)&&3==e.G){try{var n=e.Fa.g.parse(t)}catch{n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<r.F))break e;ug(e),sg(e)}kE(e),Ai(18)}}else e.Ba=i[1],0<e.Ba-e.T&&37500>i[2]&&e.L&&0==e.A&&!e.v&&(e.v=Jp(_r(e.cb,e),6e3));if(1>=dM(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else Cd(e,11)}else if((r.J||e.g==r)&&ug(e),!dC(t))for(i=e.Fa.g.parse(t),t=0;t<i.length;t++){let f=i[t];if(e.T=f[0],f=f[1],2==e.G)if("c"==f[0]){e.I=f[1],e.ka=f[2];const g=f[3];null!=g&&(e.ma=g,e.j.info("VER="+e.ma));const C=f[4];null!=C&&(e.Ca=C,e.j.info("SVER="+e.Ca));const E=f[5];null!=E&&"number"==typeof E&&0<E&&(e.J=n=1.5*E,e.j.info("backChannelRequestTimeoutMs_="+n)),n=e;const T=r.g;if(T){const I=T.g?T.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var o=n.h;o.g||-1==I.indexOf("spdy")&&-1==I.indexOf("quic")&&-1==I.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(TE(o,o.h),o.h=null))}if(n.D){const M=T.g?T.g.getResponseHeader("X-HTTP-Session-Id"):null;M&&(n.za=M,Gr(n.F,n.D,M))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-r.F,e.j.info("Handshake RTT: "+e.P+"ms"));var s=r;if((n=e).sa=BE(n,n.H?n.ka:null,n.V),s.J){RE(n.h,s);var a=s,d=n.J;d&&a.setTimeout(d),a.B&&(Sv(a),md(a)),n.g=s}else Av(n);0<e.i.length&&AC(e)}else"stop"!=f[0]&&"close"!=f[0]||Cd(e,7);else 3==e.G&&("stop"==f[0]||"close"==f[0]?"stop"==f[0]?Cd(e,7):FE(e):"noop"!=f[0]&&e.l&&e.l.wa(f),e.A=0)}tu()}catch{}}function CE(r,t){if(r.forEach&&"function"==typeof r.forEach)r.forEach(t,void 0);else if(uC(r)||"string"==typeof r)Array.prototype.forEach.call(r,t,void 0);else for(var e=function _E(r){if(r.oa&&"function"==typeof r.oa)return r.oa();if(!r.W||"function"!=typeof r.W){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(uC(r)||"string"==typeof r){var t=[];r=r.length;for(var e=0;e<r;e++)t.push(e);return t}t=[],e=0;for(const n in r)t[e++]=n;return t}}}(r),n=function iR(r){if(r.W&&"function"==typeof r.W)return r.W();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(uC(r)){for(var t=[],e=r.length,n=0;n<e;n++)t.push(r[n]);return t}for(n in t=[],e=0,r)t[e++]=r[n];return t}(r),i=n.length,o=0;o<i;o++)t.call(void 0,n[o],e&&e[o],r)}(Bt=eg.prototype).setTimeout=function(r){this.O=r},Bt.ib=function(r){r=r.target;const t=this.L;t&&3==Qi(r)?t.l():this.La(r)},Bt.La=function(r){try{if(r==this.g)e:{const g=Qi(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>g)&&(3!=g||iE||this.g&&(this.h.h||this.g.fa()||NE(this.g)))){this.I||4!=g||7==t||tu(),Sv(this);var e=this.g.aa();this.Y=e;t:if(Cv(this)){var n=NE(this.g);r="";var i=n.length,o=4==Qi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){nc(this),ng(this);var s="";break t}this.h.i=new hn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,r+=this.h.i.decode(n[t],{stream:o&&t==i-1});n.splice(0,i),this.h.g+=r,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==e,function wC(r,t,e,n,i,o,s){r.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.U,g,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,d=this.g;if((a=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dC(a)){var f=a;break t}}f=null}if(!(e=f)){this.i=!1,this.o=3,Ai(12),nc(this),ng(this);break e}bo(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,RC(this,e)}this.P?(TC(this,g,s),iE&&this.i&&3==g&&(Ja(this.S,this.T,"tick",this.hb),this.T.start())):(bo(this.j,this.m,s,null),RC(this,s)),4==g&&nc(this),this.i&&!this.I&&(4==g?Pv(this.l,this):(this.i=!1,md(this)))}else 400==e&&0<s.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),nc(this),ng(this)}}}catch{}},Bt.hb=function(){if(this.g){var r=Qi(this.g),t=this.g.fa();this.C<t.length&&(Sv(this),TC(this,r,t),this.i&&4!=r&&md(this))}},Bt.cancel=function(){this.I=!0,nc(this)},Bt.gb=function(){this.B=null;const r=Date.now();0<=r-this.V?(function fE(r,t){r.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(tu(),Ai(17)),nc(this),this.o=2,ng(this)):wv(this,this.V-r)};var oR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vd(r,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof vd){this.h=void 0!==t?t:r.h,Ev(this,r.j),this.s=r.s,this.g=r.g,OC(this,r.m),this.l=r.l,t=r.i;var e=new og;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),wE(this,e),this.o=r.o}else r&&(e=String(r).match(oR))?(this.h=!!t,Ev(this,e[1]||"",!0),this.s=yd(e[2]||""),this.g=yd(e[3]||"",!0),OC(this,e[4]),this.l=yd(e[5]||"",!0),wE(this,e[6]||"",!0),this.o=yd(e[7]||"")):(this.h=!!t,this.i=new og(null,this.h))}function nu(r){return new vd(r)}function Ev(r,t,e){r.j=e?yd(t,!0):t,r.j&&(r.j=r.j.replace(/:$/,""))}function OC(r,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);r.m=t}else r.m=null}function wE(r,t,e){t instanceof og?(r.i=t,function Rf(r,t){t&&!r.j&&(Xa(r),r.i=null,r.g.forEach(function(e,n){var i=n.toLowerCase();n!=i&&(rc(this,n),fR(this,i,e))},r)),r.j=t}(r.i,r.h)):(e||(t=ig(t,cR)),r.i=new og(t,r.h))}function Gr(r,t,e){r.i.set(t,e)}function rg(r){return Gr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function yd(r,t){return r?t?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function ig(r,t,e){return"string"==typeof r?(r=encodeURI(r).replace(t,aR),e&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function aR(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}vd.prototype.toString=function(){var r=[],t=this.j;t&&r.push(ig(t,SE,!0),":");var e=this.g;return(e||"file"==t)&&(r.push("//"),(t=this.s)&&r.push(ig(t,SE,!0),"@"),r.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&r.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&r.push("/"),r.push(ig(e,"/"==e.charAt(0)?uR:lR,!0))),(e=this.i.toString())&&r.push("?",e),(e=this.o)&&r.push("#",ig(e,dR)),r.join("")};var SE=/[#\/\?@]/g,lR=/[#\?:]/g,uR=/[#\?]/g,cR=/[#\?@]/g,dR=/#/g;function og(r,t){this.h=this.g=null,this.i=r||null,this.j=!!t}function Xa(r){r.g||(r.g=new Map,r.h=0,r.i&&function sR(r,t){if(r){r=r.split("&");for(var e=0;e<r.length;e++){var n=r[e].indexOf("="),i=null;if(0<=n){var o=r[e].substring(0,n);i=r[e].substring(n+1)}else o=r[e];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(r.i,function(t,e){r.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function rc(r,t){Xa(r),t=_d(r,t),r.g.has(t)&&(r.i=null,r.h-=r.g.get(t).length,r.g.delete(t))}function hR(r,t){return Xa(r),t=_d(r,t),r.g.has(t)}function fR(r,t,e){rc(r,t),0<e.length&&(r.i=null,r.g.set(_d(r,t),nE(e)),r.h+=e.length)}function _d(r,t){return t=String(t),r.j&&(t=t.toLowerCase()),t}function pR(r){this.l=r||bE,r=hn.PerformanceNavigationTiming?0<(r=hn.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(hn.g&&hn.g.Ga&&hn.g.Ga()&&hn.g.Ga().$b),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Bt=og.prototype).add=function(r,t){Xa(this),this.i=null,r=_d(this,r);var e=this.g.get(r);return e||this.g.set(r,e=[]),e.push(t),this.h+=1,this},Bt.forEach=function(r,t){Xa(this),this.g.forEach(function(e,n){e.forEach(function(i){r.call(t,i,n,this)},this)},this)},Bt.oa=function(){Xa(this);const r=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let n=0;n<t.length;n++){const i=r[n];for(let o=0;o<i.length;o++)e.push(t[n])}return e},Bt.W=function(r){Xa(this);let t=[];if("string"==typeof r)hR(this,r)&&(t=t.concat(this.g.get(_d(this,r))));else{r=Array.from(this.g.values());for(let e=0;e<r.length;e++)t=t.concat(r[e])}return t},Bt.set=function(r,t){return Xa(this),this.i=null,hR(this,r=_d(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[t]),this.h+=1,this},Bt.get=function(r,t){return r&&0<(r=this.W(r)).length?String(r[0]):t},Bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var n=t[e];const o=encodeURIComponent(String(n)),s=this.W(n);for(n=0;n<s.length;n++){var i=o;""!==s[n]&&(i+="="+encodeURIComponent(String(s[n]))),r.push(i)}}return this.i=r.join("&")};var bE=10;function cM(r){return!!r.h||!!r.g&&r.g.size>=r.j}function dM(r){return r.h?1:r.g?r.g.size:0}function DE(r,t){return r.h?r.h==t:!!r.g&&r.g.has(t)}function TE(r,t){r.g?r.g.add(t):r.h=t}function RE(r,t){r.h&&r.h==t?r.h=null:r.g&&r.g.has(t)&&r.g.delete(t)}function gR(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let t=r.i;for(const e of r.g.values())t=t.concat(e.D);return t}return nE(r.i)}function Ei(){}function mR(){this.g=new Ei}function hM(r,t,e){const n=e||"";try{CE(r,function(i,o){let s=i;zp(i)&&(s=gv(i)),t.push(n+o+"="+encodeURIComponent(s))})}catch(i){throw t.push(n+"type="+encodeURIComponent("_badmap")),i}}function bv(r,t,e,n,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(n)}catch{}}function Dv(r){this.l=r.ac||null,this.j=r.jb||!1}function Tv(r,t){qi.call(this),this.D=r,this.u=t,this.m=void 0,this.readyState=IC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pR.prototype.cancel=function(){if(this.i=gR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},Ei.prototype.stringify=function(r){return hn.JSON.stringify(r,void 0)},Ei.prototype.parse=function(r){return hn.JSON.parse(r,void 0)},Eo(Dv,SC),Dv.prototype.g=function(){return new Tv(this.l,this.j)},Dv.prototype.i=function(r){return function(){return r}}({}),Eo(Tv,qi);var IC=0;function Of(r){r.j.read().then(r.Ta.bind(r)).catch(r.ga.bind(r))}function Rv(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Ov(r)}function Ov(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Bt=Tv.prototype).open=function(r,t){if(this.readyState!=IC)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=t,this.readyState=1,Ov(this)},Bt.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(t.body=r),(this.D||hn).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rv(this)),this.readyState=IC},Bt.Wa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Ov(this)),this.g&&(this.readyState=3,Ov(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof hn.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Of(this)}else r.text().then(this.Va.bind(this),this.ga.bind(this))},Bt.Ta=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var t=r.value?r.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!r.done}))&&(this.response=this.responseText+=t)}r.done?Rv(this):Ov(this),3==this.readyState&&Of(this)}},Bt.Va=function(r){this.g&&(this.response=this.responseText=r,Rv(this))},Bt.Ua=function(r){this.g&&(this.response=r,Rv(this))},Bt.ga=function(){this.g&&Rv(this)},Bt.setRequestHeader=function(r,t){this.v.append(r,t)},Bt.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Bt.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],t=this.h.entries();for(var e=t.next();!e.done;)r.push((e=e.value)[0]+": "+e[1]),e=t.next();return r.join("\r\n")},Object.defineProperty(Tv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var vR=hn.JSON.parse;function ci(r){qi.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=OE,this.K=this.L=!1}Eo(ci,qi);var OE="",uH=/^https?$/i,IE=["POST","PUT"];function el(r,t){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=t,r.m=5,yR(r),Ks(r)}function yR(r){r.D||(r.D=!0,Yi(r,"complete"),Yi(r,"error"))}function PE(r){if(r.h&&typeof aC<"u"&&(!r.C[1]||4!=Qi(r)||2!=r.aa()))if(r.v&&4==Qi(r))Yp(r.Ha,0,r);else if(Yi(r,"readystatechange"),4==Qi(r)){r.h=!1;try{const a=r.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var n;if(n=0===a){var i=String(r.H).match(oR)[1]||null;if(!i&&hn.self&&hn.self.location){var o=hn.self.location.protocol;i=o.substr(0,o.length-1)}n=!uH.test(i?i.toLowerCase():"")}e=n}if(e)Yi(r,"complete"),Yi(r,"success");else{r.m=6;try{var s=2<Qi(r)?r.g.statusText:""}catch{s=""}r.j=s+" ["+r.aa()+"]",yR(r)}}finally{Ks(r)}}}function Ks(r,t){if(r.g){Ta(r);const e=r.g,n=r.C[0]?lC:null;r.g=null,r.C=null,t||Yi(r,"ready");try{e.onreadystatechange=n}catch{}}}function Ta(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(hn.clearTimeout(r.A),r.A=null)}function Qi(r){return r.g?r.g.readyState:0}function NE(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case OE:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function ME(r){let t="";return hv(r,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function xE(r,t,e){e:{for(n in e){var n=!1;break e}n=!0}n||(e=ME(e),"string"==typeof r?null!=e&&encodeURIComponent(String(e)):Gr(r,t,e))}function Iv(r,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[r]||t}function _R(r){this.Ca=0,this.i=[],this.j=new Zi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Iv("failFast",!1,r),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Iv("baseRetryDelayMs",5e3,r),this.bb=Iv("retryDelaySeedMs",1e4,r),this.$a=Iv("forwardChannelMaxRetries",2,r),this.ta=Iv("forwardChannelRequestTimeoutMs",2e4,r),this.ra=r&&r.xmlHttpFactory||void 0,this.Da=r&&r.Zb||!1,this.J=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.I="",this.h=new pR(r&&r.concurrentRequestLimit),this.Fa=new mR,this.O=r&&r.fastHandshake||!1,this.N=r&&r.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=r&&r.Xb||!1,r&&r.Aa&&this.j.Aa(),r&&r.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&r&&r.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function FE(r){if(ag(r),3==r.G){var t=r.U++,e=nu(r.F);Gr(e,"SID",r.I),Gr(e,"RID",t),Gr(e,"TYPE","terminate"),lg(r,e),(t=new eg(r,r.j,t,void 0)).K=2,t.v=rg(nu(e)),e=!1,hn.navigator&&hn.navigator.sendBeacon&&(e=hn.navigator.sendBeacon(t.v.toString(),"")),!e&&hn.Image&&((new Image).src=t.v,e=!0),e||(t.g=UE(t.l,null),t.g.da(t.v)),t.F=Date.now(),md(t)}HE(r)}function sg(r){r.g&&(PC(r),r.g.cancel(),r.g=null)}function ag(r){sg(r),r.u&&(hn.clearTimeout(r.u),r.u=null),ug(r),r.h.cancel(),r.m&&("number"==typeof r.m&&hn.clearTimeout(r.m),r.m=null)}function AC(r){cM(r.h)||r.m||(r.m=!0,ZT(r.Ja,r),r.C=0)}function wR(r,t){var e;e=t?t.m:r.U++;const n=nu(r.F);Gr(n,"SID",r.I),Gr(n,"RID",e),Gr(n,"AID",r.T),lg(r,n),r.o&&r.s&&xE(n,r.o,r.s),e=new eg(r,r.j,e,r.C+1),null===r.o&&(e.H=r.s),t&&(r.i=t.D.concat(r.i)),t=LE(r,e,1e3),e.setTimeout(Math.round(.5*r.ta)+Math.round(.5*r.ta*Math.random())),TE(r.h,e),yE(e,n,t)}function lg(r,t){r.ia&&hv(r.ia,function(e,n){Gr(t,n,e)}),r.l&&CE({},function(e,n){Gr(t,n,e)})}function LE(r,t,e){e=Math.min(r.i.length,e);var n=r.l?_r(r.l.Ra,r.l,r):null;e:{var i=r.i;let o=-1;for(;;){const s=["count="+e];-1==o?0<e?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let d=0;d<e;d++){let f=i[d].h;const g=i[d].g;if(f-=o,0>f)o=Math.max(0,i[d].h-100),a=!1;else try{hM(g,s,"req"+f+"_")}catch{n&&n(g)}}if(a){n=s.join("&");break e}}}return r=r.i.splice(0,e),t.D=r,n}function Av(r){r.g||r.u||(r.Z=1,ZT(r.Ia,r),r.A=0)}function kE(r){return!(r.g||r.u||3<=r.A||(r.Z++,r.u=Jp(_r(r.Ia,r),VE(r,r.A)),r.A++,0))}function PC(r){null!=r.B&&(hn.clearTimeout(r.B),r.B=null)}function GE(r){r.g=new eg(r,r.j,"rpc",r.Z),null===r.o&&(r.g.H=r.s),r.g.N=0;var t=nu(r.sa);Gr(t,"RID","rpc"),Gr(t,"SID",r.I),Gr(t,"CI",r.L?"0":"1"),Gr(t,"AID",r.T),Gr(t,"TYPE","xmlhttp"),lg(r,t),r.o&&r.s&&xE(t,r.o,r.s),r.J&&r.g.setTimeout(r.J);var e=r.g;r=r.ka,e.K=1,e.v=rg(nu(t)),e.s=null,e.P=!0,_v(e,r)}function ug(r){null!=r.v&&(hn.clearTimeout(r.v),r.v=null)}function Pv(r,t){var e=null;if(r.g==t){ug(r),PC(r),r.g=null;var n=2}else{if(!DE(r.h,t))return;e=t.D,RE(r.h,t),n=1}if(0!=r.G)if(r.pa=t.Y,t.i)if(1==n){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=r.C;Yi(n=tc(),new Tf(n,e)),AC(r)}else Av(r);else if(3==(i=t.o)||0==i&&0<r.pa||!(1==n&&function CR(r,t){return!(dM(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=t.D.concat(r.i),0):1==r.G||2==r.G||r.C>=(r.Za?0:r.$a)||(r.m=Jp(_r(r.Ja,r,t),VE(r,r.C)),r.C++,0)))}(r,t)||2==n&&kE(r)))switch(e&&0<e.length&&(t=r.h,t.i=t.i.concat(e)),i){case 1:Cd(r,5);break;case 4:Cd(r,10);break;case 3:Cd(r,6);break;default:Cd(r,2)}}function VE(r,t){let e=r.Xa+Math.floor(Math.random()*r.bb);return r.l||(e*=2),e*t}function Cd(r,t){if(r.j.info("Error code "+t),2==t){var e=null;r.l&&(e=null);var n=_r(r.kb,r);e||(e=new vd("//www.google.com/images/cleardot.gif"),hn.location&&"http"==hn.location.protocol||Ev(e,"https"),rg(e)),function fM(r,t){const e=new Zi;if(hn.Image){const n=new Image;n.onload=sv(bv,e,n,"TestLoadImage: loaded",!0,t),n.onerror=sv(bv,e,n,"TestLoadImage: error",!1,t),n.onabort=sv(bv,e,n,"TestLoadImage: abort",!1,t),n.ontimeout=sv(bv,e,n,"TestLoadImage: timeout",!1,t),hn.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=r}else t(!1)}(e.toString(),n)}else Ai(2);r.G=0,r.l&&r.l.va(t),HE(r),ag(r)}function HE(r){if(r.G=0,r.la=[],r.l){const t=gR(r.h);(0!=t.length||0!=r.i.length)&&(GT(r.la,t),GT(r.la,r.i),r.h.i.length=0,nE(r.i),r.i.length=0),r.l.ua()}}function BE(r,t,e){var n=e instanceof vd?nu(e):new vd(e,void 0);if(""!=n.g)t&&(n.g=t+"."+n.g),OC(n,n.m);else{var i=hn.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new vd(null,void 0);n&&Ev(o,n),t&&(o.g=t),i&&OC(o,i),e&&(o.l=e),n=o}return t=r.za,(e=r.D)&&t&&Gr(n,e,t),Gr(n,"VER",r.ma),lg(r,n),n}function UE(r,t,e){if(t&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ci(e&&r.Da&&!r.ra?new Dv({jb:!0}):r.ra)).Ka(r.H),t}function jE(){}function Nv(){if(es&&!(10<=Number(sH)))throw Error("Environmental error: no available transport.")}function Ts(r,t){qi.call(this),this.g=new _R(t),this.l=r,this.h=t&&t.messageUrlParams||null,r=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(r?r["X-WebChannel-Content-Type"]=t.messageContentType:r={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(r?r["X-WebChannel-Client-Profile"]=t.ya:r={"X-WebChannel-Client-Profile":t.ya}),this.g.S=r,(r=t&&t.Yb)&&!dC(r)&&(this.g.o=r),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!dC(t)&&(this.g.D=t,null!==(r=this.h)&&t in r&&t in(r=this.h)&&delete r[t]),this.j=new cg(this)}function SR(r){EC.call(this);var t=r.__sm__;if(t){e:{for(const e in t){r=e;break e}r=void 0}(this.i=r)&&(r=this.i,t=null!==t&&r in t?t[r]:void 0),this.data=t}else this.data=r}function WE(){bC.call(this),this.status=1}function cg(r){this.g=r}(Bt=ci.prototype).Ka=function(r){this.L=r},Bt.da=function(r,t,e,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);t=t?t.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vE.g(),this.C=function gE(r){return r.h||(r.h=r.i())}(this.u?this.u:vE),this.g.onreadystatechange=_r(this.Ha,this);try{this.F=!0,this.g.open(t,String(r),!0),this.F=!1}catch(o){return void el(this,o)}if(r=e||"",e=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)e.set(i,n[i]);else{if("function"!=typeof n.keys||"function"!=typeof n.get)throw Error("Unknown input type for opt_headers: "+String(n));for(const o of n.keys())e.set(o,n.get(o))}n=Array.from(e.keys()).find(o=>"content-type"==o.toLowerCase()),i=hn.FormData&&r instanceof hn.FormData,!(0<=tE(IE,t))||n||i||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of e)this.g.setRequestHeader(o,s);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ta(this),0<this.B&&((this.K=function AE(r){return es&&function gC(){return function JN(r){var t=eM;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=r(9)}(function(){let r=0;const t=HT(String(pC)).split("."),e=HT("9").split("."),n=Math.max(t.length,e.length);for(let s=0;0==r&&s<n;s++){var i=t[s]||"",o=e[s]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;r=av(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||av(0==i[2].length,0==o[2].length)||av(i[2],o[2]),i=i[3],o=o[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_r(this.qa,this)):this.A=Yp(this.qa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(o){el(this,o)}},Bt.qa=function(){typeof aC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yi(this,"timeout"),this.abort(8))},Bt.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,Yi(this,"complete"),Yi(this,"abort"),Ks(this))},Bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ks(this,!0)),ci.X.M.call(this)},Bt.Ha=function(){this.s||(this.F||this.v||this.l?PE(this):this.fb())},Bt.fb=function(){PE(this)},Bt.aa=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},Bt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Bt.Sa=function(r){if(this.g){var t=this.g.responseText;return r&&0==t.indexOf(r)&&(t=t.substring(r.length)),vR(t)}},Bt.Ea=function(){return this.m},Bt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Bt=_R.prototype).ma=8,Bt.G=1,Bt.Ja=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const i=new eg(this,this.j,r,void 0);let o=this.s;if(this.S&&(o?(o=eu(o),pv(o,this.S)):o=this.S),null!==this.o||this.N||(i.H=o,o=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var n=this.i[e];if(void 0===(n="__data__"in n.g&&"string"==typeof(n=n.g.__data__)?n.length:void 0))break;if(4096<(t+=n)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=LE(this,i,t),Gr(e=nu(this.F),"RID",r),Gr(e,"CVER",22),this.D&&Gr(e,"X-HTTP-Session-Id",this.D),lg(this,e),o&&(this.N?t="headers="+encodeURIComponent(String(ME(o)))+"&"+t:this.o&&xE(e,this.o,o)),TE(this.h,i),this.Ya&&Gr(e,"TYPE","init"),this.O?(Gr(e,"$req",t),Gr(e,"SID","null"),i.Z=!0,yE(i,e,null)):yE(i,e,t),this.G=2}}else 3==this.G&&(r?wR(this,r):0==this.i.length||cM(this.h)||wR(this))},Bt.Ia=function(){if(this.u=null,GE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var r=2*this.P;this.j.info("BP detection timer enabled: "+r),this.B=Jp(_r(this.eb,this),r)}},Bt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ai(10),sg(this),GE(this))},Bt.cb=function(){null!=this.v&&(this.v=null,sg(this),kE(this),Ai(19))},Bt.kb=function(r){r?(this.j.info("Successfully pinged google.com"),Ai(2)):(this.j.info("Failed to ping google.com"),Ai(1))},(Bt=jE.prototype).xa=function(){},Bt.wa=function(){},Bt.va=function(){},Bt.ua=function(){},Bt.Ra=function(){},Nv.prototype.g=function(r,t){return new Ts(r,t)},Eo(Ts,qi),Ts.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var r=this.g,t=this.l,e=this.h||void 0;Ai(0),r.V=t,r.ia=e||{},r.L=r.Y,r.F=BE(r,null,r.V),AC(r)},Ts.prototype.close=function(){FE(this.g)},Ts.prototype.u=function(r){var t=this.g;if("string"==typeof r){var e={};e.__data__=r,r=e}else this.v&&((e={}).__data__=gv(r),r=e);t.i.push(new class{constructor(r,t){this.h=r,this.g=t}}(t.ab++,r)),3==t.G&&AC(t)},Ts.prototype.M=function(){this.g.l=null,delete this.j,FE(this.g),delete this.g,Ts.X.M.call(this)},Eo(SR,EC),Eo(WE,bC),Eo(cg,jE),cg.prototype.xa=function(){Yi(this.g,"a")},cg.prototype.wa=function(r){Yi(this.g,new SR(r))},cg.prototype.va=function(r){Yi(this.g,new WE)},cg.prototype.ua=function(){Yi(this.g,"b")},Nv.prototype.createWebChannel=Nv.prototype.g,Ts.prototype.send=Ts.prototype.u,Ts.prototype.open=Ts.prototype.m,Ts.prototype.close=Ts.prototype.close,vv.NO_ERROR=0,vv.TIMEOUT=8,vv.HTTP_ERROR=6,pE.COMPLETE="complete",mE.EventType=Xp,Xp.OPEN="a",Xp.CLOSE="b",Xp.ERROR="c",Xp.MESSAGE="d",qi.prototype.listen=qi.prototype.N,ci.prototype.listenOnce=ci.prototype.O,ci.prototype.getLastError=ci.prototype.Oa,ci.prototype.getLastErrorCode=ci.prototype.Ea,ci.prototype.getStatus=ci.prototype.aa,ci.prototype.getResponseJson=ci.prototype.Sa,ci.prototype.getResponseText=ci.prototype.fa,ci.prototype.send=ci.prototype.da,ci.prototype.setWithCredentials=ci.prototype.Ka;var pM=Qa.createWebChannelTransport=function(){return new Nv},gM=Qa.getStatEventTarget=function(){return tc()},$E=Qa.ErrorCode=vv,mM=Qa.EventType=pE,vM=Qa.Event=Da,ER=Qa.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},yM=Qa.FetchXmlHttpFactory=Dv,NC=Qa.WebChannel=mE,_M=Qa.XhrIo=ci;const bR="@firebase/firestore";class co{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}co.UNAUTHENTICATED=new co(null),co.GOOGLE_CREDENTIALS=new co("google-credentials-uid"),co.FIRST_PARTY=new co("first-party-uid"),co.MOCK_USER=new co("mock-user");let dg="9.19.0";const wd=new Ds.Yd("@firebase/firestore");function zE(){return wd.logLevel}function Je(r,...t){if(wd.logLevel<=Ds.in.DEBUG){const e=t.map(MC);wd.debug(`Firestore (${dg}): ${r}`,...e)}}function di(r,...t){if(wd.logLevel<=Ds.in.ERROR){const e=t.map(MC);wd.error(`Firestore (${dg}): ${r}`,...e)}}function tl(r,...t){if(wd.logLevel<=Ds.in.WARN){const e=t.map(MC);wd.warn(`Firestore (${dg}): ${r}`,...e)}}function MC(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Nt(r="Unexpected state"){const t=`FIRESTORE (${dg}) INTERNAL ASSERTION FAILED: `+r;throw di(t),new Error(t)}function Wt(r,t){r||Nt()}function vt(r,t){return r}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends H.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Sd{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(co.UNAUTHENTICATED))}shutdown(){}}class SM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class hg{constructor(t){this.t=t,this.currentUser=co.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var n=this;let i=this.i;const o=f=>this.i!==i?(i=this.i,e(f)):Promise.resolve();let s=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pi,t.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const f=s;t.enqueueRetryable((0,Te.Z)(function*(){yield f.promise,yield o(n.currentUser)}))},d=f=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pi)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Wt("string"==typeof n.accessToken),new Sd(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Wt(null===t||"string"==typeof t),new co(t)}}class cH{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=co.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class KE{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new cH(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(co.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EM{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TR{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const n=o=>{null!=o.error&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.T;return this.T=o.token,Je("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>n(o))};const i=o=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Wt("string"==typeof e.token),this.T=e.token,new EM(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dH(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let n=0;n<r;n++)e[n]=Math.floor(256*Math.random());return e}class en{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=dH(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<e&&(n+=t.charAt(i[o]%t.length))}return n}}function gn(r,t){return r<t?-1:r>t?1:0}function fg(r,t,e){return r.length===t.length&&r.every((n,i)=>e(n,t[i]))}function RR(r){return r+"\0"}class hr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new We(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new We(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new We(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new We(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return hr.fromMillis(Date.now())}static fromDate(t){return hr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new hr(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?gn(this.nanoseconds,t.nanoseconds):gn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Kt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Kt(t)}static min(){return new Kt(new hr(0,0))}static max(){return new Kt(new hr(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ed{constructor(t,e,n){void 0===e?e=0:e>t.length&&Nt(),void 0===n?n=t.length-e:n>t.length-e&&Nt(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Ed.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ed?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const o=t.get(i),s=e.get(i);if(o<s)return-1;if(o>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Fn extends Ed{construct(t,e,n){return new Fn(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new We(ye.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(i=>i.length>0))}return new Fn(e)}static emptyPath(){return new Fn([])}}const hi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bi extends Ed{construct(t,e,n){return new bi(t,e,n)}static isValidIdentifier(t){return hi.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bi(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const o=()=>{if(0===n.length)throw new We(ye.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const a=t[i];if("\\"===a){if(i+1===t.length)throw new We(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[i+1];if("\\"!==d&&"."!==d&&"`"!==d)throw new We(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=d,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new We(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new bi(e)}static emptyPath(){return new bi([])}}class ft{constructor(t){this.path=t}static fromPath(t){return new ft(Fn.fromString(t))}static fromName(t){return new ft(Fn.fromString(t).popFirst(5))}static empty(){return new ft(Fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Fn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Fn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new Fn(t.slice()))}}class Mv{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}function qE(r){return r.fields.find(t=>2===t.kind)}function bd(r){return r.fields.filter(t=>2!==t.kind)}Mv.UNKNOWN_ID=-1;class xv{constructor(t,e){this.fieldPath=t,this.kind=e}}class Fv{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Fv(0,Do.min())}}function AR(r,t){const e=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Kt.fromTimestamp(1e9===n?new hr(e+1,0):new hr(e,n));return new Do(i,ft.empty(),t)}function PR(r){return new Do(r.readTime,r.key,-1)}class Do{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Do(Kt.min(),ft.empty(),-1)}static max(){return new Do(Kt.max(),ft.empty(),-1)}}function YE(r,t){let e=r.readTime.compareTo(t.readTime);return 0!==e?e:(e=ft.comparator(r.documentKey,t.documentKey),0!==e?e:gn(r.largestBatchId,t.largestBatchId))}const NR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function nl(r){return xC.apply(this,arguments)}function xC(){return xC=(0,Te.Z)(function*(r){if(r.code!==ye.FAILED_PRECONDITION||r.message!==NR)throw r;Je("LocalStore","Unexpectedly lost primary lease")}),xC.apply(this,arguments)}class me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new me((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(e,o).next(n,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof me?e:me.resolve(e)}catch(e){return me.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):me.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):me.reject(e)}static resolve(t){return new me((e,n)=>{e(t)})}static reject(t){return new me((e,n)=>{n(t)})}static waitFor(t){return new me((e,n)=>{let i=0,o=0,s=!1;t.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&e()},d=>n(d))}),s=!0,o===i&&e()})}static or(t){let e=me.resolve(!1);for(const n of t)e=e.next(i=>i?me.resolve(i):n());return e}static forEach(t,e){const n=[];return t.forEach((i,o)=>{n.push(e.call(this,i,o))}),this.waitFor(n)}static mapArray(t,e){return new me((n,i)=>{const o=t.length,s=new Array(o);let a=0;for(let d=0;d<o;d++){const f=d;e(t[f]).next(g=>{s[f]=g,++a,a===o&&n(s)},g=>i(g))}})}static doWhile(t,e){return new me((n,i)=>{const o=()=>{!0===t()?e().next(()=>{o()},i):n()};o()})}}class Lv{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.R=new Pi,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{e.error?this.R.reject(new ic(t,e.error)):this.R.resolve()},this.transaction.onerror=n=>{const i=FC(n.target.error);this.R.reject(new ic(t,i))}}static open(t,e,n,i){try{return new Lv(e,t.transaction(i,n))}catch(o){throw new ic(e,o)}}get v(){return this.R.promise}abort(t){t&&this.R.reject(t),this.aborted||(Je("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new DM(e)}}class rl{constructor(t,e,n){this.name=t,this.version=e,this.V=n,12.2===rl.S((0,H.z$)())&&di("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Je("SimpleDb","Removing database:",t),If(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,H.hl)())return!1;if(rl.C())return!0;const t=(0,H.z$)(),e=rl.S(t),n=0<e&&e<10,i=rl.N(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||o)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.k)}static O(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}$(t){var e=this;return(0,Te.Z)(function*(){return e.db||(Je("SimpleDb","Opening database:",e.name),e.db=yield new Promise((n,i)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=s=>{n(s.target.result)},o.onblocked=()=>{i(new ic(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new We(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new We(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new ic(t,a))},o.onupgradeneeded=s=>{Je("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',s.oldVersion),e.V.M(s.target.result,o.transaction,s.oldVersion,e.version).next(()=>{Je("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=n=>e.F(n)),e.db})()}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,n,i){var o=this;return(0,Te.Z)(function*(){const s="readonly"===e;let a=0;for(;;){++a;try{o.db=yield o.$(t);const d=Lv.open(o.db,t,s?"readonly":"readwrite",n),f=i(d).next(g=>(d.P(),g)).catch(g=>(d.abort(g),me.reject(g))).toPromise();return f.catch(()=>{}),yield d.v,f}catch(d){const f=d,g="FirebaseError"!==f.name&&a<3;if(Je("SimpleDb","Transaction failed with error:",f.message,"Retrying:",g),o.close(),!g)return Promise.reject(f)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class kv{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return If(this.L.delete())}}class ic extends We{constructor(t,e){super(ye.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Dd(r){return"IndexedDbTransactionError"===r.name}class DM{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Je("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),If(n)}add(t){return Je("SimpleDb","ADD",this.store.name,t,t),If(this.store.add(t))}get(t){return If(this.store.get(t)).next(e=>(void 0===e&&(e=null),Je("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Je("SimpleDb","DELETE",this.store.name,t),If(this.store.delete(t))}count(){return Je("SimpleDb","COUNT",this.store.name),If(this.store.count())}j(t,e){const n=this.options(t,e);if(n.index||"function"!=typeof this.store.getAll){const i=this.cursor(n),o=[];return this.W(i,(s,a)=>{o.push(a)}).next(()=>o)}{const i=this.store.getAll(n.range);return new me((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}H(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new me((i,o)=>{n.onerror=s=>{o(s.target.error)},n.onsuccess=s=>{i(s.target.result)}})}J(t,e){Je("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.Y=!1;const i=this.cursor(n);return this.W(i,(o,s,a)=>a.delete())}Z(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.W(i,e)}X(t){const e=this.cursor({});return new me((n,i)=>{e.onerror=o=>{const s=FC(o.target.error);i(s)},e.onsuccess=o=>{const s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():n()}):n()}})}W(t,e){const n=[];return new me((i,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const d=new kv(a),f=e(a.primaryKey,a.value,d);if(f instanceof me){const g=f.catch(C=>(d.done(),me.reject(C)));n.push(g)}d.isDone?i():null===d.K?a.continue():a.continue(d.K)}}).next(()=>me.waitFor(n))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.Y?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function If(r){return new me((t,e)=>{r.onsuccess=n=>{t(n.target.result)},r.onerror=n=>{const i=FC(n.target.error);e(i)}})}let ZE=!1;function FC(r){const t=rl.S((0,H.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(e)>=0){const n=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ZE||(ZE=!0,setTimeout(()=>{throw n},0)),n}}return r}class xR{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){var e=this;Je("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Te.Z)(function*(){e.task=null;try{Je("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(n){Dd(n)?Je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield nl(n)}yield e.et(6e4)}))}}class TM{constructor(t,e){this.localStore=t,this.persistence=e}nt(t=50){var e=this;return(0,Te.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>e.st(n,t))})()}st(t,e){const n=new Set;let i=e,o=!0;return me.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(null!==s&&!n.has(s))return Je("IndexBackiller",`Processing collection: ${s}`),this.it(t,s,i).next(a=>{i-=a,n.add(s)});o=!1})).next(()=>e-i)}it(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,n).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.rt(i,o)).next(a=>(Je("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>s.size)}))}rt(t,e){let n=t;return e.changes.forEach((i,o)=>{const s=PR(o);YE(s,n)>0&&(n=s)}),new Do(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Rs=(()=>{class r{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return r.ct=-1,r})();function Gv(r){return null==r}function Vv(r){return 0===r&&1/r==-1/0}function RM(r){return"number"==typeof r&&Number.isInteger(r)&&!Vv(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Os(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=OM(t)),t=hH(r.get(e),t);return OM(t)}function hH(r,t){let e=t;const n=r.length;for(let i=0;i<n;i++){const o=r.charAt(i);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function OM(r){return r+"\x01\x01"}function il(r){const t=r.length;if(Wt(t>=2),2===t)return Wt("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Fn.emptyPath();const e=t-2,n=[];let i="";for(let o=0;o<t;){const s=r.indexOf("\x01",o);switch((s<0||s>e)&&Nt(),r.charAt(s+1)){case"\x01":const a=r.substring(o,s);let d;0===i.length?d=a:(i+=a,d=i,i=""),n.push(d);break;case"\x10":i+=r.substring(o,s),i+="\0";break;case"\x11":i+=r.substring(o,s+1);break;default:Nt()}o=s+2}return new Fn(n)}const Hv=["userId","batchId"];function LC(r,t){return[r,Os(t)]}function FR(r,t,e){return[r,Os(t),e]}const LR={},Bv=["prefixPath","collectionGroup","readTime","documentId"],IM=["prefixPath","collectionGroup","documentId"],AM=["collectionGroup","readTime","prefixPath","documentId"],PM=["canonicalId","targetId"],NM=["targetId","path"],fH=["path","targetId"],MM=["collectionId","parent"],kR=["indexId","uid"],xM=["uid","sequenceNumber"],FM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Uv=["indexId","uid","orderedDocumentKey"],LM=["userId","collectionPath","documentId"],GR=["userId","collectionPath","largestBatchId"],kM=["userId","collectionGroup","largestBatchId"],QE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GM=[...QE,"documentOverlays"],JE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],VR=JE,XE=[...VR,"indexConfiguration","indexState","indexEntries"];class eb extends MR{constructor(t,e){super(),this.at=t,this.currentSequenceNumber=e}}function Ji(r,t){const e=vt(r);return rl.O(e.at,t)}function tb(r){let t=0;for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function Af(r,t){for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function HR(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}class fi{constructor(t,e){this.comparator=t,this.root=e||To.EMPTY}insert(t,e){return new fi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,To.BLACK,null,null))}remove(t){return new fi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,To.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new pg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new pg(this.root,t,this.comparator,!1)}getReverseIterator(){return new pg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new pg(this.root,t,this.comparator,!0)}}class pg{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?n(t.key,e):1,e&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class To{constructor(t,e,n,i,o){this.key=t,this.value=e,this.color=n??To.RED,this.left=i??To.EMPTY,this.right=o??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,o){return new To(t??this.key,e??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const o=n(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===o?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return To.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nt();const t=this.left.check();if(t!==this.right.check())throw Nt();return t+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1,To.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt()}get value(){throw Nt()}get color(){throw Nt()}get left(){throw Nt()}get right(){throw Nt()}copy(r,t,e,n,i){return this}insert(r,t,e){return new To(r,t)}remove(r,t){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(t){this.comparator=t,this.data=new fi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new BR(this.data.getIterator())}getIteratorFrom(t){return new BR(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof fr)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=n.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new fr(this.comparator);return e.data=t,e}}class BR{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gg(r){return r.hasNext()?r.getNext():void 0}class Is{constructor(t){this.fields=t,t.sort(bi.comparator)}static empty(){return new Is([])}unionWith(t){let e=new fr(bi.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Is(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return fg(this.fields,t.fields,(e,n)=>e.isEqual(n))}}class VM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(n){try{return atob(n)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new VM("Invalid base64 string: "+i):i}}(t);return new Xi(e)}static fromUint8Array(t){const e=function(n){let i="";for(let o=0;o<n.length;++o)i+=String.fromCharCode(n[o]);return i}(t);return new Xi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return gn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Xi.EMPTY_BYTE_STRING=new Xi("");const BM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Td(r){if(Wt(!!r),"string"==typeof r){let t=0;const e=BM.exec(r);if(Wt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Xr(r.seconds),nanos:Xr(r.nanos)}}function Xr(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function Rd(r){return"string"==typeof r?Xi.fromBase64String(r):Xi.fromUint8Array(r)}function kC(r){var t,e;return"server_timestamp"===(null===(e=((null===(t=r?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function UR(r){const t=r.mapValue.fields.__previous_value__;return kC(t)?UR(t):t}function Pf(r){const t=Td(r.mapValue.fields.__local_write_time__.timestampValue);return new hr(t.seconds,t.nanos)}class jR{constructor(t,e,n,i,o,s,a,d){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.useFetchStreams=d}}class Od{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Od("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Od&&t.projectId===this.projectId&&t.database===this.database}}const Id={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mg={nullValue:"NULL_VALUE"};function oc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?kC(r)?4:zR(r)?9007199254740991:10:Nt()}function ol(r,t){if(r===t)return!0;const e=oc(r);if(e!==oc(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Pf(r).isEqual(Pf(t));case 3:return function(n,i){if("string"==typeof n.timestampValue&&"string"==typeof i.timestampValue&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const o=Td(n.timestampValue),s=Td(i.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return i=t,Rd(r.bytesValue).isEqual(Rd(i.bytesValue));case 7:return r.referenceValue===t.referenceValue;case 8:return function(n,i){return Xr(n.geoPointValue.latitude)===Xr(i.geoPointValue.latitude)&&Xr(n.geoPointValue.longitude)===Xr(i.geoPointValue.longitude)}(r,t);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Xr(n.integerValue)===Xr(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const o=Xr(n.doubleValue),s=Xr(i.doubleValue);return o===s?Vv(o)===Vv(s):isNaN(o)&&isNaN(s)}return!1}(r,t);case 9:return fg(r.arrayValue.values||[],t.arrayValue.values||[],ol);case 10:return function(n,i){const o=n.mapValue.fields||{},s=i.mapValue.fields||{};if(tb(o)!==tb(s))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(void 0===s[a]||!ol(o[a],s[a])))return!1;return!0}(r,t);default:return Nt()}var i}function Nf(r,t){return void 0!==(r.values||[]).find(e=>ol(e,t))}function Ad(r,t){if(r===t)return 0;const e=oc(r),n=oc(t);if(e!==n)return gn(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return gn(r.booleanValue,t.booleanValue);case 2:return function(i,o){const s=Xr(i.integerValue||i.doubleValue),a=Xr(o.integerValue||o.doubleValue);return s<a?-1:s>a?1:s===a?0:isNaN(s)?isNaN(a)?0:-1:1}(r,t);case 3:return WR(r.timestampValue,t.timestampValue);case 4:return WR(Pf(r),Pf(t));case 5:return gn(r.stringValue,t.stringValue);case 6:return function(i,o){const s=Rd(i),a=Rd(o);return s.compareTo(a)}(r.bytesValue,t.bytesValue);case 7:return function(i,o){const s=i.split("/"),a=o.split("/");for(let d=0;d<s.length&&d<a.length;d++){const f=gn(s[d],a[d]);if(0!==f)return f}return gn(s.length,a.length)}(r.referenceValue,t.referenceValue);case 8:return function(i,o){const s=gn(Xr(i.latitude),Xr(o.latitude));return 0!==s?s:gn(Xr(i.longitude),Xr(o.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return function(i,o){const s=i.values||[],a=o.values||[];for(let d=0;d<s.length&&d<a.length;++d){const f=Ad(s[d],a[d]);if(f)return f}return gn(s.length,a.length)}(r.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===Id.mapValue&&o===Id.mapValue)return 0;if(i===Id.mapValue)return 1;if(o===Id.mapValue)return-1;const s=i.fields||{},a=Object.keys(s),d=o.fields||{},f=Object.keys(d);a.sort(),f.sort();for(let g=0;g<a.length&&g<f.length;++g){const C=gn(a[g],f[g]);if(0!==C)return C;const E=Ad(s[a[g]],d[f[g]]);if(0!==E)return E}return gn(a.length,f.length)}(r.mapValue,t.mapValue);default:throw Nt()}}function WR(r,t){if("string"==typeof r&&"string"==typeof t&&r.length===t.length)return gn(r,t);const e=Td(r),n=Td(t),i=gn(e.seconds,n.seconds);return 0!==i?i:gn(e.nanos,n.nanos)}function Pd(r){return nb(r)}function nb(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const i=Td(n);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?Rd(r.bytesValue).toBase64():"referenceValue"in r?ft.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(t=r.geoPointValue).latitude},${t.longitude})`:"arrayValue"in r?function(n){let i="[",o=!0;for(const s of n.values||[])o?o=!1:i+=",",i+=nb(s);return i+"]"}(r.arrayValue):"mapValue"in r?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",s=!0;for(const a of i)s?s=!1:o+=",",o+=`${a}:${nb(n.fields[a])}`;return o+"}"}(r.mapValue):Nt();var t}function Nd(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Md(r){return!!r&&"integerValue"in r}function vg(r){return!!r&&"arrayValue"in r}function $R(r){return!!r&&"nullValue"in r}function UM(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function jv(r){return!!r&&"mapValue"in r}function Mf(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return Af(r.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Mf(n)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Mf(r.arrayValue.values[e]);return t}return Object.assign({},r)}function zR(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function rb(r){return"nullValue"in r?mg:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Nd(Od.empty(),ft.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Nt()}function jM(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Nd(Od.empty(),ft.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Id:Nt()}function ib(r,t){const e=Ad(r.value,t.value);return 0!==e?e:r.inclusive&&!t.inclusive?-1:!r.inclusive&&t.inclusive?1:0}function GC(r,t){const e=Ad(r.value,t.value);return 0!==e?e:r.inclusive&&!t.inclusive?1:!r.inclusive&&t.inclusive?-1:0}class eo{constructor(t){this.value=t}static empty(){return new eo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!jv(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Mf(e)}setAll(t){let e=bi.emptyPath(),n={},i=[];t.forEach((s,a)=>{if(!e.isImmediateParentOf(a)){const d=this.getFieldsMap(e);this.applyChanges(d,n,i),n={},i=[],e=a.popLast()}s?n[a.lastSegment()]=Mf(s):i.push(a.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,n,i)}delete(t){const e=this.field(t.popLast());jv(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ol(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];jv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Af(e,(i,o)=>t[i]=o);for(const i of n)delete t[i]}clone(){return new eo(Mf(this.value))}}function ob(r){const t=[];return Af(r.fields,(e,n)=>{const i=new bi([e]);if(jv(n)){const o=ob(n.mapValue).fields;if(0===o.length)t.push(i);else for(const s of o)t.push(i.child(s))}else t.push(i)}),new Is(t)}class Ar{constructor(t,e,n,i,o,s,a){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new Ar(t,0,Kt.min(),Kt.min(),Kt.min(),eo.empty(),0)}static newFoundDocument(t,e,n,i){return new Ar(t,1,e,Kt.min(),n,i,0)}static newNoDocument(t,e){return new Ar(t,2,e,Kt.min(),Kt.min(),eo.empty(),0)}static newUnknownDocument(t,e){return new Ar(t,3,e,Kt.min(),Kt.min(),eo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Kt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=eo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ar&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sc{constructor(t,e){this.position=t,this.inclusive=e}}function KR(r,t,e){let n=0;for(let i=0;i<r.position.length;i++){const o=t[i],s=r.position[i];if(n=o.field.isKeyField()?ft.comparator(ft.fromName(s.referenceValue),e.key):Ad(s,e.data.field(o.field)),"desc"===o.dir&&(n*=-1),0!==n)break}return n}function qR(r,t){if(null===r)return null===t;if(null===t||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!ol(r.position[e],t.position[e]))return!1;return!0}class yg{constructor(t,e="asc"){this.field=t,this.dir=e}}function WM(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class sb{}class jn extends sb{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new JR(t,e,n):"array-contains"===e?new KM(t,n):"in"===e?new eO(t,n):"not-in"===e?new qM(t,n):"array-contains-any"===e?new Wv(t,n):new jn(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new $M(t,n):new zM(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Ad(e,this.value)):null!==e&&oc(this.value)===oc(e)&&this.matchesComparison(Ad(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class rr extends sb{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new rr(t,e)}matches(t){return _g(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt(e=>e.isInequality());return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function _g(r){return"and"===r.op}function ab(r){return"or"===r.op}function YR(r){return ZR(r)&&_g(r)}function ZR(r){for(const t of r.filters)if(t instanceof rr)return!1;return!0}function lb(r){if(r instanceof jn)return r.field.canonicalString()+r.op.toString()+Pd(r.value);if(YR(r))return r.filters.map(t=>lb(t)).join(",");{const t=r.filters.map(e=>lb(e)).join(",");return`${r.op}(${t})`}}function QR(r,t){return r instanceof jn?(e=r,(n=t)instanceof jn&&e.op===n.op&&e.field.isEqual(n.field)&&ol(e.value,n.value)):r instanceof rr?function(e,n){return n instanceof rr&&e.op===n.op&&e.filters.length===n.filters.length&&e.filters.reduce((i,o,s)=>i&&QR(o,n.filters[s]),!0)}(r,t):void Nt();var e,n}function ub(r,t){const e=r.filters.concat(t);return rr.create(e,r.op)}function cb(r){return r instanceof jn?`${(t=r).field.canonicalString()} ${t.op} ${Pd(t.value)}`:r instanceof rr?function(t){return t.op.toString()+" {"+t.getFilters().map(cb).join(" ,")+"}"}(r):"Filter";var t}class JR extends jn{constructor(t,e,n){super(t,e,n),this.key=ft.fromName(n.referenceValue)}matches(t){const e=ft.comparator(t.key,this.key);return this.matchesComparison(e)}}class $M extends jn{constructor(t,e){super(t,"in",e),this.keys=XR(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class zM extends jn{constructor(t,e){super(t,"not-in",e),this.keys=XR(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function XR(r,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(n=>ft.fromName(n.referenceValue))}class KM extends jn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return vg(e)&&Nf(e.arrayValue,this.value)}}class eO extends jn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Nf(this.value.arrayValue,e)}}class qM extends jn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Nf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Nf(this.value.arrayValue,e)}}class Wv extends jn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!vg(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>Nf(this.value.arrayValue,n))}}class tO{constructor(t,e=null,n=[],i=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ft=null}}function VC(r,t=null,e=[],n=[],i=null,o=null,s=null){return new tO(r,t,e,n,i,o,s)}function xd(r){const t=vt(r);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>lb(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>{return(i=n).field.canonicalString()+i.dir;var i}).join(","),Gv(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Pd(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Pd(n)).join(",")),t.ft=e}return t.ft}function Cg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<r.orderBy.length;e++)if(!WM(r.orderBy[e],t.orderBy[e]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let e=0;e<r.filters.length;e++)if(!QR(r.filters[e],t.filters[e]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!qR(r.startAt,t.startAt)&&qR(r.endAt,t.endAt)}function $v(r){return ft.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function zv(r,t){return r.filters.filter(e=>e instanceof jn&&e.field.isEqual(t))}function nO(r,t,e){let n=mg,i=!0;for(const o of zv(r,t)){let s=mg,a=!0;switch(o.op){case"<":case"<=":s=rb(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=mg}ib({value:n,inclusive:i},{value:s,inclusive:a})<0&&(n=s,i=a)}if(null!==e)for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(t)){const s=e.position[o];ib({value:n,inclusive:i},{value:s,inclusive:e.inclusive})<0&&(n=s,i=e.inclusive);break}return{value:n,inclusive:i}}function YM(r,t,e){let n=Id,i=!0;for(const o of zv(r,t)){let s=Id,a=!0;switch(o.op){case">=":case">":s=jM(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Id}GC({value:n,inclusive:i},{value:s,inclusive:a})>0&&(n=s,i=a)}if(null!==e)for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(t)){const s=e.position[o];GC({value:n,inclusive:i},{value:s,inclusive:e.inclusive})>0&&(n=s,i=e.inclusive);break}return{value:n,inclusive:i}}class ru{constructor(t,e=null,n=[],i=[],o=null,s="F",a=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=d,this.dt=null,this.wt=null}}function rO(r,t,e,n,i,o,s,a){return new ru(r,t,e,n,i,o,s,a)}function wg(r){return new ru(r)}function iO(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function db(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function Fd(r){for(const t of r.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function hb(r){return null!==r.collectionGroup}function ac(r){const t=vt(r);if(null===t.dt){t.dt=[];const e=Fd(t),n=db(t);if(null!==e&&null===n)e.isKeyField()||t.dt.push(new yg(e)),t.dt.push(new yg(bi.keyField(),"asc"));else{let i=!1;for(const o of t.explicitOrderBy)t.dt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new yg(bi.keyField(),o))}}}return t.dt}function jr(r){const t=vt(r);if(!t.wt)if("F"===t.limitType)t.wt=VC(t.path,t.collectionGroup,ac(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of ac(t))e.push(new yg(o.field,"desc"===o.dir?"asc":"desc"));const n=t.endAt?new sc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new sc(t.startAt.position,t.startAt.inclusive):null;t.wt=VC(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t.wt}function fb(r,t){t.getFirstInequalityField(),Fd(r);const e=r.filters.concat([t]);return new ru(r.path,r.collectionGroup,r.explicitOrderBy.slice(),e,r.limit,r.limitType,r.startAt,r.endAt)}function Sg(r,t,e){return new ru(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function lc(r,t){return Cg(jr(r),jr(t))&&r.limitType===t.limitType}function oO(r){return`${xd(jr(r))}|lt:${r.limitType}`}function pb(r){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>cb(n)).join(", ")}]`),Gv(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>{return`${(i=n).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Pd(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Pd(n)).join(",")),`Target(${e})`}(jr(r))}; limitType=${r.limitType})`}function Kv(r,t){return t.isFoundDocument()&&function(e,n){const i=n.key.path;return null!==e.collectionGroup?n.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):ft.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(r,t)&&function(e,n){for(const i of ac(e))if(!i.field.isKeyField()&&null===n.data.field(i.field))return!1;return!0}(r,t)&&function(e,n){for(const i of e.filters)if(!i.matches(n))return!1;return!0}(r,t)&&(n=t,!((e=r).startAt&&!function(i,o,s){const a=KR(i,o,s);return i.inclusive?a<=0:a<0}(e.startAt,ac(e),n)||e.endAt&&!function(i,o,s){const a=KR(i,o,s);return i.inclusive?a>=0:a>0}(e.endAt,ac(e),n)));var e,n}function qv(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Yv(r){return(t,e)=>{let n=!1;for(const i of ac(r)){const o=ZM(i,t,e);if(0!==o)return o;n=n||i.field.isKeyField()}return 0}}function ZM(r,t,e){const n=r.field.isKeyField()?ft.comparator(t.key,e.key):function(i,o,s){const a=o.data.field(i),d=s.data.field(i);return null!==a&&null!==d?Ad(a,d):Nt()}(r.field,t,e);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Nt()}}class Ld{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,o]of n)if(this.equalsFn(i,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Af(this.inner,(e,n)=>{for(const[i,o]of n)t(i,o)})}isEmpty(){return HR(this.inner)}size(){return this.innerSize}}const sO=new fi(ft.comparator);function ts(){return sO}const HC=new fi(ft.comparator);function Eg(...r){let t=HC;for(const e of r)t=t.insert(e.key,e);return t}function BC(r){let t=HC;return r.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ra(){return xf()}function gb(){return xf()}function xf(){return new Ld(r=>r.toString(),(r,t)=>r.isEqual(t))}const mb=new fi(ft.comparator),QM=new fr(ft.comparator);function En(...r){let t=QM;for(const e of r)t=t.add(e);return t}const JM=new fr(gn);function UC(){return JM}function vb(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vv(t)?"-0":t}}function jC(r){return{integerValue:""+r}}function yb(r,t){return RM(t)?jC(t):vb(r,t)}class Zv{constructor(){this._=void 0}}function aO(r,t,e){return r instanceof Ff?function(n,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(e,t):r instanceof kd?cO(r,t):r instanceof Gd?_b(r,t):function(n,i){const o=uO(n,i),s=Lf(o)+Lf(n._t);return Md(o)&&Md(n._t)?jC(s):vb(n.serializer,s)}(r,t)}function lO(r,t,e){return r instanceof kd?cO(r,t):r instanceof Gd?_b(r,t):e}function uO(r,t){return r instanceof Ni?Md(e=t)||(n=e)&&"doubleValue"in n?t:{integerValue:0}:null;var n,e}class Ff extends Zv{}class kd extends Zv{constructor(t){super(),this.elements=t}}function cO(r,t){const e=dO(t);for(const n of r.elements)e.some(i=>ol(i,n))||e.push(n);return{arrayValue:{values:e}}}class Gd extends Zv{constructor(t){super(),this.elements=t}}function _b(r,t){let e=dO(t);for(const n of r.elements)e=e.filter(i=>!ol(i,n));return{arrayValue:{values:e}}}class Ni extends Zv{constructor(t,e){super(),this.serializer=t,this._t=e}}function Lf(r){return Xr(r.integerValue||r.doubleValue)}function dO(r){return vg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Qv{constructor(t,e){this.field=t,this.transform=e}}class gH{constructor(t,e){this.version=t,this.transformResults=e}}class Vr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Vr}static exists(t){return new Vr(void 0,t)}static updateTime(t){return new Vr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bg(r,t){return void 0!==r.updateTime?t.isFoundDocument()&&t.version.isEqual(r.updateTime):void 0===r.exists||r.exists===t.isFoundDocument()}class Vd{}function hO(r,t){if(!r.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return r.isNoDocument()?new cc(r.key,Vr.none()):new Dg(r.key,r.data,Vr.none());{const e=r.data,n=eo.empty();let i=new fr(bi.comparator);for(let o of t.fields)if(!i.has(o)){let s=e.field(o);null===s&&o.length>1&&(o=o.popLast(),s=e.field(o)),null===s?n.delete(o):n.set(o,s),i=i.add(o)}return new uc(r.key,n,new Is(i.toArray()),Vr.none())}}function Cb(r,t,e){r instanceof Dg?function(n,i,o){const s=n.value.clone(),a=wb(n.fieldTransforms,i,o.transformResults);s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(r,t,e):r instanceof uc?function(n,i,o){if(!bg(n.precondition,i))return void i.convertToUnknownDocument(o.version);const s=wb(n.fieldTransforms,i,o.transformResults),a=i.data;a.setAll(WC(n)),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(r,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function Jv(r,t,e,n){return r instanceof Dg?function(i,o,s,a){if(!bg(i.precondition,o))return s;const d=i.value.clone(),f=Sb(i.fieldTransforms,a,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(r,t,e,n):r instanceof uc?function(i,o,s,a){if(!bg(i.precondition,o))return s;const d=Sb(i.fieldTransforms,a,o),f=o.data;return f.setAll(WC(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===s?null:s.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(r,t,e,n):(s=e,bg(r.precondition,o=t)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s);var o,s}function fO(r,t){let e=null;for(const n of r.fieldTransforms){const i=t.data.field(n.field),o=uO(n.transform,i||null);null!=o&&(null===e&&(e=eo.empty()),e.set(n.field,o))}return e||null}function pO(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&(n=t.fieldTransforms,!!(void 0===(e=r.fieldTransforms)&&void 0===n||e&&n&&fg(e,n,(i,o)=>function pH(r,t){return r.field.isEqual(t.field)&&(n=t.transform,(e=r.transform)instanceof kd&&n instanceof kd||e instanceof Gd&&n instanceof Gd?fg(e.elements,n.elements,ol):e instanceof Ni&&n instanceof Ni?ol(e._t,n._t):e instanceof Ff&&n instanceof Ff);var e,n}(i,o))))&&(0===r.type?r.value.isEqual(t.value):1!==r.type||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask));var e,n}class Dg extends Vd{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class uc extends Vd{constructor(t,e,n,i,o=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function WC(r){const t=new Map;return r.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const n=r.data.field(e);t.set(e,n)}}),t}function wb(r,t,e){const n=new Map;Wt(r.length===e.length);for(let i=0;i<e.length;i++){const o=r[i],s=o.transform,a=t.data.field(o.field);n.set(o.field,lO(s,a,e[i]))}return n}function Sb(r,t,e){const n=new Map;for(const i of r){const o=i.transform,s=e.data.field(i.field);n.set(i.field,aO(o,s,t))}return n}class cc extends Vd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xv extends Vd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gO{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&Cb(o,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Jv(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Jv(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=gb();return this.mutations.forEach(i=>{const o=t.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=e.has(i.key)?null:a;const d=hO(s,a);null!==d&&n.set(i.key,d),s.isValidDocument()||s.convertToNoDocument(Kt.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),En())}isEqual(t){return this.batchId===t.batchId&&fg(this.mutations,t.mutations,(e,n)=>pO(e,n))&&fg(this.baseMutations,t.baseMutations,(e,n)=>pO(e,n))}}class $C{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Wt(t.mutations.length===n.length);let i=mb;const o=t.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new $C(t,e,n,i)}}class Eb{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vO{constructor(t){this.count=t}}var pi,qn;function yO(r){switch(r){default:return Nt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function ex(r){if(void 0===r)return di("GRPC error has no .code"),ye.UNKNOWN;switch(r){case pi.OK:return ye.OK;case pi.CANCELLED:return ye.CANCELLED;case pi.UNKNOWN:return ye.UNKNOWN;case pi.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case pi.INTERNAL:return ye.INTERNAL;case pi.UNAVAILABLE:return ye.UNAVAILABLE;case pi.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case pi.NOT_FOUND:return ye.NOT_FOUND;case pi.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case pi.ABORTED:return ye.ABORTED;case pi.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case pi.DATA_LOSS:return ye.DATA_LOSS;default:return Nt()}}(qn=pi||(pi={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";class bb{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return zC}static getOrCreateInstance(){return null===zC&&(zC=new bb),zC}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(t))}}let zC=null;class ey{constructor(t,e,n,i,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,Tg.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new ey(Kt.min(),i,UC(),ts(),En())}}class Tg{constructor(t,e,n,i,o){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Tg(n,e,En(),En(),En())}}class ty{constructor(t,e,n,i){this.It=t,this.removedTargetIds=e,this.key=n,this.Tt=i}}class _O{constructor(t,e){this.targetId=t,this.Et=e}}class Db{constructor(t,e,n=Xi.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Tb{constructor(){this.At=0,this.Rt=Rb(),this.vt=Xi.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(t){t.approximateByteSize()>0&&(this.Pt=!0,this.vt=t)}Ct(){let t=En(),e=En(),n=En();return this.Rt.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Nt()}}),new Tg(this.vt,this.bt,t,e,n)}xt(){this.Pt=!1,this.Rt=Rb()}Nt(t,e){this.Pt=!0,this.Rt=this.Rt.insert(t,e)}kt(t){this.Pt=!0,this.Rt=this.Rt.remove(t)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class tx{constructor(t){this.Ft=t,this.Bt=new Map,this.Lt=ts(),this.qt=CO(),this.Ut=new fr(gn)}Kt(t){for(const e of t.It)t.Tt&&t.Tt.isFoundDocument()?this.Gt(e,t.Tt):this.Qt(e,t.key,t.Tt);for(const e of t.removedTargetIds)this.Qt(e,t.key,t.Tt)}zt(t){this.forEachTarget(t,e=>{const n=this.jt(e);switch(t.state){case 0:this.Wt(e)&&n.Dt(t.resumeToken);break;case 1:n.$t(),n.Vt||n.xt(),n.Dt(t.resumeToken);break;case 2:n.$t(),n.Vt||this.removeTarget(e);break;case 3:this.Wt(e)&&(n.Mt(),n.Dt(t.resumeToken));break;case 4:this.Wt(e)&&(this.Ht(e),n.Dt(t.resumeToken));break;default:Nt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Bt.forEach((n,i)=>{this.Wt(i)&&e(i)})}Jt(t){var e;const n=t.targetId,i=t.Et.count,o=this.Yt(n);if(o){const s=o.target;if($v(s))if(0===i){const a=new ft(s.path);this.Qt(n,a,Ar.newNoDocument(a,Kt.min()))}else Wt(1===i);else{const a=this.Zt(n);a!==i&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(e=bb.instance)||void 0===e||e.notifyOnExistenceFilterMismatch({localCacheCount:a,existenceFilterCount:t.Et.count}))}}}Xt(t){const e=new Map;this.Bt.forEach((o,s)=>{const a=this.Yt(s);if(a){if(o.current&&$v(a.target)){const d=new ft(a.target.path);null!==this.Lt.get(d)||this.te(s,d)||this.Qt(s,d,Ar.newNoDocument(d,t))}o.St&&(e.set(s,o.Ct()),o.xt())}});let n=En();this.qt.forEach((o,s)=>{let a=!0;s.forEachWhile(d=>{const f=this.Yt(d);return!f||2===f.purpose||(a=!1,!1)}),a&&(n=n.add(o))}),this.Lt.forEach((o,s)=>s.setReadTime(t));const i=new ey(t,e,this.Ut,this.Lt,n);return this.Lt=ts(),this.qt=CO(),this.Ut=new fr(gn),i}Gt(t,e){if(!this.Wt(t))return;const n=this.te(t,e.key)?2:0;this.jt(t).Nt(e.key,n),this.Lt=this.Lt.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ee(e.key).add(t))}Qt(t,e,n){if(!this.Wt(t))return;const i=this.jt(t);this.te(t,e)?i.Nt(e,1):i.kt(e),this.qt=this.qt.insert(e,this.ee(e).delete(t)),n&&(this.Lt=this.Lt.insert(e,n))}removeTarget(t){this.Bt.delete(t)}Zt(t){const e=this.jt(t).Ct();return this.Ft.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.jt(t).Ot()}jt(t){let e=this.Bt.get(t);return e||(e=new Tb,this.Bt.set(t,e)),e}ee(t){let e=this.qt.get(t);return e||(e=new fr(gn),this.qt=this.qt.insert(t,e)),e}Wt(t){const e=null!==this.Yt(t);return e||Je("WatchChangeAggregator","Detected inactive target",t),e}Yt(t){const e=this.Bt.get(t);return e&&e.Vt?null:this.Ft.ne(t)}Ht(t){this.Bt.set(t,new Tb),this.Ft.getRemoteKeysForTarget(t).forEach(e=>{this.Qt(t,e,null)})}te(t,e){return this.Ft.getRemoteKeysForTarget(t).has(e)}}function CO(){return new fi(ft.comparator)}function Rb(){return new fi(ft.comparator)}const nx={asc:"ASCENDING",desc:"DESCENDING"},wO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SO={and:"AND",or:"OR"};class EO{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function kf(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bO(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function rx(r,t){return kf(r,t.toTimestamp())}function Mi(r){return Wt(!!r),Kt.fromTimestamp(function(t){const e=Td(t);return new hr(e.seconds,e.nanos)}(r))}function KC(r,t){return(e=r,new Fn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function ix(r){const t=Fn.fromString(r);return Wt(px(t)),t}function qC(r,t){return KC(r.databaseId,t.path)}function dc(r,t){const e=ix(t);if(e.get(1)!==r.databaseId.projectId)throw new We(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new We(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new ft(sx(e))}function DO(r,t){return KC(r.databaseId,t)}function ox(r){const t=ix(r);return 4===t.length?Fn.emptyPath():sx(t)}function YC(r){return new Fn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function sx(r){return Wt(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function ax(r,t,e){return{name:qC(r,t),fields:e.value.mapValue.fields}}function ny(r,t,e){const n=dc(r,t.name),i=Mi(t.updateTime),o=t.createTime?Mi(t.createTime):Kt.min(),s=new eo({mapValue:{fields:t.fields}}),a=Ar.newFoundDocument(n,i,o,s);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function Bd(r,t){let e;if(t instanceof Dg)e={update:ax(r,t.key,t.value)};else if(t instanceof cc)e={delete:qC(r,t.key)};else if(t instanceof uc)e={update:ax(r,t.key,t.data),updateMask:yH(t.fieldMask)};else{if(!(t instanceof Xv))return Nt();e={verify:qC(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(i,o){const s=o.transform;if(s instanceof Ff)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof kd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Gd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Ni)return{fieldPath:o.field.canonicalString(),increment:s._t};throw Nt()}(0,n))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:rx(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Nt()),e;var i}function ZC(r,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?Vr.updateTime(Mi(i.updateTime)):void 0!==i.exists?Vr.exists(i.exists):Vr.none():Vr.none(),n=t.updateTransforms?t.updateTransforms.map(i=>function(o,s){let a=null;"setToServerValue"in s?(Wt("REQUEST_TIME"===s.setToServerValue),a=new Ff):"appendMissingElements"in s?a=new kd(s.appendMissingElements.values||[]):"removeAllFromArray"in s?a=new Gd(s.removeAllFromArray.values||[]):"increment"in s?a=new Ni(o,s.increment):Nt();const d=bi.fromServerFormat(s.fieldPath);return new Qv(d,a)}(r,i)):[];var i;if(t.update){const i=dc(r,t.update.name),o=new eo({mapValue:{fields:t.update.fields}});if(t.updateMask){const s=new Is((t.updateMask.fieldPaths||[]).map(f=>bi.fromServerFormat(f)));return new uc(i,o,s,e,n)}return new Dg(i,o,e,n)}if(t.delete){const i=dc(r,t.delete);return new cc(i,e)}if(t.verify){const i=dc(r,t.verify);return new Xv(i,e)}return Nt()}function lx(r,t){return{documents:[DO(r,t.path)]}}function ry(r,t){const e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=DO(r,n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=DO(r,n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(d){if(0!==d.length)return fx(rr.create(d,"and"))}(t.filters);i&&(e.structuredQuery.where=i);const o=function(d){if(0!==d.length)return d.map(f=>{return{field:sl((g=f).field),direction:vH(g.dir)};var g})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const s=(f=t.limit,r.useProto3Json||Gv(f)?f:{value:f});var f,a,d;return null!==s&&(e.structuredQuery.limit=s),t.startAt&&(e.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(e.structuredQuery.endAt={before:!(d=t.endAt).inclusive,values:d.position}),e}function Ob(r){let t=ox(r.parent);const e=r.structuredQuery,n=e.from?e.from.length:0;let i=null;if(n>0){Wt(1===n);const g=e.from[0];g.allDescendants?i=g.collectionId:t=t.child(g.collectionId)}let o=[];e.where&&(o=function(g){const C=cx(g);return C instanceof rr&&YR(C)?C.getFilters():[C]}(e.where));let s=[];e.orderBy&&(s=e.orderBy.map(g=>{return new yg(Rg((C=g).field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;e.limit&&(a=function(g){let C;return C="object"==typeof g?g.value:g,Gv(C)?null:C}(e.limit));let d=null;var g;e.startAt&&(d=new sc((g=e.startAt).values||[],!!g.before));let f=null;return e.endAt&&(f=function(g){return new sc(g.values||[],!g.before)}(e.endAt)),rO(t,i,s,o,a,"F",d,f)}function cx(r){return void 0!==r.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Rg(t.unaryFilter.field);return jn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Rg(t.unaryFilter.field);return jn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Rg(t.unaryFilter.field);return jn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rg(t.unaryFilter.field);return jn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Nt()}}(r):void 0!==r.fieldFilter?jn.create(Rg((t=r).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==r.compositeFilter?function(t){return rr.create(t.compositeFilter.filters.map(e=>cx(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Nt()}}(t.compositeFilter.op))}(r):Nt();var t}function vH(r){return nx[r]}function dx(r){return wO[r]}function hx(r){return SO[r]}function sl(r){return{fieldPath:r.canonicalString()}}function Rg(r){return bi.fromServerFormat(r.fieldPath)}function fx(r){return r instanceof jn?function(t){if("=="===t.op){if(UM(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if($R(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(UM(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if($R(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:dx(t.op),value:t.value}}}(r):r instanceof rr?function(t){const e=t.getFilters().map(n=>fx(n));return 1===e.length?e[0]:{compositeFilter:{op:hx(t.op),filters:e}}}(r):Nt()}function yH(r){const t=[];return r.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function px(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Ud{constructor(t,e,n,i,o=Kt.min(),s=Kt.min(),a=Xi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a}withSequenceNumber(t){return new Ud(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class OO{constructor(t){this.se=t}}function mx(r,t){const e=t.key,n={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:QC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document={name:qC(i=r.se,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:kf(i,o.version.toTimestamp()),createTime:kf(i,o.createTime.toTimestamp())};else if(t.isNoDocument())n.noDocument={path:e.path.toArray(),readTime:jd(t.version)};else{if(!t.isUnknownDocument())return Nt();n.unknownDocument={path:e.path.toArray(),version:jd(t.version)}}var i,o;return n}function QC(r){const t=r.toTimestamp();return[t.seconds,t.nanoseconds]}function jd(r){const t=r.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Wd(r){const t=new hr(r.seconds,r.nanoseconds);return Kt.fromTimestamp(t)}function Og(r,t){const e=(t.baseMutations||[]).map(o=>ZC(r.se,o));for(let o=0;o<t.mutations.length-1;++o)o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(t.mutations[o].updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o);const n=t.mutations.map(o=>ZC(r.se,o)),i=hr.fromMillis(t.localWriteTimeMs);return new gO(t.batchId,i,e,n)}function ns(r){const t=Wd(r.readTime),e=void 0!==r.lastLimboFreeSnapshotVersion?Wd(r.lastLimboFreeSnapshotVersion):Kt.min();let n;var i;return void 0!==r.query.documents?(Wt(1===(i=r.query).documents.length),n=jr(wg(ox(i.documents[0])))):n=jr(Ob(r.query)),new Ud(n,r.targetId,0,r.lastListenSequenceNumber,t,e,Xi.fromBase64String(r.resumeToken))}function IO(r,t){const e=jd(t.snapshotVersion),n=jd(t.lastLimboFreeSnapshotVersion);let i;i=$v(t.target)?lx(r.se,t.target):ry(r.se,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:xd(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function iy(r){const t=Ob({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Sg(t,t.limit,"L"):t}function Ib(r,t){return new Eb(t.largestBatchId,ZC(r.se,t.overlayMutation))}function vx(r,t){const e=t.path.lastSegment();return[r,Os(t.path.popLast()),e]}function qs(r,t,e,n){return{indexId:r,uid:t.uid||"",sequenceNumber:e,readTime:jd(n.readTime),documentKey:Os(n.documentKey.path),largestBatchId:n.largestBatchId}}class yx{getBundleMetadata(t,e){return JC(t).get(e).next(n=>{if(n)return{id:(i=n).bundleId,createTime:Wd(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return JC(t).put({bundleId:(n=e).id,createTime:jd(Mi(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return AO(t).get(e).next(n=>{if(n)return{name:(i=n).name,query:iy(i.bundledQuery),readTime:Wd(i.readTime)};var i})}saveNamedQuery(t,e){return AO(t).put({name:(n=e).name,readTime:jd(Mi(n.readTime)),bundledQuery:n.bundledQuery});var n}}function JC(r){return Ji(r,"bundles")}function AO(r){return Ji(r,"namedQueries")}class XC{constructor(t,e){this.serializer=t,this.userId=e}static ie(t,e){return new XC(t,e.uid||"")}getOverlay(t,e){return Gf(t).get(vx(this.userId,e)).next(n=>n?Ib(this.serializer,n):null)}getOverlays(t,e){const n=Ra();return me.forEach(e,i=>this.getOverlay(t,i).next(o=>{null!==o&&n.set(i,o)})).next(()=>n)}saveOverlays(t,e,n){const i=[];return n.forEach((o,s)=>{const a=new Eb(e,s);i.push(this.re(t,a))}),me.waitFor(i)}removeOverlaysForBatchId(t,e,n){const i=new Set;e.forEach(s=>i.add(Os(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);o.push(Gf(t).J("collectionPathOverlayIndex",a))}),me.waitFor(o)}getOverlaysForCollection(t,e,n){const i=Ra(),o=Os(e),s=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Gf(t).j("collectionPathOverlayIndex",s).next(a=>{for(const d of a){const f=Ib(this.serializer,d);i.set(f.getKey(),f)}return i})}getOverlaysForCollectionGroup(t,e,n,i){const o=Ra();let s;const a=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Gf(t).Z({index:"collectionGroupOverlayIndex",range:a},(d,f,g)=>{const C=Ib(this.serializer,f);o.size()<i||C.largestBatchId===s?(o.set(C.getKey(),C),s=C.largestBatchId):g.done()}).next(()=>o)}re(t,e){return Gf(t).put(function(n,i,o){const[s,a,d]=vx(i,o.mutation.key);return{userId:i,collectionPath:a,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Bd(n.se,o.mutation)}}(this.serializer,this.userId,e))}}function Gf(r){return Ji(r,"documentOverlays")}class $d{constructor(){}oe(t,e){this.ue(t,e),e.ce()}ue(t,e){if("nullValue"in t)this.ae(e,5);else if("booleanValue"in t)this.ae(e,10),e.he(t.booleanValue?1:0);else if("integerValue"in t)this.ae(e,15),e.he(Xr(t.integerValue));else if("doubleValue"in t){const n=Xr(t.doubleValue);isNaN(n)?this.ae(e,13):(this.ae(e,15),Vv(n)?e.he(0):e.he(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ae(e,20),"string"==typeof n?e.le(n):(e.le(`${n.seconds||""}`),e.he(n.nanos||0))}else if("stringValue"in t)this.fe(t.stringValue,e),this.de(e);else if("bytesValue"in t)this.ae(e,30),e.we(Rd(t.bytesValue)),this.de(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ae(e,45),e.he(n.latitude||0),e.he(n.longitude||0)}else"mapValue"in t?zR(t)?this.ae(e,Number.MAX_SAFE_INTEGER):(this.me(t.mapValue,e),this.de(e)):"arrayValue"in t?(this.ge(t.arrayValue,e),this.de(e)):Nt()}fe(t,e){this.ae(e,25),this.ye(t,e)}ye(t,e){e.le(t)}me(t,e){const n=t.fields||{};this.ae(e,55);for(const i of Object.keys(n))this.fe(i,e),this.ue(n[i],e)}ge(t,e){const n=t.values||[];this.ae(e,50);for(const i of n)this.ue(i,e)}_e(t,e){this.ae(e,37),ft.fromName(t).path.forEach(n=>{this.ae(e,60),this.ye(n,e)})}ae(t,e){t.he(e)}de(t){t.he(2)}}function PO(r){if(0===r)return 8;let t=0;return!(r>>4)&&(t+=4,r<<=4),!(r>>6)&&(t+=2,r<<=2),!(r>>7)&&(t+=1),t}function NO(r){const t=64-function(e){let n=0;for(let i=0;i<8;++i){const o=PO(255&e[i]);if(n+=o,8!==o)break}return n}(r);return Math.ceil(t/8)}$d.pe=new $d;class MO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Te(n.value),n=e.next();this.Ee()}Ae(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Re(n.value),n=e.next();this.ve()}be(t){for(const e of t){const n=e.charCodeAt(0);if(n<128)this.Te(n);else if(n<2048)this.Te(960|n>>>6),this.Te(128|63&n);else if(e<"\ud800"||"\udbff"<e)this.Te(480|n>>>12),this.Te(128|63&n>>>6),this.Te(128|63&n);else{const i=e.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}this.Ee()}Pe(t){for(const e of t){const n=e.charCodeAt(0);if(n<128)this.Re(n);else if(n<2048)this.Re(960|n>>>6),this.Re(128|63&n);else if(e<"\ud800"||"\udbff"<e)this.Re(480|n>>>12),this.Re(128|63&n>>>6),this.Re(128|63&n);else{const i=e.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.ve()}Ve(t){const e=this.Se(t),n=NO(e);this.De(1+n),this.buffer[this.position++]=255&n;for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Ce(t){const e=this.Se(t),n=NO(e);this.De(1+n),this.buffer[this.position++]=~(255&n);for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(t){this.De(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Se(t){const e=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let i=1;i<e.length;++i)e[i]^=n?255:0;return e}Te(t){const e=255&t;0===e?(this.Ne(0),this.Ne(255)):255===e?(this.Ne(255),this.Ne(0)):this.Ne(e)}Re(t){const e=255&t;0===e?(this.Oe(0),this.Oe(255)):255===e?(this.Oe(255),this.Oe(0)):this.Oe(t)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(t){this.De(1),this.buffer[this.position++]=t}Oe(t){this.De(1),this.buffer[this.position++]=~t}De(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class xO{constructor(t){this.Me=t}we(t){this.Me.Ie(t)}le(t){this.Me.be(t)}he(t){this.Me.Ve(t)}ce(){this.Me.xe()}}class _x{constructor(t){this.Me=t}we(t){this.Me.Ae(t)}le(t){this.Me.Pe(t)}he(t){this.Me.Ce(t)}ce(){this.Me.ke()}}class Ig{constructor(){this.Me=new MO,this.Fe=new xO(this.Me),this.Be=new _x(this.Me)}seed(t){this.Me.seed(t)}Le(t){return 0===t?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Vf{constructor(t,e,n,i){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=i}qe(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new Vf(this.indexId,this.documentKey,this.arrayValue,n)}}function iu(r,t){let e=r.indexId-t.indexId;return 0!==e?e:(e=ou(r.arrayValue,t.arrayValue),0!==e?e:(e=ou(r.directionalValue,t.directionalValue),0!==e?e:ft.comparator(r.documentKey,t.documentKey)))}function ou(r,t){for(let e=0;e<r.length&&e<t.length;++e){const n=r[e]-t[e];if(0!==n)return n}return r.length-t.length}class zd{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];for(const e of t.filters){const n=e;n.isInequality()?this.Ge=n:this.Ke.push(n)}}Qe(t){Wt(t.collectionGroup===this.collectionId);const e=qE(t);if(void 0!==e&&!this.ze(e))return!1;const n=bd(t);let i=0,o=0;for(;i<n.length&&this.ze(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Ge){const s=n[i];if(!this.je(this.Ge,s)||!this.We(this.Ue[o++],s))return!1;++i}for(;i<n.length;++i)if(o>=this.Ue.length||!this.We(this.Ue[o++],n[i]))return!1;return!0}ze(t){for(const e of this.Ke)if(this.je(e,t))return!0;return!1}je(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}We(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function Ab(r){var t,e;if(Wt(r instanceof jn||r instanceof rr),r instanceof jn){if(r instanceof eO){const i=(null===(e=null===(t=r.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(o=>jn.create(r.field,"==",o)))||[];return rr.create(i,"or")}return r}const n=r.filters.map(i=>Ab(i));return rr.create(n,r.op)}function Pb(r){if(0===r.getFilters().length)return[];const t=Mb(Ab(r));return Wt(Cx(t)),ew(t)||Nb(t)?[t]:t.getFilters()}function ew(r){return r instanceof jn}function Nb(r){return r instanceof rr&&YR(r)}function Cx(r){return ew(r)||Nb(r)||function(t){if(t instanceof rr&&ab(t)){for(const e of t.getFilters())if(!ew(e)&&!Nb(e))return!1;return!0}return!1}(r)}function Mb(r){if(Wt(r instanceof jn||r instanceof rr),r instanceof jn)return r;if(1===r.filters.length)return Mb(r.filters[0]);const t=r.filters.map(n=>Mb(n));let e=rr.create(t,r.op);return e=tw(e),Cx(e)?e:(Wt(e instanceof rr),Wt(_g(e)),Wt(e.filters.length>1),e.filters.reduce((n,i)=>xb(n,i)))}function xb(r,t){let e;return Wt(r instanceof jn||r instanceof rr),Wt(t instanceof jn||t instanceof rr),e=r instanceof jn?t instanceof jn?rr.create([r,t],"and"):FO(r,t):t instanceof jn?FO(t,r):function(n,i){if(Wt(n.filters.length>0&&i.filters.length>0),_g(n)&&_g(i))return ub(n,i.getFilters());const o=ab(n)?n:i,s=ab(n)?i:n,a=o.filters.map(d=>xb(d,s));return rr.create(a,"or")}(r,t),tw(e)}function FO(r,t){if(_g(t))return ub(t,r.getFilters());{const e=t.filters.map(n=>xb(r,n));return rr.create(e,"or")}}function tw(r){if(Wt(r instanceof jn||r instanceof rr),r instanceof jn)return r;const t=r.getFilters();if(1===t.length)return tw(t[0]);if(ZR(r))return r;const e=t.map(i=>tw(i)),n=[];return e.forEach(i=>{i instanceof jn?n.push(i):i instanceof rr&&(i.op===r.op?n.push(...i.filters):n.push(i))}),1===n.length?n[0]:rr.create(n,r.op)}class LO{constructor(){this.He=new kO}addToCollectionParentIndex(t,e){return this.He.add(e),me.resolve()}getCollectionParents(t,e){return me.resolve(this.He.getEntries(e))}addFieldIndex(t,e){return me.resolve()}deleteFieldIndex(t,e){return me.resolve()}getDocumentsMatchingTarget(t,e){return me.resolve(null)}getIndexType(t,e){return me.resolve(0)}getFieldIndexes(t,e){return me.resolve([])}getNextCollectionGroupToUpdate(t){return me.resolve(null)}getMinOffset(t,e){return me.resolve(Do.min())}getMinOffsetFromCollectionGroup(t,e){return me.resolve(Do.min())}updateCollectionGroup(t,e,n){return me.resolve()}updateIndexEntries(t,e){return me.resolve()}}class kO{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new fr(Fn.comparator),o=!i.has(n);return this.index[e]=i.add(n),o}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new fr(Fn.comparator)).toArray()}}const oy=new Uint8Array(0);class wx{constructor(t,e){this.user=t,this.databaseId=e,this.Je=new kO,this.Ye=new Ld(n=>xd(n),(n,i)=>Cg(n,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Je.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Je.add(e)});const o={collectionId:n,parent:Os(i)};return Fb(t).put(o)}return me.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[RR(e),""],!1,!0);return Fb(t).j(i).next(o=>{for(const s of o){if(s.collectionId!==e)break;n.push(il(s.parent))}return n})}addFieldIndex(t,e){const n=Ag(t),i={indexId:(s=e).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var s;delete i.indexId;const o=n.add(i);if(e.indexState){const s=Pg(t);return o.next(a=>{s.put(qs(a,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){const n=Ag(t),i=Pg(t),o=nw(t);return n.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const n=nw(t);let i=!0;const o=new Map;return me.forEach(this.Ze(e),s=>this.Xe(t,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=En();const a=[];return me.forEach(o,(d,f)=>{var g;Je("IndexedDbIndexManager",`Using index ${g=d,`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`} to execute ${xd(e)}`);const C=function(J,re){const ce=qE(re);if(void 0===ce)return null;for(const Re of zv(J,ce.fieldPath))switch(Re.op){case"array-contains-any":return Re.value.arrayValue.values||[];case"array-contains":return[Re.value]}return null}(f,d),E=function(J,re){const ce=new Map;for(const Re of bd(re))for(const Xe of zv(J,Re.fieldPath))switch(Xe.op){case"==":case"in":ce.set(Re.fieldPath.canonicalString(),Xe.value);break;case"not-in":case"!=":return ce.set(Re.fieldPath.canonicalString(),Xe.value),Array.from(ce.values())}return null}(f,d),T=function(J,re){const ce=[];let Re=!0;for(const Xe of bd(re)){const Ke=0===Xe.kind?nO(J,Xe.fieldPath,J.startAt):YM(J,Xe.fieldPath,J.startAt);ce.push(Ke.value),Re&&(Re=Ke.inclusive)}return new sc(ce,Re)}(f,d),I=function(J,re){const ce=[];let Re=!0;for(const Xe of bd(re)){const Ke=0===Xe.kind?YM(J,Xe.fieldPath,J.endAt):nO(J,Xe.fieldPath,J.endAt);ce.push(Ke.value),Re&&(Re=Ke.inclusive)}return new sc(ce,Re)}(f,d),M=this.tn(d,f,T),k=this.tn(d,f,I),W=this.en(d,f,E),z=this.nn(d.indexId,C,M,T.inclusive,k,I.inclusive,W);return me.forEach(z,J=>n.H(J,e.limit).next(re=>{re.forEach(ce=>{const Re=ft.fromSegments(ce.documentKey);s.has(Re)||(s=s.add(Re),a.push(Re))})}))}).next(()=>a)}return me.resolve(null)})}Ze(t){let e=this.Ye.get(t);return e||(e=0===t.filters.length?[t]:Pb(rr.create(t.filters,"and")).map(n=>VC(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt)),this.Ye.set(t,e),e)}nn(t,e,n,i,o,s,a){const d=(null!=e?e.length:1)*Math.max(n.length,o.length),f=d/(null!=e?e.length:1),g=[];for(let C=0;C<d;++C){const E=e?this.sn(e[C/f]):oy,T=this.rn(t,E,n[C%f],i),I=this.on(t,E,o[C%f],s),M=a.map(k=>this.rn(t,E,k,!0));g.push(...this.createRange(T,I,M))}return g}rn(t,e,n,i){const o=new Vf(t,ft.empty(),e,n);return i?o:o.qe()}on(t,e,n,i){const o=new Vf(t,ft.empty(),e,n);return i?o.qe():o}Xe(t,e){const n=new zd(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(o=>{let s=null;for(const a of o)n.Qe(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,e){let n=2;const i=this.Ze(e);return me.forEach(i,o=>this.Xe(t,o).next(s=>{s?0!==n&&s.fields.length<function(a){let d=new fr(bi.comparator),f=!1;for(const g of a.filters)for(const C of g.getFlattenedFilters())C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?f=!0:d=d.add(C.field));for(const g of a.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(o)&&(n=1):n=0})).next(()=>null!==e.limit&&i.length>1&&2===n?1:n)}un(t,e){const n=new Ig;for(const i of bd(t)){const o=e.data.field(i.fieldPath);if(null==o)return null;const s=n.Le(i.kind);$d.pe.oe(o,s)}return n.$e()}sn(t){const e=new Ig;return $d.pe.oe(t,e.Le(0)),e.$e()}cn(t,e){const n=new Ig;return $d.pe.oe(Nd(this.databaseId,e),n.Le(function(i){const o=bd(i);return 0===o.length?0:o[o.length-1].kind}(t))),n.$e()}en(t,e,n){if(null===n)return[];let i=[];i.push(new Ig);let o=0;for(const s of bd(t)){const a=n[o++];for(const d of i)if(this.an(e,s.fieldPath)&&vg(a))i=this.hn(i,s,a);else{const f=d.Le(s.kind);$d.pe.oe(a,f)}}return this.ln(i)}tn(t,e,n){return this.en(t,e,n.position)}ln(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].$e();return e}hn(t,e,n){const i=[...t],o=[];for(const s of n.arrayValue.values||[])for(const a of i){const d=new Ig;d.seed(a.$e()),$d.pe.oe(s,d.Le(e.kind)),o.push(d)}return o}an(t,e){return!!t.filters.find(n=>n instanceof jn&&n.field.isEqual(e)&&("in"===n.op||"not-in"===n.op))}getFieldIndexes(t,e){const n=Ag(t),i=Pg(t);return(e?n.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.j()).next(o=>{const s=[];return me.forEach(o,a=>i.get([a.indexId,this.uid]).next(d=>{s.push(function(f,g){const C=g?new Fv(g.sequenceNumber,new Do(Wd(g.readTime),new ft(il(g.documentKey)),g.largestBatchId)):Fv.empty(),E=f.fields.map(([T,I])=>new xv(bi.fromServerFormat(T),I));return new Mv(f.indexId,f.collectionGroup,E,C)}(a,d))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((n,i)=>{const o=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:gn(n.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,n){const i=Ag(t),o=Pg(t);return this.fn(t).next(s=>i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>me.forEach(a,d=>o.put(qs(d.indexId,this.user,s,n)))))}updateIndexEntries(t,e){const n=new Map;return me.forEach(e,(i,o)=>{const s=n.get(i.collectionGroup);return(s?me.resolve(s):this.getFieldIndexes(t,i.collectionGroup)).next(a=>(n.set(i.collectionGroup,a),me.forEach(a,d=>this.dn(t,i,d).next(f=>{const g=this.wn(o,d);return f.isEqual(g)?me.resolve():this._n(t,o,d,f,g)}))))})}mn(t,e,n,i){return nw(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.cn(n,e.key),documentKey:e.key.path.toArray()})}gn(t,e,n,i){return nw(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.cn(n,e.key),e.key.path.toArray()])}dn(t,e,n){const i=nw(t);let o=new fr(iu);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,e)])},(s,a)=>{o=o.add(new Vf(n.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>o)}wn(t,e){let n=new fr(iu);const i=this.un(e,t);if(null==i)return n;const o=qE(e);if(null!=o){const s=t.data.field(o.fieldPath);if(vg(s))for(const a of s.arrayValue.values||[])n=n.add(new Vf(e.indexId,t.key,this.sn(a),i))}else n=n.add(new Vf(e.indexId,t.key,oy,i));return n}_n(t,e,n,i,o){Je("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(a,d,f,g,C){const E=a.getIterator(),T=d.getIterator();let I=gg(E),M=gg(T);for(;I||M;){let k=!1,W=!1;if(I&&M){const z=f(I,M);z<0?W=!0:z>0&&(k=!0)}else null!=I?W=!0:k=!0;k?(g(M),M=gg(T)):W?(C(I),I=gg(E)):(I=gg(E),M=gg(T))}}(i,o,iu,a=>{s.push(this.mn(t,e,n,a))},a=>{s.push(this.gn(t,e,n,a))}),me.waitFor(s)}fn(t){let e=1;return Pg(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,o)=>{o.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,n){n=n.sort((s,a)=>iu(s,a)).filter((s,a,d)=>!a||0!==iu(s,d[a-1]));const i=[];i.push(t);for(const s of n){const a=iu(s,t),d=iu(s,e);if(0===a)i[0]=t.qe();else if(a>0&&d<0)i.push(s),i.push(s.qe());else if(d>0)break}i.push(e);const o=[];for(let s=0;s<i.length;s+=2){if(this.yn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,oy,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,oy,[]]))}return o}yn(t,e){return iu(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Lb)}getMinOffset(t,e){return me.mapArray(this.Ze(e),n=>this.Xe(t,n).next(i=>i||Nt())).next(Lb)}}function Fb(r){return Ji(r,"collectionParents")}function nw(r){return Ji(r,"indexEntries")}function Ag(r){return Ji(r,"indexConfiguration")}function Pg(r){return Ji(r,"indexState")}function Lb(r){Wt(0!==r.length);let t=r[0].indexState.offset,e=t.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;YE(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new Do(t.readTime,t.documentKey,e)}const kb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rs{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new rs(t,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gb(r,t,e){const n=r.store("mutations"),i=r.store("documentMutations"),o=[],s=IDBKeyRange.only(e.batchId);let a=0;const d=n.Z({range:s},(g,C,E)=>(a++,E.delete()));o.push(d.next(()=>{Wt(1===a)}));const f=[];for(const g of e.mutations){const C=FR(t,g.key.path,e.batchId);o.push(i.delete(C)),f.push(g.key)}return me.waitFor(o).next(()=>f)}function Hf(r){if(!r)return 0;let t;if(r.document)t=r.document;else if(r.unknownDocument)t=r.unknownDocument;else{if(!r.noDocument)throw Nt();t=r.noDocument}return JSON.stringify(t).length}rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(41943040,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class Bf{constructor(t,e,n,i){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=i,this.pn={}}static ie(t,e,n,i){Wt(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new Bf(o,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kd(t).Z({index:"userMutationsIndex",range:n},(i,o,s)=>{e=!1,s.done()}).next(()=>e)}addMutationBatch(t,e,n,i){const o=Ng(t),s=Kd(t);return s.add({}).next(a=>{Wt("number"==typeof a);const d=new gO(a,e,n,i),f=function(E,T,I){const M=I.baseMutations.map(W=>Bd(E.se,W)),k=I.mutations.map(W=>Bd(E.se,W));return{userId:T,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:M,mutations:k}}(this.serializer,this.userId,d),g=[];let C=new fr((E,T)=>gn(E.canonicalString(),T.canonicalString()));for(const E of i){const T=FR(this.userId,E.key.path,a);C=C.add(E.key.path.popLast()),g.push(s.put(f)),g.push(o.put(T,LR))}return C.forEach(E=>{g.push(this.indexManager.addToCollectionParentIndex(t,E))}),t.addOnCommittedListener(()=>{this.pn[a]=d.keys()}),me.waitFor(g).next(()=>d)})}lookupMutationBatch(t,e){return Kd(t).get(e).next(n=>n?(Wt(n.userId===this.userId),Og(this.serializer,n)):null)}In(t,e){return this.pn[e]?me.resolve(this.pn[e]):this.lookupMutationBatch(t,e).next(n=>{if(n){const i=n.keys();return this.pn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return Kd(t).Z({index:"userMutationsIndex",range:i},(s,a,d)=>{a.userId===this.userId&&(Wt(a.batchId>=n),o=Og(this.serializer,a)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Kd(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(i,o,s)=>{n=o.batchId,s.done()}).next(()=>n)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kd(t).j("userMutationsIndex",e).next(n=>n.map(i=>Og(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=LC(this.userId,e.path),i=IDBKeyRange.lowerBound(n),o=[];return Ng(t).Z({range:i},(s,a,d)=>{const[f,g,C]=s,E=il(g);if(f===this.userId&&e.path.isEqual(E))return Kd(t).get(C).next(T=>{if(!T)throw Nt();Wt(T.userId===this.userId),o.push(Og(this.serializer,T))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new fr(gn);const i=[];return e.forEach(o=>{const s=LC(this.userId,o.path),a=IDBKeyRange.lowerBound(s),d=Ng(t).Z({range:a},(f,g,C)=>{const[E,T,I]=f,M=il(T);E===this.userId&&o.path.isEqual(M)?n=n.add(I):C.done()});i.push(d)}),me.waitFor(i).next(()=>this.Tn(t,n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,o=LC(this.userId,n),s=IDBKeyRange.lowerBound(o);let a=new fr(gn);return Ng(t).Z({range:s},(d,f,g)=>{const[C,E,T]=d,I=il(E);C===this.userId&&n.isPrefixOf(I)?I.length===i&&(a=a.add(T)):g.done()}).next(()=>this.Tn(t,a))}Tn(t,e){const n=[],i=[];return e.forEach(o=>{i.push(Kd(t).get(o).next(s=>{if(null===s)throw Nt();Wt(s.userId===this.userId),n.push(Og(this.serializer,s))}))}),me.waitFor(i).next(()=>n)}removeMutationBatch(t,e){return Gb(t.at,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this.En(e.batchId)}),me.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}En(t){delete this.pn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return me.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return Ng(t).Z({range:n},(o,s,a)=>{if(o[0]===this.userId){const d=il(o[1]);i.push(d)}else a.done()}).next(()=>{Wt(0===i.length)})})}containsKey(t,e){return Vb(t,this.userId,e)}An(t){return Sx(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vb(r,t,e){const n=LC(t,e.path),i=n[1],o=IDBKeyRange.lowerBound(n);let s=!1;return Ng(r).Z({range:o,Y:!0},(a,d,f)=>{const[g,C,E]=a;g===t&&C===i&&(s=!0),f.done()}).next(()=>s)}function Kd(r){return Ji(r,"mutations")}function Ng(r){return Ji(r,"documentMutations")}function Sx(r){return Ji(r,"mutationQueues")}class Mg{constructor(t){this.Rn=t}next(){return this.Rn+=2,this.Rn}static vn(){return new Mg(0)}static bn(){return new Mg(-1)}}class _H{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Pn(t).next(e=>{const n=new Mg(e.highestTargetId);return e.highestTargetId=n.next(),this.Vn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Pn(t).next(e=>Kt.fromTimestamp(new hr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.Pn(t).next(i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.Vn(t,i)))}addTargetData(t,e){return this.Sn(t,e).next(()=>this.Pn(t).next(n=>(n.targetCount+=1,this.Dn(e,n),this.Vn(t,n))))}updateTargetData(t,e){return this.Sn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Uf(t).delete(e.targetId)).next(()=>this.Pn(t)).next(n=>(Wt(n.targetCount>0),n.targetCount-=1,this.Vn(t,n)))}removeTargets(t,e,n){let i=0;const o=[];return Uf(t).Z((s,a)=>{const d=ns(a);d.sequenceNumber<=e&&null===n.get(d.targetId)&&(i++,o.push(this.removeTargetData(t,d)))}).next(()=>me.waitFor(o)).next(()=>i)}forEachTarget(t,e){return Uf(t).Z((n,i)=>{const o=ns(i);e(o)})}Pn(t){return GO(t).get("targetGlobalKey").next(e=>(Wt(null!==e),e))}Vn(t,e){return GO(t).put("targetGlobalKey",e)}Sn(t,e){return Uf(t).put(IO(this.serializer,e))}Dn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Pn(t).next(e=>e.targetCount)}getTargetData(t,e){const n=xd(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return Uf(t).Z({range:i,index:"queryTargetsIndex"},(s,a,d)=>{const f=ns(a);Cg(e,f.target)&&(o=f,d.done())}).next(()=>o)}addMatchingKeys(t,e,n){const i=[],o=qd(t);return e.forEach(s=>{const a=Os(s.path);i.push(o.put({targetId:n,path:a})),i.push(this.referenceDelegate.addReference(t,n,s))}),me.waitFor(i)}removeMatchingKeys(t,e,n){const i=qd(t);return me.forEach(e,o=>{const s=Os(o.path);return me.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(t,n,o)])})}removeMatchingKeysForTargetId(t,e){const n=qd(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=qd(t);let o=En();return i.Z({range:n,Y:!0},(s,a,d)=>{const f=il(s[1]),g=new ft(f);o=o.add(g)}).next(()=>o)}containsKey(t,e){const n=Os(e.path),i=IDBKeyRange.bound([n],[RR(n)],!1,!0);let o=0;return qd(t).Z({index:"documentTargetsIndex",Y:!0,range:i},([s,a],d,f)=>{0!==s&&(o++,f.done())}).next(()=>o>0)}ne(t,e){return Uf(t).get(e).next(n=>n?ns(n):null)}}function Uf(r){return Ji(r,"targets")}function GO(r){return Ji(r,"targetGlobal")}function qd(r){return Ji(r,"targetDocuments")}function VO([r,t],[e,n]){const i=gn(r,e);return 0===i?gn(t,n):i}class CH{constructor(t){this.Cn=t,this.buffer=new fr(VO),this.xn=0}Nn(){return++this.xn}kn(t){const e=[t,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(e);else{const n=this.buffer.last();VO(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}}class wH{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(t){var e=this;Je("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Te.Z)(function*(){e.On=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(n){Dd(n)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield nl(n)}yield e.$n(3e5)}))}}class SH{constructor(t,e){this.Mn=t,this.params=e}calculateTargetCount(t,e){return this.Mn.Fn(t).next(n=>Math.floor(e/100*n))}nthSequenceNumber(t,e){if(0===e)return me.resolve(Rs.ct);const n=new CH(e);return this.Mn.forEachTarget(t,i=>n.kn(i.sequenceNumber)).next(()=>this.Mn.Bn(t,i=>n.kn(i))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.Mn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Mn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(kb)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kb):this.Ln(t,e))}getCacheSize(t){return this.Mn.getCacheSize(t)}Ln(t,e){let n,i,o,s,a,d,f;const g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),i=this.params.maximumSequenceNumbersToCollect):i=C,s=Date.now(),this.nthSequenceNumber(t,i))).next(C=>(n=C,a=Date.now(),this.removeTargets(t,n,e))).next(C=>(o=C,d=Date.now(),this.removeOrphanedDocuments(t,n))).next(C=>(f=Date.now(),zE()<=Ds.in.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-g}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(d-a)+`ms\n\tRemoved ${C} documents in `+(f-d)+`ms\nTotal Duration: ${f-g}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:C})))}}class EH{constructor(t,e){this.db=t,this.garbageCollector=new SH(this,e)}Fn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(n=>e.next(i=>n+i))}qn(t){let e=0;return this.Bn(t,n=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Bn(t,e){return this.Un(t,(n,i)=>e(i))}addReference(t,e,n){return Hb(t,n)}removeReference(t,e,n){return Hb(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Hb(t,e)}Kn(t,e){return function(n,i){let o=!1;return Sx(n).X(s=>Vb(n,s,i).next(a=>(a&&(o=!0),me.resolve(!a)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Un(t,(s,a)=>{if(a<=e){const d=this.Kn(t,s).next(f=>{if(!f)return o++,n.getEntry(t,s).next(()=>(n.removeEntry(s,Kt.min()),qd(t).delete([0,Os(s.path)])))});i.push(d)}}).next(()=>me.waitFor(i)).next(()=>n.apply(t)).next(()=>o)}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Hb(t,e)}Un(t,e){const n=qd(t);let i,o=Rs.ct;return n.Z({index:"documentTargetsIndex"},([s,a],{path:d,sequenceNumber:f})=>{0===s?(o!==Rs.ct&&e(new ft(il(i)),o),o=f,i=d):o=Rs.ct}).next(()=>{o!==Rs.ct&&e(new ft(il(i)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Hb(r,t){return qd(r).put((n=r.currentSequenceNumber,{targetId:0,path:Os(t.path),sequenceNumber:n}));var n}class HO{constructor(){this.changes=new Ld(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ar.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?me.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class rw{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return Ys(t).put(n)}removeEntry(t,e,n){return Ys(t).delete(function(i,o){const s=i.path.toArray();return[s.slice(0,s.length-2),s[s.length-2],QC(o),s[s.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.Gn(t,n)))}getEntry(t,e){let n=Ar.newInvalidDocument(e);return Ys(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(xg(e))},(i,o)=>{n=this.Qn(e,o)}).next(()=>n)}zn(t,e){let n={size:0,document:Ar.newInvalidDocument(e)};return Ys(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(xg(e))},(i,o)=>{n={document:this.Qn(e,o),size:Hf(o)}}).next(()=>n)}getEntries(t,e){let n=ts();return this.jn(t,e,(i,o)=>{const s=this.Qn(i,o);n=n.insert(i,s)}).next(()=>n)}Wn(t,e){let n=ts(),i=new fi(ft.comparator);return this.jn(t,e,(o,s)=>{const a=this.Qn(o,s);n=n.insert(o,a),i=i.insert(o,Hf(s))}).next(()=>({documents:n,Hn:i}))}jn(t,e,n){if(e.isEmpty())return me.resolve();let i=new fr(ow);e.forEach(d=>i=i.add(d));const o=IDBKeyRange.bound(xg(i.first()),xg(i.last())),s=i.getIterator();let a=s.getNext();return Ys(t).Z({index:"documentKeyIndex",range:o},(d,f,g)=>{const C=ft.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;a&&ow(a,C)<0;)n(a,null),a=s.getNext();a&&a.isEqual(C)&&(n(a,f),a=s.hasNext()?s.getNext():null),a?g.G(xg(a)):g.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,e,n,i){const o=e.path,s=[o.popLast().toArray(),o.lastSegment(),QC(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ys(t).j(IDBKeyRange.bound(s,a,!0)).next(d=>{let f=ts();for(const g of d){const C=this.Qn(ft.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);C.isFoundDocument()&&(Kv(e,C)||i.has(C.key))&&(f=f.insert(C.key,C))}return f})}getAllFromCollectionGroup(t,e,n,i){let o=ts();const s=iw(e,n),a=iw(e,Do.max());return Ys(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(d,f,g)=>{const C=this.Qn(ft.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(C.key,C),o.size===i&&g.done()}).next(()=>o)}newChangeBuffer(t){return new Ex(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Bb(t).get("remoteDocumentGlobalKey").next(e=>(Wt(!!e),e))}Gn(t,e){return Bb(t).put("remoteDocumentGlobalKey",e)}Qn(t,e){if(e){const n=function gx(r,t){let e;if(t.document)e=ny(r.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const n=ft.fromSegments(t.noDocument.path),i=Wd(t.noDocument.readTime);e=Ar.newNoDocument(n,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Nt();{const n=ft.fromSegments(t.unknownDocument.path),i=Wd(t.unknownDocument.version);e=Ar.newUnknownDocument(n,i)}}return t.readTime&&e.setReadTime(function(n){const i=new hr(n[0],n[1]);return Kt.fromTimestamp(i)}(t.readTime)),e}(this.serializer,e);if(!n.isNoDocument()||!n.version.isEqual(Kt.min()))return n}return Ar.newInvalidDocument(t)}}function BO(r){return new rw(r)}class Ex extends HO{constructor(t,e){super(),this.Jn=t,this.trackRemovals=e,this.Yn=new Ld(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(t){const e=[];let n=0,i=new fr((o,s)=>gn(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.Yn.get(o);if(e.push(this.Jn.removeEntry(t,o,a.readTime)),s.isValidDocument()){const d=mx(this.Jn.serializer,s);i=i.add(o.path.popLast());const f=Hf(d);n+=f-a.size,e.push(this.Jn.addEntry(t,o,d))}else if(n-=a.size,this.trackRemovals){const d=mx(this.Jn.serializer,s.convertToNoDocument(Kt.min()));e.push(this.Jn.addEntry(t,o,d))}}),i.forEach(o=>{e.push(this.Jn.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.Jn.updateMetadata(t,n)),me.waitFor(e)}getFromCache(t,e){return this.Jn.zn(t,e).next(n=>(this.Yn.set(e,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(t,e){return this.Jn.Wn(t,e).next(({documents:n,Hn:i})=>(i.forEach((o,s)=>{this.Yn.set(o,{size:s,readTime:n.get(o).readTime})}),n))}}function Bb(r){return Ji(r,"remoteDocumentGlobal")}function Ys(r){return Ji(r,"remoteDocumentsV14")}function xg(r){const t=r.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function iw(r,t){const e=t.documentKey.path.toArray();return[r,QC(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function ow(r,t){const e=r.path.toArray(),n=t.path.toArray();let i=0;for(let o=0;o<e.length-2&&o<n.length-2;++o)if(i=gn(e[o],n[o]),i)return i;return i=gn(e.length,n.length),i||(i=gn(e[e.length-2],n[n.length-2]),i||gn(e[e.length-1],n[n.length-1]))}class bx{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class sw{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(null!==n&&Jv(n.mutation,i,Is.empty(),hr.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,En()).next(()=>n))}getLocalViewOfDocuments(t,e,n=En()){const i=Ra();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,n).next(o=>{let s=Eg();return o.forEach((a,d)=>{s=s.insert(a,d.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){const n=Ra();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,En()))}populateOverlays(t,e,n){const i=[];return n.forEach(o=>{e.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((s,a)=>{e.set(s,a)})})}computeViews(t,e,n,i){let o=ts();const s=xf(),a=xf();return e.forEach((d,f)=>{const g=n.get(f.key);i.has(f.key)&&(void 0===g||g.mutation instanceof uc)?o=o.insert(f.key,f):void 0!==g?(s.set(f.key,g.mutation.getFieldMask()),Jv(g.mutation,f,g.mutation.getFieldMask(),hr.now())):s.set(f.key,Is.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((f,g)=>s.set(f,g)),e.forEach((f,g)=>{var C;return a.set(f,new bx(g,null!==(C=s.get(f))&&void 0!==C?C:null))}),a))}recalculateAndSaveOverlays(t,e){const n=xf();let i=new fi((s,a)=>s-a),o=En();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(const a of s)a.keys().forEach(d=>{const f=e.get(d);if(null===f)return;let g=n.get(d)||Is.empty();g=a.applyToLocalView(f,g),n.set(d,g);const C=(i.get(a.batchId)||En()).add(d);i=i.insert(a.batchId,C)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const d=a.getNext(),f=d.key,g=d.value,C=gb();g.forEach(E=>{if(!o.has(E)){const T=hO(e.get(E),n.get(E));null!==T&&C.set(E,T),o=o.add(E)}}),s.push(this.documentOverlayCache.saveOverlays(t,f,C))}return me.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n){return ft.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):hb(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n);var i}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-o.size):me.resolve(Ra());let a=-1,d=o;return s.next(f=>me.forEach(f,(g,C)=>(a<C.largestBatchId&&(a=C.largestBatchId),o.get(g)?me.resolve():this.remoteDocumentCache.getEntry(t,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(t,f,o)).next(()=>this.computeViews(t,d,f,En())).next(g=>({batchId:a,changes:BC(g)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ft(e)).next(n=>{let i=Eg();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,n){const i=e.collectionGroup;let o=Eg();return this.indexManager.getCollectionParents(t,i).next(s=>me.forEach(s,a=>{const d=(f=e,g=a.child(i),new ru(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,g;return this.getDocumentsMatchingCollectionQuery(t,d,n).next(f=>{f.forEach((g,C)=>{o=o.insert(g,C)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i))).next(o=>{i.forEach((a,d)=>{const f=d.getKey();null===o.get(f)&&(o=o.insert(f,Ar.newInvalidDocument(f)))});let s=Eg();return o.forEach((a,d)=>{const f=i.get(a);void 0!==f&&Jv(f.mutation,d,Is.empty(),hr.now()),Kv(e,d)&&(s=s.insert(a,d))}),s})}}class Ub{constructor(t){this.serializer=t,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return me.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var n;return this.Zn.set(e.id,{id:(n=e).id,version:n.version,createTime:Mi(n.createTime)}),me.resolve()}getNamedQuery(t,e){return me.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,{name:(n=e).name,query:iy(n.bundledQuery),readTime:Mi(n.readTime)}),me.resolve();var n}}class aw{constructor(){this.overlays=new fi(ft.comparator),this.ts=new Map}getOverlay(t,e){return me.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Ra();return me.forEach(e,i=>this.getOverlay(t,i).next(o=>{null!==o&&n.set(i,o)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((i,o)=>{this.re(t,e,o)}),me.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.ts.get(n);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ts.delete(n)),me.resolve()}getOverlaysForCollection(t,e,n){const i=Ra(),o=e.length+1,s=new ft(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const d=a.getNext().value,f=d.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>n&&i.set(d.getKey(),d)}return me.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let o=new fi((f,g)=>f-g);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>n){let g=o.get(f.largestBatchId);null===g&&(g=Ra(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const a=Ra(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>a.set(f,g)),!(a.size()>=i)););return me.resolve(a)}re(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const s=this.ts.get(i.largestBatchId).delete(n.key);this.ts.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new Eb(e,n));let o=this.ts.get(e);void 0===o&&(o=En(),this.ts.set(e,o)),this.ts.set(e,o.add(n.key))}}class UO{constructor(){this.es=new fr(Ro.ns),this.ss=new fr(Ro.rs)}isEmpty(){return this.es.isEmpty()}addReference(t,e){const n=new Ro(t,e);this.es=this.es.add(n),this.ss=this.ss.add(n)}os(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.us(new Ro(t,e))}cs(t,e){t.forEach(n=>this.removeReference(n,e))}hs(t){const e=new ft(new Fn([])),n=new Ro(e,t),i=new Ro(e,t+1),o=[];return this.ss.forEachInRange([n,i],s=>{this.us(s),o.push(s.key)}),o}ls(){this.es.forEach(t=>this.us(t))}us(t){this.es=this.es.delete(t),this.ss=this.ss.delete(t)}fs(t){const e=new ft(new Fn([])),n=new Ro(e,t),i=new Ro(e,t+1);let o=En();return this.ss.forEachInRange([n,i],s=>{o=o.add(s.key)}),o}containsKey(t){const e=new Ro(t,0),n=this.es.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ro{constructor(t,e){this.key=t,this.ds=e}static ns(t,e){return ft.comparator(t.key,e.key)||gn(t.ds,e.ds)}static rs(t,e){return gn(t.ds,e.ds)||ft.comparator(t.key,e.key)}}class bH{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this._s=new fr(Ro.ns)}checkEmpty(t){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const o=this.ws;this.ws++;const s=new gO(o,e,n,i);this.mutationQueue.push(s);for(const a of i)this._s=this._s.add(new Ro(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return me.resolve(s)}lookupMutationBatch(t,e){return me.resolve(this.gs(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.ys(e+1),o=i<0?0:i;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ro(e,0),i=new Ro(e,Number.POSITIVE_INFINITY),o=[];return this._s.forEachInRange([n,i],s=>{const a=this.gs(s.ds);o.push(a)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new fr(gn);return e.forEach(i=>{const o=new Ro(i,0),s=new Ro(i,Number.POSITIVE_INFINITY);this._s.forEachInRange([o,s],a=>{n=n.add(a.ds)})}),me.resolve(this.ps(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let o=n;ft.isDocumentKey(o)||(o=o.child(""));const s=new Ro(new ft(o),0);let a=new fr(gn);return this._s.forEachWhile(d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===i&&(a=a.add(d.ds)),!0)},s),me.resolve(this.ps(a))}ps(t){const e=[];return t.forEach(n=>{const i=this.gs(n);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Wt(0===this.Is(e.batchId,"removed")),this.mutationQueue.shift();let n=this._s;return me.forEach(e.mutations,i=>{const o=new Ro(i.key,e.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this._s=n})}En(t){}containsKey(t,e){const n=new Ro(e,0),i=this._s.firstAfterOrEqual(n);return me.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return me.resolve()}Is(t,e){return this.ys(t)}ys(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}gs(t){const e=this.ys(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class DH{constructor(t){this.Ts=t,this.docs=new fi(ft.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),o=i?i.size:0,s=this.Ts(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return me.resolve(n?n.document.mutableCopy():Ar.newInvalidDocument(e))}getEntries(t,e){let n=ts();return e.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():Ar.newInvalidDocument(i))}),me.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let o=ts();const s=e.path,a=new ft(s.child("")),d=this.docs.getIteratorFrom(a);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||YE(PR(g),n)<=0||(i.has(g.key)||Kv(e,g))&&(o=o.insert(g.key,g.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(t,e,n,i){Nt()}Es(t,e){return me.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new jO(this)}getSize(t){return me.resolve(this.size)}}class jO extends HO{constructor(t){super(),this.Jn=t}applyChanges(t){const e=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?e.push(this.Jn.addEntry(t,i)):this.Jn.removeEntry(n)}),me.waitFor(e)}getFromCache(t,e){return this.Jn.getEntry(t,e)}getAllFromCache(t,e){return this.Jn.getEntries(t,e)}}class Dx{constructor(t){this.persistence=t,this.As=new Ld(e=>xd(e),Cg),this.lastRemoteSnapshotVersion=Kt.min(),this.highestTargetId=0,this.Rs=0,this.vs=new UO,this.targetCount=0,this.bs=Mg.vn()}forEachTarget(t,e){return this.As.forEach((n,i)=>e(i)),me.resolve()}getLastRemoteSnapshotVersion(t){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return me.resolve(this.Rs)}allocateTargetId(t){return this.highestTargetId=this.bs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Rs&&(this.Rs=e),me.resolve()}Sn(t){this.As.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.bs=new Mg(e),this.highestTargetId=e),t.sequenceNumber>this.Rs&&(this.Rs=t.sequenceNumber)}addTargetData(t,e){return this.Sn(e),this.targetCount+=1,me.resolve()}updateTargetData(t,e){return this.Sn(e),me.resolve()}removeTargetData(t,e){return this.As.delete(e.target),this.vs.hs(e.targetId),this.targetCount-=1,me.resolve()}removeTargets(t,e,n){let i=0;const o=[];return this.As.forEach((s,a)=>{a.sequenceNumber<=e&&null===n.get(a.targetId)&&(this.As.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),me.waitFor(o).next(()=>i)}getTargetCount(t){return me.resolve(this.targetCount)}getTargetData(t,e){const n=this.As.get(e)||null;return me.resolve(n)}addMatchingKeys(t,e,n){return this.vs.os(e,n),me.resolve()}removeMatchingKeys(t,e,n){this.vs.cs(e,n);const i=this.persistence.referenceDelegate,o=[];return i&&e.forEach(s=>{o.push(i.markPotentiallyOrphaned(t,s))}),me.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.vs.hs(e),me.resolve()}getMatchingKeysForTargetId(t,e){const n=this.vs.fs(e);return me.resolve(n)}containsKey(t,e){return me.resolve(this.vs.containsKey(e))}}class WO{constructor(t,e){this.Ps={},this.overlays={},this.Vs=new Rs(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new Dx(this),this.indexManager=new LO,this.remoteDocumentCache=new DH(n=>this.referenceDelegate.Cs(n)),this.serializer=new OO(e),this.xs=new Ub(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new aw,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Ps[t.toKey()];return n||(n=new bH(e,this.referenceDelegate),this.Ps[t.toKey()]=n),n}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(t,e,n){Je("MemoryPersistence","Starting transaction:",t);const i=new Tx(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next(o=>this.referenceDelegate.ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Os(t,e){return me.or(Object.values(this.Ps).map(n=>()=>n.containsKey(t,e)))}}class Tx extends MR{constructor(t){super(),this.currentSequenceNumber=t}}class lw{constructor(t){this.persistence=t,this.$s=new UO,this.Ms=null}static Fs(t){return new lw(t)}get Bs(){if(this.Ms)return this.Ms;throw Nt()}addReference(t,e,n){return this.$s.addReference(n,e),this.Bs.delete(n.toString()),me.resolve()}removeReference(t,e,n){return this.$s.removeReference(n,e),this.Bs.add(n.toString()),me.resolve()}markPotentiallyOrphaned(t,e){return this.Bs.add(e.toString()),me.resolve()}removeTarget(t,e){this.$s.hs(e.targetId).forEach(i=>this.Bs.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(o=>this.Bs.add(o.toString()))}).next(()=>n.removeTargetData(t,e))}Ns(){this.Ms=new Set}ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Bs,n=>{const i=ft.fromPath(n);return this.Ls(t,i).next(o=>{o||e.removeEntry(i,Kt.min())})}).next(()=>(this.Ms=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ls(t,e).next(n=>{n?this.Bs.delete(e.toString()):this.Bs.add(e.toString())})}Cs(t){return 0}Ls(t,e){return me.or([()=>me.resolve(this.$s.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Os(t,e)])}}class $O{constructor(t){this.serializer=t}M(t,e,n,i){const o=new Lv("createOrUpgrade",e);var a;n<1&&i>=1&&(t.createObjectStore("owner"),(a=t).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hv,{unique:!0}),a.createObjectStore("documentMutations"),jb(t),function(a){a.createObjectStore("remoteDocuments")}(t));let s=me.resolve();return n<3&&i>=3&&(0!==n&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(t),jb(t)),s=s.next(()=>function(a){const d=a.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Kt.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(o))),n<4&&i>=4&&(0!==n&&(s=s.next(()=>function(a,d){return d.store("mutations").j().next(f=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hv,{unique:!0});const g=d.store("mutations"),C=f.map(E=>g.put(E));return me.waitFor(C)})}(t,o))),s=s.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),n<5&&i>=5&&(s=s.next(()=>this.qs(o))),n<6&&i>=6&&(s=s.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(t),this.Us(o)))),n<7&&i>=7&&(s=s.next(()=>this.Ks(o))),n<8&&i>=8&&(s=s.next(()=>this.Gs(t,o))),n<9&&i>=9&&(s=s.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(t)})),n<10&&i>=10&&(s=s.next(()=>this.Qs(o))),n<11&&i>=11&&(s=s.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),n<12&&i>=12&&(s=s.next(()=>{!function(a){const d=a.createObjectStore("documentOverlays",{keyPath:LM});d.createIndex("collectionPathOverlayIndex",GR,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",kM,{unique:!1})}(t)})),n<13&&i>=13&&(s=s.next(()=>function(a){const d=a.createObjectStore("remoteDocumentsV14",{keyPath:Bv});d.createIndex("documentKeyIndex",IM),d.createIndex("collectionGroupIndex",AM)}(t)).next(()=>this.zs(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),n<14&&i>=14&&(s=s.next(()=>this.js(t,o))),n<15&&i>=15&&(s=s.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:kR}).createIndex("sequenceNumberIndex",xM,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:FM}).createIndex("documentKeyIndex",Uv,{unique:!1})}(t))),s}Us(t){let e=0;return t.store("remoteDocuments").Z((n,i)=>{e+=Hf(i)}).next(()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}qs(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.j().next(i=>me.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",s).next(a=>me.forEach(a,d=>{Wt(d.userId===o.userId);const f=Og(this.serializer,d);return Gb(t,o.userId,f).next(()=>{})}))}))}Ks(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return n.Z((s,a)=>{const d=new Fn(s),f=[0,Os(d)];o.push(e.get(f).next(g=>g?me.resolve():e.put({targetId:0,path:Os(d),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(o))})}Gs(t,e){t.createObjectStore("collectionParents",{keyPath:MM});const n=e.store("collectionParents"),i=new kO,o=s=>{if(i.add(s)){const a=s.lastSegment(),d=s.popLast();return n.put({collectionId:a,parent:Os(d)})}};return e.store("remoteDocuments").Z({Y:!0},(s,a)=>{const d=new Fn(s);return o(d.popLast())}).next(()=>e.store("documentMutations").Z({Y:!0},([s,a,d],f)=>{const g=il(a);return o(g.popLast())}))}Qs(t){const e=t.store("targets");return e.Z((n,i)=>{const o=ns(i),s=IO(this.serializer,o);return e.put(s)})}zs(t,e){const n=e.store("remoteDocuments"),i=[];return n.Z((o,s)=>{const a=e.store("remoteDocumentsV14"),d=(f=s,f.document?new ft(Fn.fromString(f.document.name).popFirst(5)):f.noDocument?ft.fromSegments(f.noDocument.path):f.unknownDocument?ft.fromSegments(f.unknownDocument.path):Nt()).path.toArray();var f;const g={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(g))}).next(()=>me.waitFor(i))}js(t,e){const n=e.store("mutations"),i=BO(this.serializer),o=new WO(lw.Fs,this.serializer.se);return n.j().next(s=>{const a=new Map;return s.forEach(d=>{var f;let g=null!==(f=a.get(d.userId))&&void 0!==f?f:En();Og(this.serializer,d).keys().forEach(C=>g=g.add(C)),a.set(d.userId,g)}),me.forEach(a,(d,f)=>{const g=new co(f),C=XC.ie(this.serializer,g),E=o.getIndexManager(g),T=Bf.ie(g,this.serializer,E,o.referenceDelegate);return new sw(i,T,C,E).recalculateAndSaveOverlaysForDocumentKeys(new eb(e,Rs.ct),d).next()})})}}function jb(r){r.createObjectStore("targetDocuments",{keyPath:NM}).createIndex("documentTargetsIndex",fH,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PM,{unique:!0}),r.createObjectStore("targetGlobal")}const uw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wb{constructor(t,e,n,i,o,s,a,d,f,g,C=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Ws=o,this.window=s,this.document=a,this.Hs=f,this.Js=g,this.Ys=C,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=E=>Promise.resolve(),!Wb.D())throw new We(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EH(this,i),this.si=e+"main",this.serializer=new OO(d),this.ii=new rl(this.si,this.Ys,new $O(this.serializer)),this.Ds=new _H(this.referenceDelegate,this.serializer),this.remoteDocumentCache=BO(this.serializer),this.xs=new yx,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===g&&di("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(ye.FAILED_PRECONDITION,uw);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ds.getHighestSequenceNumber(t))}).then(t=>{this.Vs=new Rs(t,this.Hs)}).then(()=>{this.Ss=!0}).catch(t=>(this.ii&&this.ii.close(),Promise.reject(t)))}hi(t){var e=this;return this.ni=function(){var n=(0,Te.Z)(function*(i){if(e.started)return t(i)});return function(i){return n.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ii.B(function(){var e=(0,Te.Z)(function*(n){null===n.newVersion&&(yield t())});return function(n){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Ws.enqueueAndForget((0,Te.Z)(function*(){e.started&&(yield e.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>ay(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(t).next(e=>{e||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(t)).next(e=>this.isPrimary&&!e?this.di(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(Dd(t))return Je("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Ws.enqueueRetryable(()=>this.ni(t)),this.isPrimary=t})}li(t){return sy(t).get("owner").next(e=>me.resolve(this._i(e)))}mi(t){return ay(t).delete(this.clientId)}gi(){var t=this;return(0,Te.Z)(function*(){if(t.isPrimary&&!t.yi(t.ei,18e5)){t.ei=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Ji(n,"clientMetadata");return i.j().next(o=>{const s=t.pi(o,18e5),a=o.filter(d=>-1===s.indexOf(d));return me.forEach(a,d=>i.delete(d.clientId)).next(()=>a)})}).catch(()=>[]);if(t.ri)for(const n of e)t.ri.removeItem(t.Ii(n.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(t){return!!t&&t.ownerId===this.clientId}fi(t){return this.Js?me.resolve(!0):sy(t).get("owner").next(e=>{if(null!==e&&this.yi(e.leaseTimestampMs,5e3)&&!this.Ti(e.ownerId)){if(this._i(e)&&this.networkEnabled)return!0;if(!this._i(e)){if(!e.allowTabSynchronization)throw new We(ye.FAILED_PRECONDITION,uw);return!1}}return!(!this.networkEnabled||!this.inForeground)||ay(t).j().next(n=>void 0===this.pi(n,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Je("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Te.Z)(function*(){t.Ss=!1,t.Ei(),t.ti&&(t.ti.cancel(),t.ti=null),t.Ai(),t.Ri(),yield t.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new eb(e,Rs.ct);return t.di(n).next(()=>t.mi(n))}),t.ii.close(),t.vi()})()}pi(t,e){return t.filter(n=>this.yi(n.updateTimeMs,e)&&!this.Ti(n.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",t=>ay(t).j().next(e=>this.pi(e,18e5).map(n=>n.clientId)))}get started(){return this.Ss}getMutationQueue(t,e){return Bf.ie(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new wx(t,this.serializer.se.databaseId)}getDocumentOverlayCache(t){return XC.ie(this.serializer,t)}getBundleCache(){return this.xs}runTransaction(t,e,n){Je("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",o=15===(s=this.Ys)?XE:14===s?VR:13===s?JE:12===s?GM:11===s?QE:void Nt();var s;let a;return this.ii.runTransaction(t,i,o,d=>(a=new eb(d,this.Vs?this.Vs.next():Rs.ct),"readwrite-primary"===e?this.li(a).next(f=>!!f||this.fi(a)).next(f=>{if(!f)throw di(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new We(ye.FAILED_PRECONDITION,NR);return n(a)}).next(f=>this.wi(a).next(()=>f)):this.Pi(a).next(()=>n(a)))).then(d=>(a.raiseOnCommittedEvent(),d))}Pi(t){return sy(t).get("owner").next(e=>{if(null!==e&&this.yi(e.leaseTimestampMs,5e3)&&!this.Ti(e.ownerId)&&!this._i(e)&&!(this.Js||this.allowTabSynchronization&&e.allowTabSynchronization))throw new We(ye.FAILED_PRECONDITION,uw)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sy(t).put("owner",e)}static D(){return rl.D()}di(t){const e=sy(t);return e.get("owner").next(n=>this._i(n)?(Je("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):me.resolve())}yi(t,e){const n=Date.now();return!(t<n-e||t>n&&(di(`Detected an update time that is in the future: ${t} > ${n}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ei();const e=/(?:Version|Mobile)\/1[456]/;(0,H.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(t){var e;try{const n=null!==(null===(e=this.ri)||void 0===e?void 0:e.getItem(this.Ii(t)));return Je("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return di("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(t){di("Failed to set zombie client id.",t)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function sy(r){return Ji(r,"owner")}function ay(r){return Ji(r,"clientMetadata")}function ly(r,t){let e=r.projectId;return r.isDefaultDatabase||(e+="."+r.database),"firestore/"+t+"/"+e+"/"}class zO{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Vi=n,this.Si=i}static Di(t,e){let n=En(),i=En();for(const o of e.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new zO(t,e.fromCache,n,i)}}class $b{constructor(){this.Ci=!1}initialize(t,e){this.xi=t,this.indexManager=e,this.Ci=!0}getDocumentsMatchingQuery(t,e,n,i){return this.Ni(t,e).next(o=>o||this.ki(t,e,i,n)).next(o=>o||this.Oi(t,e))}Ni(t,e){if(iO(e))return me.resolve(null);let n=jr(e);return this.indexManager.getIndexType(t,n).next(i=>0===i?null:(null!==e.limit&&1===i&&(e=Sg(e,null,"F"),n=jr(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(o=>{const s=En(...o);return this.xi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,n).next(d=>{const f=this.$i(e,a);return this.Mi(e,f,s,d.readTime)?this.Ni(t,Sg(e,null,"F")):this.Fi(t,f,e,d)}))})))}ki(t,e,n,i){return iO(e)||i.isEqual(Kt.min())?this.Oi(t,e):this.xi.getDocuments(t,n).next(o=>{const s=this.$i(e,o);return this.Mi(e,s,n,i)?this.Oi(t,e):(zE()<=Ds.in.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pb(e)),this.Fi(t,s,e,AR(i,-1)))})}$i(t,e){let n=new fr(Yv(t));return e.forEach((i,o)=>{Kv(t,o)&&(n=n.add(o))}),n}Mi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const o="F"===t.limitType?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Oi(t,e){return zE()<=Ds.in.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",pb(e)),this.xi.getDocumentsMatchingQuery(t,e,Do.min())}Fi(t,e,n,i){return this.xi.getDocumentsMatchingQuery(t,n,i).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}}class zb{constructor(t,e,n,i){this.persistence=t,this.Bi=e,this.serializer=i,this.Li=new fi(gn),this.qi=new Ld(o=>xd(o),Cg),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(n)}Gi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new sw(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Li))}}function KO(r,t,e,n){return new zb(r,t,e,n)}function qO(r,t){return YO.apply(this,arguments)}function YO(){return YO=(0,Te.Z)(function*(r,t){const e=vt(r);return yield e.persistence.runTransaction("Handle user change","readonly",n=>{let i;return e.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,e.Gi(t),e.mutationQueue.getAllMutationBatches(n))).next(o=>{const s=[],a=[];let d=En();for(const f of i){s.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){a.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return e.localDocuments.getDocuments(n,d).next(f=>({Qi:f,removedBatchIds:s,addedBatchIds:a}))})})}),YO.apply(this,arguments)}function ZO(r){const t=vt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ds.getLastRemoteSnapshotVersion(e))}function QO(r,t,e){let n=En(),i=En();return e.forEach(o=>n=n.add(o)),t.getEntries(r,n).next(o=>{let s=ts();return e.forEach((a,d)=>{const f=o.get(a);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(a)),d.isNoDocument()&&d.version.isEqual(Kt.min())?(t.removeEntry(a,d.readTime),s=s.insert(a,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||0===d.version.compareTo(f.version)&&f.hasPendingWrites?(t.addEntry(d),s=s.insert(a,d)):Je("LocalStore","Ignoring outdated watch update for ",a,". Current version:",f.version," Watch version:",d.version)}),{zi:s,ji:i}})}function RH(r,t){const e=vt(r);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function uy(r,t){const e=vt(r);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return e.Ds.getTargetData(n,t).next(o=>o?(i=o,me.resolve(i)):e.Ds.allocateTargetId(n).next(s=>(i=new Ud(t,s,0,n.currentSequenceNumber),e.Ds.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=e.Li.get(n.targetId);return(null===i||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Li=e.Li.insert(n.targetId,n),e.qi.set(t,n.targetId)),n})}function cy(r,t,e){return JO.apply(this,arguments)}function JO(){return JO=(0,Te.Z)(function*(r,t,e){const n=vt(r),i=n.Li.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Dd(s))throw s;Je("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}n.Li=n.Li.remove(t),n.qi.delete(i.target)}),JO.apply(this,arguments)}function cw(r,t,e){const n=vt(r);let i=Kt.min(),o=En();return n.persistence.runTransaction("Execute query","readonly",s=>function(a,d,f){const g=vt(a),C=g.qi.get(f);return void 0!==C?me.resolve(g.Li.get(C)):g.Ds.getTargetData(d,f)}(n,s,jr(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Ds.getMatchingKeysForTargetId(s,a.targetId).next(d=>{o=d})}).next(()=>n.Bi.getDocumentsMatchingQuery(s,t,e?i:Kt.min(),e?o:En())).next(a=>(Ax(n,qv(t),a),{documents:a,Wi:o})))}function Ox(r,t){const e=vt(r),n=vt(e.Ds),i=e.Li.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",o=>n.ne(o,t).next(s=>s?s.target:null))}function Ix(r,t){const e=vt(r),n=e.Ui.get(t)||Kt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.Ki.getAllFromCollectionGroup(i,t,AR(n,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Ax(e,t,i),i))}function Ax(r,t,e){let n=r.Ui.get(t)||Kt.min();e.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),r.Ui.set(t,n)}function Kb(){return Kb=(0,Te.Z)(function*(r,t,e,n){const i=vt(r);let o=En(),s=ts();for(const f of e){const g=t.Hi(f.metadata.name);f.document&&(o=o.add(g));const C=t.Ji(f);C.setReadTime(t.Yi(f.metadata.readTime)),s=s.insert(g,C)}const a=i.Ki.newChangeBuffer({trackRemovals:!0}),d=yield uy(i,(f=n,jr(wg(Fn.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",f=>QO(f,a,s).next(g=>(a.apply(f),g)).next(g=>i.Ds.removeMatchingKeysForTargetId(f,d.targetId).next(()=>i.Ds.addMatchingKeys(f,o,d.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(f,g.zi,g.ji)).next(()=>g.zi)))}),Kb.apply(this,arguments)}function IH(r,t){return l.apply(this,arguments)}function l(){return l=(0,Te.Z)(function*(r,t,e=En()){const n=yield uy(r,jr(iy(t.bundledQuery))),i=vt(r);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Mi(t.readTime);if(n.snapshotVersion.compareTo(s)>=0)return i.xs.saveNamedQuery(o,t);const a=n.withResumeToken(Xi.EMPTY_BYTE_STRING,s);return i.Li=i.Li.insert(a.targetId,a),i.Ds.updateTargetData(o,a).next(()=>i.Ds.removeMatchingKeysForTargetId(o,n.targetId)).next(()=>i.Ds.addMatchingKeys(o,e,n.targetId)).next(()=>i.xs.saveNamedQuery(o,t))})}),l.apply(this,arguments)}function u(r,t){return`firestore_clients_${r}_${t}`}function h(r,t,e){let n=`firestore_mutations_${r}_${e}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}function p(r,t){return`firestore_targets_${r}_${t}`}class m{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static Zi(t,e,n){const i=JSON.parse(n);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new We(i.error.code,i.error.message))),s?new m(t,e,i.state,o):(di("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class _{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Zi(t,e){const n=JSON.parse(e);let i,o="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return o&&n.error&&(o="string"==typeof n.error.message&&"string"==typeof n.error.code,o&&(i=new We(n.error.code,n.error.message))),o?new _(t,n.state,i):(di("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class S{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const n=JSON.parse(e);let i="object"==typeof n&&n.activeTargetIds instanceof Array,o=UC();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=RM(n.activeTargetIds[s]),o=o.add(n.activeTargetIds[s]);return i?new S(t,o):(di("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class D{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new D(e.clientId,e.onlineState):(di("SharedClientState",`Failed to parse online state: ${t}`),null)}}class R{constructor(){this.activeTargetIds=UC()}tr(t){this.activeTargetIds=this.activeTargetIds.add(t)}er(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class N{constructor(t,e,n,i,o){this.window=t,this.Ws=e,this.persistenceKey=n,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new fi(gn),this.started=!1,this.ur=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.cr=u(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new R),this.hr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Te.Z)(function*(){const e=yield t.syncEngine.bi();for(const i of e){if(i===t.nr)continue;const o=t.getItem(u(t.persistenceKey,i));if(o){const s=S.Zi(i,o);s&&(t.rr=t.rr.insert(s.clientId,s))}}t.mr();const n=t.storage.getItem(t.wr);if(n){const i=t.gr(n);i&&t.yr(i)}for(const i of t.ur)t.ir(i);t.ur=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(t){let e=!1;return this.rr.forEach((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Ir(t,"pending")}updateMutationState(t,e,n){this.Ir(t,e,n),this.Tr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(p(this.persistenceKey,t));if(n){const i=_.Zi(t,n);i&&(e=i.state)}}return this.Er.tr(t),this.mr(),e}removeLocalQueryTarget(t){this.Er.er(t),this.mr()}isLocalQueryTarget(t){return this.Er.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(p(this.persistenceKey,t))}updateQueryState(t,e,n){this.Ar(t,e,n)}handleUserChange(t,e,n){e.forEach(i=>{this.Tr(i)}),this.currentUser=t,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Rr(t)}notifyBundleLoaded(t){this.vr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Je("SharedClientState","READ",t,e),e}setItem(t,e){Je("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Je("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ir(t){var e=this;const n=t;if(n.storageArea===this.storage){if(Je("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void di("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,Te.Z)(function*(){if(e.started){if(null!==n.key)if(e.hr.test(n.key)){if(null==n.newValue){const i=e.br(n.key);return e.Pr(i,null)}{const i=e.Vr(n.key,n.newValue);if(i)return e.Pr(i.clientId,i)}}else if(e.lr.test(n.key)){if(null!==n.newValue){const i=e.Sr(n.key,n.newValue);if(i)return e.Dr(i)}}else if(e.dr.test(n.key)){if(null!==n.newValue){const i=e.Cr(n.key,n.newValue);if(i)return e.Nr(i)}}else if(n.key===e.wr){if(null!==n.newValue){const i=e.gr(n.newValue);if(i)return e.yr(i)}}else if(n.key===e.ar){const i=function(o){let s=Rs.ct;if(null!=o)try{const a=JSON.parse(o);Wt("number"==typeof a),s=a}catch(a){di("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==Rs.ct&&e.sequenceNumberHandler(i)}else if(n.key===e._r){const i=e.kr(n.newValue);yield Promise.all(i.map(o=>e.syncEngine.Or(o)))}}else e.ur.push(n)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(t,e,n){const i=new m(this.currentUser,t,e,n),o=h(this.persistenceKey,this.currentUser,t);this.setItem(o,i.Xi())}Tr(t){const e=h(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Rr(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:t}))}Ar(t,e,n){const i=p(this.persistenceKey,t),o=new _(t,e,n);this.setItem(i,o.Xi())}vr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}br(t){const e=this.hr.exec(t);return e?e[1]:null}Vr(t,e){const n=this.br(t);return S.Zi(n,e)}Sr(t,e){const n=this.lr.exec(t),i=Number(n[1]);return m.Zi(new co(void 0!==n[2]?n[2]:null),i,e)}Cr(t,e){const n=this.dr.exec(t),i=Number(n[1]);return _.Zi(i,e)}gr(t){return D.Zi(t)}kr(t){return JSON.parse(t)}Dr(t){var e=this;return(0,Te.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.$r(t.batchId,t.state,t.error);Je("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Nr(t){return this.syncEngine.Mr(t.targetId,t.state,t.error)}Pr(t,e){const n=e?this.rr.insert(t,e):this.rr.remove(t),i=this.pr(this.rr),o=this.pr(n),s=[],a=[];return o.forEach(d=>{i.has(d)||s.push(d)}),i.forEach(d=>{o.has(d)||a.push(d)}),this.syncEngine.Fr(s,a).then(()=>{this.rr=n})}yr(t){this.rr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}pr(t){let e=UC();return t.forEach((n,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class L{constructor(){this.Br=new R,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Br.tr(t),this.Lr[t]||"not-current"}updateQueryState(t,e,n){this.Lr[t]=e}removeLocalQueryTarget(t){this.Br.er(t)}isLocalQueryTarget(t){return this.Br.activeTargetIds.has(t)}clearQueryState(t){delete this.Lr[t]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(t){return this.Br.activeTargetIds.has(t)}start(){return this.Br=new R,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class j{qr(t){}shutdown(){}}class ee{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(t){this.zr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.zr)t(0)}Qr(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.zr)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let le=null;function Me(){return null===le?le=268435456+Math.round(2147483648*Math.random()):le++,"0x"+le.toString(16)}const ot={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ct{constructor(t){this.Wr=t.Wr,this.Hr=t.Hr}Jr(t){this.Yr=t}Zr(t){this.Xr=t}onMessage(t){this.eo=t}close(){this.Hr()}send(t){this.Wr(t)}no(){this.Yr()}so(t){this.Xr(t)}io(t){this.eo(t)}}const pt="WebChannelConnection";class rn extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.ro=(t.ssl?"https":"http")+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(t,e,n,i,o){const s=Me(),a=this.ao(t,e);Je("RestConnection",`Sending RPC '${t}' ${s}:`,a,n);const d={};return this.ho(d,i,o),this.lo(t,a,d,n).then(f=>(Je("RestConnection",`Received RPC '${t}' ${s}: `,f),f),f=>{throw tl("RestConnection",`RPC '${t}' ${s} failed with error: `,f,"url: ",a,"request:",n),f})}fo(t,e,n,i,o,s){return this.co(t,e,n,i,o)}ho(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+dg,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,o)=>t[o]=i),n&&n.headers.forEach((i,o)=>t[o]=i)}ao(t,e){return`${this.ro}/v1/${e}:${ot[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}lo(t,e,n,i){const o=Me();return new Promise((s,a)=>{const d=new _M;d.setWithCredentials(!0),d.listenOnce(mM.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case $E.NO_ERROR:const g=d.getResponseJson();Je(pt,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(g)),s(g);break;case $E.TIMEOUT:Je(pt,`RPC '${t}' ${o} timed out`),a(new We(ye.DEADLINE_EXCEEDED,"Request time out"));break;case $E.HTTP_ERROR:const C=d.getStatus();if(Je(pt,`RPC '${t}' ${o} failed with status:`,C,"response text:",d.getResponseText()),C>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const T=E?.error;if(T&&T.status&&T.message){const I=function(M){const k=M.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(k)>=0?k:ye.UNKNOWN}(T.status);a(new We(I,T.message))}else a(new We(ye.UNKNOWN,"Server responded with status "+d.getStatus()))}else a(new We(ye.UNAVAILABLE,"Connection failed."));break;default:Nt()}}finally{Je(pt,`RPC '${t}' ${o} completed.`)}});const f=JSON.stringify(i);Je(pt,`RPC '${t}' ${o} sending request:`,i),d.send(e,"POST",f,n,15)})}wo(t,e,n){const i=Me(),o=[this.ro,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=pM(),a=gM(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new yM({})),this.ho(d.initMessageHeaders,e,n),d.encodeInitMessageHeaders=!0;const f=o.join("");Je(pt,`Creating RPC '${t}' stream ${i}: ${f}`,d);const g=s.createWebChannel(f,d);let C=!1,E=!1;const T=new Ct({Wr:M=>{E?Je(pt,`Not sending because RPC '${t}' stream ${i} is closed:`,M):(C||(Je(pt,`Opening RPC '${t}' stream ${i} transport.`),g.open(),C=!0),Je(pt,`RPC '${t}' stream ${i} sending:`,M),g.send(M))},Hr:()=>g.close()}),I=(M,k,W)=>{M.listen(k,z=>{try{W(z)}catch(J){setTimeout(()=>{throw J},0)}})};return I(g,NC.EventType.OPEN,()=>{E||Je(pt,`RPC '${t}' stream ${i} transport opened.`)}),I(g,NC.EventType.CLOSE,()=>{E||(E=!0,Je(pt,`RPC '${t}' stream ${i} transport closed`),T.so())}),I(g,NC.EventType.ERROR,M=>{E||(E=!0,tl(pt,`RPC '${t}' stream ${i} transport errored:`,M),T.so(new We(ye.UNAVAILABLE,"The operation could not be completed")))}),I(g,NC.EventType.MESSAGE,M=>{var k;if(!E){const W=M.data[0];Wt(!!W);const J=W.error||(null===(k=W[0])||void 0===k?void 0:k.error);if(J){Je(pt,`RPC '${t}' stream ${i} received error:`,J);const re=J.status;let ce=function(Xe){const Ke=pi[Xe];if(void 0!==Ke)return ex(Ke)}(re),Re=J.message;void 0===ce&&(ce=ye.INTERNAL,Re="Unknown error status: "+re+" with message "+J.message),E=!0,T.so(new We(ce,Re)),g.close()}else Je(pt,`RPC '${t}' stream ${i} received:`,W),T.io(W)}}),I(a,vM.STAT_EVENT,M=>{M.stat===ER.PROXY?Je(pt,`RPC '${t}' stream ${i} detected buffering proxy`):M.stat===ER.NOPROXY&&Je(pt,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.no()},0),T}}function qe(){return typeof window<"u"?window:null}function ln(){return typeof document<"u"?document:null}function Cr(r){return new EO(r,!0)}class ei{constructor(t,e,n=1e3,i=1.5,o=6e4){this.Ws=t,this.timerId=e,this._o=n,this.mo=i,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(t){this.cancel();const e=Math.floor(this.po+this.Ro()),n=Math.max(0,Date.now()-this.To),i=Math.max(0,e-n);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),t())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Px{constructor(t,e,n,i,o,s,a,d){this.Ws=t,this.bo=n,this.Po=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=d,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new ei(t,e)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var t=this;return(0,Te.Z)(function*(){t.xo()&&(yield t.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(t){this.Bo(),this.stream.send(t)}Mo(){var t=this;return(0,Te.Z)(function*(){if(t.No())return t.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(t,e){var n=this;return(0,Te.Z)(function*(){n.Bo(),n.Lo(),n.Co.cancel(),n.Vo++,4!==t?n.Co.reset():e&&e.code===ye.RESOURCE_EXHAUSTED?(di(e.toString()),di("Using maximum backoff delay to prevent overloading the backend."),n.Co.Eo()):e&&e.code===ye.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.qo(),n.stream.close(),n.stream=null),n.state=t,yield n.listener.Zr(e)})()}qo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Vo===e&&this.Ko(n,i)},n=>{t(()=>{const i=new We(ye.UNKNOWN,"Fetching auth token failed: "+n.message);return this.Go(i)})})}Ko(t,e){const n=this.Uo(this.Vo);this.stream=this.Qo(t,e),this.stream.Jr(()=>{n(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(i=>{n(()=>this.Go(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}ko(){var t=this;this.state=5,this.Co.Ao((0,Te.Z)(function*(){t.state=0,t.start()}))}Go(t){return Je("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Ws.enqueueAndForget(()=>this.Vo===t?e():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rq extends Px{constructor(t,e,n,i,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=o}Qo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.Co.reset();const e=function TO(r,t){let e;if("targetChange"in t){const n="NO_CHANGE"===(d=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:Nt(),i=t.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(Wt(void 0===f||"string"==typeof f),Xi.fromBase64String(f||"")):(Wt(void 0===f||f instanceof Uint8Array),Xi.fromUint8Array(f||new Uint8Array))}(r,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(d){const f=void 0===d.code?ye.UNKNOWN:ex(d.code);return new We(f,d.message||"")}(s);e=new Db(n,i,o,a||null)}else if("documentChange"in t){const n=t.documentChange,i=dc(r,n.document.name),o=Mi(n.document.updateTime),s=n.document.createTime?Mi(n.document.createTime):Kt.min(),a=new eo({mapValue:{fields:n.document.fields}}),d=Ar.newFoundDocument(i,o,s,a);e=new ty(n.targetIds||[],n.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const n=t.documentDelete,i=dc(r,n.document),o=n.readTime?Mi(n.readTime):Kt.min(),s=Ar.newNoDocument(i,o);e=new ty([],n.removedTargetIds||[],s.key,s)}else if("documentRemove"in t){const n=t.documentRemove,i=dc(r,n.document);e=new ty([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Nt();{const n=t.filter,o=new vO(n.count||0);e=new _O(n.targetId,o)}}var d;return e}(this.serializer,t),n=function(i){if(!("targetChange"in i))return Kt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Kt.min():o.readTime?Mi(o.readTime):Kt.min()}(t);return this.listener.zo(e,n)}jo(t){const e={};e.database=YC(this.serializer),e.addTarget=function(i,o){let s;const a=o.target;return s=$v(a)?{documents:lx(i,a)}:{query:ry(i,a)},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?s.resumeToken=bO(i,o.resumeToken):o.snapshotVersion.compareTo(Kt.min())>0&&(s.readTime=kf(i,o.snapshotVersion.toTimestamp())),s}(this.serializer,t);const n=function ux(r,t){const e=function(n,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);n&&(e.labels=n),this.Fo(e)}Wo(t){const e={};e.database=YC(this.serializer),e.removeTarget=t,this.Fo(e)}}class iq extends Px{constructor(t,e,n,i,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=o,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(Wt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Ho){this.Co.reset();const e=function RO(r,t){return r&&r.length>0?(Wt(void 0!==t),r.map(e=>function(n,i){let o=Mi(n.updateTime?n.updateTime:i);return o.isEqual(Kt.min())&&(o=Mi(i)),new gH(o,n.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),n=Mi(t.commitTime);return this.listener.Zo(n,e)}return Wt(!t.writeResults||0===t.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const t={};t.database=YC(this.serializer),this.Fo(t)}Yo(t){const e={streamToken:this.lastStreamToken,writes:t.map(n=>Bd(this.serializer,n))};this.Fo(e)}}class oq extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.eu=!1}nu(){if(this.eu)throw new We(ye.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,n){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.co(t,e,n,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new We(ye.UNKNOWN,i.toString())})}fo(t,e,n,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.fo(t,e,n,o,s,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new We(ye.UNKNOWN,o.toString())})}terminate(){this.eu=!0}}class aq{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.uu("Offline")))}set(t){this.hu(),this.su=0,"Online"===t&&(this.ru=!1),this.uu(t)}uu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}cu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(di(e),this.ru=!1):Je("OnlineStateTracker",e)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class lq{constructor(t,e,n,i,o){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr(a=>{n.enqueueAndForget((0,Te.Z)(function*(){var d;jf(s)&&(Je("RemoteStore","Restarting streams for network reachability change."),yield(d=(0,Te.Z)(function*(f){const g=vt(f);g.du.add(4),yield dw(g),g.mu.set("Unknown"),g.du.delete(4),yield qb(g)}),function(f){return d.apply(this,arguments)})(s))}))}),this.mu=new aq(n,i)}}function qb(r){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,Te.Z)(function*(r){if(jf(r))for(const t of r.wu)yield t(!0)}),Mx.apply(this,arguments)}function dw(r){return xx.apply(this,arguments)}function xx(){return xx=(0,Te.Z)(function*(r){for(const t of r.wu)yield t(!1)}),xx.apply(this,arguments)}function XO(r,t){const e=vt(r);e.fu.has(t.targetId)||(e.fu.set(t.targetId,t),kx(e)?Lx(e):fw(e).No()&&Fx(e,t))}function Yb(r,t){const e=vt(r),n=fw(e);e.fu.delete(t),n.No()&&AH(e,t),0===e.fu.size&&(n.No()?n.$o():jf(e)&&e.mu.set("Unknown"))}function Fx(r,t){r.gu.Ot(t.targetId),fw(r).jo(t)}function AH(r,t){r.gu.Ot(t),fw(r).Wo(t)}function Lx(r){r.gu=new tx({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),ne:t=>r.fu.get(t)||null}),fw(r).start(),r.mu.ou()}function kx(r){return jf(r)&&!fw(r).xo()&&r.fu.size>0}function jf(r){return 0===vt(r).du.size}function PH(r){r.gu=void 0}function uq(r){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,Te.Z)(function*(r){r.fu.forEach((t,e)=>{Fx(r,t)})}),Gx.apply(this,arguments)}function cq(r,t){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,Te.Z)(function*(r,t){PH(r),kx(r)?(r.mu.au(t),Lx(r)):r.mu.set("Unknown")}),Vx.apply(this,arguments)}function dq(r,t,e){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,Te.Z)(function*(r,t,e){if(r.mu.set("Online"),t instanceof Db&&2===t.state&&t.cause)try{yield(n=(0,Te.Z)(function*(i,o){const s=o.cause;for(const a of o.targetIds)i.fu.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.fu.delete(a),i.gu.removeTarget(a))}),function(i,o){return n.apply(this,arguments)})(r,t)}catch(n){Je("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield eI(r,n)}else if(t instanceof ty?r.gu.Kt(t):t instanceof _O?r.gu.Jt(t):r.gu.zt(t),!e.isEqual(Kt.min()))try{const n=yield ZO(r.localStore);e.compareTo(n)>=0&&(yield function(i,o){const s=i.gu.Xt(o);return s.targetChanges.forEach((a,d)=>{if(a.resumeToken.approximateByteSize()>0){const f=i.fu.get(d);f&&i.fu.set(d,f.withResumeToken(a.resumeToken,o))}}),s.targetMismatches.forEach(a=>{const d=i.fu.get(a);if(!d)return;i.fu.set(a,d.withResumeToken(Xi.EMPTY_BYTE_STRING,d.snapshotVersion)),AH(i,a);const f=new Ud(d.target,a,1,d.sequenceNumber);Fx(i,f)}),i.remoteSyncer.applyRemoteEvent(s)}(r,e))}catch(n){Je("RemoteStore","Failed to raise snapshot:",n),yield eI(r,n)}var n}),Hx.apply(this,arguments)}function eI(r,t,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,Te.Z)(function*(r,t,e){if(!Dd(t))throw t;r.du.add(1),yield dw(r),r.mu.set("Offline"),e||(e=()=>ZO(r.localStore)),r.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){Je("RemoteStore","Retrying IndexedDB access"),yield e(),r.du.delete(1),yield qb(r)}))}),Bx.apply(this,arguments)}function NH(r,t){return t().catch(e=>eI(r,e,t))}function hw(r){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,Te.Z)(function*(r){const t=vt(r),e=Fg(t);let n=t.lu.length>0?t.lu[t.lu.length-1].batchId:-1;for(;hq(t);)try{const i=yield RH(t.localStore,n);if(null===i){0===t.lu.length&&e.$o();break}n=i.batchId,fq(t,i)}catch(i){yield eI(t,i)}MH(t)&&xH(t)}),Ux.apply(this,arguments)}function hq(r){return jf(r)&&r.lu.length<10}function fq(r,t){r.lu.push(t);const e=Fg(r);e.No()&&e.Jo&&e.Yo(t.mutations)}function MH(r){return jf(r)&&!Fg(r).xo()&&r.lu.length>0}function xH(r){Fg(r).start()}function pq(r){return jx.apply(this,arguments)}function jx(){return jx=(0,Te.Z)(function*(r){Fg(r).tu()}),jx.apply(this,arguments)}function gq(r){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,Te.Z)(function*(r){const t=Fg(r);for(const e of r.lu)t.Yo(e.mutations)}),Wx.apply(this,arguments)}function mq(r,t,e){return $x.apply(this,arguments)}function $x(){return $x=(0,Te.Z)(function*(r,t,e){const n=r.lu.shift(),i=$C.from(n,t,e);yield NH(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),yield hw(r)}),$x.apply(this,arguments)}function vq(r,t){return zx.apply(this,arguments)}function zx(){return zx=(0,Te.Z)(function*(r,t){var e;t&&Fg(r).Jo&&(yield(e=(0,Te.Z)(function*(n,i){if(yO(o=i.code)&&o!==ye.ABORTED){const s=n.lu.shift();Fg(n).Oo(),yield NH(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield hw(n)}var o}),function(n,i){return e.apply(this,arguments)})(r,t)),MH(r)&&xH(r)}),zx.apply(this,arguments)}function FH(r,t){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,Te.Z)(function*(r,t){const e=vt(r);e.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const n=jf(e);e.du.add(3),yield dw(e),n&&e.mu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.du.delete(3),yield qb(e)}),Kx.apply(this,arguments)}function qx(r,t){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,Te.Z)(function*(r,t){const e=vt(r);t?(e.du.delete(2),yield qb(e)):t||(e.du.add(2),yield dw(e),e.mu.set("Unknown"))}),Yx.apply(this,arguments)}function fw(r){return r.yu||(r.yu=function(t,e,n){const i=vt(t);return i.nu(),new rq(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(r.datastore,r.asyncQueue,{Jr:uq.bind(null,r),Zr:cq.bind(null,r),zo:dq.bind(null,r)}),r.wu.push(function(){var t=(0,Te.Z)(function*(e){e?(r.yu.Oo(),kx(r)?Lx(r):r.mu.set("Unknown")):(yield r.yu.stop(),PH(r))});return function(e){return t.apply(this,arguments)}}())),r.yu}function Fg(r){return r.pu||(r.pu=function(t,e,n){const i=vt(t);return i.nu(),new iq(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(r.datastore,r.asyncQueue,{Jr:pq.bind(null,r),Zr:vq.bind(null,r),Xo:gq.bind(null,r),Zo:mq.bind(null,r)}),r.wu.push(function(){var t=(0,Te.Z)(function*(e){e?(r.pu.Oo(),yield hw(r)):(yield r.pu.stop(),r.lu.length>0&&(Je("RemoteStore",`Stopping write stream with ${r.lu.length} pending writes`),r.lu=[]))});return function(e){return t.apply(this,arguments)}}())),r.pu}class Zx{constructor(t,e,n,i,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}static createAndSchedule(t,e,n,i,o){const s=Date.now()+n,a=new Zx(t,e,s,i,o);return a.start(n),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new We(ye.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pw(r,t){if(di("AsyncQueue",`${t}: ${r}`),Dd(r))return new We(ye.UNAVAILABLE,`${t}: ${r}`);throw r}class gw{constructor(t){this.comparator=t?(e,n)=>t(e,n)||ft.comparator(e.key,n.key):(e,n)=>ft.comparator(e.key,n.key),this.keyedMap=Eg(),this.sortedSet=new fi(this.comparator)}static emptySet(t){return new gw(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof gw)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new gw;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class LH{constructor(){this.Iu=new fi(ft.comparator)}track(t){const e=t.doc.key,n=this.Iu.get(e);n?0!==t.type&&3===n.type?this.Iu=this.Iu.insert(e,t):3===t.type&&1!==n.type?this.Iu=this.Iu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Iu=this.Iu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Iu=this.Iu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Iu=this.Iu.remove(e):1===t.type&&2===n.type?this.Iu=this.Iu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Iu=this.Iu.insert(e,{type:2,doc:t.doc}):Nt():this.Iu=this.Iu.insert(e,t)}Tu(){const t=[];return this.Iu.inorderTraversal((e,n)=>{t.push(n)}),t}}class mw{constructor(t,e,n,i,o,s,a,d,f){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(t,e,n,i,o){const s=[];return e.forEach(a=>{s.push({type:0,doc:a})}),new mw(t,e,gw.emptySet(e),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class yq{constructor(){this.Eu=void 0,this.listeners=[]}}class _q{constructor(){this.queries=new Ld(t=>oO(t),lc),this.onlineState="Unknown",this.Au=new Set}}function Qx(r,t){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,Te.Z)(function*(r,t){const e=vt(r),n=t.query;let i=!1,o=e.queries.get(n);if(o||(i=!0,o=new yq),i)try{o.Eu=yield e.onListen(n)}catch(s){const a=pw(s,`Initialization of query '${pb(t.query)}' failed`);return void t.onError(a)}e.queries.set(n,o),o.listeners.push(t),t.Ru(e.onlineState),o.Eu&&t.vu(o.Eu)&&t1(e)}),Jx.apply(this,arguments)}function Xx(r,t){return e1.apply(this,arguments)}function e1(){return e1=(0,Te.Z)(function*(r,t){const e=vt(r),n=t.query;let i=!1;const o=e.queries.get(n);if(o){const s=o.listeners.indexOf(t);s>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length)}if(i)return e.queries.delete(n),e.onUnlisten(n)}),e1.apply(this,arguments)}function Cq(r,t){const e=vt(r);let n=!1;for(const i of t){const s=e.queries.get(i.query);if(s){for(const a of s.listeners)a.vu(i)&&(n=!0);s.Eu=i}}n&&t1(e)}function wq(r,t,e){const n=vt(r),i=n.queries.get(t);if(i)for(const o of i.listeners)o.onError(e);n.queries.delete(t)}function t1(r){r.Au.forEach(t=>{t.next()})}class n1{constructor(t,e,n){this.query=t,this.bu=e,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=n||{}}vu(t){if(!this.options.includeMetadataChanges){const n=[];for(const i of t.docChanges)3!==i.type&&n.push(i);t=new mw(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Pu?this.Su(t)&&(this.bu.next(t),e=!0):this.Du(t,this.onlineState)&&(this.Cu(t),e=!0),this.Vu=t,e}onError(t){this.bu.error(t)}Ru(t){this.onlineState=t;let e=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,t)&&(this.Cu(this.Vu),e=!0),e}Du(t,e){return!t.fromCache||(!this.options.xu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Su(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(t){t=mw.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Pu=!0,this.bu.next(t)}}class Sq{constructor(t,e){this.Nu=t,this.byteLength=e}ku(){return"metadata"in this.Nu}}class kH{constructor(t){this.serializer=t}Hi(t){return dc(this.serializer,t)}Ji(t){return t.metadata.exists?ny(this.serializer,t.document,!1):Ar.newNoDocument(this.Hi(t.metadata.name),this.Yi(t.metadata.readTime))}Yi(t){return Mi(t)}}class Eq{constructor(t,e,n){this.Ou=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GH(t)}$u(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Nu.namedQuery)this.queries.push(t.Nu.namedQuery);else if(t.Nu.documentMetadata){this.documents.push({metadata:t.Nu.documentMetadata}),t.Nu.documentMetadata.exists||++e;const n=Fn.fromString(t.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.Nu.document&&(this.documents[this.documents.length-1].document=t.Nu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,n=new kH(this.serializer);for(const i of t)if(i.metadata.queries){const o=n.Hi(i.metadata.name);for(const s of i.metadata.queries){const a=(e.get(s)||En()).add(o);e.set(s,a)}}return e}complete(){var t=this;return(0,Te.Z)(function*(){const e=yield function OH(r,t,e,n){return Kb.apply(this,arguments)}(t.localStore,new kH(t.serializer),t.documents,t.Ou.id),n=t.Mu(t.documents);for(const i of t.queries)yield IH(t.localStore,i,n.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Fu:t.collectionGroups,Bu:e}})()}}function GH(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class VH{constructor(t){this.key=t}}class HH{constructor(t){this.key=t}}class BH{constructor(t,e){this.query=t,this.Lu=e,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=En(),this.mutatedKeys=En(),this.Ku=Yv(t),this.Gu=new gw(this.Ku)}get Qu(){return this.Lu}zu(t,e){const n=e?e.ju:new LH,i=e?e.Gu:this.Gu;let o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1;const d="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,f="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((g,C)=>{const E=i.get(g),T=Kv(this.query,C)?C:null,I=!!E&&this.mutatedKeys.has(E.key),M=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let k=!1;E&&T?E.data.isEqual(T.data)?I!==M&&(n.track({type:3,doc:T}),k=!0):this.Wu(E,T)||(n.track({type:2,doc:T}),k=!0,(d&&this.Ku(T,d)>0||f&&this.Ku(T,f)<0)&&(a=!0)):!E&&T?(n.track({type:0,doc:T}),k=!0):E&&!T&&(n.track({type:1,doc:E}),k=!0,(d||f)&&(a=!0)),k&&(T?(s=s.add(T),o=M?o.add(g):o.delete(g)):(s=s.delete(g),o=o.delete(g)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const g="F"===this.query.limitType?s.last():s.first();s=s.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{Gu:s,ju:n,Mi:a,mutatedKeys:o}}Wu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.Gu;this.Gu=t.Gu,this.mutatedKeys=t.mutatedKeys;const o=t.ju.Tu();o.sort((f,g)=>function(C,E){const T=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt()}};return T(C)-T(E)}(f.type,g.type)||this.Ku(f.doc,g.doc)),this.Hu(n);const s=e?this.Ju():[],a=0===this.Uu.size&&this.current?1:0,d=a!==this.qu;return this.qu=a,0!==o.length||d?{snapshot:new mw(this.query,t.Gu,i,o,t.mutatedKeys,0===a,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:s}:{Yu:s}}Ru(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new LH,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(t){return!this.Lu.has(t)&&!!this.Gu.has(t)&&!this.Gu.get(t).hasLocalMutations}Hu(t){t&&(t.addedDocuments.forEach(e=>this.Lu=this.Lu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Lu=this.Lu.delete(e)),this.current=t.current)}Ju(){if(!this.current)return[];const t=this.Uu;this.Uu=En(),this.Gu.forEach(n=>{this.Zu(n.key)&&(this.Uu=this.Uu.add(n.key))});const e=[];return t.forEach(n=>{this.Uu.has(n)||e.push(new HH(n))}),this.Uu.forEach(n=>{t.has(n)||e.push(new VH(n))}),e}Xu(t){this.Lu=t.Wi,this.Uu=En();const e=this.zu(t.documents);return this.applyChanges(e,!0)}tc(){return mw.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class bq{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Dq{constructor(t){this.key=t,this.ec=!1}}class Tq{constructor(t,e,n,i,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nc={},this.sc=new Ld(a=>oO(a),lc),this.ic=new Map,this.rc=new Set,this.oc=new fi(ft.comparator),this.uc=new Map,this.cc=new UO,this.ac={},this.hc=new Map,this.lc=Mg.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Rq(r,t){return r1.apply(this,arguments)}function r1(){return r1=(0,Te.Z)(function*(r,t){const e=T1(r);let n,i;const o=e.sc.get(t);if(o)n=o.targetId,e.sharedClientState.addLocalQueryTarget(n),i=o.view.tc();else{const s=yield uy(e.localStore,jr(t));e.isPrimaryClient&&XO(e.remoteStore,s);const a=e.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,i=yield i1(e,t,n,"current"===a,s.resumeToken)}return i}),r1.apply(this,arguments)}function i1(r,t,e,n,i){return o1.apply(this,arguments)}function o1(){return o1=(0,Te.Z)(function*(r,t,e,n,i){r.dc=(C,E,T)=>{return(I=(0,Te.Z)(function*(M,k,W,z){let J=k.view.zu(W);J.Mi&&(J=yield cw(M.localStore,k.query,!1).then(({documents:Re})=>k.view.zu(Re,J)));const re=z&&z.targetChanges.get(k.targetId),ce=k.view.applyChanges(J,M.isPrimaryClient,re);return g1(M,k.targetId,ce.Yu),ce.snapshot}),function(M,k,W,z){return I.apply(this,arguments)})(r,C,E,T);var I};const o=yield cw(r.localStore,t,!0),s=new BH(t,o.Wi),a=s.zu(o.documents),d=Tg.createSynthesizedTargetChangeForCurrentChange(e,n&&"Offline"!==r.onlineState,i),f=s.applyChanges(a,r.isPrimaryClient,d);g1(r,e,f.Yu);const g=new bq(t,e,s);return r.sc.set(t,g),r.ic.has(e)?r.ic.get(e).push(t):r.ic.set(e,[t]),f.snapshot}),o1.apply(this,arguments)}function Oq(r,t){return s1.apply(this,arguments)}function s1(){return s1=(0,Te.Z)(function*(r,t){const e=vt(r),n=e.sc.get(t),i=e.ic.get(n.targetId);if(i.length>1)return e.ic.set(n.targetId,i.filter(o=>!lc(o,t))),void e.sc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)||(yield cy(e.localStore,n.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(n.targetId),Yb(e.remoteStore,n.targetId),vw(e,n.targetId)}).catch(nl))):(vw(e,n.targetId),yield cy(e.localStore,n.targetId,!0))}),s1.apply(this,arguments)}function a1(){return a1=(0,Te.Z)(function*(r,t,e){const n=R1(r);try{const i=yield function(o,s){const a=vt(o),d=hr.now(),f=s.reduce((E,T)=>E.add(T.key),En());let g,C;return a.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=ts(),I=En();return a.Ki.getEntries(E,f).next(M=>{T=M,T.forEach((k,W)=>{W.isValidDocument()||(I=I.add(k))})}).next(()=>a.localDocuments.getOverlayedDocuments(E,T)).next(M=>{g=M;const k=[];for(const W of s){const z=fO(W,g.get(W.key).overlayedDocument);null!=z&&k.push(new uc(W.key,z,ob(z.value.mapValue),Vr.exists(!0)))}return a.mutationQueue.addMutationBatch(E,d,k,s)}).next(M=>{C=M;const k=M.applyToLocalDocumentSet(g,I);return a.documentOverlayCache.saveOverlays(E,M.batchId,k)})}).then(()=>({batchId:C.batchId,changes:BC(g)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(i.batchId),function(o,s,a){let d=o.ac[o.currentUser.toKey()];d||(d=new fi(gn)),d=d.insert(s,a),o.ac[o.currentUser.toKey()]=d}(n,i.batchId,e),yield Wf(n,i.changes),yield hw(n.remoteStore)}catch(i){const o=pw(i,"Failed to persist write");e.reject(o)}}),a1.apply(this,arguments)}function UH(r,t){return l1.apply(this,arguments)}function l1(){return l1=(0,Te.Z)(function*(r,t){const e=vt(r);try{const n=yield function Rx(r,t){const e=vt(r),n=t.snapshotVersion;let i=e.Li;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=e.Ki.newChangeBuffer({trackRemovals:!0});i=e.Li;const a=[];t.targetChanges.forEach((g,C)=>{const E=i.get(C);if(!E)return;a.push(e.Ds.removeMatchingKeys(o,g.removedDocuments,C).next(()=>e.Ds.addMatchingKeys(o,g.addedDocuments,C)));let T=E.withSequenceNumber(o.currentSequenceNumber);var I,M,k;t.targetMismatches.has(C)?T=T.withResumeToken(Xi.EMPTY_BYTE_STRING,Kt.min()).withLastLimboFreeSnapshotVersion(Kt.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,n)),i=i.insert(C,T),M=T,k=g,(0===(I=E).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0)&&a.push(e.Ds.updateTargetData(o,T))});let d=ts(),f=En();if(t.documentUpdates.forEach(g=>{t.resolvedLimboDocuments.has(g)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(o,g))}),a.push(QO(o,s,t.documentUpdates).next(g=>{d=g.zi,f=g.ji})),!n.isEqual(Kt.min())){const g=e.Ds.getLastRemoteSnapshotVersion(o).next(C=>e.Ds.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(g)}return me.waitFor(a).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(e.Li=i,o))}(e.localStore,t);t.targetChanges.forEach((i,o)=>{const s=e.uc.get(o);s&&(Wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ec=!0:i.modifiedDocuments.size>0?Wt(s.ec):i.removedDocuments.size>0&&(Wt(s.ec),s.ec=!1))}),yield Wf(e,n,t)}catch(n){yield nl(n)}}),l1.apply(this,arguments)}function jH(r,t,e){const n=vt(r);if(n.isPrimaryClient&&0===e||!n.isPrimaryClient&&1===e){const i=[];n.sc.forEach((o,s)=>{const a=s.view.Ru(t);a.snapshot&&i.push(a.snapshot)}),function(o,s){const a=vt(o);a.onlineState=s;let d=!1;a.queries.forEach((f,g)=>{for(const C of g.listeners)C.Ru(s)&&(d=!0)}),d&&t1(a)}(n.eventManager,t),i.length&&n.nc.zo(i),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}function Aq(r,t,e){return u1.apply(this,arguments)}function u1(){return u1=(0,Te.Z)(function*(r,t,e){const n=vt(r);n.sharedClientState.updateQueryState(t,"rejected",e);const i=n.uc.get(t),o=i&&i.key;if(o){let s=new fi(ft.comparator);s=s.insert(o,Ar.newNoDocument(o,Kt.min()));const a=En().add(o),d=new ey(Kt.min(),new Map,new fr(gn),s,a);yield UH(n,d),n.oc=n.oc.remove(o),n.uc.delete(t),m1(n)}else yield cy(n.localStore,t,!1).then(()=>vw(n,t,e)).catch(nl)}),u1.apply(this,arguments)}function Pq(r,t){return c1.apply(this,arguments)}function c1(){return c1=(0,Te.Z)(function*(r,t){const e=vt(r),n=t.batch.batchId;try{const i=yield function TH(r,t){const e=vt(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=t.batch.keys(),o=e.Ki.newChangeBuffer({trackRemovals:!0});return function(s,a,d,f){const g=d.batch,C=g.keys();let E=me.resolve();return C.forEach(T=>{E=E.next(()=>f.getEntry(a,T)).next(I=>{const M=d.docVersions.get(T);Wt(null!==M),I.version.compareTo(M)<0&&(g.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),f.addEntry(I)))})}),E.next(()=>s.mutationQueue.removeMutationBatch(a,g))}(e,n,t,o).next(()=>o.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(s){let a=En();for(let d=0;d<s.mutationResults.length;++d)s.mutationResults[d].transformResults.length>0&&(a=a.add(s.batch.mutations[d].key));return a}(t))).next(()=>e.localDocuments.getDocuments(n,i))})}(e.localStore,t);p1(e,n,null),f1(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),yield Wf(e,i)}catch(i){yield nl(i)}}),c1.apply(this,arguments)}function Nq(r,t,e){return d1.apply(this,arguments)}function d1(){return d1=(0,Te.Z)(function*(r,t,e){const n=vt(r);try{const i=yield function(o,s){const a=vt(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return a.mutationQueue.lookupMutationBatch(d,s).next(g=>(Wt(null!==g),f=g.keys(),a.mutationQueue.removeMutationBatch(d,g))).next(()=>a.mutationQueue.performConsistencyCheck(d)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(d,f,s)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>a.localDocuments.getDocuments(d,f))})}(n.localStore,t);p1(n,t,e),f1(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),yield Wf(n,i)}catch(i){yield nl(i)}}),d1.apply(this,arguments)}function h1(){return h1=(0,Te.Z)(function*(r,t){const e=vt(r);jf(e.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=yield function(o){const s=vt(o);return s.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>s.mutationQueue.getHighestUnacknowledgedBatchId(a))}(e.localStore);if(-1===n)return void t.resolve();const i=e.hc.get(n)||[];i.push(t),e.hc.set(n,i)}catch(n){const i=pw(n,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}}),h1.apply(this,arguments)}function f1(r,t){(r.hc.get(t)||[]).forEach(e=>{e.resolve()}),r.hc.delete(t)}function p1(r,t,e){const n=vt(r);let i=n.ac[n.currentUser.toKey()];if(i){const o=i.get(t);o&&(e?o.reject(e):o.resolve(),i=i.remove(t)),n.ac[n.currentUser.toKey()]=i}}function vw(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(const n of r.ic.get(t))r.sc.delete(n),e&&r.nc.wc(n,e);r.ic.delete(t),r.isPrimaryClient&&r.cc.hs(t).forEach(n=>{r.cc.containsKey(n)||WH(r,n)})}function WH(r,t){r.rc.delete(t.path.canonicalString());const e=r.oc.get(t);null!==e&&(Yb(r.remoteStore,e),r.oc=r.oc.remove(t),r.uc.delete(e),m1(r))}function g1(r,t,e){for(const n of e)n instanceof VH?(r.cc.addReference(n.key,t),xq(r,n)):n instanceof HH?(Je("SyncEngine","Document no longer in limbo: "+n.key),r.cc.removeReference(n.key,t),r.cc.containsKey(n.key)||WH(r,n.key)):Nt()}function xq(r,t){const e=t.key,n=e.path.canonicalString();r.oc.get(e)||r.rc.has(n)||(Je("SyncEngine","New document in limbo: "+e),r.rc.add(n),m1(r))}function m1(r){for(;r.rc.size>0&&r.oc.size<r.maxConcurrentLimboResolutions;){const t=r.rc.values().next().value;r.rc.delete(t);const e=new ft(Fn.fromString(t)),n=r.lc.next();r.uc.set(n,new Dq(e)),r.oc=r.oc.insert(e,n),XO(r.remoteStore,new Ud(jr(wg(e.path)),n,2,Rs.ct))}}function Wf(r,t,e){return v1.apply(this,arguments)}function v1(){return v1=(0,Te.Z)(function*(r,t,e){const n=vt(r),i=[],o=[],s=[];var a;n.sc.isEmpty()||(n.sc.forEach((a,d)=>{s.push(n.dc(d,t,e).then(f=>{if((f||e)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(d.targetId,f?.fromCache?"not-current":"current"),f){i.push(f);const g=zO.Di(d.targetId,f);o.push(g)}}))}),yield Promise.all(s),n.nc.zo(i),yield(a=(0,Te.Z)(function*(d,f){const g=vt(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>me.forEach(f,E=>me.forEach(E.Vi,T=>g.persistence.referenceDelegate.addReference(C,E.targetId,T)).next(()=>me.forEach(E.Si,T=>g.persistence.referenceDelegate.removeReference(C,E.targetId,T)))))}catch(C){if(!Dd(C))throw C;Je("LocalStore","Failed to update sequence numbers: "+C)}for(const C of f){const E=C.targetId;if(!C.fromCache){const T=g.Li.get(E),M=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);g.Li=g.Li.insert(E,M)}}}),function(d,f){return a.apply(this,arguments)})(n.localStore,o))}),v1.apply(this,arguments)}function Fq(r,t){return y1.apply(this,arguments)}function y1(){return y1=(0,Te.Z)(function*(r,t){const e=vt(r);if(!e.currentUser.isEqual(t)){Je("SyncEngine","User change. New user:",t.toKey());const n=yield qO(e.localStore,t);e.currentUser=t,(i=e).hc.forEach(s=>{s.forEach(a=>{a.reject(new We(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),yield Wf(e,n.Qi)}var i}),y1.apply(this,arguments)}function Lq(r,t){const e=vt(r),n=e.uc.get(t);if(n&&n.ec)return En().add(n.key);{let i=En();const o=e.ic.get(t);if(!o)return i;for(const s of o){const a=e.sc.get(s);i=i.unionWith(a.view.Qu)}return i}}function kq(r,t){return _1.apply(this,arguments)}function _1(){return _1=(0,Te.Z)(function*(r,t){const e=vt(r),n=yield cw(e.localStore,t.query,!0),i=t.view.Xu(n);return e.isPrimaryClient&&g1(e,t.targetId,i.Yu),i}),_1.apply(this,arguments)}function Gq(r,t){return C1.apply(this,arguments)}function C1(){return C1=(0,Te.Z)(function*(r,t){const e=vt(r);return Ix(e.localStore,t).then(n=>Wf(e,n))}),C1.apply(this,arguments)}function Vq(r,t,e,n){return w1.apply(this,arguments)}function w1(){return w1=(0,Te.Z)(function*(r,t,e,n){const i=vt(r),o=yield function(s,a){const d=vt(s),f=vt(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.In(g,a).next(C=>C?d.localDocuments.getDocuments(g,C):me.resolve(null)))}(i.localStore,t);var a;null!==o?("pending"===e?yield hw(i.remoteStore):"acknowledged"===e||"rejected"===e?(p1(i,t,n||null),f1(i,t),a=t,vt(vt(i.localStore).mutationQueue).En(a)):Nt(),yield Wf(i,o)):Je("SyncEngine","Cannot apply mutation batch with id: "+t)}),w1.apply(this,arguments)}function S1(){return S1=(0,Te.Z)(function*(r,t){const e=vt(r);if(T1(e),R1(e),!0===t&&!0!==e.fc){const n=e.sharedClientState.getAllActiveQueryTargets(),i=yield $H(e,n.toArray());e.fc=!0,yield qx(e.remoteStore,!0);for(const o of i)XO(e.remoteStore,o)}else if(!1===t&&!1!==e.fc){const n=[];let i=Promise.resolve();e.ic.forEach((o,s)=>{e.sharedClientState.isLocalQueryTarget(s)?n.push(s):i=i.then(()=>(vw(e,s),cy(e.localStore,s,!0))),Yb(e.remoteStore,s)}),yield i,yield $H(e,n),function(o){const s=vt(o);s.uc.forEach((a,d)=>{Yb(s.remoteStore,d)}),s.cc.ls(),s.uc=new Map,s.oc=new fi(ft.comparator)}(e),e.fc=!1,yield qx(e.remoteStore,!1)}}),S1.apply(this,arguments)}function $H(r,t,e){return E1.apply(this,arguments)}function E1(){return E1=(0,Te.Z)(function*(r,t,e){const n=vt(r),i=[],o=[];for(const s of t){let a;const d=n.ic.get(s);if(d&&0!==d.length){a=yield uy(n.localStore,jr(d[0]));for(const f of d){const g=n.sc.get(f),C=yield kq(n,g);C.snapshot&&o.push(C.snapshot)}}else{const f=yield Ox(n.localStore,s);a=yield uy(n.localStore,f),yield i1(n,zH(f),s,!1,a.resumeToken)}i.push(a)}return n.nc.zo(o),i}),E1.apply(this,arguments)}function zH(r){return rO(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Bq(r){const t=vt(r);return vt(vt(t.localStore).persistence).bi()}function Uq(r,t,e,n){return b1.apply(this,arguments)}function b1(){return b1=(0,Te.Z)(function*(r,t,e,n){const i=vt(r);if(i.fc)return void Je("SyncEngine","Ignoring unexpected query state notification.");const o=i.ic.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const s=yield Ix(i.localStore,qv(o[0])),a=ey.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Xi.EMPTY_BYTE_STRING);yield Wf(i,s,a);break}case"rejected":yield cy(i.localStore,t,!0),vw(i,t,n);break;default:Nt()}}),b1.apply(this,arguments)}function jq(r,t,e){return D1.apply(this,arguments)}function D1(){return D1=(0,Te.Z)(function*(r,t,e){const n=T1(r);if(n.fc){for(const i of t){if(n.ic.has(i)){Je("SyncEngine","Adding an already active target "+i);continue}const o=yield Ox(n.localStore,i),s=yield uy(n.localStore,o);yield i1(n,zH(o),s.targetId,!1,s.resumeToken),XO(n.remoteStore,s)}for(const i of e)n.ic.has(i)&&(yield cy(n.localStore,i,!1).then(()=>{Yb(n.remoteStore,i),vw(n,i)}).catch(nl))}}),D1.apply(this,arguments)}function T1(r){const t=vt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=UH.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lq.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Aq.bind(null,t),t.nc.zo=Cq.bind(null,t.eventManager),t.nc.wc=wq.bind(null,t.eventManager),t}function R1(r){const t=vt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pq.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nq.bind(null,t),t}class tI{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Te.Z)(function*(){e.serializer=Cr(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return KO(this.persistence,new $b,t.initialUser,this.serializer)}createPersistence(t){return new WO(lw.Fs,this.serializer)}createSharedClientState(t){return new L}terminate(){var t=this;return(0,Te.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class O1 extends tI{constructor(t,e,n){super(),this.mc=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,n=this;return(0,Te.Z)(function*(){yield e().call(n,t),yield n.mc.initialize(n,t),yield R1(n.mc.syncEngine),yield hw(n.mc.remoteStore),yield n.persistence.hi(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(),n.indexBackfillerScheduler&&!n.indexBackfillerScheduler.started&&n.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return KO(this.persistence,new $b,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new wH(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const n=new TM(e,this.persistence);return new xR(t.asyncQueue,n)}createPersistence(t){const e=ly(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?rs.withCacheSize(this.cacheSizeBytes):rs.DEFAULT;return new Wb(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,qe(),ln(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new L}}class KH extends O1{constructor(t,e){super(t,e,!1),this.mc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,n=this;return(0,Te.Z)(function*(){yield e().call(n,t);const i=n.mc.syncEngine;n.sharedClientState instanceof N&&(n.sharedClientState.syncEngine={$r:Vq.bind(null,i),Mr:Uq.bind(null,i),Fr:jq.bind(null,i),bi:Bq.bind(null,i),Or:Gq.bind(null,i)},yield n.sharedClientState.start()),yield n.persistence.hi(function(){var o=(0,Te.Z)(function*(s){yield function Hq(r,t){return S1.apply(this,arguments)}(n.mc.syncEngine,s),n.gcScheduler&&(s&&!n.gcScheduler.started?n.gcScheduler.start():s||n.gcScheduler.stop()),n.indexBackfillerScheduler&&(s&&!n.indexBackfillerScheduler.started?n.indexBackfillerScheduler.start():s||n.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(t){const e=qe();if(!N.D(e))throw new We(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ly(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new N(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class yw{initialize(t,e){var n=this;return(0,Te.Z)(function*(){n.localStore||(n.localStore=t.localStore,n.sharedClientState=t.sharedClientState,n.datastore=n.createDatastore(e),n.remoteStore=n.createRemoteStore(e),n.eventManager=n.createEventManager(e),n.syncEngine=n.createSyncEngine(e,!t.synchronizeTabs),n.sharedClientState.onlineStateHandler=i=>jH(n.syncEngine,i,1),n.remoteStore.remoteSyncer.handleCredentialChange=Fq.bind(null,n.syncEngine),yield qx(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(t){return new _q}createDatastore(t){const e=Cr(t.databaseInfo.databaseId),n=new rn(t.databaseInfo);return new oq(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,o=a=>jH(this.syncEngine,a,0),s=ee.D()?new ee:new j,new lq(e,n,i,o,s);var e,n,i,o,s}createSyncEngine(t,e){return function(n,i,o,s,a,d,f){const g=new Tq(n,i,o,s,a,d);return f&&(g.fc=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Te.Z)(function*(e){const n=vt(e);Je("RemoteStore","RemoteStore shutting down."),n.du.add(5),yield dw(n),n._u.shutdown(),n.mu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function qH(r,t=10240){let e=0;return{read:()=>(0,Te.Z)(function*(){if(e<r.byteLength){const n={value:r.slice(e,e+t),done:!1};return e+=t,n}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class nI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.gc(this.observer.next,t)}error(t){this.observer.error?this.gc(this.observer.error,t):di("Uncaught Error in snapshot listener:",t.toString())}yc(){this.muted=!0}gc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class $q{constructor(t,e){this.Ic=t,this.serializer=e,this.metadata=new Pi,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(n=>{n&&n.ku()?this.metadata.resolve(n.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(n?.Nu)}`))},n=>this.metadata.reject(n))}close(){return this.Ic.cancel()}getMetadata(){var t=this;return(0,Te.Z)(function*(){return t.metadata.promise})()}_c(){var t=this;return(0,Te.Z)(function*(){return yield t.getMetadata(),t.Ec()})()}Ec(){var t=this;return(0,Te.Z)(function*(){const e=yield t.Ac();if(null===e)return null;const n=t.Tc.decode(e),i=Number(n);isNaN(i)&&t.Rc(`length string (${n}) is not valid number`);const o=yield t.vc(i);return new Sq(JSON.parse(o),e.length+i)})()}bc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ac(){var t=this;return(0,Te.Z)(function*(){for(;t.bc()<0&&!(yield t.Pc()););if(0===t.buffer.length)return null;const e=t.bc();e<0&&t.Rc("Reached the end of bundle when a length string is expected.");const n=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),n})()}vc(t){var e=this;return(0,Te.Z)(function*(){for(;e.buffer.length<t;)(yield e.Pc())&&e.Rc("Reached the end of bundle when more is expected.");const n=e.Tc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),n})()}Rc(t){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${t}`)}Pc(){var t=this;return(0,Te.Z)(function*(){const e=yield t.Ic.read();if(!e.done){const n=new Uint8Array(t.buffer.length+e.value.length);n.set(t.buffer),n.set(e.value,t.buffer.length),t.buffer=n}return e.done})()}}class zq{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new We(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(i=(0,Te.Z)(function*(o,s){const a=vt(o),d=YC(a.serializer)+"/documents",f={documents:s.map(T=>qC(a.serializer,T))},g=yield a.fo("BatchGetDocuments",d,f,s.length),C=new Map;g.forEach(T=>{const I=function mH(r,t){return"found"in t?function(e,n){Wt(!!n.found);const i=dc(e,n.found.name),o=Mi(n.found.updateTime),s=n.found.createTime?Mi(n.found.createTime):Kt.min(),a=new eo({mapValue:{fields:n.found.fields}});return Ar.newFoundDocument(i,o,s,a)}(r,t):"missing"in t?function(e,n){Wt(!!n.missing),Wt(!!n.readTime);const i=dc(e,n.missing),o=Mi(n.readTime);return Ar.newNoDocument(i,o)}(r,t):Nt()}(a.serializer,T);C.set(I.key.toString(),I)});const E=[];return s.forEach(T=>{const I=C.get(T.toString());Wt(!!I),E.push(I)}),E}),function(o,s){return i.apply(this,arguments)})(e.datastore,t);var i;return n.forEach(i=>e.recordVersion(i)),n})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new cc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var n;t.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const o=ft.fromPath(i);t.mutations.push(new Xv(o,t.precondition(o)))}),yield(n=(0,Te.Z)(function*(i,o){const s=vt(i),a=YC(s.serializer)+"/documents",d={writes:o.map(f=>Bd(s.serializer,f))};yield s.co("Commit",a,d)}),function(i,o){return n.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Nt();e=Kt.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new We(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Kt.min())?Vr.exists(!1):Vr.updateTime(e):Vr.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Kt.min()))throw new We(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vr.updateTime(e)}return Vr.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Kq{constructor(t,e,n,i,o){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=i,this.deferred=o,this.Vc=n.maxAttempts,this.Co=new ei(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var t=this;this.Co.Ao((0,Te.Z)(function*(){const e=new zq(t.datastore),n=t.Dc(e);n&&n.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(o=>{t.Cc(o)}))}).catch(i=>{t.Cc(i)})}))}Dc(t){try{const e=this.updateFunction(t);return!Gv(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Cc(t){this.Vc>0&&this.xc(t)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(t)}xc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!yO(e)}return!1}}class qq{constructor(t,e,n,i){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=co.UNAUTHENTICATED,this.clientId=en.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var s=(0,Te.Z)(function*(a){Je("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(n,s=>(Je("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var t=this;return(0,Te.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new We(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=pw(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function rI(r,t){return I1.apply(this,arguments)}function I1(){return I1=(0,Te.Z)(function*(r,t){r.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const e=yield r.getConfiguration();yield t.initialize(e);let n=e.initialUser;r.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(o){n.isEqual(o)||(yield qO(t.localStore,o),n=o)});return function(o){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}),I1.apply(this,arguments)}function A1(r,t){return P1.apply(this,arguments)}function P1(){return P1=(0,Te.Z)(function*(r,t){r.asyncQueue.verifyOperationInProgress();const e=yield N1(r);Je("FirestoreClient","Initializing OnlineComponentProvider");const n=yield r.getConfiguration();yield t.initialize(e,n),r.setCredentialChangeListener(i=>FH(t.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>FH(t.remoteStore,o)),r._onlineComponents=t}),P1.apply(this,arguments)}function YH(r){return"FirebaseError"===r.name?r.code===ye.FAILED_PRECONDITION||r.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function N1(r){return M1.apply(this,arguments)}function M1(){return M1=(0,Te.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rI(r,r._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!YH(e))throw e;tl("Error using user provided cache. Falling back to memory cache: "+e),yield rI(r,new tI)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),yield rI(r,new tI);return r._offlineComponents}),M1.apply(this,arguments)}function iI(r){return x1.apply(this,arguments)}function x1(){return x1=(0,Te.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),yield A1(r,r._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),yield A1(r,new yw))),r._onlineComponents}),x1.apply(this,arguments)}function ZH(r){return N1(r).then(t=>t.persistence)}function oI(r){return N1(r).then(t=>t.localStore)}function F1(r){return iI(r).then(t=>t.remoteStore)}function L1(r){return iI(r).then(t=>t.syncEngine)}function _w(r){return k1.apply(this,arguments)}function k1(){return k1=(0,Te.Z)(function*(r){const t=yield iI(r),e=t.eventManager;return e.onListen=Rq.bind(null,t.syncEngine),e.onUnlisten=Oq.bind(null,t.syncEngine),e}),k1.apply(this,arguments)}function JH(r,t,e={}){const n=new Pi;return r.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,o,s,a,d){const f=new nI({next:C=>{o.enqueueAndForget(()=>Xx(i,g));const E=C.docs.has(s);!E&&C.fromCache?d.reject(new We(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&C.fromCache&&a&&"server"===a.source?d.reject(new We(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(C)},error:C=>d.reject(C)}),g=new n1(wg(s.path),f,{includeMetadataChanges:!0,xu:!0});return Qx(i,g)}(yield _w(r),r.asyncQueue,t,e,n)})),n.promise}function XH(r,t,e={}){const n=new Pi;return r.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,o,s,a,d){const f=new nI({next:C=>{o.enqueueAndForget(()=>Xx(i,g)),C.fromCache&&"server"===a.source?d.reject(new We(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(C)},error:C=>d.reject(C)}),g=new n1(s,f,{includeMetadataChanges:!0,xu:!0});return Qx(i,g)}(yield _w(r),r.asyncQueue,t,e,n)})),n.promise}const eB=new Map;function G1(r,t,e){if(!e)throw new We(ye.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function tB(r,t,e,n){if(!0===t&&!0===n)throw new We(ye.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function nB(r){if(!ft.isDocumentKey(r))throw new We(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function rB(r){if(ft.isDocumentKey(r))throw new We(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function sI(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const t=(e=r).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof r?"a function":Nt()}function zn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new We(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=sI(r);throw new We(ye.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}function iB(r,t){if(t<=0)throw new We(ye.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}class oB{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new We(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new We(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,tB("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Zb{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new We(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new We(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oB(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new wM;switch(e.type){case"firstParty":return new KE(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new We(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=eB.get(t);e&&(Je("ComponentProvider","Removing Datastore"),eB.delete(t),e.terminate())}(this),Promise.resolve()}}class ti{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ti(this.firestore,t,this._key)}}class is{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new is(this.firestore,t,this._query)}}class Yd extends is{constructor(t,e,n){super(t,e,wg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ti(this.firestore,null,new ft(t))}withConverter(t){return new Yd(this.firestore,t,this._path)}}function aB(r,t,...e){if(r=(0,H.m9)(r),G1("collection","path",t),r instanceof Zb){const n=Fn.fromString(t,...e);return rB(n),new Yd(r,null,n)}{if(!(r instanceof ti||r instanceof Yd))throw new We(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Fn.fromString(t,...e));return rB(n),new Yd(r.firestore,null,n)}}function Qb(r,t,...e){if(r=(0,H.m9)(r),1===arguments.length&&(t=en.A()),G1("doc","path",t),r instanceof Zb){const n=Fn.fromString(t,...e);return nB(n),new ti(r,null,new ft(n))}{if(!(r instanceof ti||r instanceof Yd))throw new We(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Fn.fromString(t,...e));return nB(n),new ti(r.firestore,r instanceof Yd?r.converter:null,new ft(n))}}function lB(r,t){return r=(0,H.m9)(r),t=(0,H.m9)(t),(r instanceof ti||r instanceof Yd)&&(t instanceof ti||t instanceof Yd)&&r.firestore===t.firestore&&r.path===t.path&&r.converter===t.converter}function V1(r,t){return r=(0,H.m9)(r),t=(0,H.m9)(t),r instanceof is&&t instanceof is&&r.firestore===t.firestore&&lc(r._query,t._query)&&r.converter===t.converter}class i8{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new ei(this,"async_queue_retry"),this.qc=()=>{const e=ln();e&&Je("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Co.vo()};const t=ln();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Uc(),this.Kc(t)}enterRestrictedMode(t){if(!this.Oc){this.Oc=!0,this.Bc=t||!1;const e=ln();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qc)}}enqueue(t){if(this.Uc(),this.Oc)return new Promise(()=>{});const e=new Pi;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.kc.push(t),this.Gc()))}Gc(){var t=this;return(0,Te.Z)(function*(){if(0!==t.kc.length){try{yield t.kc[0](),t.kc.shift(),t.Co.reset()}catch(e){if(!Dd(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}t.kc.length>0&&t.Co.Ao(()=>t.Gc())}})()}Kc(t){const e=this.Nc.then(()=>(this.Fc=!0,t().catch(n=>{throw this.Mc=n,this.Fc=!1,di("INTERNAL UNHANDLED ERROR: ",function(o){let s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),s}(n)),n}).then(n=>(this.Fc=!1,n))));return this.Nc=e,e}enqueueAfterDelay(t,e,n){this.Uc(),this.Lc.indexOf(t)>-1&&(e=0);const i=Zx.createAndSchedule(this,t,e,n,o=>this.Qc(o));return this.$c.push(i),i}Uc(){this.Mc&&Nt()}verifyOperationInProgress(){}zc(){var t=this;return(0,Te.Z)(function*(){let e;do{e=t.Nc,yield e}while(e!==t.Nc)})()}jc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Wc(t){return this.zc().then(()=>{this.$c.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()})}Hc(t){this.Lc.push(t)}Qc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}function H1(r){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of["next","error","complete"])if(i in n&&"function"==typeof n[i])return!0;return!1}(r)}class o8{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ni extends Zb{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new i8,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||uB(this),this._firestoreClient.terminate()}}function to(r){return r._firestoreClient||uB(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function uB(r){var t,e,n;const i=r._freezeSettings(),o=(a=(null===(t=r._app)||void 0===t?void 0:t.options.appId)||"",new jR(r._databaseId,a,r._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;r._firestoreClient=new qq(r._authCredentials,r._appCheckCredentials,r._queue,o),null!==(e=i.cache)&&void 0!==e&&e._offlineComponentProvider&&null!==(n=i.cache)&&void 0!==n&&n._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function cB(r,t,e){const n=new Pi;return r.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield rI(r,e),yield A1(r,t),n.resolve()}catch(i){const o=i;if(!YH(o))throw o;tl("Error enabling indexeddb cache. Falling back to memory cache: "+o),n.reject(o)}})).then(()=>n.promise)}function dB(r){if(r._initialized||r._terminated)throw new We(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zd{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zd(Xi.fromBase64String(t))}catch(e){throw new We(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Zd(Xi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class $f{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new We(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class dy{constructor(t){this._methodName=t}}class aI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new We(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new We(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return gn(this._lat,t._lat)||gn(this._long,t._long)}}const m8=/^__.*__$/;class v8{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new uc(t,this.data,this.fieldMask,e,this.fieldTransforms):new Dg(t,this.data,e,this.fieldTransforms)}}class hB{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new uc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function fB(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt()}}class lI{constructor(t,e,n,i,o,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===o&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(t){return new lI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Zc({path:n,ta:!1});return i.ea(t),i}na(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Zc({path:n,ta:!1});return i.Jc(),i}sa(t){return this.Zc({path:void 0,ta:!0})}ia(t){return dI(t,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Jc(){if(this.path)for(let t=0;t<this.path.length;t++)this.ea(this.path.get(t))}ea(t){if(0===t.length)throw this.ia("Document fields must not be empty");if(fB(this.Yc)&&m8.test(t))throw this.ia('Document fields cannot begin and end with "__"')}}class y8{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Cr(t)}ua(t,e,n,i=!1){return new lI({Yc:t,methodName:e,oa:n,path:bi.emptyPath(),ta:!1,ra:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hy(r){const t=r._freezeSettings(),e=Cr(r._databaseId);return new y8(r._databaseId,!!t.ignoreUndefinedProperties,e)}function uI(r,t,e,n,i,o={}){const s=r.ua(o.merge||o.mergeFields?2:0,t,e,i);W1("Data must be an object, but it was:",s,n);const a=mB(n,s);let d,f;if(o.merge)d=new Is(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const g=[];for(const C of o.mergeFields){const E=e0(t,C,e);if(!s.contains(E))throw new We(ye.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);yB(g,E)||g.push(E)}d=new Is(g),f=s.fieldTransforms.filter(C=>d.covers(C.field))}else d=null,f=s.fieldTransforms;return new v8(new eo(a),d,f)}class Xb extends dy{_toFieldTransform(t){if(2!==t.Yc)throw t.ia(1===t.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Xb}}function pB(r,t,e){return new lI({Yc:3,oa:t.settings.oa,methodName:r._methodName,ta:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class B1 extends dy{_toFieldTransform(t){return new Qv(t.path,new Ff)}isEqual(t){return t instanceof B1}}class _8 extends dy{constructor(t,e){super(t),this.ca=e}_toFieldTransform(t){const e=pB(this,t,!0),n=this.ca.map(o=>fy(o,e)),i=new kd(n);return new Qv(t.path,i)}isEqual(t){return this===t}}class C8 extends dy{constructor(t,e){super(t),this.ca=e}_toFieldTransform(t){const e=pB(this,t,!0),n=this.ca.map(o=>fy(o,e)),i=new Gd(n);return new Qv(t.path,i)}isEqual(t){return this===t}}class w8 extends dy{constructor(t,e){super(t),this.aa=e}_toFieldTransform(t){const e=new Ni(t.serializer,yb(t.serializer,this.aa));return new Qv(t.path,e)}isEqual(t){return this===t}}function U1(r,t,e,n){const i=r.ua(1,t,e);W1("Data must be an object, but it was:",i,n);const o=[],s=eo.empty();Af(n,(d,f)=>{const g=cI(t,d,e);f=(0,H.m9)(f);const C=i.na(g);if(f instanceof Xb)o.push(g);else{const E=fy(f,C);null!=E&&(o.push(g),s.set(g,E))}});const a=new Is(o);return new hB(s,a,i.fieldTransforms)}function j1(r,t,e,n,i,o){const s=r.ua(1,t,e),a=[e0(t,n,e)],d=[i];if(o.length%2!=0)throw new We(ye.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)a.push(e0(t,o[E])),d.push(o[E+1]);const f=[],g=eo.empty();for(let E=a.length-1;E>=0;--E)if(!yB(f,a[E])){const T=a[E];let I=d[E];I=(0,H.m9)(I);const M=s.na(T);if(I instanceof Xb)f.push(T);else{const k=fy(I,M);null!=k&&(f.push(T),g.set(T,k))}}const C=new Is(f);return new hB(g,C,s.fieldTransforms)}function gB(r,t,e,n=!1){return fy(e,r.ua(n?4:3,t))}function fy(r,t){if(vB(r=(0,H.m9)(r)))return W1("Unsupported field value:",t,r),mB(r,t);if(r instanceof dy)return function(e,n){if(!fB(n.Yc))throw n.ia(`${e._methodName}() can only be used with update() and set()`);if(!n.path)throw n.ia(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(r,t),null;if(void 0===r&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,n){const i=[];let o=0;for(const s of e){let a=fy(s,n.sa(o));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),o++}return{arrayValue:{values:i}}}(r,t)}return function(e,n){if(null===(e=(0,H.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yb(n.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=hr.fromDate(e);return{timestampValue:kf(n.serializer,i)}}if(e instanceof hr){const i=new hr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:kf(n.serializer,i)}}if(e instanceof aI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Zd)return{bytesValue:bO(n.serializer,e._byteString)};if(e instanceof ti){const i=n.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw n.ia(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:KC(e.firestore._databaseId||n.databaseId,e._key.path)}}throw n.ia(`Unsupported field value: ${sI(e)}`)}(r,t)}function mB(r,t){const e={};return HR(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Af(r,(n,i)=>{const o=fy(i,t.Xc(n));null!=o&&(e[n]=o)}),{mapValue:{fields:e}}}function vB(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof hr||r instanceof aI||r instanceof Zd||r instanceof ti||r instanceof dy)}function W1(r,t,e){if(!vB(e)||"object"!=typeof(n=e)||null===n||Object.getPrototypeOf(n)!==Object.prototype&&null!==Object.getPrototypeOf(n)){const n=sI(e);throw t.ia("an object"===n?r+" a custom object":r+" "+n)}var n}function e0(r,t,e){if((t=(0,H.m9)(t))instanceof $f)return t._internalPath;if("string"==typeof t)return cI(r,t);throw dI("Field path arguments must be of type string or ",r,!1,void 0,e)}const S8=new RegExp("[~\\*/\\[\\]]");function cI(r,t,e){if(t.search(S8)>=0)throw dI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new $f(...t.split("."))._internalPath}catch{throw dI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function dI(r,t,e,n,i){const o=n&&!n.isEmpty(),s=void 0!==i;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let d="";return(o||s)&&(d+=" (found",o&&(d+=` in field ${n}`),s&&(d+=` in document ${i}`),d+=")"),new We(ye.INVALID_ARGUMENT,a+r+d)}function yB(r,t){return r.some(e=>e.isEqual(t))}class t0{constructor(t,e,n,i,o){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new E8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(hI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class E8 extends t0{data(){return super.data()}}function hI(r,t){return"string"==typeof t?cI(r,t):t instanceof $f?t._internalPath:t._delegate._internalPath}function _B(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new We(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $1{}class n0 extends $1{}function Lg(r,t,...e){let n=[];t instanceof $1&&n.push(t),n=n.concat(e),function(i){const o=i.filter(a=>a instanceof Cw).length,s=i.filter(a=>a instanceof r0).length;if(o>1||o>0&&s>0)throw new We(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class r0 extends n0{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new r0(t,e,n)}_apply(t){const e=this._parse(t);return EB(t._query,e),new is(t.firestore,t.converter,fb(t._query,e))}_parse(t){const e=hy(t.firestore);return function(i,o,s,a,d,f,g){let C;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new We(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){SB(g,f);const E=[];for(const T of g)E.push(wB(a,i,T));C={arrayValue:{values:E}}}else C=wB(a,i,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||SB(g,f),C=gB(s,"where",g,"in"===f||"not-in"===f);return jn.create(d,f,C)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class Cw extends $1{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Cw(t,e)}_parse(t){const e=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return 1===e.length?e[0]:rr.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(n,i){let o=n;const s=i.getFlattenedFilters();for(const a of s)EB(o,a),o=fb(o,a)}(t._query,e),new is(t.firestore,t.converter,fb(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class z1 extends n0{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new z1(t,e)}_apply(t){const e=function(n,i,o){if(null!==n.startAt)throw new We(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==n.endAt)throw new We(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const s=new yg(i,o);return function(a,d){if(null===db(a)){const f=Fd(a);null!==f&&bB(0,f,d.field)}}(n,s),s}(t._query,this._field,this._direction);return new is(t.firestore,t.converter,function(n,i){const o=n.explicitOrderBy.concat([i]);return new ru(n.path,n.collectionGroup,o,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(t._query,e))}}class fI extends n0{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new fI(t,e,n)}_apply(t){return new is(t.firestore,t.converter,Sg(t._query,this._limit,this._limitType))}}class pI extends n0{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new pI(t,e,n)}_apply(t){const e=CB(t,this.type,this._docOrFields,this._inclusive);return new is(t.firestore,t.converter,(i=e,new ru((n=t._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,i,n.endAt)));var n,i}}class gI extends n0{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new gI(t,e,n)}_apply(t){const e=CB(t,this.type,this._docOrFields,this._inclusive);return new is(t.firestore,t.converter,(i=e,new ru((n=t._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,i)));var n,i}}function CB(r,t,e,n){if(e[0]=(0,H.m9)(e[0]),e[0]instanceof t0)return function(i,o,s,a,d){if(!a)throw new We(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${s}().`);const f=[];for(const g of ac(i))if(g.field.isKeyField())f.push(Nd(o,a.key));else{const C=a.data.field(g.field);if(kC(C))throw new We(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===C){const E=g.field.canonicalString();throw new We(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(C)}return new sc(f,d)}(r._query,r.firestore._databaseId,t,e[0]._document,n);{const i=hy(r.firestore);return function(o,s,a,d,f,g){const C=o.explicitOrderBy;if(f.length>C.length)throw new We(ye.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let T=0;T<f.length;T++){const I=f[T];if(C[T].field.isKeyField()){if("string"!=typeof I)throw new We(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof I}`);if(!hb(o)&&-1!==I.indexOf("/"))throw new We(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${I}' contains a slash.`);const M=o.path.child(Fn.fromString(I));if(!ft.isDocumentKey(M))throw new We(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const k=new ft(M);E.push(Nd(s,k))}else{const M=gB(a,d,I);E.push(M)}}return new sc(E,g)}(r._query,r.firestore._databaseId,i,t,e,n)}}function wB(r,t,e){if("string"==typeof(e=(0,H.m9)(e))){if(""===e)throw new We(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hb(t)&&-1!==e.indexOf("/"))throw new We(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const n=t.path.child(Fn.fromString(e));if(!ft.isDocumentKey(n))throw new We(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Nd(r,new ft(n))}if(e instanceof ti)return Nd(r,e._key);throw new We(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sI(e)}.`)}function SB(r,t){if(!Array.isArray(r)||0===r.length)throw new We(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function EB(r,t){if(t.isInequality()){const n=Fd(r),i=t.field;if(null!==n&&!n.isEqual(i))throw new We(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const o=db(r);null!==o&&bB(0,i,o)}const e=function(n,i){for(const o of n)for(const s of o.getFlattenedFilters())if(i.indexOf(s.op)>=0)return s.op;return null}(r.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new We(ye.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function bB(r,t,e){if(!e.isEqual(t))throw new We(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class K1{convertValue(t,e="none"){switch(oc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Rd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Nt()}}convertObject(t,e){const n={};return Af(t.fields,(i,o)=>{n[i]=this.convertValue(o,e)}),n}convertGeoPoint(t){return new aI(Xr(t.latitude),Xr(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=UR(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Pf(t));default:return null}}convertTimestamp(t){const e=Td(t);return new hr(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Fn.fromString(t);Wt(px(n));const i=new Od(n.get(1),n.get(3)),o=new ft(n.popFirst(5));return i.isEqual(e)||di(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function mI(r,t,e){let n;return n=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,n}class N8 extends K1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zd(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ti(this.firestore,null,e)}}class py{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zf extends t0{constructor(t,e,n,i,o,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new o0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(hI("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class o0 extends zf{data(t={}){return super.data(t)}}class kg{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new py(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new o0(this._firestore,this._userDataWriter,n.key,n,new py(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new We(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let o=0;return n._snapshot.docChanges.map(s=>({type:"added",doc:new o0(n._firestore,n._userDataWriter,s.doc.key,s.doc,new py(n._snapshot.mutatedKeys.has(s.doc.key),n._snapshot.fromCache),n.query.converter),oldIndex:-1,newIndex:o++}))}{let o=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(s=>i||3!==s.type).map(s=>{const a=new o0(n._firestore,n._userDataWriter,s.doc.key,s.doc,new py(n._snapshot.mutatedKeys.has(s.doc.key),n._snapshot.fromCache),n.query.converter);let d=-1,f=-1;return 0!==s.type&&(d=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),1!==s.type&&(o=o.add(s.doc),f=o.indexOf(s.doc.key)),{type:x8(s.type),doc:a,oldIndex:d,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function x8(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt()}}function TB(r,t){return r instanceof zf&&t instanceof zf?r._firestore===t._firestore&&r._key.isEqual(t._key)&&(null===r._document?null===t._document:r._document.isEqual(t._document))&&r._converter===t._converter:r instanceof kg&&t instanceof kg&&r._firestore===t._firestore&&V1(r.query,t.query)&&r.metadata.isEqual(t.metadata)&&r._snapshot.isEqual(t._snapshot)}class Gg extends K1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zd(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ti(this.firestore,null,e)}}function RB(r,t,e){r=zn(r,ti);const n=zn(r.firestore,ni),i=mI(r.converter,t,e);return ww(n,[uI(hy(n),"setDoc",r._key,i,null!==r.converter,e).toMutation(r._key,Vr.none())])}function OB(r,t,e,...n){r=zn(r,ti);const i=zn(r.firestore,ni),o=hy(i);let s;return s="string"==typeof(t=(0,H.m9)(t))||t instanceof $f?j1(o,"updateDoc",r._key,t,e,n):U1(o,"updateDoc",r._key,t),ww(i,[s.toMutation(r._key,Vr.exists(!0))])}function IB(r){return ww(zn(r.firestore,ni),[new cc(r._key,Vr.none())])}function AB(r,...t){var e,n,i;r=(0,H.m9)(r);let o={includeMetadataChanges:!1},s=0;"object"!=typeof t[s]||H1(t[s])||(o=t[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(H1(t[s])){const C=t[s];t[s]=null===(e=C.next)||void 0===e?void 0:e.bind(C),t[s+1]=null===(n=C.error)||void 0===n?void 0:n.bind(C),t[s+2]=null===(i=C.complete)||void 0===i?void 0:i.bind(C)}let d,f,g;if(r instanceof ti)f=zn(r.firestore,ni),g=wg(r._key.path),d={next:C=>{t[s]&&t[s](q1(f,r,C))},error:t[s+1],complete:t[s+2]};else{const C=zn(r,is);f=zn(C.firestore,ni),g=C._query;const E=new Gg(f);d={next:T=>{t[s]&&t[s](new kg(f,E,C,T))},error:t[s+1],complete:t[s+2]},_B(r._query)}return function(C,E,T,I){const M=new nI(I),k=new n1(E,M,T);return C.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return Qx(yield _w(C),k)})),()=>{M.yc(),C.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return Xx(yield _w(C),k)}))}}(to(f),g,a,d)}function ww(r,t){return function(e,n){const i=new Pi;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function Iq(r,t,e){return a1.apply(this,arguments)}(yield L1(e),n,i)})),i.promise}(to(r),t)}function q1(r,t,e){const n=e.docs.get(t._key),i=new Gg(r);return new zf(r,i,t._key,n,new py(e.hasPendingWrites,e.fromCache),t.converter)}const Y8={maxAttempts:5};class PB{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=hy(t)}set(t,e,n){this._verifyNotCommitted();const i=Vg(t,this._firestore),o=mI(i.converter,e,n),s=uI(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,Vr.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const o=Vg(t,this._firestore);let s;return s="string"==typeof(e=(0,H.m9)(e))||e instanceof $f?j1(this._dataReader,"WriteBatch.update",o._key,e,n,i):U1(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Vr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Vg(t,this._firestore);return this._mutations=this._mutations.concat(new cc(e._key,Vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vg(r,t){if((r=(0,H.m9)(r)).firestore!==t)throw new We(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class Z8 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=hy(t)}get(t){const e=Vg(t,this._firestore),n=new N8(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return Nt();const o=i[0];if(o.isFoundDocument())return new t0(this._firestore,n,o.key,o,e.converter);if(o.isNoDocument())return new t0(this._firestore,n,e._key,null,e.converter);throw Nt()})}set(t,e,n){const i=Vg(t,this._firestore),o=mI(i.converter,e,n),s=uI(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(t,e,n,...i){const o=Vg(t,this._firestore);let s;return s="string"==typeof(e=(0,H.m9)(e))||e instanceof $f?j1(this._dataReader,"Transaction.update",o._key,e,n,i):U1(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this}delete(t){const e=Vg(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Vg(t,this._firestore),n=new Gg(this._firestore);return super.get(t).then(i=>new zf(this._firestore,n,e._key,i._document,new py(!1,!1),e.converter))}}!function(r,t=!0){dg=Ki.SDK_VERSION,(0,Ki._registerComponent)(new zs.wA("firestore",(e,{instanceIdentifier:n,options:i})=>{const o=e.getProvider("app").getImmediate(),s=new ni(new hg(e.getProvider("auth-internal")),new TR(e.getProvider("app-check-internal")),function(a,d){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new We(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Od(a.options.projectId,d)}(o,n),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(bR,"3.10.0",r),(0,Ki.registerVersion)(bR,"3.10.0","esm2017")}();var s0=U(4986),ir=U(2122);function Y1(){return(0,Ir.e)((r,t)=>{let e,n=!1;r.subscribe((0,X.x)(t,i=>{const o=e;e=i,n&&t.next([o,i]),n=!0}))})}function a0(r,t=Xo.y){return r=r??r4,(0,Ir.e)((e,n)=>{let i,o=!0;e.subscribe((0,X.x)(n,s=>{const a=t(s);(o||!r(i,a))&&(o=!1,i=a,n.next(s))}))})}function r4(r,t){return r===t}var Oo=U(2011),Z1=(U(9800),U(3942));function Q1(r,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new We("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return t}function MB(){if(typeof Uint8Array>"u")throw new We("unimplemented","Uint8Arrays are not available in this environment.")}function xB(){if(!function HM(){return typeof atob<"u"}())throw new We("unimplemented","Blobs are unavailable in Firestore in this environment.")}class l0{constructor(t){this._delegate=t}static fromBase64String(t){return xB(),new l0(Zd.fromBase64String(t))}static fromUint8Array(t){return MB(),new l0(Zd.fromUint8Array(t))}toBase64(){return xB(),this._delegate.toBase64()}toUint8Array(){return MB(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function J1(r){return function s4(r,t){if("object"!=typeof r||null===r)return!1;const e=r;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(r,["next","error","complete"])}class a4{enableIndexedDbPersistence(t,e){return function a8(r,t){dB(r=zn(r,ni));const e=to(r);if(e._uninitializedComponentsProvider)throw new We(ye.FAILED_PRECONDITION,"SDK cache is already specified.");tl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=r._freezeSettings(),i=new yw;return cB(e,i,new O1(i,n.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function l8(r){dB(r=zn(r,ni));const t=to(r);if(t._uninitializedComponentsProvider)throw new We(ye.FAILED_PRECONDITION,"SDK cache is already specified.");tl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings(),n=new yw;return cB(t,n,new KH(n,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function u8(r){if(r._initialized&&!r._terminated)throw new We(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Pi;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(e=(0,Te.Z)(function*(n){if(!rl.D())return Promise.resolve();const i=n+"main";yield rl.delete(i)}),function(n){return e.apply(this,arguments)})(ly(r._databaseId,r._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class FB{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof Od||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&tl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,n={}){!function sB(r,t,e,n={}){var i;const o=(r=zn(r,Zb))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&tl("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${e}`,ssl:!1})),n.mockUserToken){let s,a;if("string"==typeof n.mockUserToken)s=n.mockUserToken,a=co.MOCK_USER;else{s=(0,H.Sg)(n.mockUserToken,null===(i=r._app)||void 0===i?void 0:i.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new We(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new co(d)}r._authCredentials=new SM(new Sd(s,a))}}(this._delegate,t,e,n)}enableNetwork(){return function d8(r){return function Yq(r){return r.asyncQueue.enqueue((0,Te.Z)(function*(){const t=yield ZH(r),e=yield F1(r);return t.setNetworkEnabled(!0),function(n){const i=vt(n);return i.du.delete(0),qb(i)}(e)}))}(to(r=zn(r,ni)))}(this._delegate)}disableNetwork(){return function h8(r){return function Zq(r){return r.asyncQueue.enqueue((0,Te.Z)(function*(){const t=yield ZH(r),e=yield F1(r);return t.setNetworkEnabled(!1),(n=(0,Te.Z)(function*(i){const o=vt(i);o.du.add(0),yield dw(o),o.mu.set("Offline")}),function(i){return n.apply(this,arguments)})(e);var n}))}(to(r=zn(r,ni)))}(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,tB("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function c8(r){return function(t){const e=new Pi;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function Mq(r,t){return h1.apply(this,arguments)}(yield L1(t),e)})),e.promise}(to(r=zn(r,ni)))}(this._delegate)}onSnapshotsInSync(t){return function U8(r,t){return function Xq(r,t){const e=new nI(t);return r.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return n=yield _w(r),i=e,vt(n).Au.add(i),void i.next();var n,i})),()=>{e.yc(),r.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return n=yield _w(r),i=e,void vt(n).Au.delete(i);var n,i}))}}(to(r=zn(r,ni)),H1(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new We("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Sw(this,aB(this._delegate,t))}catch(e){throw Zs(e,"collection()","Firestore.collection()")}}doc(t){try{return new su(this,Qb(this._delegate,t))}catch(e){throw Zs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Qs(this,function r8(r,t){if(r=zn(r,Zb),G1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new We(ye.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(r,null,(e=t,new ru(Fn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Zs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function Q8(r,t,e){r=zn(r,ni);const n=Object.assign(Object.assign({},Y8),e);return function(i){if(i.maxAttempts<1)throw new We(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,o,s){const a=new Pi;return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const d=yield function QH(r){return iI(r).then(t=>t.datastore)}(i);new Kq(i.asyncQueue,d,s,o,a).run()})),a.promise}(to(r),i=>t(new Z8(r,i)),n)}(this._delegate,e=>t(new LB(this,e)))}batch(){return to(this._delegate),new kB(new PB(this._delegate,t=>ww(this._delegate,t)))}loadBundle(t){return function f8(r,t){const e=to(r=zn(r,ni)),n=new o8;return function e8(r,t,e,n){const i=function(o,s){let a;return a="string"==typeof o?(new TextEncoder).encode(o):o,d=function(d,f){if(d instanceof Uint8Array)return qH(d,f);if(d instanceof ArrayBuffer)return qH(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new $q(d,s);var d}(e,Cr(t));r.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function Wq(r,t,e){const n=vt(r);var i;(i=(0,Te.Z)(function*(o,s,a){try{const d=yield s.getMetadata();if(yield function(E,T){const I=vt(E),M=Mi(T.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",k=>I.xs.getBundleMetadata(k,T.id)).then(k=>!!k&&k.createTime.compareTo(M)>=0)}(o.localStore,d))return yield s.close(),a._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);a._updateProgress(GH(d));const f=new Eq(d,o.localStore,s.serializer);let g=yield s._c();for(;g;){const E=yield f.$u(g);E&&a._updateProgress(E),g=yield s._c()}const C=yield f.complete();return yield Wf(o,C.Bu,void 0),yield function(E,T){const I=vt(E);return I.persistence.runTransaction("Save bundle","readwrite",M=>I.xs.saveBundleMetadata(M,T))}(o.localStore,d),a._completeWith(C.progress),Promise.resolve(C.Fu)}catch(d){return tl("SyncEngine",`Loading bundle failed with ${d}`),a._failWith(d),Promise.resolve(new Set)}var E}),function(o,s,a){return i.apply(this,arguments)})(n,t,e).then(i=>{n.sharedClientState.notifyBundleLoaded(i)})}(yield L1(r),i,n)}))}(e,r._databaseId,t,n),n}(this._delegate,t)}namedQuery(t){return function p8(r,t){return function t8(r,t){return r.asyncQueue.enqueue((0,Te.Z)(function*(){return function(e,n){const i=vt(e);return i.persistence.runTransaction("Get named query","readonly",o=>i.xs.getNamedQuery(o,n))}(yield oI(r),t)}))}(to(r=zn(r,ni)),t).then(e=>e?new is(r,null,e.query):null)}(this._delegate,t).then(e=>e?new Qs(this,e):null)}}class vI extends K1{constructor(t){super(),this.firestore=t}convertBytes(t){return new l0(new Zd(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return su.forKey(e,this.firestore,null)}}class LB{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new vI(t)}get(t){const e=my(t);return this._delegate.get(e).then(n=>new u0(this._firestore,new zf(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,e.converter)))}set(t,e,n){const i=my(t);return n?(Q1("Transaction.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const o=my(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,n,...i),this}delete(t){const e=my(t);return this._delegate.delete(e),this}}class kB{constructor(t){this._delegate=t}set(t,e,n){const i=my(t);return n?(Q1("WriteBatch.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const o=my(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,n,...i),this}delete(t){const e=my(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class gy{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new o0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new c0(this._firestore,n),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=gy.INSTANCES;let i=n.get(t);i||(i=new WeakMap,n.set(t,i));let o=i.get(e);return o||(o=new gy(t,new vI(t),e),i.set(e,o)),o}}gy.INSTANCES=new WeakMap;class su{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vI(t)}static forPath(t,e,n){if(t.length%2!=0)throw new We("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new su(e,new ti(e._delegate,n,new ft(t)))}static forKey(t,e,n){return new su(e,new ti(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new Sw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Sw(this.firestore,aB(this._delegate,t))}catch(e){throw Zs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,H.m9)(t))instanceof ti&&lB(this._delegate,t)}set(t,e){e=Q1("DocumentReference.set",e);try{return e?RB(this._delegate,t,e):RB(this._delegate,t)}catch(n){throw Zs(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return 1===arguments.length?OB(this._delegate,t):OB(this._delegate,t,e,...n)}catch(i){throw Zs(i,"updateDoc()","DocumentReference.update()")}}delete(){return IB(this._delegate)}onSnapshot(...t){const e=GB(t),n=VB(t,i=>new u0(this.firestore,new zf(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return AB(this._delegate,e,n)}get(t){let e;return e="cache"===t?.source?function L8(r){r=zn(r,ti);const t=zn(r.firestore,ni),e=to(t),n=new Gg(t);return function Qq(r,t){const e=new Pi;return r.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(n=(0,Te.Z)(function*(i,o,s){try{const a=yield function(d,f){const g=vt(d);return g.persistence.runTransaction("read document","readonly",C=>g.localDocuments.getDocument(C,f))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new We(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const d=pw(a,`Failed to get document '${o} from cache`);s.reject(d)}}),function(i,o,s){return n.apply(this,arguments)})(yield oI(r),t,e);var n})),e.promise}(e,r._key).then(i=>new zf(t,n,r._key,i,new py(null!==i&&i.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===t?.source?function k8(r){r=zn(r,ti);const t=zn(r.firestore,ni);return JH(to(t),r._key,{source:"server"}).then(e=>q1(t,r,e))}(this._delegate):function F8(r){r=zn(r,ti);const t=zn(r.firestore,ni);return JH(to(t),r._key).then(e=>q1(t,r,e))}(this._delegate),e.then(n=>new u0(this.firestore,new zf(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(t){return new su(this.firestore,this._delegate.withConverter(t?gy.getInstance(this.firestore,t):null))}}function Zs(r,t,e){return r.message=r.message.replace(t,e),r}function GB(r){for(const t of r)if("object"==typeof t&&!J1(t))return t;return{}}function VB(r,t){var e,n;let i;return i=J1(r[0])?r[0]:J1(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:o=>{i.next&&i.next(t(o))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(n=i.complete)||void 0===n?void 0:n.bind(i)}}class u0{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new su(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return TB(this._delegate,t._delegate)}}class c0 extends u0{data(t){const e=this._delegate.data(t);return function DR(r,t){r||Nt()}(void 0!==e),e}}class Qs{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vI(t)}where(t,e,n){try{return new Qs(this.firestore,Lg(this._delegate,function b8(r,t,e){const n=t,i=hI("where",r);return r0._create(i,n,e)}(t,e,n)))}catch(i){throw Zs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Qs(this.firestore,Lg(this._delegate,function D8(r,t="asc"){const e=t,n=hI("orderBy",r);return z1._create(n,e)}(t,e)))}catch(n){throw Zs(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Qs(this.firestore,Lg(this._delegate,function T8(r){return iB("limit",r),fI._create("limit",r,"F")}(t)))}catch(e){throw Zs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Qs(this.firestore,Lg(this._delegate,function R8(r){return iB("limitToLast",r),fI._create("limitToLast",r,"L")}(t)))}catch(e){throw Zs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Qs(this.firestore,Lg(this._delegate,function O8(...r){return pI._create("startAt",r,!0)}(...t)))}catch(e){throw Zs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Qs(this.firestore,Lg(this._delegate,function I8(...r){return pI._create("startAfter",r,!1)}(...t)))}catch(e){throw Zs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Qs(this.firestore,Lg(this._delegate,function A8(...r){return gI._create("endBefore",r,!1)}(...t)))}catch(e){throw Zs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Qs(this.firestore,Lg(this._delegate,function P8(...r){return gI._create("endAt",r,!0)}(...t)))}catch(e){throw Zs(e,"endAt()","Query.endAt()")}}isEqual(t){return V1(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function V8(r){r=zn(r,is);const t=zn(r.firestore,ni),e=to(t),n=new Gg(t);return function Jq(r,t){const e=new Pi;return r.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(n=(0,Te.Z)(function*(i,o,s){try{const a=yield cw(i,o,!0),d=new BH(o,a.Wi),f=d.zu(a.documents),g=d.applyChanges(f,!1);s.resolve(g.snapshot)}catch(a){const d=pw(a,`Failed to execute query '${o} against cache`);s.reject(d)}}),function(i,o,s){return n.apply(this,arguments)})(yield oI(r),t,e);var n})),e.promise}(e,r._query).then(i=>new kg(t,n,r,i))}(this._delegate):"server"===t?.source?function H8(r){r=zn(r,is);const t=zn(r.firestore,ni),e=to(t),n=new Gg(t);return XH(e,r._query,{source:"server"}).then(i=>new kg(t,n,r,i))}(this._delegate):function G8(r){r=zn(r,is);const t=zn(r.firestore,ni),e=to(t),n=new Gg(t);return _B(r._query),XH(e,r._query).then(i=>new kg(t,n,r,i))}(this._delegate),e.then(n=>new X1(this.firestore,new kg(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...t){const e=GB(t),n=VB(t,i=>new X1(this.firestore,new kg(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return AB(this._delegate,e,n)}withConverter(t){return new Qs(this.firestore,this._delegate.withConverter(t?gy.getInstance(this.firestore,t):null))}}class u4{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new c0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class X1{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new c0(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new u4(this._firestore,e))}forEach(t,e){this._delegate.forEach(n=>{t.call(e,new c0(this._firestore,n))})}isEqual(t){return TB(this._delegate,t._delegate)}}class Sw extends Qs{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new su(this.firestore,t):null}doc(t){try{return new su(this.firestore,void 0===t?Qb(this._delegate):Qb(this._delegate,t))}catch(e){throw Zs(e,"doc()","CollectionReference.doc()")}}add(t){return function B8(r,t){const e=zn(r.firestore,ni),n=Qb(r),i=mI(r.converter,t);return ww(e,[uI(hy(r.firestore),"addDoc",n._key,i,null!==r.converter,{}).toMutation(n._key,Vr.exists(!1))]).then(()=>n)}(this._delegate,t).then(e=>new su(this.firestore,e))}isEqual(t){return lB(this._delegate,t._delegate)}withConverter(t){return new Sw(this.firestore,this._delegate.withConverter(t?gy.getInstance(this.firestore,t):null))}}function my(r){return zn(r,ti)}class eF{constructor(...t){this._delegate=new $f(...t)}static documentId(){return new eF(bi.keyField().canonicalString())}isEqual(t){return(t=(0,H.m9)(t))instanceof $f&&this._delegate._internalPath.isEqual(t._internalPath)}}class vy{constructor(t){this._delegate=t}static serverTimestamp(){const t=function X8(){return new B1("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new vy(t)}static delete(){const t=function J8(){return new Xb("deleteField")}();return t._methodName="FieldValue.delete",new vy(t)}static arrayUnion(...t){const e=function e4(...r){return new _8("arrayUnion",r)}(...t);return e._methodName="FieldValue.arrayUnion",new vy(e)}static arrayRemove(...t){const e=function t4(...r){return new C8("arrayRemove",r)}(...t);return e._methodName="FieldValue.arrayRemove",new vy(e)}static increment(t){const e=function n4(r){return new w8("increment",r)}(t);return e._methodName="FieldValue.increment",new vy(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const c4={Firestore:FB,GeoPoint:aI,Timestamp:hr,Blob:l0,Transaction:LB,WriteBatch:kB,DocumentReference:su,DocumentSnapshot:u0,Query:Qs,QueryDocumentSnapshot:c0,QuerySnapshot:X1,CollectionReference:Sw,FieldPath:eF,FieldValue:vy,setLogLevel:function l4(r){!function CM(r){wd.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function h4(r){(function d4(r,t){r.INTERNAL.registerComponent(new zs.wA("firestore-compat",e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(n,i)},"PUBLIC").setServiceProps(Object.assign({},c4)))})(r,(t,e)=>new FB(t,e,new a4)),r.registerVersion("@firebase/firestore-compat","0.3.6")}(Z1.Z);var yI=U(6451),_I=U(5363),f4=U(6063);class p4 extends Un.x{constructor(t=1/0,e=1/0,n=f4.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;e||(n.push(t),!i&&n.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!t.closed;s+=n?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<n.length&&n.splice(0,n.length-o),!i){const s=e.now();let a=0;for(let d=1;d<n.length&&n[d]<=s;d+=2)a=d;a&&n.splice(0,a+1)}}}var HB=U(3099);function BB(r,t,e){let n,i=!1;return r&&"object"==typeof r?({bufferSize:n=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:e}=r):n=r??1/0,(0,HB.B)({connector:()=>new p4(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function UB(r,t){return(0,Bo.m)(t)?Ur(()=>r,t):Ur(()=>r)}var tF=U(9468);U(259);const rF=new Map,WB={activated:!1,tokenObservers:[]},_4={initialized:!1,enabled:!1};function os(r){return rF.get(r)||Object.assign({},WB)}function wI(){return _4}const iF="https://content-firebaseappcheck.googleapis.com/v1",E4="exchangeDebugToken",$B={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class D4{constructor(t,e,n,i,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Te.Z)(function*(){e.stop();try{e.pending=new H.BH,yield function T4(r){return new Promise(t=>{setTimeout(t,r)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new H.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(n){e.retryPolicy(n)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Js=new H.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function aF(){return aF=(0,Te.Z)(function*({url:r,body:t},e){const n={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const C=yield i.getHeartbeatsHeader();C&&(n["X-Firebase-Client"]=C)}const o={method:"POST",body:JSON.stringify(t),headers:n};let s,a;try{s=yield fetch(r,o)}catch(C){throw Js.create("fetch-network-error",{originalErrorMessage:C?.message})}if(200!==s.status)throw Js.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(C){throw Js.create("fetch-parse-error",{originalErrorMessage:C?.message})}const d=a.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Js.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const f=1e3*Number(d[1]),g=Date.now();return{token:a.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}}),aF.apply(this,arguments)}const P4="firebase-app-check-database",N4=1,d0="firebase-app-check-store";let bI=null;function lF(){return lF=(0,Te.Z)(function*(r,t){const n=(yield function qB(){return bI||(bI=new Promise((r,t)=>{try{const e=indexedDB.open(P4,N4);e.onsuccess=n=>{r(n.target.result)},e.onerror=n=>{var i;t(Js.create("storage-open",{originalErrorMessage:null===(i=n.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=n=>{0===n.oldVersion&&n.target.result.createObjectStore(d0,{keyPath:"compositeKey"})}}catch(e){t(Js.create("storage-open",{originalErrorMessage:e?.message}))}}),bI)}()).transaction(d0,"readwrite"),o=n.objectStore(d0).put({compositeKey:r,value:t});return new Promise((s,a)=>{o.onsuccess=d=>{s()},n.onerror=d=>{var f;a(Js.create("storage-set",{originalErrorMessage:null===(f=d.target.error)||void 0===f?void 0:f.message}))}})}),lF.apply(this,arguments)}const h0=new Ds.Yd("@firebase/app-check");function dF(r,t){return(0,H.hl)()?function x4(r,t){return function YB(r,t){return lF.apply(this,arguments)}(function QB(r){return`${r.options.appId}-${r.name}`}(r),t)}(r,t).catch(e=>{h0.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function fF(){return fF=(0,Te.Z)(function*(){const r=wI();if(r.enabled&&r.token)return r.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),fF.apply(this,arguments)}const H4={error:"UNKNOWN_ERROR"};function B4(r){return H.US.encodeString(JSON.stringify(r),!1)}function DI(r){return pF.apply(this,arguments)}function pF(){return pF=(0,Te.Z)(function*(r,t=!1){const e=r.app;!function zB(r){if(!os(r).activated)throw Js.create("use-before-activation",{appName:r.name})}(e);const n=os(e);let o,i=n.token;if(i&&!Ew(i)&&(n.token=void 0,i=void 0),!i){const d=yield n.cachedTokenPromise;d&&(Ew(d)?i=d:yield dF(e,void 0))}if(!t&&i&&Ew(i))return{token:i.token};let a,s=!1;if(function JB(){return wI().enabled}()){n.exchangeTokenPromise||(n.exchangeTokenPromise=function sF(r,t){return aF.apply(this,arguments)}(function A4(r,t){const{projectId:e,appId:n,apiKey:i}=r.options;return{url:`${iF}/projects/${e}/apps/${n}:${E4}?key=${i}`,body:{debug_token:t}}}(e,yield function XB(){return fF.apply(this,arguments)}()),r.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),s=!0);const d=yield n.exchangeTokenPromise;return yield dF(e,d),n.token=d,{token:d.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),s=!0),i=yield os(e).exchangeTokenPromise}catch(d){"appCheck/throttled"===d.code?h0.warn(d.message):h0.error(d),o=d}return i?o?a=Ew(i)?{token:i.token,internalError:o}:nU(o):(a={token:i.token},n.token=i,yield dF(e,i)):a=nU(o),s&&function tU(r,t){const e=os(r).tokenObservers;for(const n of e)try{"EXTERNAL"===n.type&&null!=t.error?n.error(t.error):n.next(t)}catch{}}(e,a),a}),pF.apply(this,arguments)}function mF(r,t){const e=os(r),n=e.tokenObservers.filter(i=>i.next!==t);0===n.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=n}function eU(r){const{app:t}=r,e=os(t);let n=e.tokenRefresher;n||(n=function U4(r){const{app:t}=r;return new D4((0,Te.Z)(function*(){let n;if(n=os(t).token?yield DI(r,!0):yield DI(r),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{const e=os(t);if(e.token){let n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},$B.RETRIAL_MIN_WAIT,$B.RETRIAL_MAX_WAIT)}(r),e.tokenRefresher=n),!n.isRunning()&&e.isTokenAutoRefreshEnabled&&n.start()}function Ew(r){return r.expireTimeMillis-Date.now()>0}function nU(r){return{token:B4(H4),error:r}}class j4{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=os(this.app);for(const e of t)mF(this.app,e.next);return Promise.resolve()}}const cU="app-check-internal";!function rY(){(0,Ki._registerComponent)(new zs.wA("app-check",r=>function W4(r,t){return new j4(r,t)}(r.getProvider("app").getImmediate(),r.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,t,e)=>{r.getProvider(cU).initialize()})),(0,Ki._registerComponent)(new zs.wA(cU,r=>function $4(r){return{getToken:t=>DI(r,t),addTokenListener:t=>function gF(r,t,e,n){const{app:i}=r,o=os(i);if(o.tokenObservers=[...o.tokenObservers,{next:e,error:n,type:t}],o.token&&Ew(o.token)){const a=o.token;Promise.resolve().then(()=>{e({token:a.token}),eU(r)}).catch(()=>{})}o.cachedTokenPromise.then(()=>eU(r))}(r,"INTERNAL",t),removeTokenListener:t=>mF(r.app,t)}}(r.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ki.registerVersion)("@firebase/app-check","0.6.4")}();class f0{constructor(){return(0,ir.vb)("app-check")}}typeof window<"u"&&window;var RI=U(9260);const wF=new c.OlP("angularfire2.auth.use-emulator"),SF=new c.OlP("angularfire2.auth.settings"),EF=new c.OlP("angularfire2.auth.tenant-id"),bF=new c.OlP("angularfire2.auth.langugage-code"),DF=new c.OlP("angularfire2.auth.use-device-language"),TF=new c.OlP("angularfire.auth.persistence"),RF=(r,t,e,n,i,o,s,a)=>(0,Oo.cc)(`${r.name}.auth`,"AngularFireAuth",r.name,()=>{const d=t.runOutsideAngular(()=>r.auth());if(e&&d.useEmulator(...e),n&&(d.tenantId=n),d.languageCode=i,o&&d.useDeviceLanguage(),s)for(const[f,g]of Object.entries(s))d.settings[f]=g;return a&&d.setPersistence(a),d},[e,n,i,o,s,a]);let OI=(()=>{class r{constructor(e,n,i,o,s,a,d,f,g,C,E,T){const I=new Un.x,M=Tt(void 0).pipe((0,_I.Q)(s.outsideAngular),Ur(()=>o.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9800)))),(0,Pt.U)(()=>(0,Oo.on)(e,o,n)),(0,Pt.U)(k=>RF(k,o,a,f,g,C,d,E)),BB({bufferSize:1,refCount:!1}));if(Mc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tt(null);else{M.pipe(Uo()).subscribe();const W=M.pipe(Ur(re=>re.getRedirectResult().then(ce=>ce,()=>null)),ir.iC,BB({bufferSize:1,refCount:!1})),z=M.pipe(Ur(re=>new br.y(ce=>({unsubscribe:o.runOutsideAngular(()=>re.onAuthStateChanged(Re=>ce.next(Re),Re=>ce.error(Re),()=>ce.complete()))})))),J=M.pipe(Ur(re=>new br.y(ce=>({unsubscribe:o.runOutsideAngular(()=>re.onIdTokenChanged(Re=>ce.next(Re),Re=>ce.error(Re),()=>ce.complete()))}))));this.authState=W.pipe(UB(z),(0,tF.R)(s.outsideAngular),(0,_I.Q)(s.insideAngular)),this.user=W.pipe(UB(J),(0,tF.R)(s.outsideAngular),(0,_I.Q)(s.insideAngular)),this.idToken=this.user.pipe(Ur(re=>re?(0,yn.D)(re.getIdToken()):Tt(null))),this.idTokenResult=this.user.pipe(Ur(re=>re?(0,yn.D)(re.getIdTokenResult()):Tt(null))),this.credential=(0,yI.T)(W,I,this.authState.pipe(kr(re=>!re))).pipe((0,Pt.U)(re=>re?.user?re:null),(0,tF.R)(s.outsideAngular),(0,_I.Q)(s.insideAngular))}return(0,Oo.pX)(this,M,o,{spy:{apply:(k,W,z)=>{(k.startsWith("signIn")||k.startsWith("createUser"))&&z.then(J=>I.next(J))}}})}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Oo.Dh),c.LFG(Oo.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ir.HU),c.LFG(wF,8),c.LFG(SF,8),c.LFG(EF,8),c.LFG(bF,8),c.LFG(DF,8),c.LFG(TF,8),c.LFG(f0,8))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),uY=(()=>{class r{constructor(){RI.Z.registerVersion("angularfire",ir.q4.full,"auth-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[OI]}),r})();function hU(r,t){return function cY(r,t=s0.z){return new br.y(e=>{let n;return null!=t?t.schedule(()=>{n=r.onSnapshot({includeMetadataChanges:!0},e)}):n=r.onSnapshot({includeMetadataChanges:!0},e),()=>{n?.()}})}(r,t)}function OF(r,t){return hU(r,t).pipe((0,Pt.U)(e=>({payload:e,type:"query"})))}function II(r,t){return OF(r,t).pipe(Zc(void 0),Y1(),(0,Pt.U)(([e,n])=>{const i=n.payload.docChanges(),o=i.map(s=>({type:s.type,payload:s}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(n.payload.metadata)&&n.payload.docs.forEach((s,a)=>{const d=i.find(g=>g.doc.ref.isEqual(s.ref)),f=e?.payload.docs.find(g=>g.ref.isEqual(s.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(s.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(s.metadata)||o.push({type:"modified",payload:{oldIndex:a,newIndex:a,type:"modified",doc:s}})}),o}))}function fU(r,t,e){return II(r,e).pipe(Xc((n,i)=>function hY(r,t,e){return t.forEach(n=>{e.indexOf(n.type)>-1&&(r=function fY(r,t){switch(t.type){case"added":if(!r[t.newIndex]||!r[t.newIndex].doc.ref.isEqual(t.doc.ref))return IF(r,t.newIndex,0,t);break;case"modified":if(null==r[t.oldIndex]||r[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=r.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return IF(r,t.newIndex,1,t)}break;case"removed":if(r[t.oldIndex]&&r[t.oldIndex].doc.ref.isEqual(t.doc.ref))return IF(r,t.oldIndex,1)}return r}(r,n))}),r}(n,i.map(o=>o.payload),t),[]),a0(),(0,Pt.U)(n=>n.map(i=>({type:i.type,payload:i}))))}function IF(r,t,e,...n){const i=r.slice();return i.splice(t,e,...n),i}function pU(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class gU{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=II(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Pt.U)(n=>n.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(Zc(void 0),Y1(),kr(([n,i])=>i.length>0||!n),(0,Pt.U)(([n,i])=>i),ir.iC)}auditTrail(t){return this.stateChanges(t).pipe(Xc((e,n)=>[...e,...n],[]))}snapshotChanges(t){const e=pU(t);return fU(this.query,e,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(t={}){return OF(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(e=>e.payload.docs.map(n=>t.idField?Object.assign(Object.assign({},n.data()),{[t.idField]:n.id}):n.data())),ir.iC)}get(t){return(0,yn.D)(this.query.get(t)).pipe(ir.iC)}add(t){return this.ref.add(t)}doc(t){return new mU(this.ref.doc(t),this.afs)}}class mU{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:i,query:o}=_U(n,e);return new gU(i,o,this.afs)}snapshotChanges(){return function dY(r,t){return hU(r,t).pipe(Zc(void 0),Y1(),(0,Pt.U)(([e,n])=>n.exists?e?.exists?{payload:n,type:"modified"}:{payload:n,type:"added"}:{payload:n,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Pt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,yn.D)(this.ref.get(t)).pipe(ir.iC)}}class pY{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?II(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(e=>e.filter(n=>t.indexOf(n.type)>-1)),kr(e=>e.length>0),ir.iC):II(this.query,this.afs.schedulers.outsideAngular).pipe(ir.iC)}auditTrail(t){return this.stateChanges(t).pipe(Xc((e,n)=>[...e,...n],[]))}snapshotChanges(t){const e=pU(t);return fU(this.query,e,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(t={}){return OF(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(n=>n.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),ir.iC)}get(t){return(0,yn.D)(this.query.get(t)).pipe(ir.iC)}}const vU=new c.OlP("angularfire2.enableFirestorePersistence"),yU=new c.OlP("angularfire2.firestore.persistenceSettings"),gY=new c.OlP("angularfire2.firestore.settings"),mY=new c.OlP("angularfire2.firestore.use-emulator");function _U(r,t=(e=>e)){return{query:t(r),ref:r}}let AF=(()=>{class r{constructor(e,n,i,o,s,a,d,f,g,C,E,T,I,M,k,W,z){this.schedulers=d;const J=(0,Oo.on)(e,a,n),re=g;C&&RF(J,a,E,I,M,k,T,W),[this.firestore,this.persistenceEnabled$]=(0,Oo.cc)(`${J.name}.firestore`,"AngularFirestore",J.name,()=>{const ce=a.runOutsideAngular(()=>J.firestore());if(o&&ce.settings(o),re&&ce.useEmulator(...re),i&&!Mc(s)){const Re=()=>{try{return(0,yn.D)(ce.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(Xe){return typeof console<"u"&&console.warn(Xe),Tt(!1)}};return[ce,a.runOutsideAngular(Re)]}return[ce,Tt(!1)]},[o,re,i])}collection(e,n){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:s}=_U(i,n),a=this.schedulers.ngZone.run(()=>o);return new gU(a,s,this)}collectionGroup(e,n){const i=n||(s=>s),o=this.firestore.collectionGroup(e);return new pY(i(o),this)}doc(e){let n;n="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>n);return new mU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Oo.Dh),c.LFG(Oo.xv,8),c.LFG(vU,8),c.LFG(gY,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ir.HU),c.LFG(yU,8),c.LFG(mY,8),c.LFG(OI,8),c.LFG(wF,8),c.LFG(SF,8),c.LFG(EF,8),c.LFG(bF,8),c.LFG(DF,8),c.LFG(TF,8),c.LFG(f0,8))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),vY=(()=>{class r{constructor(){RI.Z.registerVersion("angularfire",ir.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:r,providers:[{provide:vU,useValue:!0},{provide:yU,useValue:e}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[AF]}),r})(),yY=(()=>{class r{constructor(e){this.afs=e,this.booksCollection=e.collection("bookingMaster",n=>n.orderBy("date","asc")),this.booksOB=this.booksCollection.snapshotChanges().pipe((0,Pt.U)(n=>n.map(i=>{const o=i.payload.doc.data();return{id:i.payload.doc.id,...o}})))}getbooks(){return this.booksOB}addbook(e){this.booksCollection.add(e)}getUserbyName(e){return this.booksCollection.doc(e.name)}getbooksDatabyID(e){return this.booksCollection.doc(e.id)}updatebook(e,n){return this.booksCollection.doc(n).update(e)}deleteBook(e){IB(Qb(this.afs.firestore.collection("bookingMaster"),e.id)).then(()=>{alert("Sucessfully Deleted")}).catch(o=>{alert(o.message)})}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(AF))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),CU=(()=>{class r{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Qsj),c.Y36(c.SBq))},r.\u0275dir=c.lG2({type:r}),r})(),yy=(()=>{class r extends CU{}return r.\u0275fac=function(){let t;return function(n){return(t||(t=c.n5z(r)))(n||r)}}(),r.\u0275dir=c.lG2({type:r,features:[c.qOj]}),r})();const Oa=new c.OlP("NgValueAccessor"),wY={provide:Oa,useExisting:(0,c.Gpc)(()=>AI),multi:!0},EY=new c.OlP("CompositionEventMode");let AI=(()=>{class r extends CU{constructor(e,n,i){super(e,n),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function SY(){const r=B()?B().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(EY,8))},r.\u0275dir=c.lG2({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&c.NdJ("input",function(o){return n._handleInput(o.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(o){return n._compositionEnd(o.target.value)})},features:[c._Bn([wY]),c.qOj]}),r})();const bY=!1;const ss=new c.OlP("NgValidators"),Bg=new c.OlP("NgAsyncValidators");function DU(r){return function Hg(r){return null==r||("string"==typeof r||Array.isArray(r))&&0===r.length}(r.value)?{required:!0}:null}function PI(r){return null}function PU(r){return null!=r}function NU(r){const t=(0,c.QGY)(r)?(0,yn.D)(r):r;if(bY&&!(0,c.CqO)(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof r&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new c.vHH(-1101,e)}return t}function MU(r){let t={};return r.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function xU(r,t){return t.map(e=>e(r))}function FU(r){return r.map(t=>function TY(r){return!r.validate}(t)?t:e=>t.validate(e))}function PF(r){return null!=r?function LU(r){if(!r)return null;const t=r.filter(PU);return 0==t.length?null:function(e){return MU(xU(e,t))}}(FU(r)):null}function NF(r){return null!=r?function kU(r){if(!r)return null;const t=r.filter(PU);return 0==t.length?null:function(e){return function _Y(...r){const t=(0,Ho.jO)(r),{args:e,keys:n}=jl(r),i=new br.y(o=>{const{length:s}=e;if(!s)return void o.complete();const a=new Array(s);let d=s,f=s;for(let g=0;g<s;g++){let C=!1;(0,dr.Xf)(e[g]).subscribe((0,X.x)(o,E=>{C||(C=!0,f--),a[g]=E},()=>d--,void 0,()=>{(!d||!C)&&(f||o.next(n?$(n,a):a),o.complete())}))}});return t?i.pipe(x(t)):i}(xU(e,t).map(NU)).pipe((0,Pt.U)(MU))}}(FU(r)):null}function GU(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function MF(r){return r?Array.isArray(r)?r:[r]:[]}function NI(r,t){return Array.isArray(r)?r.includes(t):r===t}function BU(r,t){const e=MF(t);return MF(r).forEach(i=>{NI(e,i)||e.push(i)}),e}function UU(r,t){return MF(t).filter(e=>!NI(r,e))}class jU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=PF(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=NF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Xs extends jU{get formDirective(){return null}get path(){return null}}class Ug extends jU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class WU{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let $U=(()=>{class r extends WU{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(Ug,2))},r.\u0275dir=c.lG2({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&c.ekj("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[c.qOj]}),r})(),zU=(()=>{class r extends WU{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(Xs,10))},r.\u0275dir=c.lG2({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&c.ekj("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[c.qOj]}),r})();function KU(r,t){return r?`with name: '${t}'`:`at index: ${t}`}const LF=!1,p0="VALID",xI="INVALID",bw="PENDING",g0="DISABLED";function kF(r){return(FI(r)?r.validators:r)||null}function GF(r,t){return(FI(t)?t.asyncValidators:r)||null}function FI(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class ZU{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===p0}get invalid(){return this.status===xI}get pending(){return this.status==bw}get disabled(){return this.status===g0}get enabled(){return this.status!==g0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(BU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(BU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(UU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(UU(t,this._rawAsyncValidators))}hasValidator(t){return NI(this._rawValidators,t)}hasAsyncValidator(t){return NI(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=bw,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=g0,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=p0,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===p0||this.status===bw)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?g0:p0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=bw,this._hasOwnPendingAsyncValidator=!0;const e=NU(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,i)=>n&&n._find(i),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?g0:this.errors?xI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bw)?bw:this._anyControlsHaveStatus(xI)?xI:p0}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){FI(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function MY(r){return Array.isArray(r)?PF(r):r||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function xY(r){return Array.isArray(r)?NF(r):r||null}(this._rawAsyncValidators)}}class VF extends ZU{constructor(t,e,n){super(kF(e),GF(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function YU(r,t,e){r._forEachChild((n,i)=>{if(void 0===e[i])throw new c.vHH(1002,LF?function NY(r,t){return`Must supply a value for form control ${KU(r,t)}`}(t,i):"")})})(this,!0,t),Object.keys(t).forEach(n=>{(function qU(r,t,e){const n=r.controls;if(!(t?Object.keys(n):n).length)throw new c.vHH(1e3,LF?function AY(r){return`\n    There are no form controls registered with this ${r?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!n[e])throw new c.vHH(1001,LF?function PY(r,t){return`Cannot find form control ${KU(r,t)}`}(t,e):"")})(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{const i=this.controls[n];i&&i.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,n,i)=>((n.enabled||this.disabled)&&(e[i]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((i,o)=>{n=e(n,i,o)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Dw=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>LI}),LI="always";function m0(r,t,e=LI){HF(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(r.disabled),function kY(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&QU(r,t)})}(r,t),function VY(r,t){const e=(n,i)=>{t.valueAccessor.writeValue(n),i&&t.viewToModelUpdate(n)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function GY(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&QU(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function LY(r,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function VI(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function HF(r,t){const e=function VU(r){return r._rawValidators}(r);null!==t.validator?r.setValidators(GU(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const n=function HU(r){return r._rawAsyncValidators}(r);null!==t.asyncValidator?r.setAsyncValidators(GU(n,t.asyncValidator)):"function"==typeof n&&r.setAsyncValidators([n]);const i=()=>r.updateValueAndValidity();VI(t._rawValidators,i),VI(t._rawAsyncValidators,i)}function QU(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}const WY={provide:Xs,useExisting:(0,c.Gpc)(()=>BI)},v0=(()=>Promise.resolve())();let BI=(()=>{class r extends Xs{constructor(e,n,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new VF({},PF(e),NF(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){v0.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),m0(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){v0.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){v0.then(()=>{const n=this._findContainer(e.path),i=new VF({});(function JU(r,t){HF(r,t)})(i,e),n.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){v0.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){v0.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function XU(r,t){r._syncPendingControls(),t.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(ss,10),c.Y36(Bg,10),c.Y36(Dw,8))},r.\u0275dir=c.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&c.NdJ("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([WY]),c.qOj]}),r})();function ej(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}function tj(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const nj=class extends ZU{constructor(t=null,e,n){super(kF(e),GF(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),FI(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=tj(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ej(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ej(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){tj(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},KY={provide:Ug,useExisting:(0,c.Gpc)(()=>WF)},oj=(()=>Promise.resolve())();let WF=(()=>{class r extends Ug{constructor(e,n,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new nj,this._registered=!1,this.update=new c.vpe,this._parent=e,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=function jF(r,t){if(!t)return null;let e,n,i;return Array.isArray(t),t.forEach(o=>{o.constructor===AI?e=o:function UY(r){return Object.getPrototypeOf(r.constructor)===yy}(o)?n=o:i=o}),i||n||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function UF(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){m0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){oj.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,i=0!==n&&(0,c.D6c)(n);oj.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function kI(r,t){return[...t.path,r]}(e,this._parent):[e]}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(Xs,9),c.Y36(ss,10),c.Y36(Bg,10),c.Y36(Oa,10),c.Y36(c.sBO,8),c.Y36(Dw,8))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([KY]),c.qOj,c.TTD]}),r})(),sj=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=c.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),lj=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})(),_y=(()=>{class r{constructor(){this._validator=PI}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):PI,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=c.lG2({type:r,features:[c.TTD]}),r})();const d5={provide:ss,useExisting:(0,c.Gpc)(()=>UI),multi:!0};let UI=(()=>{class r extends _y{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=c.D6c,this.createValidator=e=>DU}enabled(e){return e}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=c.n5z(r)))(n||r)}}(),r.\u0275dir=c.lG2({type:r,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,n){2&e&&c.uIk("required",n._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([d5]),c.qOj]}),r})(),v5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[lj]}),r})(),_5=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Dw,useValue:e.callSetDisabledState??LI}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[v5]}),r})();function jg(r){return null==r||""===r?null:r}function Qe(r,t){return void 0===t&&(t=!1),null!=r&&(""!==r||t)}function Qt(r){return!Qe(r)}function al(r){return null==r||0===r.length}function ZF(r){return null!=r&&"function"==typeof r.toString?r.toString():null}function au(r){if(void 0!==r){if(null===r||""===r)return null;if("number"==typeof r)return isNaN(r)?void 0:r;var t=parseInt(r,10);return isNaN(t)?void 0:t}}function Qd(r){if(void 0!==r)return null!==r&&""!==r&&("boolean"==typeof r?r:/true/i.test(r))}function y0(r){if(r instanceof Set||r instanceof Map){var t=[];return r.forEach(function(e){return t.push(e)}),t}return Object.values(r)}var b5=Object.freeze({__proto__:null,makeNull:jg,exists:Qe,missing:Qt,missingOrEmpty:al,toStringOrNull:ZF,attrToNumber:au,attrToBoolean:Qd,attrToString:function C5(r){if(null!=r&&""!==r)return r},referenceCompare:function w5(r,t){return null==r&&null==t||!(null==r&&null!=t||null!=r&&null==t)&&r===t},jsonEquals:function S5(r,t){return(r?JSON.stringify(r):null)===(t?JSON.stringify(t):null)},defaultComparator:function E5(r,t,e){void 0===e&&(e=!1);var n=null==r,i=null==t;if(r&&r.toNumber&&(r=r.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&i)return 0;if(n)return-1;if(i)return 1;function o(s,a){return s>a?1:s<a?-1:0}if("string"!=typeof r||!e)return o(r,t);try{return r.localeCompare(t)}catch{return o(r,t)}},values:y0}),D5=function(){function r(){this.existingKeys={}}return r.prototype.addExistingKeys=function(t){for(var e=0;e<t.length;e++)this.existingKeys[t[e]]=!0},r.prototype.getUniqueKey=function(t,e){t=ZF(t);for(var n=0;;){var i=void 0;if(t?(i=t,0!==n&&(i+="_"+n)):e?(i=e,0!==n&&(i+="_"+n)):i=""+n,!this.existingKeys[i])return this.existingKeys[i]=!0,i;n++}},r}();function Wr(r,t){null!=r&&(Array.isArray(r)?r.forEach(function(e,n){return t(""+n,e)}):Object.keys(r).forEach(function(e){return t(e,r[e])}))}function QF(r){for(var t={},e=Object.keys(r),n=0;n<e.length;n++){var i=e[n];t[i]=r[i]}return t}function jI(r,t){if(r){var e=r,n={};return Object.keys(e).forEach(function(i){if(!(t&&t.indexOf(i)>=0)){var o=e[i],s=$I(o)&&o.constructor===Object;n[i]=s?jI(o):o}}),n}}function Tj(r,t){return r[t]}function Rj(r,t,e){r[t]=e}function Oj(r,t,e,n){var i=Tj(r,e);void 0!==i&&Rj(t,e,n?n(i):i)}function Ij(r){var t={};return r.filter(function(e){return null!=e}).forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=null})}),Object.keys(t)}function hc(r){if(!r)return[];var t=Object;if("function"==typeof t.values)return t.values(r);var e=[];for(var n in r)r.hasOwnProperty(n)&&r.propertyIsEnumerable(n)&&e.push(r[n]);return e}function Ia(r,t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),Qe(t)&&Wr(t,function(i,o){var s=r[i];s!==o&&(n&&null==s&&null!=o&&"object"==typeof o&&o.constructor===Object&&(r[i]=s={}),$I(o)&&$I(s)&&!Array.isArray(s)?Ia(s,o,e,n):(e||void 0!==o)&&(r[i]=o))})}function WI(r,t,e){if(t&&r){if(!e)return r[t];for(var n=t.split("."),i=r,o=0;o<n.length;o++){if(null==i)return;i=i[n[o]]}return i}}function Aj(r,t){Object.keys(r).forEach(function(i){"object"==typeof r[i]&&(r[i]=void 0)});var e=Object.getPrototypeOf(r),n={};Object.keys(e).forEach(function(i){"function"==typeof e[i]&&(n[i]={value:function(){console.warn("AG Grid: "+t+" function "+i+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")},writable:!0})}),Object.defineProperties(r,n)}function $I(r){return"object"==typeof r&&null!==r}var P5=Object.freeze({__proto__:null,iterateObject:Wr,cloneObject:QF,deepCloneObject:function T5(r){return JSON.parse(JSON.stringify(r))},deepCloneDefinition:jI,getProperty:Tj,setProperty:Rj,copyPropertiesIfPresent:function R5(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];e.forEach(function(i){return Oj(r,t,i)})},copyPropertyIfPresent:Oj,getAllKeysInObjects:Ij,getAllValuesInObject:hc,mergeDeep:Ia,missingOrEmptyObject:function O5(r){return Qt(r)||0===Object.keys(r).length},get:function I5(r,t,e){if(null==r)return e;for(var n=t.split("."),i=r;n.length>1;)if(null==(i=i[n.shift()]))return e;return i[n[0]]??e},set:function A5(r,t,e){if(null!=r){var n=t.split("."),i=r;n.forEach(function(o,s){i[o]||(i[o]={}),s<n.length-1&&(i=i[o])}),i[n[n.length-1]]=e}},getValueUsingField:WI,removeAllReferences:Aj,isNonNullObject:$I}),Pj={};function Yn(r,t){Pj[t]||(r(),Pj[t]=!0)}function zI(r){if(r.name)return r.name;var t=/function\s+([^\(]+)/.exec(r.toString());return t&&2===t.length?t[1].trim():null}function KI(r){return!!(r&&r.constructor&&r.call&&r.apply)}function Nj(r){Mj(r,400)}var JF=[],XF=!1;function eL(r){JF.push(r),!XF&&(XF=!0,window.setTimeout(function(){var t=JF.slice();JF.length=0,XF=!1,t.forEach(function(e){return e()})},0))}function Mj(r,t){void 0===t&&(t=0),r.length>0&&window.setTimeout(function(){return r.forEach(function(e){return e()})},t)}function Jd(r,t){var e;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=this;window.clearTimeout(e),e=window.setTimeout(function(){r.apply(o,n)},t)}}function tL(r,t){var e=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=(new Date).getTime();s-e<t||(e=s,r.apply(this,n))}}function xj(r,t,e,n){void 0===e&&(e=100);var i=(new Date).getTime(),o=null,s=!1,a=function(){var d=(new Date).getTime()-i>e;(r()||d)&&(t(),s=!0,null!=o&&(window.clearInterval(o),o=null),d&&n&&console.warn(n))};a(),s||(o=window.setInterval(a,10))}function Fj(r){r&&r()}var x5=Object.freeze({__proto__:null,doOnce:Yn,getFunctionName:zI,isFunction:KI,executeInAWhile:Nj,executeNextVMTurn:eL,executeAfter:Mj,debounce:Jd,throttle:tL,waitUntil:xj,compose:function N5(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return r.reduce(function(n,i){return i(n)},e)}},callIfPresent:Fj,noop:function(){}}),F5=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},k5=function(){function r(t,e){if(this.beanWrappers={},this.destroyed=!1,t&&t.beanClasses){this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var n=this.getBeanInstances();this.wireBeans(n),this.logger.log(">> ag-Application Context ready - component is alive")}}return r.prototype.getBeanInstances=function(){return y0(this.beanWrappers).map(function(t){return t.beanInstance})},r.prototype.createBean=function(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t},r.prototype.wireBeans=function(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),Qe(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")},r.prototype.createBeans=function(){var t=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Wr(this.beanWrappers,function(n,i){var o;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(o=i.bean.__agBeanMetaData.autowireMethods.agConstructor);var s=t.getBeansForParameters(o,i.bean.name),a=new(i.bean.bind.apply(i.bean,function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(F5(arguments[t]));return r}([null],s)));i.beanInstance=a});var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+e)},r.prototype.createBeanWrapper=function(t){var e=t.__agBeanMetaData;if(!e){var n;return n=t.prototype.constructor?zI(t.prototype.constructor):""+t,void console.error("Context item "+n+" is not a bean")}this.beanWrappers[e.beanName]={bean:t,beanInstance:null,beanName:e.beanName}},r.prototype.autoWireBeans=function(t){var e=this;t.forEach(function(n){e.forEachMetaDataInHierarchy(n,function(i,o){var s=i.agClassAttributes;s&&s.forEach(function(a){var d=e.lookupBeanInstance(o,a.beanName,a.optional);n[a.attributeName]=d})})})},r.prototype.methodWireBeans=function(t){var e=this;t.forEach(function(n){e.forEachMetaDataInHierarchy(n,function(i,o){Wr(i.autowireMethods,function(s,a){if("agConstructor"!==s){var d=e.getBeansForParameters(a,o);n[s].apply(n,d)}})})})},r.prototype.forEachMetaDataInHierarchy=function(t,e){for(var n=Object.getPrototypeOf(t);null!=n;){var i=n.constructor;i.hasOwnProperty("__agBeanMetaData")&&e(i.__agBeanMetaData,this.getBeanName(i)),n=Object.getPrototypeOf(n)}},r.prototype.getBeanName=function(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;var e=t.toString();return e.substring(9,e.indexOf("("))},r.prototype.getBeansForParameters=function(t,e){var n=this,i=[];return t&&Wr(t,function(o,s){var a=n.lookupBeanInstance(e,s);i[Number(o)]=a}),i},r.prototype.lookupBeanInstance=function(t,e,n){if(void 0===n&&(n=!1),"context"===e)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var i=this.beanWrappers[e];return i?i.beanInstance:(n||console.error("AG Grid: unable to find bean reference "+e+" while initialising "+t),null)},r.prototype.callLifeCycleMethods=function(t,e){var n=this;t.forEach(function(i){return n.callLifeCycleMethodsOnBean(i,e)})},r.prototype.callLifeCycleMethodsOnBean=function(t,e,n){var i={};this.forEachMetaDataInHierarchy(t,function(s){var a=s[e];a&&a.forEach(function(d){d!=n&&(i[d]=!0)})}),Object.keys(i).forEach(function(s){return t[s]()})},r.prototype.getBean=function(t){return this.lookupBeanInstance("getBean",t,!0)},r.prototype.destroy=function(){if(!this.destroyed){this.logger.log(">> Shutting down ag-Application Context");var t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead")}},r.prototype.destroyBean=function(t){t&&this.destroyBeans([t])},r.prototype.destroyBeans=function(t){var e=this;return t?(t.forEach(function(n){e.callLifeCycleMethodsOnBean(n,"preDestroyMethods","destroy"),"function"==typeof n.destroy&&n.destroy()}),[]):[]},r}();function Lj(r,t,e){var n=Cy(r.constructor);n.preConstructMethods||(n.preConstructMethods=[]),n.preConstructMethods.push(t)}function rt(r,t,e){var n=Cy(r.constructor);n.postConstructMethods||(n.postConstructMethods=[]),n.postConstructMethods.push(t)}function as(r,t,e){var n=Cy(r.constructor);n.preDestroyMethods||(n.preDestroyMethods=[]),n.preDestroyMethods.push(t)}function Rt(r){return function(t){Cy(t).beanName=r}}function F(r){return function(t,e,n){kj(t,r,!1,0,e,null)}}function tr(r){return function(t,e,n){kj(t,r,!0,0,e,null)}}function kj(r,t,e,n,i,o){if(null!==t)if("number"!=typeof o){var s=Cy(r.constructor);s.agClassAttributes||(s.agClassAttributes=[]),s.agClassAttributes.push({attributeName:i,beanName:t,optional:e})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function ea(r){return function(t,e,n){var o,i="function"==typeof t?t:t.constructor;if("number"==typeof n){var s=void 0;e?(o=Cy(i),s=e):(o=Cy(i),s="agConstructor"),o.autowireMethods||(o.autowireMethods={}),o.autowireMethods[s]||(o.autowireMethods[s]={}),o.autowireMethods[s][n]=r}}}function Cy(r){return r.hasOwnProperty("__agBeanMetaData")||(r.__agBeanMetaData={}),r.__agBeanMetaData}var Gj=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},qI=function(r,t){return function(e,n){t(e,n,r)}},Wg=function(){function r(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return r.prototype.setBeans=function(t,e,n,i){if(void 0===i&&(i=null),this.frameworkOverrides=n,this.gridOptionsService=e,i){var o=e.useAsyncEvents();this.addGlobalListener(i,o)}},r.prototype.getListeners=function(t,e,n){var i=e?this.allAsyncListeners:this.allSyncListeners,o=i.get(t);return!o&&n&&i.set(t,o=new Set),o},r.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},r.prototype.addEventListener=function(t,e,n){void 0===n&&(n=!1),this.getListeners(t,n,!0).add(e)},r.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=!1);var i=this.getListeners(t,n,!1);i&&(i.delete(e),0===i.size)&&(n?this.allAsyncListeners:this.allSyncListeners).delete(t)},r.prototype.addGlobalListener=function(t,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)},r.prototype.removeGlobalListener=function(t,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)},r.prototype.dispatchEvent=function(t){var e=t;if(this.gridOptionsService){var n=this.gridOptionsService,o=n.columnApi,s=n.context;e.api=n.api,e.columnApi=o,e.context=s}this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0},r.prototype.dispatchEventOnce=function(t){this.firedEvents[t.type]||this.dispatchEvent(t)},r.prototype.dispatchToListeners=function(t,e){var n=this,i=t.type;if(e&&"event"in t){var o=t.event;o instanceof Event&&(t.eventPath=o.composedPath())}var a=this.getListeners(i,e,!1);a&&a.forEach(function(g){e?n.dispatchAsync(function(){return g(t)}):g(t)}),(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(function(f){e?n.dispatchAsync(function(){return n.frameworkOverrides.dispatchEvent(i,function(){return f(i,t)},!0)}):n.frameworkOverrides.dispatchEvent(i,function(){return f(i,t)},!0)})},r.prototype.dispatchAsync=function(t){this.asyncFunctionsQueue.push(t),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},r.prototype.flushAsyncQueue=function(){this.scheduled=!1;var t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(function(e){return e()})},Gj([qI(0,ea("loggerFactory")),qI(1,ea("gridOptionsService")),qI(2,ea("frameworkOverrides")),qI(3,ea("globalEventListener"))],r.prototype,"setBeans",null),Gj([Rt("eventService")],r)}(),Ot=(()=>(function(r){r.CommunityCoreModule="@ag-grid-community/core",r.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",r.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",r.CsvExportModule="@ag-grid-community/csv-export",r.EnterpriseCoreModule="@ag-grid-enterprise/core",r.RowGroupingModule="@ag-grid-enterprise/row-grouping",r.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",r.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",r.MenuModule="@ag-grid-enterprise/menu",r.SetFilterModule="@ag-grid-enterprise/set-filter",r.MultiFilterModule="@ag-grid-enterprise/multi-filter",r.StatusBarModule="@ag-grid-enterprise/status-bar",r.SideBarModule="@ag-grid-enterprise/side-bar",r.RangeSelectionModule="@ag-grid-enterprise/range-selection",r.MasterDetailModule="@ag-grid-enterprise/master-detail",r.RichSelectModule="@ag-grid-enterprise/rich-select",r.GridChartsModule="@ag-grid-enterprise/charts",r.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",r.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",r.ExcelExportModule="@ag-grid-enterprise/excel-export",r.ClipboardModule="@ag-grid-enterprise/clipboard",r.SparklinesModule="@ag-grid-enterprise/sparklines",r.AngularModule="@ag-grid-community/angular",r.ReactModule="@ag-grid-community/react",r.VueModule="@ag-grid-community/vue"}(Ot||(Ot={})),Ot))(),on=function(){function r(){}return r.register=function(t,e){void 0===e&&(e=!0),r.runVersionChecks(t),r.modulesMap[t.moduleName]=t,r.setModuleBased(e)},r.runVersionChecks=function(t){if(r.currentModuleVersion||(r.currentModuleVersion=t.version),t.version?t.version!==r.currentModuleVersion&&console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+t.moduleName+"' is version "+t.version+" but the other modules are version "+this.currentModuleVersion+". Please update all modules to the same version."):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+t.moduleName+"' is incompatible. Please update all modules to the same version."),t.validate){var e=t.validate();e.isValid||console.error("AG Grid: "+e.message)}},r.setModuleBased=function(t){void 0===r.moduleBased?r.moduleBased=t:r.moduleBased!==t&&Yn(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},r.setIsBundled=function(){r.isBundled=!0},r.registerModules=function(t,e){void 0===e&&(e=!0),r.setModuleBased(e),t&&t.forEach(function(n){return r.register(n,e)})},r.assertRegistered=function(t,e){var n;if(this.isRegistered(t))return!0;var o,i=e+t;if(r.isBundled)o="AG Grid: unable to use "+e+" as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src=\"https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js\"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise";else if(r.moduleBased||void 0===r.moduleBased){var s=null===(n=Object.entries(Ot).find(function(a){var d=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o}(a,2);return d[1]===t}))||void 0===n?void 0:n[0];o="AG Grid: unable to use "+e+" as the "+s+" is not registered. Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { "+s+" } from '"+t+"';\n    \n    ModuleRegistry.registerModules([ "+s+" ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/"}else o="AG Grid: unable to use "+e+" as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';\n            \nFor more info see: https://www.ag-grid.com/javascript-grid/packages/";return Yn(function(){console.warn(o)},i),!1},r.isRegistered=function(t){return!!r.modulesMap[t]},r.getRegisteredModules=function(){return y0(r.modulesMap)},r.isPackageBased=function(){return!r.moduleBased},r.modulesMap={},r}(),nL=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},V5=0;function Vj(){return V5++}var ri=function(){function r(t,e,n,i){this.instanceId=Vj(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new Wg,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=e,this.colId=n,this.primary=i,this.setState(t)}return r.prototype.getInstanceId=function(){return this.instanceId},r.prototype.setState=function(t){void 0!==t.sort?("asc"===t.sort||"desc"===t.sort)&&(this.sort=t.sort):("asc"===t.initialSort||"desc"===t.initialSort)&&(this.sort=t.initialSort);var e=au(t.sortIndex),n=au(t.initialSortIndex);void 0!==e?null!==e&&(this.sortIndex=e):null!==n&&(this.sortIndex=n);var i=Qd(t.hide),o=Qd(t.initialHide);this.visible=void 0!==i?!i:!o,this.setPinned(void 0!==t.pinned?t.pinned:t.initialPinned);var s=au(t.flex),a=au(t.initialFlex);void 0!==s?this.flex=s:void 0!==a&&(this.flex=a)},r.prototype.setColDef=function(t,e){this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))},r.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},r.prototype.setParent=function(t){this.parent=t},r.prototype.getParent=function(){return this.parent},r.prototype.setOriginalParent=function(t){this.originalParent=t},r.prototype.getOriginalParent=function(){return this.originalParent},r.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.validate()},r.prototype.initDotNotation=function(){var t=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=Qe(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=Qe(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t},r.prototype.initMinAndMaxWidths=function(){var t=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(t),this.maxWidth=this.columnUtils.calculateColMaxWidth(t)},r.prototype.resetActualWidth=function(t){void 0===t&&(t="api");var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)},r.prototype.isEmptyGroup=function(){return!1},r.prototype.isRowGroupDisplayed=function(t){return!(Qt(this.colDef)||Qt(this.colDef.showRowGroup)||!0!==this.colDef.showRowGroup&&this.colDef.showRowGroup!==t)},r.prototype.isPrimary=function(){return this.primary},r.prototype.isFilterAllowed=function(){return!!this.colDef.filter||!!this.colDef.filterFramework},r.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},r.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},r.prototype.validate=function(){var o,t=this.colDef;function e(a,d,f){Yn(function(){f?console.warn(a,f):Yn(function(){return console.warn(a)},d)},d)}(this.gridOptionsService.isRowModelType("clientSide")&&!on.isRegistered(Ot.RowGroupingModule)&&(o=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].filter(function(a){return Qe(t[a])})).length>0&&on.assertRegistered(Ot.RowGroupingModule,o.map(function(a){return"colDef."+a}).join(", ")),("agRichSelect"===this.colDef.cellEditor||"agRichSelectCellEditor"===this.colDef.cellEditor)&&on.assertRegistered(Ot.RichSelectModule,this.colDef.cellEditor),this.gridOptionsService.isTreeData())&&((o=["rowGroup","rowGroupIndex","pivot","pivotIndex"].filter(function(d){return Qe(t[d])})).length>0&&e("AG Grid: "+o.join()+" is not possible when doing tree data, your column definition should not have "+o.join(),"TreeDataCannotRowGroup"));Qe(t.menuTabs)&&on.assertRegistered(Ot.MenuModule,"menuTabs"),Qe(t.columnsMenuParams)&&on.assertRegistered(Ot.MenuModule,"columnsMenuParams"),Qe(t.columnsMenuParams)&&on.assertRegistered(Ot.ColumnsToolPanelModule,"columnsMenuParams"),Qe(this.colDef.width)&&"number"!=typeof this.colDef.width&&e("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),(t.pinnedRowCellRenderer||t.pinnedRowCellRendererParams||t.pinnedRowCellRendererFramework)&&e("AG Grid: pinnedRowCellRenderer[Params,Framework] no longer exist. Use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned.","colDef.pinnedRowCellRenderer-deprecated"),Qe(t.columnGroupShow)&&"closed"!==t.columnGroupShow&&"open"!==t.columnGroupShow&&e("AG Grid: '"+t.columnGroupShow+"' is not valid for columnGroupShow. Valid values are 'open', 'closed', undefined, null","columnGroupShow_invalid")},r.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},r.prototype.createColumnFunctionCallbackParams=function(t){return{node:t,data:t.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}},r.prototype.isSuppressNavigable=function(t){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var e=this.createColumnFunctionCallbackParams(t);return(0,this.colDef.suppressNavigable)(e)}return!1},r.prototype.isCellEditable=function(t){return!(t.group&&!this.gridOptionsService.is("enableGroupEdit"))&&this.isColumnFunc(t,this.colDef.editable)},r.prototype.isSuppressFillHandle=function(){return!!Qd(this.colDef.suppressFillHandle)},r.prototype.isAutoHeight=function(){return!!Qd(this.colDef.autoHeight)},r.prototype.isAutoHeaderHeight=function(){return!!Qd(this.colDef.autoHeaderHeight)},r.prototype.isRowDrag=function(t){return this.isColumnFunc(t,this.colDef.rowDrag)},r.prototype.isDndSource=function(t){return this.isColumnFunc(t,this.colDef.dndSource)},r.prototype.isCellCheckboxSelection=function(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)},r.prototype.isSuppressPaste=function(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)},r.prototype.isResizable=function(){return!!Qd(this.colDef.resizable)},r.prototype.isColumnFunc=function(t,e){return"boolean"==typeof e?e:"function"==typeof e&&e(this.createColumnFunctionCallbackParams(t))},r.prototype.setMoving=function(t,e){void 0===e&&(e="api"),this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",e))},r.prototype.createColumnEvent=function(t,e){return{type:t,column:this,columns:[this],source:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},r.prototype.isMoving=function(){return this.moving},r.prototype.getSort=function(){return this.sort},r.prototype.setSort=function(t,e){void 0===e&&(e="api"),this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",e)))},r.prototype.setMenuVisible=function(t,e){void 0===e&&(e="api"),this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",e)))},r.prototype.isMenuVisible=function(){return this.menuVisible},r.prototype.isSortAscending=function(){return"asc"===this.sort},r.prototype.isSortDescending=function(){return"desc"===this.sort},r.prototype.isSortNone=function(){return Qt(this.sort)},r.prototype.isSorting=function(){return Qe(this.sort)},r.prototype.getSortIndex=function(){return this.sortIndex},r.prototype.setSortIndex=function(t){this.sortIndex=t},r.prototype.setAggFunc=function(t){this.aggFunc=t},r.prototype.getAggFunc=function(){return this.aggFunc},r.prototype.getLeft=function(){return this.left},r.prototype.getOldLeft=function(){return this.oldLeft},r.prototype.getRight=function(){return this.left+this.actualWidth},r.prototype.setLeft=function(t,e){void 0===e&&(e="api"),this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",e)))},r.prototype.isFilterActive=function(){return this.filterActive},r.prototype.setFilterActive=function(t,e,n){void 0===e&&(e="api"),this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",e)));var i=this.createColumnEvent("filterChanged",e);n&&Ia(i,n),this.eventService.dispatchEvent(i)},r.prototype.setPinned=function(t){this.pinned=!0===t||"left"===t?"left":"right"===t?"right":null},r.prototype.setFirstRightPinned=function(t,e){void 0===e&&(e="api"),this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",e)))},r.prototype.setLastLeftPinned=function(t,e){void 0===e&&(e="api"),this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",e)))},r.prototype.isFirstRightPinned=function(){return this.firstRightPinned},r.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},r.prototype.isPinned=function(){return"left"===this.pinned||"right"===this.pinned},r.prototype.isPinnedLeft=function(){return"left"===this.pinned},r.prototype.isPinnedRight=function(){return"right"===this.pinned},r.prototype.getPinned=function(){return this.pinned},r.prototype.setVisible=function(t,e){void 0===e&&(e="api");var n=!0===t;this.visible!==n&&(this.visible=n,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",e)))},r.prototype.isVisible=function(){return this.visible},r.prototype.isSpanHeaderHeight=function(){return!!this.getColDef().spanHeaderHeight},r.prototype.getColDef=function(){return this.colDef},r.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},r.prototype.getColId=function(){return this.colId},r.prototype.getId=function(){return this.getColId()},r.prototype.getUniqueId=function(){return this.getId()},r.prototype.getDefinition=function(){return this.colDef},r.prototype.getActualWidth=function(){return this.actualWidth},r.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},r.prototype.setAutoHeaderHeight=function(t){var e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e},r.prototype.createBaseColDefParams=function(t){return{node:t,data:t.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},r.prototype.getColSpan=function(t){if(Qt(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(t),n=this.colDef.colSpan(e);return Math.max(n,1)},r.prototype.getRowSpan=function(t){if(Qt(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(t),n=this.colDef.rowSpan(e);return Math.max(n,1)},r.prototype.setActualWidth=function(t,e,n){void 0===e&&(e="api"),void 0===n&&(n=!1),null!=this.minWidth&&(t=Math.max(t,this.minWidth)),null!=this.maxWidth&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&"flex"!==e&&"gridInitializing"!==e&&(this.flex=null),n||this.fireColumnWidthChangedEvent(e))},r.prototype.fireColumnWidthChangedEvent=function(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))},r.prototype.isGreaterThanMax=function(t){return null!=this.maxWidth&&t>this.maxWidth},r.prototype.getMinWidth=function(){return this.minWidth},r.prototype.getMaxWidth=function(){return this.maxWidth},r.prototype.getFlex=function(){return this.flex||0},r.prototype.setFlex=function(t){this.flex!==t&&(this.flex=t)},r.prototype.setMinimum=function(t){void 0===t&&(t="api"),Qe(this.minWidth)&&this.setActualWidth(this.minWidth,t)},r.prototype.setRowGroupActive=function(t,e){void 0===e&&(e="api"),this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",e)))},r.prototype.isRowGroupActive=function(){return this.rowGroupActive},r.prototype.setPivotActive=function(t,e){void 0===e&&(e="api"),this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",e)))},r.prototype.isPivotActive=function(){return this.pivotActive},r.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},r.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},r.prototype.setValueActive=function(t,e){void 0===e&&(e="api"),this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",e)))},r.prototype.isValueActive=function(){return this.aggregationActive},r.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},r.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},r.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},r.prototype.getMenuTabs=function(t){var e=this.getColDef().menuTabs;return null==e&&(e=t),e},r.EVENT_MOVING_CHANGED="movingChanged",r.EVENT_LEFT_CHANGED="leftChanged",r.EVENT_WIDTH_CHANGED="widthChanged",r.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",r.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",r.EVENT_VISIBLE_CHANGED="visibleChanged",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_COL_DEF_CHANGED="colDefChanged",r.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",r.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_PIVOT_CHANGED="columnPivotChanged",r.EVENT_VALUE_CHANGED="columnValueChanged",nL([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),nL([F("columnUtils")],r.prototype,"columnUtils",void 0),nL([rt],r.prototype,"initialise",null),r}(),xi=function(){function r(t,e,n,i){this.localEventService=new Wg,this.expandable=!1,this.instanceId=Vj(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=e,this.expanded=!!t&&!!t.openByDefault,this.padding=n,this.level=i}return r.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},r.prototype.reset=function(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},r.prototype.getInstanceId=function(){return this.instanceId},r.prototype.setOriginalParent=function(t){this.originalParent=t},r.prototype.getOriginalParent=function(){return this.originalParent},r.prototype.getLevel=function(){return this.level},r.prototype.isVisible=function(){return!!this.children&&this.children.some(function(t){return t.isVisible()})},r.prototype.isPadding=function(){return this.padding},r.prototype.setExpanded=function(t){this.expanded=void 0!==t&&t,this.localEventService.dispatchEvent({type:r.EVENT_EXPANDED_CHANGED})},r.prototype.isExpandable=function(){return this.expandable},r.prototype.isExpanded=function(){return this.expanded},r.prototype.getGroupId=function(){return this.groupId},r.prototype.getId=function(){return this.getGroupId()},r.prototype.setChildren=function(t){this.children=t},r.prototype.getChildren=function(){return this.children},r.prototype.getColGroupDef=function(){return this.colGroupDef},r.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},r.prototype.addLeafColumns=function(t){this.children&&this.children.forEach(function(e){e instanceof ri?t.push(e):e instanceof r&&e.addLeafColumns(t)})},r.prototype.getColumnGroupShow=function(){var t=this.colGroupDef;if(t)return t.columnGroupShow},r.prototype.setupExpandable=function(){var t=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(function(n){return n.addEventListener("visibleChanged",e)}),this.expandableListenerRemoveCallback=function(){t.getLeafColumns().forEach(function(n){return n.removeEventListener("visibleChanged",e)}),t.expandableListenerRemoveCallback=null}},r.prototype.setExpandable=function(){if(!this.isPadding()){for(var t=!1,e=!1,n=!1,i=this.findChildrenRemovingPadding(),o=0,s=i.length;o<s;o++){var a=i[o];if(a.isVisible()){var d=a.getColumnGroupShow();"open"===d?(t=!0,n=!0):"closed"===d?(e=!0,n=!0):(t=!0,e=!0)}}var f=t&&e&&n;this.expandable!==f&&(this.expandable=f,this.localEventService.dispatchEvent({type:r.EVENT_EXPANDABLE_CHANGED}))}},r.prototype.findChildrenRemovingPadding=function(){var t=[],e=function(n){n.forEach(function(i){i instanceof r&&i.isPadding()?e(i.children):t.push(i)})};return e(this.children),t},r.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},r.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_EXPANDABLE_CHANGED="expandableChanged",function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([as],r.prototype,"destroy",null),r}(),B5={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function Hj(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=0;e<r.length;e++){var n=r[e];if(Qe(n))return n}return null}function pr(r){if(r&&r.length)return r[r.length-1]}function $g(r,t,e){return null==r&&null==t||null!=r&&null!=t&&r.length===t.length&&r.every(function(n,i){return e?e(n,t[i]):t[i]===n})}function Bj(r){return r.sort(function(t,e){return t-e})}function As(r,t){var e=r.indexOf(t);e>=0&&r.splice(e,1)}function rL(r,t){t.forEach(function(e){return As(r,e)})}function _0(r,t,e){r.splice(e,0,t)}function iL(r,t,e){rL(r,t),t.slice().reverse().forEach(function(n){return _0(r,n,e)})}function lu(r,t){return r.indexOf(t)>-1}function Uj(r){return[].concat.apply([],r)}function oL(r,t){null==t||null==r||t.forEach(function(e){return r.push(e)})}var q5=Object.freeze({__proto__:null,firstExistingValue:Hj,existsAndNotEmpty:function U5(r){return null!=r&&r.length>0},last:pr,areEqual:$g,shallowCompare:function j5(r,t){return $g(r,t)},sortNumerically:Bj,removeRepeatsFromArray:function W5(r,t){if(r)for(var e=r.length-2;e>=0;e--)r[e]===t&&r[e+1]===t&&r.splice(e+1,1)},removeFromArray:As,removeAllFromArray:rL,insertIntoArray:_0,insertArrayIntoArray:function $5(r,t,e){if(null!=r&&null!=t)for(var n=t.length-1;n>=0;n--)_0(r,t[n],e)},moveInArray:iL,includes:lu,flatten:Uj,pushAll:oL,toStrings:function z5(r){return r.map(ZF)},forEachReverse:function K5(r,t){if(null!=r)for(var e=r.length-1;e>=0;e--)t(r[e],e)}}),jj="__ag_Grid_Stop_Propagation",Y5=["touchstart","touchend","touchmove","touchcancel","scroll"],sL={};function Tw(r){r[jj]=!0}function Xd(r){return!0===r[jj]}var aL=function(){var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(e){if("boolean"==typeof sL[e])return sL[e];var n=document.createElement(r[e]||"div");return sL[e="on"+e]=e in n}}();function YI(r,t,e){for(var n=t.target;n;){var i=r.getDomData(n,e);if(i)return i;n=n.parentElement}return null}function ZI(r,t){return!(!t||!r)&&$j(t).indexOf(r)>=0}function Wj(r){for(var t=[],e=r.target;e;)t.push(e),e=e.parentElement;return t}function $j(r){var t=r;return t.path?t.path:t.composedPath?t.composedPath():Wj(t)}function zj(r,t,e,n){var i=lu(Y5,e);r&&r.addEventListener&&r.addEventListener(t,e,n,i?{passive:!0}:void 0)}var Z5=Object.freeze({__proto__:null,stopPropagationForAgGrid:Tw,isStopPropagationForAgGrid:Xd,isEventSupported:aL,getCtrlForEvent:YI,isElementInEventPath:ZI,createEventPath:Wj,getEventPath:$j,addSafePassiveEventListener:zj}),wy=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Ye=function(){function r(){var t=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=function(){return!t.destroyed}}return r.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},r.prototype.getContext=function(){return this.context},r.prototype.destroy=function(){this.destroyFunctions.forEach(function(t){return t()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:r.EVENT_DESTROYED})},r.prototype.addEventListener=function(t,e){this.localEventService||(this.localEventService=new Wg),this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService&&this.localEventService.removeEventListener(t,e)},r.prototype.dispatchEventAsync=function(t){var e=this;window.setTimeout(function(){return e.dispatchEvent(t)},0)},r.prototype.dispatchEvent=function(t){this.localEventService&&this.localEventService.dispatchEvent(t)},r.prototype.addManagedListener=function(t,e,n){var i=this;if(!this.destroyed){t instanceof HTMLElement?zj(this.getFrameworkOverrides(),t,e,n):t.addEventListener(e,n);var o=function(){return t.removeEventListener(e,n),i.destroyFunctions=i.destroyFunctions.filter(function(s){return s!==o}),null};return this.destroyFunctions.push(o),o}},r.prototype.addManagedPropertyListener=function(t,e){var n=this;if(!this.destroyed){this.gridOptionsService.addEventListener(t,e);var i=function(){return n.gridOptionsService.removeEventListener(t,e),n.destroyFunctions=n.destroyFunctions.filter(function(o){return o!==i}),null};return this.destroyFunctions.push(i),i}},r.prototype.addDestroyFunc=function(t){this.isAlive()?this.destroyFunctions.push(t):t()},r.prototype.createManagedBean=function(t,e){var n=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),n},r.prototype.createBean=function(t,e,n){return(e||this.getContext()).createBean(t,n)},r.prototype.destroyBean=function(t,e){return(e||this.getContext()).destroyBean(t)},r.prototype.destroyBeans=function(t,e){var n=this;return t&&t.forEach(function(i){return n.destroyBean(i,e)}),[]},r.EVENT_DESTROYED="destroyed",wy([F("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),wy([F("context")],r.prototype,"context",void 0),wy([F("eventService")],r.prototype,"eventService",void 0),wy([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),wy([F("localeService")],r.prototype,"localeService",void 0),wy([F("environment")],r.prototype,"environment",void 0),wy([as],r.prototype,"destroy",null),r}(),Q5=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),lL=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},J5=function(r,t){return function(e,n){t(e,n,r)}},X5=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Q5(t,r),t.prototype.setBeans=function(e){this.logger=e.create("ColumnFactory")},t.prototype.createColumnTree=function(e,n,i){var o=new D5,s=this.extractExistingTreeData(i),a=s.existingCols,d=s.existingGroups;o.addExistingKeys(s.existingColKeys);var g=this.recursivelyCreateColumns(e,0,n,a,o,d),C=this.findMaxDept(g,0);this.logger.log("Number of levels for grouped columns is "+C);var E=this.balanceColumnTree(g,0,C,o);return this.columnUtils.depthFirstOriginalTreeSearch(null,E,function(I,M){I instanceof xi&&I.setupExpandable(),I.setOriginalParent(M)}),{columnTree:E,treeDept:C}},t.prototype.extractExistingTreeData=function(e){var n=[],i=[],o=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(s){if(s instanceof xi)i.push(s);else{var d=s;o.push(d.getId()),n.push(d)}}),{existingCols:n,existingGroups:i,existingColKeys:o}},t.prototype.createForAutoGroups=function(e,n){var i=this;return e.map(function(o){return i.createAutoGroupTreeItem(n,o)})},t.prototype.createAutoGroupTreeItem=function(e,n){for(var o=n,s=this.findDepth(e)-1;s>=0;s--){var a=new xi(null,"FAKE_PATH_"+n.getId()+"}_"+s,!0,s);this.createBean(a),a.setChildren([o]),o.setOriginalParent(a),o=a}return o},t.prototype.findDepth=function(e){for(var n=0,i=e;i&&i[0]&&i[0]instanceof xi;)n++,i=i[0].getChildren();return n},t.prototype.balanceColumnTree=function(e,n,i,o){for(var s=[],a=0;a<e.length;a++){var d=e[a];if(d instanceof xi){var f=d,g=this.balanceColumnTree(f.getChildren(),n+1,i,o);f.setChildren(g),s.push(f)}else{for(var C=void 0,E=void 0,T=i-1;T>=n;T--){var I=o.getUniqueKey(null,null),M=this.createMergedColGroupDef(null),k=new xi(M,I,!0,n);this.createBean(k),E&&E.setChildren([k]),E=k,C||(C=E)}if(C&&E){if(s.push(C),e.some(function(z){return z instanceof xi})){E.setChildren([d]);continue}E.setChildren(e);break}s.push(d)}}return s},t.prototype.findMaxDept=function(e,n){for(var i=n,o=0;o<e.length;o++){var s=e[o];if(s instanceof xi){var d=this.findMaxDept(s.getChildren(),n+1);i<d&&(i=d)}}return i},t.prototype.recursivelyCreateColumns=function(e,n,i,o,s,a){var d=this;return(e||[]).map(function(f){return d.isColumnGroup(f)?d.createColumnGroup(i,f,n,o,s,a):d.createColumn(i,f,o,s)})},t.prototype.createColumnGroup=function(e,n,i,o,s,a){var C,d=this.createMergedColGroupDef(n),f=s.getUniqueKey(d.groupId||null,null),g=this.findExistingGroup(n,a);g?((C=g).reset(d,i),As(a,g)):(C=new xi(d,f,!1,i),this.createBean(C));var E=this.recursivelyCreateColumns(d.children,i+1,e,o,s,a);return C.setChildren(E),C},t.prototype.createMergedColGroupDef=function(e){var n={};return Object.assign(n,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(n,e),n},t.prototype.createColumn=function(e,n,i,o){var s=this.mergeColDefs(n),a=this.findExistingColumn(n,i);if(i&&a&&As(i,a),a)a.setColDef(s,n),this.applyColumnState(a,s);else{var d=o.getUniqueKey(s.colId,s.field);a=new ri(s,n,d,e),this.context.createBean(a)}return a},t.prototype.applyColumnState=function(e,n){var i=au(n.flex);if(void 0!==i&&e.setFlex(i),e.getFlex()<=0){var s=au(n.width);if(null!=s)e.setActualWidth(s);else{var a=e.getActualWidth();e.setActualWidth(a)}}void 0!==n.sort&&e.setSort("asc"==n.sort||"desc"==n.sort?n.sort:void 0);var d=au(n.sortIndex);void 0!==d&&e.setSortIndex(d);var f=Qd(n.hide);void 0!==f&&e.setVisible(!f),void 0!==n.pinned&&e.setPinned(n.pinned)},t.prototype.findExistingColumn=function(e,n){return(n||[]).find(function(i){var o=i.getUserProvidedColDef();if(!o)return!1;var a=null!=e.field;return null!=e.colId?i.getId()===e.colId:a?o.field===e.field:o===e})},t.prototype.findExistingGroup=function(e,n){return n.find(function(i){return!(!i.getColGroupDef()||null==e.groupId||i.getId()!==e.groupId)})},t.prototype.mergeColDefs=function(e){var n={},i=this.gridOptionsService.get("defaultColDef");Ia(n,i,!1,!0);var o=e.type;o||(o=i&&i.type),o&&this.assignColumnTypes(o,n),Ia(n,e,!1,!0);var s=this.gridOptionsService.get("autoGroupColumnDef"),a=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&s&&a&&Ia(n,{sort:s.sort,initialSort:s.initialSort},!1,!0),n},t.prototype.assignColumnTypes=function(e,n){var i=[];if(e instanceof Array)e.some(function(d){return"string"!=typeof d})?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):i=e;else{if("string"!=typeof e)return void console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'");i=e.split(",")}var s=Object.assign({},B5);Wr(this.gridOptionsService.get("columnTypes")||{},function(d,f){d in s?console.warn("AG Grid: the column type '"+d+"' is a default column type and cannot be overridden."):s[d]=f}),i.forEach(function(d){var f=s[d.trim()];f?Ia(n,f,!1,!0):console.warn("AG Grid: colDef.type '"+d+"' does not correspond to defined gridOptions.columnTypes")})},t.prototype.isColumnGroup=function(e){return void 0!==e.children},lL([F("columnUtils")],t.prototype,"columnUtils",void 0),lL([J5(0,ea("loggerFactory"))],t.prototype,"setBeans",null),lL([Rt("columnFactory")],t)}(Ye),Kj=function(){function r(){}return r.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentFramework:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellRendererFramework:void 0,cellEditor:void 0,cellEditorFramework:void 0,cellEditorParams:void 0,filterFramework:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentFramework:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,floatingFilterComponentFramework:void 0,tooltipComponentParams:void 0,tooltipComponentFramework:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,spanHeaderHeight:void 0},r.ALL_PROPERTIES=Object.keys(r.ColDefPropertyMap),r.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],r}(),V=function(){function r(){}return r.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",r.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",r.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",r.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",r.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",r.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",r.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",r.EVENT_COLUMN_MOVED="columnMoved",r.EVENT_COLUMN_VISIBLE="columnVisible",r.EVENT_COLUMN_PINNED="columnPinned",r.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",r.EVENT_COLUMN_RESIZED="columnResized",r.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",r.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",r.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",r.EVENT_ROW_GROUP_OPENED="rowGroupOpened",r.EVENT_ROW_DATA_CHANGED="rowDataChanged",r.EVENT_ROW_DATA_UPDATED="rowDataUpdated",r.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",r.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",r.EVENT_CHART_CREATED="chartCreated",r.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",r.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",r.EVENT_CHART_DESTROYED="chartDestroyed",r.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",r.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",r.EVENT_INTERNAL_TOOL_PANEL_VISIBLE_CHANGED="internalToolPanelVisibleChanged",r.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",r.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",r.EVENT_MODEL_UPDATED="modelUpdated",r.EVENT_PASTE_START="pasteStart",r.EVENT_PASTE_END="pasteEnd",r.EVENT_FILL_START="fillStart",r.EVENT_FILL_END="fillEnd",r.EVENT_UNDO_STARTED="undoStarted",r.EVENT_UNDO_ENDED="undoEnded",r.EVENT_REDO_STARTED="redoStarted",r.EVENT_REDO_ENDED="redoEnded",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",r.EVENT_CELL_CLICKED="cellClicked",r.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",r.EVENT_CELL_MOUSE_DOWN="cellMouseDown",r.EVENT_CELL_CONTEXT_MENU="cellContextMenu",r.EVENT_CELL_VALUE_CHANGED="cellValueChanged",r.EVENT_CELL_EDIT_REQUEST="cellEditRequest",r.EVENT_ROW_VALUE_CHANGED="rowValueChanged",r.EVENT_CELL_FOCUSED="cellFocused",r.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",r.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_SELECTION_CHANGED="selectionChanged",r.EVENT_CELL_KEY_DOWN="cellKeyDown",r.EVENT_CELL_KEY_PRESS="cellKeyPress",r.EVENT_CELL_MOUSE_OVER="cellMouseOver",r.EVENT_CELL_MOUSE_OUT="cellMouseOut",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_MODIFIED="filterModified",r.EVENT_FILTER_OPENED="filterOpened",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",r.EVENT_ROW_CLICKED="rowClicked",r.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",r.EVENT_GRID_READY="gridReady",r.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",r.EVENT_VIEWPORT_CHANGED="viewportChanged",r.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",r.EVENT_FIRST_DATA_RENDERED="firstDataRendered",r.EVENT_DRAG_STARTED="dragStarted",r.EVENT_DRAG_STOPPED="dragStopped",r.EVENT_CHECKBOX_CHANGED="checkboxChanged",r.EVENT_ROW_EDITING_STARTED="rowEditingStarted",r.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",r.EVENT_CELL_EDITING_STARTED="cellEditingStarted",r.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",r.EVENT_BODY_SCROLL="bodyScroll",r.EVENT_BODY_SCROLL_END="bodyScrollEnd",r.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",r.EVENT_PAGINATION_CHANGED="paginationChanged",r.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",r.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",r.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",r.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",r.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",r.EVENT_FLASH_CELLS="flashCells",r.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",r.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",r.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",r.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",r.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",r.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",r.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",r.EVENT_ROW_DRAG_ENTER="rowDragEnter",r.EVENT_ROW_DRAG_MOVE="rowDragMove",r.EVENT_ROW_DRAG_LEAVE="rowDragLeave",r.EVENT_ROW_DRAG_END="rowDragEnd",r.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",r.EVENT_POPUP_TO_FRONT="popupToFront",r.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",r.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",r.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",r.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",r.EVENT_KEYBOARD_FOCUS="keyboardFocus",r.EVENT_MOUSE_FOCUS="mouseFocus",r.EVENT_STORE_UPDATED="storeUpdated",r.EVENT_FILTER_DESTROYED="filterDestroyed",r}(),eZ=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},qj=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(eZ(arguments[t]));return r},eh=function(){function r(){}return r.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault"],r.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef"],r.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"],r.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],r.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","immutableData","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideFilterAllLevels","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","reactUi","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","groupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","suppressCutToClipboard"],r.FUNCTION_PROPERTIES=qj(r.FUNCTIONAL_PROPERTIES=["localeTextFunc","doesExternalFilterPass","groupRowAggNodes","isFullWidthCell","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","postSort","defaultGroupOrderComparator","rowDragText","groupRowRenderer","groupRowRendererFramework","fullWidthCellRenderer","fullWidthCellRendererFramework","loadingCellRenderer","loadingCellRendererFramework","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework"],r.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","getRowNodeId","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","groupAggFiltering"]),r.ALL_PROPERTIES=qj(r.ARRAY_PROPERTIES,r.OBJECT_PROPERTIES,r.STRING_PROPERTIES,r.NUMBER_PROPERTIES,r.FUNCTION_PROPERTIES,r.BOOLEAN_PROPERTIES),r.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],r}(),uL=function(){return uL=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},uL.apply(this,arguments)},tZ=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},Rw=function(){function r(){}return r.getCallbackForEvent=function(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substr(1)},r.getCoercionLookup=function(){var t={};return function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(tZ(arguments[t]));return r}(r.ARRAY_PROPERTIES,r.OBJECT_PROPERTIES,r.STRING_PROPERTIES,r.FUNCTION_PROPERTIES,r.EVENT_CALLBACKS).forEach(function(e){return t[e]="none"}),r.BOOLEAN_PROPERTIES.forEach(function(e){return t[e]="boolean"}),r.NUMBER_PROPERTIES.forEach(function(e){return t[e]="number"}),t},r.getValue=function(t,e){var n=r.coercionLookup[t];if(n){var i=e;switch(n){case"number":i=r.toNumber(e);break;case"boolean":i=r.toBoolean(e);break;case"none":"groupAggFiltering"===t&&"function"!=typeof e&&(i=r.toBoolean(e))}return i}},r.getGridOptionKeys=function(t,e){return Object.keys(e?r.coercionLookup:t)},r.copyAttributesToGridOptions=function(t,e,n){void 0===n&&(n=!1),"object"!=typeof t&&(t={});var i=t;return r.getGridOptionKeys(e,n).forEach(function(s){var a=e[s];if(typeof a<"u"){var d=r.getValue(s,a);void 0!==d&&(i[s]=d)}}),t},r.processOnChange=function(t,e){if(t&&0!==Object.keys(t).length){var n=uL({},t);n.columnTypes&&(e.setColumnTypes(n.columnTypes.currentValue,"gridOptionsChanged"),delete n.columnTypes),n.autoGroupColumnDef&&(e.setAutoGroupColumnDef(n.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete n.autoGroupColumnDef),n.defaultColDef&&(e.setDefaultColDef(n.defaultColDef.currentValue,"gridOptionsChanged"),delete n.defaultColDef),n.columnDefs&&(e.setColumnDefs(n.columnDefs.currentValue,"gridOptionsChanged"),delete n.columnDefs),Object.keys(n).forEach(function(o){var s=o,a=r.getValue(s,n[s].currentValue);e.__setProperty(s,a)});var i={type:V.EVENT_COMPONENT_STATE_CHANGED};Wr(t,function(o,s){i[o]=s}),e.dispatchEvent(i)}},r.toBoolean=function(t){return"boolean"==typeof t?t:"string"==typeof t&&("TRUE"===t.toUpperCase()||""==t)},r.toNumber=function(t){return"number"==typeof t?t:"string"==typeof t?Number(t):void 0},r.EVENTS=y0(V),r.EXCLUDED_INTERNAL_EVENTS=[V.EVENT_SCROLLBAR_WIDTH_CHANGED,V.EVENT_CHECKBOX_CHANGED,V.EVENT_HEIGHT_SCALE_CHANGED,V.EVENT_BODY_HEIGHT_CHANGED,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,V.EVENT_SCROLL_VISIBILITY_CHANGED,V.EVENT_COLUMN_HOVER_CHANGED,V.EVENT_FLASH_CELLS,V.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,V.EVENT_DISPLAYED_ROWS_CHANGED,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,V.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,V.EVENT_POPUP_TO_FRONT,V.EVENT_KEYBOARD_FOCUS,V.EVENT_MOUSE_FOCUS,V.EVENT_STORE_UPDATED,V.EVENT_COLUMN_PANEL_ITEM_DRAG_START,V.EVENT_COLUMN_PANEL_ITEM_DRAG_END,V.EVENT_FILL_START,V.EVENT_FILL_END,V.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,V.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,V.EVENT_FULL_WIDTH_ROW_FOCUSED,V.EVENT_HEADER_HEIGHT_CHANGED,V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,V.EVENT_INTERNAL_TOOL_PANEL_VISIBLE_CHANGED,V.EVENT_CELL_FOCUS_CLEARED,V.EVENT_GRID_STYLES_CHANGED,V.EVENT_FILTER_DESTROYED],r.PUBLIC_EVENTS=r.EVENTS.filter(function(t){return!lu(r.EXCLUDED_INTERNAL_EVENTS,t)}),r.EVENT_CALLBACKS=r.EVENTS.map(function(t){return r.getCallbackForEvent(t)}),r.STRING_PROPERTIES=eh.STRING_PROPERTIES,r.OBJECT_PROPERTIES=eh.OBJECT_PROPERTIES,r.ARRAY_PROPERTIES=eh.ARRAY_PROPERTIES,r.NUMBER_PROPERTIES=eh.NUMBER_PROPERTIES,r.BOOLEAN_PROPERTIES=eh.BOOLEAN_PROPERTIES,r.FUNCTION_PROPERTIES=eh.FUNCTION_PROPERTIES,r.ALL_PROPERTIES=eh.ALL_PROPERTIES,r.ALL_PROPERTIES_SET=new Set(eh.ALL_PROPERTIES),r.coercionLookup=r.getCoercionLookup(),r}();function Yj(r,t,e){var n={},i=r.filter(function(o){return!t.some(function(s){return s===o})});return i.length>0&&i.forEach(function(o){return n[o]=cL(o,e)}),n}function cL(r,t,e,n){var i=t.map(function(a){return{value:a,relevance:rZ(r.toLowerCase(),a.toLocaleLowerCase())}});if(i.sort(function(a,d){return d.relevance-a.relevance}),e&&(i=i.filter(function(a){return 0!==a.relevance})),n&&n>0){var s=i[0].relevance*n;i=i.filter(function(a){return s-a.relevance<0})}return i.map(function(a){return a.value})}function rZ(r,t){for(var e=r.replace(/\s/g,""),n=t.replace(/\s/g,""),i=0,o=-1,s=0;s<e.length;s++){var a=n.indexOf(e[s],o+1);-1!==a&&(i+=100-100*(o=a)/1e4*100)}return i}var iZ=Object.freeze({__proto__:null,fuzzyCheckStrings:Yj,fuzzySuggestions:cL}),QI=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Zj=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},dL=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Zj(arguments[t]));return r};function $o(r,t,e,n){var i=e?"Please use '"+e+"' instead. ":"";Yn(function(){return console.warn("AG Grid: since v"+r+", '"+t+"' is deprecated. "+i+(n??""))},"Deprecated_"+t)}var oZ=function(){function r(){this.deprecatedProperties={serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},suppressEnterpriseResetOnNewColumns:{version:"25",message:"Now that it is possible to dynamically change columns in the grid, this is no longer needed."},suppressColumnStateEvents:{version:"25",message:'Events should be ignored based on the `event.source`, which will be "api" if the event was due to setting column state via the API.'},defaultExportParams:{version:"25.2",message:"The property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`"},stopEditingWhenGridLosesFocus:{version:"25.2.2",newProp:"stopEditingWhenCellsLoseFocus",copyToNewProp:!0},applyColumnDefOrder:{version:"26",message:"The property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true"},groupMultiAutoColumn:{version:"26",newProp:"groupDisplayType",copyToNewProp:!0,newPropValue:"multipleColumns"},groupUseEntireRow:{version:"26",newProp:"groupDisplayType",copyToNewProp:!0,newPropValue:"groupRows"},defaultGroupSortComparator:{version:"26",newProp:"initialGroupOrderComparator"},enableMultiRowDragging:{version:"26.1",newProp:"rowDragMultiRow",copyToNewProp:!0},colWidth:{version:"26.1",newProp:"defaultColDef.width"},minColWidth:{version:"26.1",newProp:"defaultColDef.minWidth"},maxColWidth:{version:"26.1",newProp:"defaultColDef.maxWidth"},reactUi:{version:"26.1",message:"React UI is on by default, so no need for reactUi=true. To turn it off, set suppressReactUi=true."},suppressCellSelection:{version:"27",newProp:"suppressCellFocus",copyToNewProp:!0},clipboardDeliminator:{version:"27.1",newProp:"clipboardDelimiter",copyToNewProp:!0},getRowNodeId:{version:"27.1",newProp:"getRowId",message:"The difference: if getRowId() is implemented then immutable data is enabled by default."},defaultGroupOrderComparator:{version:"27.2",newProp:"initialGroupOrderComparator"},groupRowAggNodes:{version:"27.2",newProp:"getGroupRowAgg"},postSort:{version:"27.2",newProp:"postSortRows"},isFullWidthCell:{version:"27.2",newProp:"isFullWidthRow"},localeTextFunc:{version:"27.2",newProp:"getLocaleText"},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideFilterAllLevels",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"}}}return r.prototype.pickOneWarning=function(t,e){console.warn("AG Grid: "+t+" and "+e+" do not work with each other, you need to pick one.")},r.prototype.init=function(){var t=this;if(this.checkForDeprecated(),this.checkForViolations(),!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.checkColumnDefViolations(),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&"multiple"!==this.gridOptionsService.get("rowSelection")&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.isRowModelType("serverSide")){var e=function(i,o){return"AG Grid: '"+i+"' is not supported on the Server-Side Row Model."+(o?" Please use "+o+" instead.":"")};this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(e("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&console.warn(e("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(e("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?on.assertRegistered(Ot.RangeSelectionModule,"enableRangeSelection"):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var n=function(i,o){return t.gridOptionsService.exists(i)&&on.assertRegistered(o,i)};n("sideBar",Ot.SideBarModule),n("statusBar",Ot.StatusBarModule),n("enableCharts",Ot.GridChartsModule),n("getMainMenuItems",Ot.MenuModule),n("getContextMenuItems",Ot.MenuModule),n("allowContextMenuWithControlKey",Ot.MenuModule),this.gridOptionsService.is("groupRowsSticky")&&(this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRowsSticky","groupHideOpenParents"),this.gridOptionsService.is("masterDetail")&&this.pickOneWarning("groupRowsSticky","masterDetail"),this.gridOptionsService.is("pagination")&&this.pickOneWarning("groupRowsSticky","pagination"))},r.prototype.checkColumnDefProperties=function(){var t=this;null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(e){var n=Object.getOwnPropertyNames(e),i=dL(Kj.ALL_PROPERTIES,Kj.FRAMEWORK_PROPERTIES);t.checkProperties(n,i,i,"colDef","https://www.ag-grid.com/javascript-data-grid/column-properties/")})},r.prototype.checkColumnDefViolations=function(){var t,e=null!==(t=this.gridOptionsService.get("rowModelType"))&&void 0!==t?t:"clientSide",i={infinite:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],viewport:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],serverSide:["headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],clientSide:[]}[e];if(i?.length){var o=function(s){i.forEach(function(a){a in s&&s[a]&&console.warn("AG Grid: Column property "+a+" is not supported with the row model type "+e+".")})};null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(s){return o(s)}),null!=this.gridOptions.autoGroupColumnDef&&o(this.gridOptions.autoGroupColumnDef),null!=this.gridOptions.defaultColDef&&o(this.gridOptions.defaultColDef)}},r.prototype.checkGridOptionsProperties=function(){var t=Object.getOwnPropertyNames(this.gridOptions),e=dL(eh.ALL_PROPERTIES,eh.FRAMEWORK_PROPERTIES,Rw.EVENT_CALLBACKS),n=dL(e,["api","columnApi"],Object.keys(this.deprecatedProperties));this.checkProperties(t,n,e,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")},r.prototype.checkProperties=function(t,e,n,i,o){var s=Yj(t,e,n);Wr(s,function(a,d){console.warn("AG Grid: invalid "+i+" property '"+a+"' did you mean any of these: "+d.slice(0,8).join(", "))}),Object.keys(s).length>0&&console.warn("AG Grid: to see all the valid "+i+" properties please check: "+o)},r.prototype.checkForDeprecated=function(){var t=this.gridOptions;if(Object.entries(this.deprecatedProperties).forEach(function(n){var i,o=Zj(n,2),s=o[0],a=o[1],d=t[s];d&&($o(a.version,s,a.newProp,a.message),a.copyToNewProp&&a.newProp&&null==t[a.newProp]&&(t[a.newProp]=null!==(i=a.newPropValue)&&void 0!==i?i:d))}),t.groupSuppressAutoColumn){var e=t.treeData?"treeDataDisplayType":"groupDisplayType";console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `"+e+" = 'custom'`"),t[e]="custom"}t.immutableData&&(t.getRowId?console.warn("AG Grid: since v27.1, `immutableData` is deprecated. With the `getRowId` callback implemented, immutable data is enabled by default so you can remove `immutableData=true`."):console.warn("AG Grid: since v27.1, `immutableData` is deprecated. To enable immutable data you must implement the `getRowId()` callback.")),t.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),t.suppressServerSideInfiniteScroll="partial"!==t.serverSideStoreType)},r.prototype.checkForViolations=function(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()},r.prototype.treeDataViolations=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},QI([F("gridOptions")],r.prototype,"gridOptions",void 0),QI([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),QI([rt],r.prototype,"init",null),QI([Rt("gridOptionsValidator")],r)}();function hL(r,t){var e=["groupRows","multipleColumns","custom","singleColumn"];return e.indexOf(t)<0?(console.warn("AG Grid: '"+t+"' is not a valid groupDisplayType value - possible values are: '"+e.join("', '")+"'"),!1):t===r}var Aa=function(){function r(t,e,n,i){this.displayedChildren=[],this.localEventService=new Wg,this.groupId=e,this.partId=n,this.providedColumnGroup=t,this.pinned=i}return r.createUniqueId=function(t,e){return t+"_"+e},r.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},r.prototype.getParent=function(){return this.parent},r.prototype.setParent=function(t){this.parent=t},r.prototype.getUniqueId=function(){return r.createUniqueId(this.groupId,this.partId)},r.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},r.prototype.isMoving=function(){var t=this.getProvidedColumnGroup().getLeafColumns();return!(!t||0===t.length)&&t.every(function(e){return e.isMoving()})},r.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(i){i instanceof r&&i.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){var e=pr(this.displayedChildren).getLeft();this.setLeft(e)}else{var n=this.displayedChildren[0].getLeft();this.setLeft(n)}else this.setLeft(null)},r.prototype.getLeft=function(){return this.left},r.prototype.getOldLeft=function(){return this.oldLeft},r.prototype.setLeft=function(t){this.oldLeft=t,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_LEFT_CHANGED)))},r.prototype.getPinned=function(){return this.pinned},r.prototype.createAgEvent=function(t){return{type:t}},r.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},r.prototype.getGroupId=function(){return this.groupId},r.prototype.getPartId=function(){return this.partId},r.prototype.isChildInThisGroupDeepSearch=function(t){var e=!1;return this.children.forEach(function(n){t===n&&(e=!0),n instanceof r&&n.isChildInThisGroupDeepSearch(t)&&(e=!0)}),e},r.prototype.getActualWidth=function(){var t=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){t+=e.getActualWidth()}),t},r.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var t=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(t=!0)}),t},r.prototype.getMinWidth=function(){var t=0;return this.displayedChildren.forEach(function(e){t+=e.getMinWidth()||0}),t},r.prototype.addChild=function(t){this.children||(this.children=[]),this.children.push(t)},r.prototype.getDisplayedChildren=function(){return this.displayedChildren},r.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},r.prototype.getDisplayedLeafColumns=function(){var t=[];return this.addDisplayedLeafColumns(t),t},r.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},r.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},r.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},r.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},r.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},r.prototype.setExpanded=function(t){this.providedColumnGroup.setExpanded(t)},r.prototype.addDisplayedLeafColumns=function(t){this.displayedChildren.forEach(function(e){e instanceof ri?t.push(e):e instanceof r&&e.addDisplayedLeafColumns(t)})},r.prototype.addLeafColumns=function(t){this.children.forEach(function(e){e instanceof ri?t.push(e):e instanceof r&&e.addLeafColumns(t)})},r.prototype.getChildren=function(){return this.children},r.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},r.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},r.prototype.getOriginalColumnGroup=function(){return $o("27","getOriginalColumnGroup","getProvidedColumnGroup"),this.getProvidedColumnGroup()},r.prototype.getPaddingLevel=function(){var t=this.getParent();return this.isPadding()&&t&&t.isPadding()?1+t.getPaddingLevel():0},r.prototype.calculateDisplayedColumns=function(){var t=this;this.displayedChildren=[];for(var e=this;null!=e&&e.isPadding();)e=e.getParent();if(!e||!e.providedColumnGroup.isExpandable())return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach(function(i){if(!(i instanceof r)||i.displayedChildren&&i.displayedChildren.length)switch(i.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&t.displayedChildren.push(i);break;case"closed":e.providedColumnGroup.isExpanded()||t.displayedChildren.push(i);break;default:t.displayedChildren.push(i)}}),this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED))},r.EVENT_LEFT_CHANGED="leftChanged",r.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),r}(),Qj=function(){function r(){this.existingIds={}}return r.prototype.getInstanceIdForKey=function(t){var n,e=this.existingIds[t];return this.existingIds[t]=n="number"!=typeof e?0:e+1,n},r}(),lZ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),fL=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},C0="ag-Grid-AutoColumn",uZ=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return lZ(t,r),t.prototype.createAutoGroupColumns=function(e,n){var i=this,o=[],s=this.gridOptionsService.isTreeData(),a=this.gridOptionsService.isGroupMultiAutoColumn();return s&&a&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),a=!1),a?n.forEach(function(d,f){o.push(i.createOneAutoGroupColumn(e,d,f))}):o.push(this.createOneAutoGroupColumn(e)),o},t.prototype.createOneAutoGroupColumn=function(e,n,i){var s,o=this.generateDefaultColDef(n);s=n?C0+"-"+n.getId():C0,Ia(o,this.gridOptionsService.get("autoGroupColumnDef")),(o=this.columnFactory.mergeColDefs(o)).colId=s,this.gridOptionsService.isTreeData()||Qt(o.field)&&Qt(o.valueGetter)&&Qt(o.filterValueGetter)&&"agGroupColumnFilter"!==o.filter&&(o.filter=!1),i&&i>0&&(o.headerCheckboxSelection=!1);var f=e.find(function(E){return E.getId()==s});if(f)return f.setColDef(o,null),this.columnFactory.applyColumnState(f,o),f;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&(o.sort||o.initialSort)&&!o.field&&Ia(o,{sort:null,initialSort:null},!0,!0);var C=new ri(o,null,s,!0);return this.context.createBean(C),C},t.prototype.generateDefaultColDef=function(e){var n=this.gridOptionsService.get("autoGroupColumnDef"),o={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(n&&(n.cellRenderer||n.cellRendererFramework||n.cellRendererSelector)||(o.cellRenderer="agGroupCellRenderer"),e){var a=e.getColDef();Object.assign(o,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:a.headerValueGetter}),(a.cellRenderer||a.cellRendererFramework)&&Object.assign(o,{cellRendererParams:{innerRenderer:a.cellRenderer,innerRendererFramework:a.cellRendererFramework,innerRendererParams:a.cellRendererParams}}),o.showRowGroup=e.getColId()}else o.showRowGroup=!0;return o},fL([F("columnModel")],t.prototype,"columnModel",void 0),fL([F("columnFactory")],t.prototype,"columnFactory",void 0),fL([Rt("autoGroupColService")],t)}(Ye),cZ=/[&<>"']/g,dZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Jj(r){return r[0].toUpperCase()+r.substr(1).toLowerCase()}function th(r,t){if(null==r)return null;var e=r.toString().toString();return t?e:e.replace(cZ,function(n){return dZ[n]})}function Xj(r){return r&&null!=r?r.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(function(i){return i.substring(0,1).toUpperCase()+(i.length>1?i.substring(1,i.length):"")}).join(" "):null}var fZ=Object.freeze({__proto__:null,utf8_encode:function hZ(r){var t=String.fromCharCode;function i(C,E){return t(C>>E&63|128)}function o(C){if(C>=0&&C<=31&&10!==C)return"_x"+C.toString(16).toUpperCase().padStart(4,"0")+"_";if(!(4294967168&C))return t(C);var I="";return 4294965248&C?4294901760&C?4292870144&C||(I=t(C>>18&7|240),I+=i(C,12),I+=i(C,6)):(function n(C){if(C>=55296&&C<=57343)throw Error("Lone surrogate U+"+C.toString(16).toUpperCase()+" is not a scalar value")}(C),I=t(C>>12&15|224),I+=i(C,6)):I=t(C>>6&31|192),I+t(63&C|128)}for(var s=function e(C){var E=[];if(!C)return[];for(var M,k,T=C.length,I=0;I<T;)(M=C.charCodeAt(I++))>=55296&&M<=56319&&I<T?56320==(64512&(k=C.charCodeAt(I++)))?E.push(((1023&M)<<10)+(1023&k)+65536):(E.push(M),I--):E.push(M);return E}(r),a=s.length,d=-1,g="";++d<a;)g+=o(s[d]);return g},capitalise:Jj,escapeString:th,camelCaseToHumanText:Xj});function Kf(r){var t=new Map;return r.forEach(function(e){return t.set(e[0],e[1])}),t}var mZ=Object.freeze({__proto__:null,convertToMap:Kf,mapById:function pZ(r,t){var e=new Map;return r.forEach(function(n){return e.set(t(n),n)}),e},keys:function gZ(r){var t=[];return r.forEach(function(e,n){return t.push(n)}),t}}),vZ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),zo=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},yZ=function(r,t){return function(e,n){t(e,n,r)}},e2=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CZ=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},w0=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(CZ(arguments[t]));return r},wZ=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsHash="",e.headerViewportColumns=[],e.viewportColumnsCenter=[],e.headerViewportColumnsCenter=[],e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.flexColsCalculatedAtLestOnce=!1,e}return vZ(t,r),t.prototype.init=function(){var e=this;this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");var n=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(n)&&(this.pivotMode=n),this.usingTreeData=this.gridOptionsService.isTreeData(),this.addManagedPropertyListener("groupDisplayType",function(){return e.onAutoGroupColumnDefChanged()}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return e.onAutoGroupColumnDefChanged()}),this.addManagedPropertyListener("defaultColDef",function(i){return e.onSharedColDefChanged(i.source)}),this.addManagedPropertyListener("columnTypes",function(i){return e.onSharedColDefChanged(i.source)})},t.prototype.onAutoGroupColumnDefChanged=function(){this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged")},t.prototype.onSharedColDefChanged=function(e){void 0===e&&(e="api"),this.forceRecreateAutoGroups=!0,this.createColumnsFromColumnDefs(!0,e)},t.prototype.setColumnDefs=function(e,n){void 0===n&&(n="api");var i=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(i,n)},t.prototype.destroyOldColumns=function(e,n){var i={};if(e){this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(s){i[s.getInstanceId()]=s}),n&&this.columnUtils.depthFirstOriginalTreeSearch(null,n,function(s){i[s.getInstanceId()]=null});var o=Object.values(i).filter(function(s){return null!=s});this.destroyBeans(o)}},t.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},t.prototype.createColumnsFromColumnDefs=function(e,n){var i=this;void 0===n&&(n="api");var o=e?this.compareColumnStatesAndDispatchEvents(n):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var s=this.primaryColumns,d=this.columnFactory.createColumnTree(this.columnDefs,!0,this.primaryColumnTree);this.destroyOldColumns(this.primaryColumnTree,d.columnTree),this.primaryColumnTree=d.columnTree,this.primaryHeaderRowCount=d.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(C){return i.primaryColumnsMap[C.getId()]=C}),this.extractRowGroupColumns(n,s),this.extractPivotColumns(n,s),this.extractValueColumns(n,s),this.ready=!0,(this.gridColsArePrimary||void 0===this.gridColsArePrimary)&&(this.updateGridColumns(),e&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(n),this.checkViewportColumns()),this.dispatchEverythingChanged(n),o&&o(),this.dispatchNewColumnsLoaded()},t.prototype.dispatchNewColumnsLoaded=function(){this.eventService.dispatchEvent({type:V.EVENT_NEW_COLUMNS_LOADED})},t.prototype.dispatchEverythingChanged=function(e){void 0===e&&(e="api"),this.eventService.dispatchEvent({type:V.EVENT_COLUMN_EVERYTHING_CHANGED,source:e})},t.prototype.orderGridColumnsLikePrimary=function(){var e=this,n=this.primaryColumns;n&&(this.gridColumns.sort(function(i,o){var s=n.indexOf(i),a=n.indexOf(o),d=s>=0,f=a>=0;return d&&f?s-a:d?1:f?-1:e.gridColumns.indexOf(i)-e.gridColumns.indexOf(o)}),this.gridColumns=this.placeLockedColumns(this.gridColumns))},t.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},t.prototype.setViewport=function(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},t.prototype.getDisplayedColumnsStartingAt=function(e){for(var n=e,i=[];null!=n;)i.push(n),n=this.getDisplayedColAfter(n);return i},t.prototype.checkViewportColumns=function(){null!=this.displayedColumnsCenter&&this.extractViewport()&&this.eventService.dispatchEvent({type:V.EVENT_VIRTUAL_COLUMNS_CHANGED})},t.prototype.setViewportPosition=function(e,n){(e!==this.scrollWidth||n!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=n,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())},t.prototype.isPivotMode=function(){return this.pivotMode},t.prototype.isPivotSettingAllowed=function(e){return!e||!this.gridOptionsService.isTreeData()||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},t.prototype.setPivotMode=function(e,n){void 0===n&&(n="api"),e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(n),this.eventService.dispatchEvent({type:V.EVENT_COLUMN_PIVOT_MODE_CHANGED}))},t.prototype.getSecondaryPivotColumn=function(e,n){if(Qt(this.secondaryColumns))return null;var i=this.getPrimaryColumn(n),o=null;return this.secondaryColumns.forEach(function(s){var a=s.getColDef().pivotKeys,d=s.getColDef().pivotValueColumn;$g(a,e)&&d===i&&(o=s)}),o},t.prototype.setBeans=function(e){this.logger=e.create("columnModel")},t.prototype.setFirstRightAndLastLeftPinned=function(e){var n,i;this.gridOptionsService.is("enableRtl")?(n=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?pr(this.displayedColumnsRight):null):(n=this.displayedColumnsLeft?pr(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(o){o.setLastLeftPinned(o===n,e),o.setFirstRightPinned(o===i,e)})},t.prototype.autoSizeColumns=function(e){var n=this,i=e.columns,o=e.skipHeader,s=e.skipHeaderGroups,a=e.stopAtGroup,d=e.source,f=void 0===d?"api":d;this.animationFrameService.flushAllFrames();for(var g=[],C=-1,E=o??this.gridOptionsService.is("skipHeaderOnAutoSize"),T=s??E;0!==C;)C=0,this.actionOnGridColumns(i,function(I){if(g.indexOf(I)>=0)return!1;var M=n.autoWidthCalculator.getPreferredWidthForColumn(I,E);if(M>0){var k=n.normaliseColumnWidth(I,M);I.setActualWidth(k,f),g.push(I),C++}return!0},f);T||this.autoSizeColumnGroupsByColumns(i,a),this.dispatchColumnResizedEvent(g,!0,"autosizeColumns")},t.prototype.dispatchColumnResizedEvent=function(e,n,i,o){void 0===o&&(o=null),e&&e.length&&this.eventService.dispatchEvent({type:V.EVENT_COLUMN_RESIZED,columns:e,column:1===e.length?e[0]:null,flexColumns:o,finished:n,source:i})},t.prototype.dispatchColumnChangedEvent=function(e,n,i){this.eventService.dispatchEvent({type:e,columns:n,column:n&&1==n.length?n[0]:null,source:i})},t.prototype.dispatchColumnMovedEvent=function(e){var n=e.movedColumns;this.eventService.dispatchEvent({type:V.EVENT_COLUMN_MOVED,columns:n,column:n&&1===n.length?n[0]:null,toIndex:e.toIndex,finished:e.finished,source:e.source})},t.prototype.dispatchColumnPinnedEvent=function(e,n){if(e.length){var i=1===e.length?e[0]:null,o=this.getCommonValue(e,function(a){return a.getPinned()});this.eventService.dispatchEvent({type:V.EVENT_COLUMN_PINNED,pinned:o??null,columns:e,column:i,source:n})}},t.prototype.dispatchColumnVisibleEvent=function(e,n){if(e.length){var i=1===e.length?e[0]:null,o=this.getCommonValue(e,function(a){return a.isVisible()});this.eventService.dispatchEvent({type:V.EVENT_COLUMN_VISIBLE,visible:o,columns:e,column:i,source:n})}},t.prototype.autoSizeColumn=function(e,n,i){void 0===i&&(i="api"),e&&this.autoSizeColumns({columns:[e],skipHeader:n,skipHeaderGroups:!0,source:i})},t.prototype.autoSizeColumnGroupsByColumns=function(e,n){var i,o,s,a,g,d=new Set;this.getGridColumns(e).forEach(function(z){for(var J=z.getParent();J&&J!=n;)J.isPadding()||d.add(J),J=J.getParent()});try{for(var E=e2(d),T=E.next();!T.done;T=E.next()){var I=T.value;try{for(var M=(s=void 0,e2(this.ctrlsService.getHeaderRowContainerCtrls())),k=M.next();!k.done&&!(g=k.value.getHeaderCtrlForColumn(I));k=M.next());}catch(z){s={error:z}}finally{try{k&&!k.done&&(a=M.return)&&a.call(M)}finally{if(s)throw s.error}}g&&g.resizeLeafColumnsToFit()}}catch(z){i={error:z}}finally{try{T&&!T.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}return[]},t.prototype.autoSizeAllColumns=function(e,n){void 0===n&&(n="api");var i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:e,source:n})},t.prototype.getColumnsFromTree=function(e){var n=[],i=function(o){for(var s=0;s<o.length;s++){var a=o[s];a instanceof ri?n.push(a):a instanceof xi&&i(a.getChildren())}};return i(e),n},t.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},t.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},t.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},t.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},t.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},t.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},t.prototype.isColumnDisplayed=function(e){return this.getAllDisplayedColumns().indexOf(e)>=0},t.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},t.prototype.getViewportColumns=function(){return this.viewportColumns},t.prototype.getDisplayedLeftColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft},t.prototype.getDisplayedRightColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight},t.prototype.getDisplayedColumnsForRow=function(e,n,i,o){for(var f,s=[],a=null,d=function(C){var z,E=n[C],T=n.length-C,I=Math.min(E.getColSpan(e),T),M=[E];if(I>1){for(var k=I-1,W=1;W<=k;W++)M.push(n[C+W]);C+=k}i?(z=!1,M.forEach(function(re){i(re)&&(z=!0)})):z=!0,z&&(0===s.length&&a&&o&&o(E)&&s.push(a),s.push(E)),a=E,f=C},g=0;g<n.length;g++)d(g),g=f;return s},t.prototype.getViewportCenterColumnsForRow=function(e){var n=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var o=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,o,function(s){var a=s.getLeft();return Qe(a)&&a>n.viewportLeft})},t.prototype.getAriaColumnIndex=function(e){return this.getAllGridColumns().indexOf(e)+1},t.prototype.isColumnInHeaderViewport=function(e){return!!e.isAutoHeaderHeight()||this.isColumnInRowViewport(e)},t.prototype.isColumnInRowViewport=function(e){if(e.isAutoHeight())return!0;var n=e.getLeft()||0,i=n+e.getActualWidth(),o=this.viewportLeft-200,s=this.viewportRight+200;return!(n<o&&i<o||n>s&&i>s)},t.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},t.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},t.prototype.updatePrimaryColumnList=function(e,n,i,o,s,a){var d=this;if(void 0===a&&(a="api"),e&&!al(e)){var f=!1;e.forEach(function(C){var E=d.getPrimaryColumn(C);if(E){if(i){if(n.indexOf(E)>=0)return;n.push(E)}else{if(n.indexOf(E)<0)return;As(n,E)}o(E),f=!0}}),f&&(this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(a),this.eventService.dispatchEvent({type:s,columns:n,column:1===n.length?n[0]:null,source:a}))}},t.prototype.setRowGroupColumns=function(e,n){void 0===n&&(n="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),n)},t.prototype.setRowGroupActive=function(e,n,i){e!==n.isRowGroupActive()&&(n.setRowGroupActive(e,i),e&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(n,!1,i),!e&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnVisible(n,!0,i))},t.prototype.addRowGroupColumn=function(e,n){void 0===n&&(n="api"),e&&this.addRowGroupColumns([e],n)},t.prototype.addRowGroupColumns=function(e,n){void 0===n&&(n="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),V.EVENT_COLUMN_ROW_GROUP_CHANGED,n)},t.prototype.removeRowGroupColumns=function(e,n){void 0===n&&(n="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),V.EVENT_COLUMN_ROW_GROUP_CHANGED,n)},t.prototype.removeRowGroupColumn=function(e,n){void 0===n&&(n="api"),e&&this.removeRowGroupColumns([e],n)},t.prototype.addPivotColumns=function(e,n){void 0===n&&(n="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!0,function(i){return i.setPivotActive(!0,n)},V.EVENT_COLUMN_PIVOT_CHANGED,n)},t.prototype.setPivotColumns=function(e,n){void 0===n&&(n="api"),this.setPrimaryColumnList(e,this.pivotColumns,V.EVENT_COLUMN_PIVOT_CHANGED,function(i,o){o.setPivotActive(i,n)},n)},t.prototype.addPivotColumn=function(e,n){void 0===n&&(n="api"),this.addPivotColumns([e],n)},t.prototype.removePivotColumns=function(e,n){void 0===n&&(n="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!1,function(i){return i.setPivotActive(!1,n)},V.EVENT_COLUMN_PIVOT_CHANGED,n)},t.prototype.removePivotColumn=function(e,n){void 0===n&&(n="api"),this.removePivotColumns([e],n)},t.prototype.setPrimaryColumnList=function(e,n,i,o,s){var a=this;n.length=0,Qe(e)&&e.forEach(function(d){var f=a.getPrimaryColumn(d);f&&n.push(f)}),(this.primaryColumns||[]).forEach(function(d){var f=n.indexOf(d)>=0;o(f,d)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s),this.dispatchColumnChangedEvent(i,n,s)},t.prototype.setValueColumns=function(e,n){void 0===n&&(n="api"),this.setPrimaryColumnList(e,this.valueColumns,V.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),n)},t.prototype.setValueActive=function(e,n,i){if(e!==n.isValueActive()&&(n.setValueActive(e,i),e&&!n.getAggFunc())){var o=this.aggFuncService.getDefaultAggFunc(n);n.setAggFunc(o)}},t.prototype.addValueColumns=function(e,n){void 0===n&&(n="api"),this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),V.EVENT_COLUMN_VALUE_CHANGED,n)},t.prototype.addValueColumn=function(e,n){void 0===n&&(n="api"),e&&this.addValueColumns([e],n)},t.prototype.removeValueColumn=function(e,n){void 0===n&&(n="api"),this.removeValueColumns([e],n)},t.prototype.removeValueColumns=function(e,n){void 0===n&&(n="api"),this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),V.EVENT_COLUMN_VALUE_CHANGED,n)},t.prototype.normaliseColumnWidth=function(e,n){var i=e.getMinWidth();Qe(i)&&n<i&&(n=i);var o=e.getMaxWidth();return Qe(o)&&e.isGreaterThanMax(n)&&(n=o),n},t.prototype.getPrimaryOrGridColumn=function(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)},t.prototype.setColumnWidths=function(e,n,i,o){var s=this;void 0===o&&(o="api");var a=[];e.forEach(function(d){var f=s.getPrimaryOrGridColumn(d.key);if(f&&(a.push({width:d.newWidth,ratios:[1],columns:[f]}),"shift"===s.gridOptionsService.get("colResizeDefault")&&(n=!n),n)){var C=s.getDisplayedColAfter(f);if(!C)return;var E=f.getActualWidth()-d.newWidth,T=C.getActualWidth()+E;a.push({width:T,ratios:[1],columns:[C]})}}),0!==a.length&&this.resizeColumnSets({resizeSets:a,finished:i,source:o})},t.prototype.checkMinAndMaxWidthsForSet=function(e){var i=e.width,o=0,s=0,a=!0;return e.columns.forEach(function(g){var C=g.getMinWidth();o+=C||0;var E=g.getMaxWidth();Qe(E)&&E>0?s+=E:a=!1}),i>=o&&(!a||i<=s)},t.prototype.resizeColumnSets=function(e){var n=this,i=e.resizeSets,o=e.finished,s=e.source;if(!i||i.every(function(I){return n.checkMinAndMaxWidthsForSet(I)})){var f=[],g=[];i.forEach(function(I){var M=I.width,k=I.columns,W=I.ratios,z={},J={};k.forEach(function(Ke){return g.push(Ke)});for(var re=!0,ce=0,Re=function(){if(++ce>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";re=!1;var Ke=[],At=0,Ut=M;k.forEach(function(mn,nr){J[mn.getId()]?Ut-=z[mn.getId()]:(Ke.push(mn),At+=W[nr])});var an=1/At;Ke.forEach(function(mn,nr){var gr;nr===Ke.length-1?gr=Ut:(gr=Math.round(W[nr]*M*an),Ut-=gr);var Dn=mn.getMinWidth(),Br=mn.getMaxWidth();Qe(Dn)&&gr<Dn?(gr=Dn,J[mn.getId()]=!0,re=!0):Qe(Br)&&Br>0&&gr>Br&&(gr=Br,J[mn.getId()]=!0,re=!0),z[mn.getId()]=gr})};re&&"break"!==Re(););k.forEach(function(Ke){var At=z[Ke.getId()];Ke.getActualWidth()!==At&&(Ke.setActualWidth(At,s),f.push(Ke))})});var C=f.length>0,E=[];C&&(E=this.refreshFlexedColumns({resizingCols:g,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());var T=g.concat(E);(C||o)&&this.dispatchColumnResizedEvent(T,o,s,E)}else o&&this.dispatchColumnResizedEvent(i&&i.length>0?i[0].columns:null,o,s)},t.prototype.setColumnAggFunc=function(e,n,i){if(void 0===i&&(i="api"),e){var o=this.getPrimaryColumn(e);o&&(o.setAggFunc(n),this.dispatchColumnChangedEvent(V.EVENT_COLUMN_VALUE_CHANGED,[o],i))}},t.prototype.moveRowGroupColumn=function(e,n,i){void 0===i&&(i="api");var o=this.rowGroupColumns[e];this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(n,0,o),this.eventService.dispatchEvent({type:V.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:1===this.rowGroupColumns.length?this.rowGroupColumns[0]:null,source:i})},t.prototype.moveColumns=function(e,n,i,o){if(void 0===i&&(i="api"),void 0===o&&(o=!0),this.columnAnimationService.start(),n>this.gridColumns.length-e.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+n),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var s=this.getGridColumns(e);!this.doesMovePassRules(s,n)||(iL(this.gridColumns,s,n),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:s,source:i,toIndex:n,finished:o}),this.columnAnimationService.finish())},t.prototype.doesMovePassRules=function(e,n){var i=this.getProposedColumnOrder(e,n);return this.doesOrderPassRules(i)},t.prototype.doesOrderPassRules=function(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))},t.prototype.getProposedColumnOrder=function(e,n){var i=this.gridColumns.slice();return iL(i,e,n),i},t.prototype.sortColumnsLikeGridColumns=function(e){var n=this;!e||e.length<=1||e.filter(function(o){return n.gridColumns.indexOf(o)<0}).length>0||e.sort(function(o,s){return n.gridColumns.indexOf(o)-n.gridColumns.indexOf(s)})},t.prototype.doesMovePassLockedPositions=function(e){var n=0,i=!0;return e.forEach(function(s){var a=function(s){return s?!0===s||"left"===s?0:2:1}(s.getColDef().lockPosition);a<n&&(i=!1),n=a}),i},t.prototype.doesMovePassMarryChildren=function(e){var n=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(i){if(i instanceof xi){var o=i,s=o.getColGroupDef();if(s&&s.marryChildren){var d=[];o.getLeafColumns().forEach(function(T){var I=e.indexOf(T);d.push(I)}),Math.max.apply(Math,d)-Math.min.apply(Math,d)>o.getLeafColumns().length-1&&(n=!1)}}}),n},t.prototype.moveColumn=function(e,n,i){void 0===i&&(i="api"),this.moveColumns([e],n,i)},t.prototype.moveColumnByIndex=function(e,n,i){void 0===i&&(i="api"),this.moveColumn(this.gridColumns[e],n,i)},t.prototype.getColumnDefs=function(){var e=this;if(this.primaryColumns){var n=this.primaryColumns.slice();return this.gridColsArePrimary?n.sort(function(i,o){return e.gridColumns.indexOf(i)-e.gridColumns.indexOf(o)}):this.lastPrimaryOrder&&n.sort(function(i,o){return e.lastPrimaryOrder.indexOf(i)-e.lastPrimaryOrder.indexOf(o)}),this.columnDefFactory.buildColumnDefs(n,this.rowGroupColumns,this.pivotColumns)}},t.prototype.getBodyContainerWidth=function(){return this.bodyWidth},t.prototype.getContainerWidth=function(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},t.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedColumnsCenter),n=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==n||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=n,this.rightWidth=i,this.eventService.dispatchEvent({type:V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED}))},t.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},t.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},t.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},t.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},t.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},t.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},t.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},t.prototype.getDisplayedColumns=function(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},t.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},t.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},t.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},t.prototype.getAllGridColumns=function(){return this.gridColumns},t.prototype.isEmpty=function(){return al(this.gridColumns)},t.prototype.isRowGroupEmpty=function(){return al(this.rowGroupColumns)},t.prototype.setColumnVisible=function(e,n,i){void 0===i&&(i="api"),this.setColumnsVisible([e],n,i)},t.prototype.setColumnsVisible=function(e,n,i){void 0===n&&(n=!1),void 0===i&&(i="api"),this.applyColumnState({state:e.map(function(o){return{colId:"string"==typeof o?o:o.getColId(),hide:!n}})},i)},t.prototype.setColumnPinned=function(e,n,i){void 0===i&&(i="api"),e&&this.setColumnsPinned([e],n,i)},t.prototype.setColumnsPinned=function(e,n,i){var o;void 0===i&&(i="api"),this.gridOptionsService.isDomLayout("print")?console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'"):(this.columnAnimationService.start(),o=!0===n||"left"===n?"left":"right"===n?"right":null,this.actionOnGridColumns(e,function(s){return s.getPinned()!==o&&(s.setPinned(o),!0)},i,function(){return{type:V.EVENT_COLUMN_PINNED,pinned:o,column:null,columns:null,source:i}}),this.columnAnimationService.finish())},t.prototype.actionOnGridColumns=function(e,n,i,o){var s=this;if(!al(e)){var a=[];if(e.forEach(function(f){var g=s.getGridColumn(f);g&&!1!==n(g)&&a.push(g)}),a.length&&(this.updateDisplayedColumns(i),Qe(o)&&o)){var d=o();d.columns=a,d.column=1===a.length?a[0]:null,this.eventService.dispatchEvent(d)}}},t.prototype.getDisplayedColBefore=function(e){var n=this.getAllDisplayedColumns(),i=n.indexOf(e);return i>0?n[i-1]:null},t.prototype.getDisplayedColAfter=function(e){var n=this.getAllDisplayedColumns(),i=n.indexOf(e);return i<n.length-1?n[i+1]:null},t.prototype.getDisplayedGroupAfter=function(e){return this.getDisplayedGroupAtDirection(e,"After")},t.prototype.getDisplayedGroupBefore=function(e){return this.getDisplayedGroupAtDirection(e,"Before")},t.prototype.getDisplayedGroupAtDirection=function(e,n){for(var i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),o=e.getDisplayedLeafColumns(),s="After"===n?pr(o):o[0],a="getDisplayedCol"+n;;){var d=this[a](s);if(!d)return null;var f=this.getColumnGroupAtLevel(d,i);if(f!==e)return f}},t.prototype.getColumnGroupAtLevel=function(e,n){for(var i=e.getParent();!(i.getProvidedColumnGroup().getLevel()+i.getPaddingLevel()<=n);)i=i.getParent();return i},t.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},t.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},t.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var e;return(e=[]).concat.apply(e,w0([this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]]))},t.prototype.createStateItemFromColumn=function(e){var n=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,i=e.isPivotActive()?this.pivotColumns.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,s=null!=e.getSort()?e.getSort():null,a=null!=e.getSortIndex()?e.getSortIndex():null,d=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:n,pivot:e.isPivotActive(),pivotIndex:i,flex:d}},t.prototype.getColumnState=function(){if(Qt(this.primaryColumns)||!this.isAlive())return[];var n=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(n),n},t.prototype.orderColumnStateList=function(e){var n=Kf(this.gridColumns.map(function(i,o){return[i.getColId(),o]}));e.sort(function(i,o){return(n.has(i.colId)?n.get(i.colId):-1)-(n.has(o.colId)?n.get(o.colId):-1)})},t.prototype.resetColumnState=function(e){void 0===e&&(e="api");var n=this.getColumnsFromTree(this.primaryColumnTree),i=[],o=1e3,s=1e3,a=[];this.groupAutoColumns&&(a=a.concat(this.groupAutoColumns)),n&&(a=a.concat(n)),a.forEach(function(d){var f=function(Xe,Ke){return Xe??Ke??null},g=d.getColDef(),C=f(g.sort,g.initialSort),E=f(g.sortIndex,g.initialSortIndex),T=f(g.hide,g.initialHide),I=f(g.pinned,g.initialPinned),M=f(g.width,g.initialWidth),k=f(g.flex,g.initialFlex),W=f(g.rowGroupIndex,g.initialRowGroupIndex),z=f(g.rowGroup,g.initialRowGroup);null==W&&(null==z||0==z)&&(W=null,z=null);var J=f(g.pivotIndex,g.initialPivotIndex),re=f(g.pivot,g.initialPivot);null==J&&(null==re||0==re)&&(J=null,re=null);var ce=f(g.aggFunc,g.initialAggFunc),Re={colId:d.getColId(),sort:C,sortIndex:E,hide:T,pinned:I,width:M,flex:k,rowGroup:z,rowGroupIndex:W,pivot:re,pivotIndex:J,aggFunc:ce};Qt(W)&&z&&(Re.rowGroupIndex=o++),Qt(J)&&re&&(Re.pivotIndex=s++),i.push(Re)}),this.applyColumnState({state:i,applyOrder:!0},e)},t.prototype.applyColumnState=function(e,n){var i=this;if(al(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var o=function(f,g,C){var E=i.compareColumnStatesAndDispatchEvents(n);i.autoGroupsNeedBuilding=!0;var T=g.slice(),I={},M={},k=[],W=[],z=0,J=i.rowGroupColumns.slice(),re=i.pivotColumns.slice();f.forEach(function(Ke){var At=Ke.colId||"";if(At.startsWith(C0))return k.push(Ke),void W.push(Ke);var an=C(At);an?(i.syncColumnWithStateItem(an,Ke,e.defaultState,I,M,!1,n),As(T,an)):(W.push(Ke),z+=1)});var ce=function(Ke){return i.syncColumnWithStateItem(Ke,null,e.defaultState,I,M,!1,n)};T.forEach(ce);var Re=function(Ke,At,Ut,an){var mn=Ke[Ut.getId()],nr=Ke[an.getId()],ki=null!=mn,gr=null!=nr;if(ki&&gr)return mn-nr;if(ki)return-1;if(gr)return 1;var Dn=At.indexOf(Ut),Br=At.indexOf(an),yl=Dn>=0;return yl&&Br>=0?Dn-Br:yl?-1:1};i.rowGroupColumns.sort(Re.bind(i,I,J)),i.pivotColumns.sort(Re.bind(i,M,re)),i.updateGridColumns();var Xe=i.groupAutoColumns?i.groupAutoColumns.slice():[];return k.forEach(function(Ke){var At=i.getAutoColumn(Ke.colId);As(Xe,At),i.syncColumnWithStateItem(At,Ke,e.defaultState,null,null,!0,n)}),Xe.forEach(ce),i.applyOrderAfterApplyState(e),i.updateDisplayedColumns(n),i.dispatchEverythingChanged(n),E(),{unmatchedAndAutoStates:W,unmatchedCount:z}};this.columnAnimationService.start();var s=o(e.state||[],this.primaryColumns||[],function(f){return i.getPrimaryColumn(f)}),a=s.unmatchedAndAutoStates,d=s.unmatchedCount;return(a.length>0||Qe(e.defaultState))&&(d=o(a,this.secondaryColumns||[],function(f){return i.getSecondaryColumn(f)}).unmatchedCount),this.columnAnimationService.finish(),0===d},t.prototype.applyOrderAfterApplyState=function(e){var n=this;if(e.applyOrder&&e.state){var i=[],o={};e.state.forEach(function(a){if(a.colId&&!o[a.colId]){var d=n.gridColumnsMap[a.colId];d&&(i.push(d),o[a.colId]=!0)}});var s=0;if(this.gridColumns.forEach(function(a){var d=a.getColId();null!=o[d]||(d.startsWith(C0)?_0(i,a,s++):i.push(a))}),i=this.placeLockedColumns(i),!this.doesMovePassMarryChildren(i))return void console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");this.gridColumns=i}},t.prototype.compareColumnStatesAndDispatchEvents=function(e){var n=this,i={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},o=this.getColumnState(),s={};return o.forEach(function(a){s[a.colId]=a}),function(){var a=n.getPrimaryAndSecondaryAndAutoColumns(),d=function(W,z,J,re){$g(z.map(re),J.map(re))||n.eventService.dispatchEvent({type:W,columns:J,column:1===J.length?J[0]:null,source:e})},f=function(W){var z=[];return a.forEach(function(J){var re=s[J.getColId()];re&&W(re,J)&&z.push(J)}),z},g=function(W){return W.getColId()};d(V.EVENT_COLUMN_ROW_GROUP_CHANGED,i.rowGroupColumns,n.rowGroupColumns,g),d(V.EVENT_COLUMN_PIVOT_CHANGED,i.pivotColumns,n.pivotColumns,g),f(function(W,z){var J=null!=W.aggFunc,re=J!=z.isValueActive(),ce=J&&W.aggFunc!=z.getAggFunc();return re||ce}).length>0&&n.dispatchColumnChangedEvent(V.EVENT_COLUMN_VALUE_CHANGED,n.valueColumns,e),n.dispatchColumnResizedEvent(f(function(W,z){return W.width!=z.getActualWidth()}),!0,e),n.dispatchColumnPinnedEvent(f(function(W,z){return W.pinned!=z.getPinned()}),e),n.dispatchColumnVisibleEvent(f(function(W,z){return W.hide==z.isVisible()}),e),f(function(W,z){return W.sort!=z.getSort()||W.sortIndex!=z.getSortIndex()}).length>0&&n.sortController.dispatchSortChangedEvents(e),n.normaliseColumnMovedEventForColumnState(o,e)}},t.prototype.getCommonValue=function(e,n){if(e&&0!=e.length){for(var i=n(e[0]),o=1;o<e.length;o++)if(i!==n(e[o]))return;return i}},t.prototype.normaliseColumnMovedEventForColumnState=function(e,n){var i=this,o=this.getColumnState(),s={};o.forEach(function(C){return s[C.colId]=C});var a={};e.forEach(function(C){s[C.colId]&&(a[C.colId]=!0)});var d=e.filter(function(C){return a[C.colId]}),f=o.filter(function(C){return a[C.colId]}),g=[];f.forEach(function(C,E){var T=d&&d[E];if(T&&T.colId!==C.colId){var I=i.getGridColumn(T.colId);I&&g.push(I)}}),g.length&&this.dispatchColumnMovedEvent({movedColumns:g,source:n,finished:!0})},t.prototype.syncColumnWithStateItem=function(e,n,i,o,s,a,d){if(e){var f=function(At,Ut){var an={value1:void 0,value2:void 0},mn=!1;return n&&(void 0!==n[At]&&(an.value1=n[At],mn=!0),Qe(Ut)&&void 0!==n[Ut]&&(an.value2=n[Ut],mn=!0)),!mn&&i&&(void 0!==i[At]&&(an.value1=i[At]),Qe(Ut)&&void 0!==i[Ut]&&(an.value2=i[Ut])),an},g=f("hide").value1;void 0!==g&&e.setVisible(!g,d);var C=f("pinned").value1;void 0!==C&&e.setPinned(C);var E=this.columnUtils.calculateColMinWidth(e.getColDef()),T=f("flex").value1;if(void 0!==T&&e.setFlex(T),e.getFlex()<=0){var M=f("width").value1;null!=M&&null!=E&&M>=E&&e.setActualWidth(M,d)}var k=f("sort").value1;void 0!==k&&e.setSort("desc"===k||"asc"===k?k:void 0,d);var W=f("sortIndex").value1;if(void 0!==W&&e.setSortIndex(W),!a&&e.isPrimary()){var z=f("aggFunc").value1;void 0!==z&&("string"==typeof z?(e.setAggFunc(z),e.isValueActive()||(e.setValueActive(!0,d),this.valueColumns.push(e))):(Qe(z)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,d),As(this.valueColumns,e))));var J=f("rowGroup","rowGroupIndex"),re=J.value1,ce=J.value2;(void 0!==re||void 0!==ce)&&("number"==typeof ce||re?(e.isRowGroupActive()||(e.setRowGroupActive(!0,d),this.rowGroupColumns.push(e)),o&&"number"==typeof ce&&(o[e.getId()]=ce)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,d),As(this.rowGroupColumns,e)));var Re=f("pivot","pivotIndex"),Xe=Re.value1,Ke=Re.value2;(void 0!==Xe||void 0!==Ke)&&("number"==typeof Ke||Xe?(e.isPivotActive()||(e.setPivotActive(!0,d),this.pivotColumns.push(e)),s&&"number"==typeof Ke&&(s[e.getId()]=Ke)):e.isPivotActive()&&(e.setPivotActive(!1,d),As(this.pivotColumns,e)))}}},t.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))},t.prototype.getColumns=function(e,n){var i=[];return e&&e.forEach(function(o){var s=n(o);s&&i.push(s)}),i},t.prototype.getColumnWithValidation=function(e){if(null==e)return null;var n=this.getGridColumn(e);return n||console.warn("AG Grid: could not find column "+e),n},t.prototype.getPrimaryColumn=function(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null},t.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)},t.prototype.getSecondaryColumn=function(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null},t.prototype.getColumn=function(e,n,i){if(!e)return null;if("string"==typeof e&&i[e])return i[e];for(var o=0;o<n.length;o++)if(this.columnsMatch(n[o],e))return n[o];return this.getAutoColumn(e)},t.prototype.getSourceColumnsForGroupColumn=function(e){var n=e.getColDef().showRowGroup;if(!n)return null;if(!0===n)return this.rowGroupColumns.slice(0);var i=this.getPrimaryColumn(n);return i?[i]:null},t.prototype.getAutoColumn=function(e){var n=this;return this.groupAutoColumns&&Qe(this.groupAutoColumns)&&!Qt(this.groupAutoColumns)&&this.groupAutoColumns.find(function(i){return n.columnsMatch(i,e)})||null},t.prototype.columnsMatch=function(e,n){var i=e===n,o=e.getColDef()===n,s=e.getColId()==n;return i||o||s},t.prototype.getDisplayNameForColumn=function(e,n,i){if(void 0===i&&(i=!1),!e)return null;var o=this.getHeaderName(e.getColDef(),e,null,null,n);return i?this.wrapHeaderNameWithAggFunc(e,o):o},t.prototype.getDisplayNameForProvidedColumnGroup=function(e,n,i){var o=n?n.getColGroupDef():null;return o?this.getHeaderName(o,null,e,n,i):null},t.prototype.getDisplayNameForColumnGroup=function(e,n){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),n)},t.prototype.getHeaderName=function(e,n,i,o,s){var a=e.headerValueGetter;if(a){var d={colDef:e,column:n,columnGroup:i,providedColumnGroup:o,location:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return"function"==typeof a?a(d):"string"==typeof a?this.expressionService.evaluate(a,d):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?Xj(e.field):""},t.prototype.wrapHeaderNameWithAggFunc=function(e,n){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return n;var a,i=e.getColDef().pivotValueColumn,s=null;if(Qe(i)){var d=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&1===this.valueColumns.length,f=void 0!==e.getColDef().pivotTotalColumnIds;if(d&&!f)return n;s=i?i.getAggFunc():null,a=!0}else{var g=e.isValueActive(),C=this.pivotMode||!this.isRowGroupEmpty();g&&C?(s=e.getAggFunc(),a=!0):a=!1}if(a){var E="string"==typeof s?s:"func";return this.localeService.getLocaleTextFunc()(E,E)+"("+n+")"}return n},t.prototype.getColumnGroup=function(e,n){if(!e)return null;if(e instanceof Aa)return e;var i=this.getAllDisplayedTrees(),o="number"==typeof n,s=null;return this.columnUtils.depthFirstAllColumnTreeSearch(i,function(a){if(a instanceof Aa){var d=a;(o?e===d.getGroupId()&&n===d.getPartId():e===d.getGroupId())&&(s=d)}}),s},t.prototype.isReady=function(){return this.ready},t.prototype.extractValueColumns=function(e,n){this.valueColumns=this.extractColumns(n,this.valueColumns,function(i,o){return i.setValueActive(o,e)},function(){},function(){},function(i){var o=i.aggFunc;return null===o||""===o?null:void 0!==o?!!o:void 0},function(i){return null!=i.initialAggFunc&&""!=i.initialAggFunc}),this.valueColumns.forEach(function(i){var o=i.getColDef();null!=o.aggFunc&&""!=o.aggFunc?i.setAggFunc(o.aggFunc):i.getAggFunc()||i.setAggFunc(o.initialAggFunc)})},t.prototype.extractRowGroupColumns=function(e,n){this.rowGroupColumns=this.extractColumns(n,this.rowGroupColumns,function(i,o){return i.setRowGroupActive(o,e)},function(i){return i.rowGroupIndex},function(i){return i.initialRowGroupIndex},function(i){return i.rowGroup},function(i){return i.initialRowGroup})},t.prototype.extractColumns=function(e,n,i,o,s,a,d){void 0===e&&(e=[]),void 0===n&&(n=[]);var f=[],g=[];(this.primaryColumns||[]).forEach(function(T){var I=e.indexOf(T)<0,M=T.getColDef(),k=Qd(a(M)),W=Qd(d(M)),z=au(o(M)),J=au(s(M));(void 0!==k?k:void 0!==z?null!==z&&z>=0:I?void 0!==W?W:void 0!==J&&null!=J&&J>=0:n.indexOf(T)>=0)&&((I?null!=z||null!=J:null!=z)?f.push(T):g.push(T))});var C=function(T){var I=o(T.getColDef()),M=s(T.getColDef());return I??M};f.sort(function(T,I){var M=C(T),k=C(I);return M===k?0:M<k?-1:1});var E=[].concat(f);return n.forEach(function(T){g.indexOf(T)>=0&&E.push(T)}),g.forEach(function(T){E.indexOf(T)<0&&E.push(T)}),n.forEach(function(T){E.indexOf(T)<0&&i(T,!1)}),E.forEach(function(T){n.indexOf(T)<0&&i(T,!0)}),E},t.prototype.extractPivotColumns=function(e,n){this.pivotColumns=this.extractColumns(n,this.pivotColumns,function(i,o){return i.setPivotActive(o,e)},function(i){return i.pivotIndex},function(i){return i.initialPivotIndex},function(i){return i.pivot},function(i){return i.initialPivot})},t.prototype.resetColumnGroupState=function(e){void 0===e&&(e="api");var n=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(i){if(i instanceof xi){var o=i.getColGroupDef(),s={groupId:i.getGroupId(),open:o?o.openByDefault:void 0};n.push(s)}}),this.setColumnGroupState(n,e)},t.prototype.getColumnGroupState=function(){var e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(n){n instanceof xi&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e},t.prototype.setColumnGroupState=function(e,n){var i=this;void 0===n&&(n="api"),this.columnAnimationService.start();var o=[];e.forEach(function(s){var d=s.open,f=i.getProvidedColumnGroup(s.groupId);f&&f.isExpanded()!==d&&(i.logger.log("columnGroupOpened("+f.getGroupId()+","+d+")"),f.setExpanded(d),o.push(f))}),this.updateGroupsAndDisplayedColumns(n),this.setFirstRightAndLastLeftPinned(n),o.forEach(function(s){i.eventService.dispatchEvent({type:V.EVENT_COLUMN_GROUP_OPENED,columnGroup:s})}),this.columnAnimationService.finish()},t.prototype.setColumnGroupOpened=function(e,n,i){var o;void 0===i&&(i="api"),o=e instanceof xi?e.getId():e||"",this.setColumnGroupState([{groupId:o,open:n}],i)},t.prototype.getProvidedColumnGroup=function(e){"string"!=typeof e&&console.error("AG Grid: group key must be a string");var n=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(i){i instanceof xi&&i.getId()===e&&(n=i)}),n},t.prototype.calculateColumnsForDisplay=function(){var e=this;return this.pivotMode&&Qt(this.secondaryColumns)?this.gridColumns.filter(function(i){var o=e.groupAutoColumns&&lu(e.groupAutoColumns,i),s=e.valueColumns&&lu(e.valueColumns,i);return o||s}):this.gridColumns.filter(function(i){return e.groupAutoColumns&&lu(e.groupAutoColumns,i)||i.isVisible()})},t.prototype.checkColSpanActiveInCols=function(e){var n=!1;return e.forEach(function(i){Qe(i.getColDef().colSpan)&&(n=!0)}),n},t.prototype.calculateColumnsForGroupDisplay=function(){var e=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};var n=function(i){var o=i.getColDef(),s=o.showRowGroup;o&&Qe(s)&&(e.groupDisplayColumns.push(i),"string"==typeof s?e.groupDisplayColumnsMap[s]=i:!0===s&&e.getRowGroupColumns().forEach(function(a){e.groupDisplayColumnsMap[a.getId()]=i}))};this.gridColumns.forEach(n),this.groupAutoColumns&&this.groupAutoColumns.forEach(n)},t.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},t.prototype.getGroupDisplayColumnForGroup=function(e){return this.groupDisplayColumnsMap[e]},t.prototype.updateDisplayedColumns=function(e){var n=this.calculateColumnsForDisplay();this.buildDisplayedTrees(n),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)},t.prototype.isSecondaryColumnsPresent=function(){return Qe(this.secondaryColumns)},t.prototype.setSecondaryColumns=function(e,n){var i=this;void 0===n&&(n="api");var o=e&&e.length>0;if(o||!Qt(this.secondaryColumns)){if(o){this.processSecondaryColumnDefinitions(e);var s=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(function(a){return i.secondaryColumnsMap[a.getId()]=a}),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(n)}},t.prototype.processSecondaryColumnDefinitions=function(e){var n=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),i=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(n||i){var o=function(s){s.forEach(function(a){if(Qe(a.children)){var f=a;i&&i(f),o(f.children)}else n&&n(a)})};e&&o(e)}},t.prototype.updateGridColumns=function(){var i,e=this,n=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.secondaryColumns&&this.secondaryBalancedTree){var o=this.secondaryColumns.every(function(f){return void 0!==e.gridColumnsMap[f.getColId()]});this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,o&&(i=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,i=this.lastPrimaryOrder);if(this.createGroupAutoColumnsIfNeeded()&&i){var a=Kf(this.groupAutoColumns.map(function(f){return[f,!0]}));i=i.filter(function(f){return!a.has(f)}),i=w0(this.groupAutoColumns,i)}this.addAutoGroupToGridColumns(),this.orderGridColsLike(i),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(f){return e.gridColumnsMap[f.getId()]=f}),this.setAutoHeightActive(),$g(n,this.gridBalancedTree)||this.eventService.dispatchEvent({type:V.EVENT_GRID_COLUMNS_CHANGED})},t.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(o){return o.isAutoHeight()}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var e=this.rowModel.getType();"clientSide"!==e&&"serverSide"!==e&&Yn(function(){return console.warn("AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.")},"autoHeightActive.wrongRowModel")}},t.prototype.orderGridColsLike=function(e){if(!Qt(e)){var n=Kf(e.map(function(g,C){return[g,C]})),i=!0;if(this.gridColumns.forEach(function(g){n.has(g)&&(i=!1)}),!i){var o=Kf(this.gridColumns.map(function(g){return[g,!0]})),s=e.filter(function(g){return o.has(g)}),a=Kf(s.map(function(g){return[g,!0]})),d=this.gridColumns.filter(function(g){return!a.has(g)}),f=s.slice();d.forEach(function(g){var C=g.getOriginalParent();if(C){for(var E=[];!E.length&&C;)C.getLeafColumns().forEach(function(k){var W=f.indexOf(k)>=0,z=E.indexOf(k)<0;W&&z&&E.push(k)}),C=C.getOriginalParent();if(E.length){var I=E.map(function(k){return f.indexOf(k)}),M=Math.max.apply(Math,w0(I));_0(f,g,M+1)}else f.push(g)}else f.push(g)}),this.gridColumns=f}}},t.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},t.prototype.refreshQuickFilterColumns=function(){var e,n;this.groupAutoColumns?n=(null!==(e=this.primaryColumns)&&void 0!==e?e:[]).concat(this.groupAutoColumns):this.primaryColumns&&(n=this.primaryColumns),n=n??[],this.columnsForQuickFilter=this.gridOptionsService.is("excludeHiddenColumnsFromQuickFilter")?n.filter(function(i){return i.isVisible()}):n},t.prototype.placeLockedColumns=function(e){var n=[],i=[],o=[];return e.forEach(function(s){var a=s.getColDef().lockPosition;"right"===a?o.push(s):"left"===a||!0===a?n.push(s):i.push(s)}),w0(n,i,o)},t.prototype.addAutoGroupToGridColumns=function(){if(Qt(this.groupAutoColumns))return this.destroyOldColumns(this.groupAutoColsBalancedTree),void(this.groupAutoColsBalancedTree=null);this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)},t.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},t.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths(),this.eventService.dispatchEvent({type:V.EVENT_DISPLAYED_COLUMNS_CHANGED})},t.prototype.deriveDisplayedColumns=function(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(function(n){return n.isAutoHeight()})},t.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},t.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},t.prototype.joinDisplayedColumns=function(){this.displayedColumns=this.gridOptionsService.is("enableRtl")?this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},t.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()},t.prototype.setLeftValuesOfColumns=function(e){var n=this;if(this.primaryColumns){var i=this.primaryColumns.slice(0),o=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(s){if(o){var a=n.getWidthOfColsInList(s);s.forEach(function(f){a-=f.getActualWidth(),f.setLeft(a,e)})}else{var d=0;s.forEach(function(f){f.setLeft(d,e),d+=f.getActualWidth()})}rL(i,s)}),i.forEach(function(s){s.setLeft(null,e)})}},t.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(e){e.forEach(function(n){n instanceof Aa&&n.checkLeft()})})},t.prototype.derivedDisplayedColumnsFromDisplayedTree=function(e,n){n.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,function(i){i instanceof ri&&n.push(i)})},t.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},t.prototype.getVirtualHeaderGroupRow=function(e,n){var i;switch(e){case"left":i=this.viewportRowLeft[n];break;case"right":i=this.viewportRowRight[n];break;default:i=this.viewportRowCenter[n]}return Qt(i)&&(i=[]),i},t.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var e={};this.headerViewportColumns.forEach(function(i){return e[i.getId()]=!0});var n=function(i,o,s){for(var a=!1,d=0;d<i.length;d++){var f=i[d],g=!1;if(f instanceof ri)g=!0===e[f.getId()];else{var E=f.getDisplayedChildren();E&&(g=n(E,o,s+1))}g&&(a=!0,o[s]||(o[s]=[]),o[s].push(f))}return a};n(this.displayedTreeLeft,this.viewportRowLeft,0),n(this.displayedTreeRight,this.viewportRowRight,0),n(this.displayedTreeCentre,this.viewportRowCenter,0)},t.prototype.extractViewport=function(){this.extractViewportColumns();var n=this.viewportColumns.map(function(o){return o.getId()+"-"+(o.getPinned()||"normal")}).join("#"),i=this.viewportColumnsHash!==n;return i&&(this.viewportColumnsHash=n,this.calculateHeaderRows()),i},t.prototype.refreshFlexedColumns=function(e){var n=this;void 0===e&&(e={});var i=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];var o=-1;e.resizingCols&&e.resizingCols.forEach(function(re){var ce=n.displayedColumnsCenter.indexOf(re);o<ce&&(o=ce)});var s=function(re){var ce=n.displayedColumnsCenter.indexOf(re)>o;return re.getFlex()&&ce},a=this.displayedColumnsCenter.filter(function(re){return!s(re)}),d=this.displayedColumnsCenter.filter(function(re){return s(re)}),f=[];if(!d.length)return[];var C,g=[];e:for(;;){var E=d.reduce(function(re,ce){return re+ce.getFlex()},0);C=this.flexViewportWidth-this.getWidthOfColsInList(a);for(var T=0;T<d.length;T++){var I=d[T],M=C*I.getFlex()/E,k=0,W=I.getMinWidth(),z=I.getMaxWidth();if(Qe(W)&&M<W?k=W:Qe(z)&&M>z&&(k=z),k){I.setActualWidth(k,i),As(d,I),f.push(I),a.push(I);continue e}g[T]=Math.round(M)}break}var J=C;return d.forEach(function(re,ce){re.setActualWidth(Math.min(g[ce],J),i),f.push(re),J-=g[ce]}),e.skipSetLeft||this.setLeftValues(i),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(f,!0,i,d),this.flexColsCalculatedAtLestOnce||(this.gridOptionsService.isRowModelType("clientSide")&&this.rowModel.resetRowHeights(),this.flexColsCalculatedAtLestOnce=!0),d},t.prototype.sizeColumnsToFit=function(e,n,i,o){var s,a,d,f,g;void 0===n&&(n="sizeColumnsToFit");var C={};o&&(null===(s=o?.columnLimits)||void 0===s||s.forEach(function(Dn){var Br=Dn.key,yl=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]])}return e}(Dn,["key"]);C["string"==typeof Br?Br:Br.getColId()]=yl}));var E=this.getAllDisplayedColumns(),T=e===this.getWidthOfColsInList(E);if(!(e<=0||!E.length||T)){var I=[],M=[];E.forEach(function(Dn){!0===Dn.getColDef().suppressSizeToFit?M.push(Dn):I.push(Dn)});var k=I.slice(0),W=!1,z=function(Dn){As(I,Dn),M.push(Dn)};for(I.forEach(function(Dn){return Dn.resetActualWidth(n)});!W;){W=!0;var J=e-this.getWidthOfColsInList(M);if(J<=0)I.forEach(function(Dn){var Br,yl,wu=null!==(yl=null===(Br=C?.[Dn.getId()])||void 0===Br?void 0:Br.minWidth)&&void 0!==yl?yl:o?.defaultMinWidth;"number"!=typeof wu?Dn.setMinimum(n):Dn.setActualWidth(wu)});else for(var re=J/this.getWidthOfColsInList(I),ce=J,Re=I.length-1;Re>=0;Re--){var Xe=I[Re],Ke=C?.[Xe.getId()],At=null!==(a=Ke?.minWidth)&&void 0!==a?a:o?.defaultMinWidth,Ut=null!==(d=Ke?.maxWidth)&&void 0!==d?d:o?.defaultMaxWidth,an=null!==(f=Xe.getMinWidth())&&void 0!==f?f:0,mn=null!==(g=Xe.getMaxWidth())&&void 0!==g?g:Number.MAX_VALUE,nr="number"==typeof At&&At>an?At:Xe.getMinWidth(),ki="number"==typeof Ut&&Ut<mn?Ut:Xe.getMaxWidth(),gr=Math.round(Xe.getActualWidth()*re);Qe(nr)&&gr<nr?(gr=nr,z(Xe),W=!1):Qe(ki)&&gr>ki?(gr=ki,z(Xe),W=!1):0===Re&&(gr=ce),Xe.setActualWidth(gr,n,!0),ce-=gr}}k.forEach(function(Dn){Dn.fireColumnWidthChangedEvent(n)}),this.setLeftValues(n),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(k,!0,n)}},t.prototype.buildDisplayedTrees=function(e){var n=[],i=[],o=[];e.forEach(function(a){switch(a.getPinned()){case"left":n.push(a);break;case"right":i.push(a);break;default:o.push(a)}});var s=new Qj;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(n,this.gridBalancedTree,s,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,this.gridBalancedTree,s,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(o,this.gridBalancedTree,s,null,this.displayedTreeCentre),this.updateDisplayedMap()},t.prototype.updateDisplayedMap=function(){var e=this;this.displayedColumnsAndGroupsMap={};var n=function(i){e.displayedColumnsAndGroupsMap[i.getUniqueId()]=i};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,n),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,n),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,n)},t.prototype.isDisplayed=function(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e},t.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,function(n){n instanceof Aa&&n.calculateDisplayedColumns()})},t.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},t.prototype.createGroupAutoColumnsIfNeeded=function(){if(!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var e=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),n=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if(!(this.rowGroupColumns.length>0||this.usingTreeData)||n||e)this.groupAutoColumns=null;else{var a=this.autoGroupColService.createAutoGroupColumns(this.groupAutoColumns||[],this.rowGroupColumns);if(!this.autoColsEqual(a,this.groupAutoColumns)||this.forceRecreateAutoGroups)return this.groupAutoColumns=a,!0}return!1},t.prototype.isGroupSuppressAutoColumn=function(){var e=this.gridOptionsService.get("groupDisplayType");if(e&&hL("custom",e))return!0;var i=this.gridOptionsService.get("treeDataDisplayType");return!!i&&function sZ(r,t){var e=["auto","custom"];return e.indexOf(t)<0?(console.warn("AG Grid: '"+t+"' is not a valid treeDataDisplayType value - possible values are: '"+e.join("', '")+"'"),!1):t===r}("custom",i)},t.prototype.autoColsEqual=function(e,n){return $g(e,n,function(i,o){return i.getColId()===o.getColId()})},t.prototype.getWidthOfColsInList=function(e){return e.reduce(function(n,i){return n+i.getActualWidth()},0)},t.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},t.prototype.hasFloatingFilters=function(){return!!this.gridColumns&&this.gridColumns.some(function(n){return n.getColDef().floatingFilter})},t.prototype.getFirstDisplayedColumn=function(){var e=this.gridOptionsService.is("enableRtl"),n=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&n.reverse();for(var i=0;i<n.length;i++){var o=this[n[i]]();if(o.length)return e?pr(o):o[0]}return null},t.prototype.setColumnHeaderHeight=function(e,n){e.setAutoHeaderHeight(n)&&this.eventService.dispatchEvent({type:V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"})},t.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},t.prototype.getColumnHeaderRowHeight=function(){var e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),n=this.getAllDisplayedColumns().filter(function(i){return i.isAutoHeaderHeight()}).map(function(i){return i.getAutoHeaderHeight()||0});return Math.max.apply(Math,w0([e],n))},t.prototype.getHeaderHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("headerHeight"))&&void 0!==e?e:this.environment.getFromTheme(25,"headerHeight")},t.prototype.getFloatingFiltersHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("floatingFiltersHeight"))&&void 0!==e?e:this.getHeaderHeight()},t.prototype.getGroupHeaderHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("groupHeaderHeight"))&&void 0!==e?e:this.getHeaderHeight()},t.prototype.getPivotHeaderHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("pivotHeaderHeight"))&&void 0!==e?e:this.getHeaderHeight()},t.prototype.getPivotGroupHeaderHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))&&void 0!==e?e:this.getGroupHeaderHeight()},zo([F("expressionService")],t.prototype,"expressionService",void 0),zo([F("columnFactory")],t.prototype,"columnFactory",void 0),zo([F("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),zo([F("ctrlsService")],t.prototype,"ctrlsService",void 0),zo([F("autoWidthCalculator")],t.prototype,"autoWidthCalculator",void 0),zo([F("columnUtils")],t.prototype,"columnUtils",void 0),zo([F("columnAnimationService")],t.prototype,"columnAnimationService",void 0),zo([F("autoGroupColService")],t.prototype,"autoGroupColService",void 0),zo([tr("aggFuncService")],t.prototype,"aggFuncService",void 0),zo([tr("valueCache")],t.prototype,"valueCache",void 0),zo([tr("animationFrameService")],t.prototype,"animationFrameService",void 0),zo([F("rowModel")],t.prototype,"rowModel",void 0),zo([F("sortController")],t.prototype,"sortController",void 0),zo([F("columnDefFactory")],t.prototype,"columnDefFactory",void 0),zo([rt],t.prototype,"init",null),zo([as],t.prototype,"destroyColumns",null),zo([yZ(0,ea("loggerFactory"))],t.prototype,"setBeans",null),zo([Rt("columnModel")],t)}(Ye),SZ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),bZ=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return SZ(t,r),t.prototype.calculateColMinWidth=function(e){return null!=e.minWidth?e.minWidth:this.environment.getMinColWidth()},t.prototype.calculateColMaxWidth=function(e){return null!=e.maxWidth?e.maxWidth:Number.MAX_SAFE_INTEGER},t.prototype.calculateColInitialWidth=function(e){var n=this.calculateColMinWidth(e),i=this.calculateColMaxWidth(e),s=au(e.width),a=au(e.initialWidth);return Math.max(Math.min(null!=s?s:null!=a?a:200,i),n)},t.prototype.getOriginalPathForColumn=function(e,n){var i=[],o=!1,s=function(a,d){for(var f=0;f<a.length;f++){if(o)return;var g=a[f];g instanceof xi?(s(g.getChildren(),d+1),i[d]=g):g===e&&(o=!0)}};return s(n,0),o?i:null},t.prototype.depthFirstOriginalTreeSearch=function(e,n,i){var o=this;n&&n.forEach(function(s){s instanceof xi&&o.depthFirstOriginalTreeSearch(s,s.getChildren(),i),i(s,e)})},t.prototype.depthFirstAllColumnTreeSearch=function(e,n){var i=this;e&&e.forEach(function(o){o instanceof Aa&&i.depthFirstAllColumnTreeSearch(o.getChildren(),n),n(o)})},t.prototype.depthFirstDisplayedColumnTreeSearch=function(e,n){var i=this;e&&e.forEach(function(o){o instanceof Aa&&i.depthFirstDisplayedColumnTreeSearch(o.getDisplayedChildren(),n),n(o)})},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("columnUtils")],t),t}(Ye),DZ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),RZ=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return DZ(t,r),t.prototype.createDisplayedGroups=function(e,n,i,o,s){var f,g,a=this,d=[],C=this.mapOldGroupsById(s);return e.forEach(function(E){for(var T=a.getOriginalPathForColumn(n,E),I=[],M=!g,k=0;k<T.length;k++)if(M||T[k]!==g[k]){var W=a.createColumnGroup(T[k],i,C,o);I[k]=W,0==k?d.push(W):I[k-1].addChild(W)}else I[k]=f[k];0===I.length?d.push(E):pr(I).addChild(E),f=I,g=T}),this.setupParentsIntoColumns(d,null),d},t.prototype.createColumnGroup=function(e,n,i,o){var s=e.getGroupId(),a=n.getInstanceIdForKey(s),f=i[Aa.createUniqueId(s,a)];return f&&f.getProvidedColumnGroup()!==e&&(f=null),Qe(f)?f.reset():(f=new Aa(e,s,a,o),this.context.createBean(f)),f},t.prototype.mapOldGroupsById=function(e){var n={},i=function(o){o.forEach(function(s){if(s instanceof Aa){var a=s;n[s.getUniqueId()]=a,i(a.getChildren())}})};return e&&i(e),n},t.prototype.setupParentsIntoColumns=function(e,n){var i=this;e.forEach(function(o){if(o.setParent(n),o instanceof Aa){var s=o;i.setupParentsIntoColumns(s.getChildren(),s)}})},t.prototype.getOriginalPathForColumn=function(e,n){var i=[],o=!1,s=function(a,d){for(var f=0;f<a.length;f++){if(o)return;var g=a[f];g instanceof xi?(s(g.getChildren(),d+1),i[d]=g):g===n&&(o=!0)}};return s(e,0),o?i:(console.warn("AG Grid: could not get path"),null)},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("displayedGroupCreator")],t),t}(Ye),OZ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),AZ=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.componentsMappedByName={},e}return OZ(t,r),t.prototype.setupComponents=function(e){var n=this;e&&e.forEach(function(i){return n.addComponent(i)})},t.prototype.addComponent=function(e){var i=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=e.componentClass},t.prototype.getComponentClass=function(e){return this.componentsMappedByName[e]},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("agStackComponentsRegistry")],t),t}(Ye);function qf(r,t,e){null==e||""==e?pL(r,t):uu(r,t,e)}function uu(r,t,e){r.setAttribute(t2(t),e.toString())}function pL(r,t){r.removeAttribute(t2(t))}function t2(r){return"aria-"+r}function Ko(r,t){t?r.setAttribute("role",t):r.removeAttribute("role")}function n2(r){return"asc"===r?"ascending":"desc"===r?"descending":"mixed"===r?"other":"none"}function r2(r){return parseInt(r.getAttribute("aria-level"),10)}function i2(r){return parseInt(r.getAttribute("aria-posinset"),10)}function Sy(r,t){qf(r,"label",t)}function gL(r,t){qf(r,"labelledby",t)}function o2(r,t){qf(r,"description",t)}function s2(r,t){qf(r,"describedby",t)}function a2(r,t){qf(r,"live",t)}function l2(r,t){qf(r,"level",t)}function mL(r,t){qf(r,"disabled",t)}function JI(r,t){qf(r,"hidden",t)}function fc(r,t){uu(r,"expanded",t)}function u2(r){pL(r,"expanded")}function vL(r,t){uu(r,"setsize",t)}function yL(r,t){uu(r,"posinset",t)}function c2(r,t){uu(r,"multiselectable",t)}function d2(r,t){uu(r,"rowcount",t)}function _L(r,t){uu(r,"rowindex",t)}function h2(r,t){uu(r,"colcount",t)}function CL(r,t){uu(r,"colindex",t)}function f2(r,t){uu(r,"colspan",t)}function p2(r,t){uu(r,"sort",t)}function g2(r){pL(r,"sort")}function Ow(r,t){qf(r,"selected",t)}function m2(r,t){uu(r,"checked",void 0===t?"mixed":t)}var wL,XI,SL,EL,bL,DL,TL,RL,NZ=Object.freeze({__proto__:null,setAriaRole:Ko,getAriaSortState:n2,getAriaLevel:r2,getAriaPosInSet:i2,getAriaDescribedBy:function PZ(r){return r.getAttribute("aria-describedby")||""},setAriaLabel:Sy,setAriaLabelledBy:gL,setAriaDescription:o2,setAriaDescribedBy:s2,setAriaLive:a2,setAriaLevel:l2,setAriaDisabled:mL,setAriaHidden:JI,setAriaExpanded:fc,removeAriaExpanded:u2,setAriaSetSize:vL,setAriaPosInSet:yL,setAriaMultiSelectable:c2,setAriaRowCount:d2,setAriaRowIndex:_L,setAriaColCount:h2,setAriaColIndex:CL,setAriaColSpan:f2,setAriaSort:p2,removeAriaSort:g2,setAriaSelected:Ow,setAriaChecked:m2});function nh(){return void 0===wL&&(wL=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),wL}function OL(){if(void 0===XI)if(nh()){var r=navigator.userAgent.match(/version\/(\d+)/i);r&&(XI=null!=r[1]?parseFloat(r[1]):0)}else XI=0;return XI}function S0(){if(void 0===SL){var r=window;SL=!!r.chrome&&(!!r.chrome.webstore||!!r.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return SL}function IL(){return void 0===EL&&(EL=/(firefox)/i.test(navigator.userAgent)),EL}function AL(){return void 0===bL&&(bL=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),bL}function zg(){return void 0===DL&&(DL=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),DL}function eA(){return!nh()||OL()>=15}function tA(r){if(!r)return null;var t=r.tabIndex,e=r.getAttribute("tabIndex");return-1!==t||null!==e&&(""!==e||IL())?t.toString():null}function v2(){if(!document.body)return-1;var r=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,e=document.createElement("div");for(document.body.appendChild(e);;){var n=2*r;if(e.style.height=n+"px",n>t||e.clientHeight!==n)break;r=n}return document.body.removeChild(e),r}function y2(){var r,t,e;return null!==(t=null===(r=document.body)||void 0===r?void 0:r.clientWidth)&&void 0!==t?t:window.innerHeight||(null===(e=document.documentElement)||void 0===e?void 0:e.clientWidth)||-1}function _2(){var r,t,e;return null!==(t=null===(r=document.body)||void 0===r?void 0:r.clientHeight)&&void 0!==t?t:window.innerHeight||(null===(e=document.documentElement)||void 0===e?void 0:e.clientHeight)||-1}function C2(){return null==RL&&w2(),RL}function w2(){var r=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",r.appendChild(t);var e=t.offsetWidth-t.clientWidth;0===e&&0===t.clientWidth&&(e=null),t.parentNode&&t.parentNode.removeChild(t),null!=e&&(RL=e,TL=0===e)}function E0(){return null==TL&&w2(),TL}var MZ=Object.freeze({__proto__:null,isBrowserSafari:nh,getSafariVersion:OL,isBrowserChrome:S0,isBrowserFirefox:IL,isMacOsUserAgent:AL,isIOSUserAgent:zg,browserSupportsPreventScroll:eA,getTabIndex:tA,getMaxDivHeight:v2,getBodyWidth:y2,getBodyHeight:_2,getScrollbarWidth:C2,isInvisibleScrollbar:E0});function Iw(r,t){return r.toString().padStart(t,"0")}function S2(r,t){for(var e=[],n=r;n<=t;n++)e.push(n);return e}function PL(r,t,e){return"number"!=typeof r?"":r.toString().replace(".",e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+t)}var HZ=Object.freeze({__proto__:null,padStartWidthZeros:Iw,createArrayOfNumbers:S2,cleanNumber:function xZ(r){return"string"==typeof r&&(r=parseInt(r,10)),"number"==typeof r?Math.floor(r):null},decToHex:function FZ(r,t){for(var e="",n=0;n<t;n++)e+=String.fromCharCode(255&r),r>>>=8;return e},formatNumberTwoDecimalPlacesAndCommas:function LZ(r,t,e){return"number"!=typeof r?"":PL(Math.round(100*r)/100,t,e)},formatNumberCommas:PL,sum:function kZ(r){return null==r?null:r.reduce(function(t,e){return t+e},0)},zeroOrGreater:function GZ(r,t){return r>=0?r:t},oneOrGreater:function VZ(r,t){var e=parseInt(r,10);return!isNaN(e)&&isFinite(e)&&e>0?e:t}}),NL=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o};function b0(r,t,e){if(void 0===t&&(t=!0),void 0===e&&(e="-"),!r)return null;var n=[r.getFullYear(),r.getMonth()+1,r.getDate()].map(function(i){return Iw(i,2)}).join(e);return t&&(n+=" "+[r.getHours(),r.getMinutes(),r.getSeconds()].map(function(i){return Iw(i,2)}).join(":")),n}var ML=function(r){if(r>3&&r<21)return"th";switch(r%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function nA(r,t){void 0===t&&(t="YYYY-MM-DD");var e=Iw(r.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:function(){return e.slice(e.length-4,e.length)},YY:function(){return e.slice(e.length-2,e.length)},Y:function(){return""+r.getFullYear()},MMMM:function(){return n[r.getMonth()]},MMM:function(){return n[r.getMonth()].slice(0,3)},MM:function(){return Iw(r.getMonth()+1,2)},Mo:function(){return""+(r.getMonth()+1)+ML(r.getMonth()+1)},M:function(){return""+(r.getMonth()+1)},Do:function(){return""+r.getDate()+ML(r.getDate())},DD:function(){return Iw(r.getDate(),2)},D:function(){return""+r.getDate()},dddd:function(){return i[r.getDay()]},ddd:function(){return i[r.getDay()].slice(0,3)},dd:function(){return i[r.getDay()].slice(0,2)},do:function(){return""+r.getDay()+ML(r.getDay())},d:function(){return""+r.getDay()}},s=new RegExp(Object.keys(o).join("|"),"g");return t.replace(s,function(a){return a in o?o[a]():a})}function Kg(r){if(!r)return null;var t=NL(r.split(" "),2),e=t[0],n=t[1];if(!e)return null;var i=e.split("-").map(function(I){return parseInt(I,10)});if(3!==i.filter(function(I){return!isNaN(I)}).length)return null;var o=NL(i,3),s=o[0],a=o[1],d=o[2],f=new Date(s,a-1,d);if(f.getFullYear()!==s||f.getMonth()!==a-1||f.getDate()!==d)return null;if(!n||"00:00:00"===n)return f;var g=NL(n.split(":").map(function(I){return parseInt(I,10)}),3),C=g[0],E=g[1],T=g[2];return C>=0&&C<24&&f.setHours(C),E>=0&&E<60&&f.setMinutes(E),T>=0&&T<60&&f.setSeconds(T),f}var rA,BZ=Object.freeze({__proto__:null,serialiseDate:b0,dateToFormattedString:nA,parseDateTimeFromString:Kg}),UZ=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jZ=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},E2="[tabindex], input, select, button, textarea, [href]",xL=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *";function FL(r){var t=Element.prototype.matches||Element.prototype.msMatchesSelector,n=t.call(r,"input, select, button, textarea"),i=t.call(r,xL),o=Pw(r);return n&&!i&&o}function Wn(r,t,e){void 0===e&&(e={});var n=e.skipAriaHidden;r.classList.toggle("ag-hidden",!t),n||JI(r,!t)}function b2(r,t,e){void 0===e&&(e={});var n=e.skipAriaHidden;r.classList.toggle("ag-invisible",!t),n||JI(r,!t)}function Aw(r,t){var e="disabled",n=t?function(i){return i.setAttribute(e,"")}:function(i){return i.removeAttribute(e)};n(r),WL(r.querySelectorAll("input"),function(i){return n(i)})}function Ey(r,t,e){for(var n=0;r;){if(r.classList.contains(t))return!0;if(r=r.parentElement,"number"==typeof e){if(++n>e)break}else if(r===e)break}return!1}function by(r){var t=window.getComputedStyle(r),n=t.width,i=t.borderTopWidth,o=t.borderRightWidth,s=t.borderBottomWidth,a=t.borderLeftWidth,d=t.paddingTop,f=t.paddingRight,g=t.paddingBottom,C=t.paddingLeft,E=t.marginTop,T=t.marginRight,I=t.marginBottom,M=t.marginLeft,k=t.boxSizing;return{height:parseFloat(t.height),width:parseFloat(n),borderTopWidth:parseFloat(i),borderRightWidth:parseFloat(o),borderBottomWidth:parseFloat(s),borderLeftWidth:parseFloat(a),paddingTop:parseFloat(d),paddingRight:parseFloat(f),paddingBottom:parseFloat(g),paddingLeft:parseFloat(C),marginTop:parseFloat(E),marginRight:parseFloat(T),marginBottom:parseFloat(I),marginLeft:parseFloat(M),boxSizing:k}}function D0(r){var t=by(r);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function iA(r){var t=by(r);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function LL(r){var t=by(r);return Math.ceil(r.offsetHeight+(t.marginBottom+t.marginTop))}function oA(r){var t=by(r);return Math.ceil(r.offsetWidth+(t.marginLeft+t.marginRight))}function T0(){if("boolean"==typeof rA)return rA;var r=document.createElement("div");return r.style.direction="rtl",r.style.width="1px",r.style.height="1px",r.style.position="fixed",r.style.top="0px",r.style.overflow="hidden",r.dir="rtl",r.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(r),r.scrollLeft=1,rA=0===Math.floor(r.scrollLeft),document.body.removeChild(r),rA}function R0(r,t){var e=r.scrollLeft;return t&&(e=Math.abs(e),S0()&&!T0()&&(e=r.scrollWidth-r.clientWidth-e)),e}function sA(r,t,e){e&&(T0()?t*=-1:(nh()||S0())&&(t=r.scrollWidth-r.clientWidth-t)),r.scrollLeft=t}function ll(r){for(;r&&r.firstChild;)r.removeChild(r.firstChild)}function Yf(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function Pw(r){return null!==r.offsetParent}function ls(r){var t=document.createElement("div");return t.innerHTML=(r||"").trim(),t.firstChild}function kL(r){return r&&r.clientHeight?r.clientHeight:0}function GL(r){return r&&r.clientWidth?r.clientWidth:0}function VL(r,t,e){if(!e||e.nextSibling!==t){var n=document.activeElement,i=t.contains(n);e?e.nextSibling?r.insertBefore(t,e.nextSibling):r.appendChild(t):r.firstChild&&r.firstChild!==t&&r.insertAdjacentElement("afterbegin",t),i&&n&&eA()&&n.focus({preventScroll:!0})}}function HL(r,t){for(var e=0;e<t.length;e++){var n=t[e],i=r.children[e];i!==n&&r.insertBefore(n,i)}}function D2(r,t,e){e?e.insertAdjacentElement("afterend",t):r.firstChild?r.insertAdjacentElement("afterbegin",t):r.appendChild(t)}function BL(r,t){var e,n;if(t)try{for(var i=UZ(Object.entries(t)),o=i.next();!o.done;o=i.next()){var s=jZ(o.value,2),a=s[0],d=s[1];if(a&&a.length&&null!=d){var f=a.replace(/[A-Z]/g,function(T){return"-"+T.toLocaleLowerCase()}),g=d.toString(),C=g.replace(/\s*!important/g,"");r.style.setProperty(f,d,C.length!=g.length?"important":void 0)}}}catch(T){e={error:T}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}function UL(r){return r.clientWidth<r.scrollWidth}function T2(r){return r.clientHeight<r.scrollHeight}function O0(r,t){"flex"===t?(r.style.removeProperty("width"),r.style.removeProperty("minWidth"),r.style.removeProperty("maxWidth"),r.style.flex="1 1 auto"):cu(r,t)}function cu(r,t){t=jL(t),r.style.width=t.toString(),r.style.maxWidth=t.toString(),r.style.minWidth=t.toString()}function Dy(r,t){t=jL(t),r.style.height=t.toString(),r.style.maxHeight=t.toString(),r.style.minHeight=t.toString()}function jL(r){return"number"==typeof r?r+"px":r}function I0(r){return r instanceof Node||r instanceof HTMLElement}function R2(r){if(null==r)return[];var t=[];return WL(r,function(e){return t.push(e)}),t}function O2(r,t){if(r)for(var e=0;e<r.length;e++){var n=r[e];t(n.name,n.value)}}function A0(r,t,e){null==e?r.removeAttribute(t):r.setAttribute(t,e.toString())}function WL(r,t){if(null!=r)for(var e=0;e<r.length;e++)t(r[e])}var ZZ=Object.freeze({__proto__:null,radioCssClass:function WZ(r,t,e){for(var n=r.parentElement,i=n&&n.firstChild;i;)t&&i.classList.toggle(t,i===r),e&&i.classList.toggle(e,i!==r),i=i.nextSibling},FOCUSABLE_SELECTOR:E2,FOCUSABLE_EXCLUDE:xL,isFocusableFormField:FL,setDisplayed:Wn,setVisible:b2,setDisabled:Aw,isElementChildOfClass:Ey,getElementSize:by,getInnerHeight:D0,getInnerWidth:iA,getAbsoluteHeight:LL,getAbsoluteWidth:oA,isRtlNegativeScroll:T0,getScrollLeft:R0,setScrollLeft:sA,clearElement:ll,removeElement:function $Z(r,t){Yf(r.querySelector(t))},removeFromParent:Yf,isVisible:Pw,loadTemplate:ls,appendHtml:function zZ(r,t){r.lastChild?r.insertAdjacentHTML("afterbegin",t):r.innerHTML=t},getElementAttribute:function KZ(r,t){return r.attributes&&r.attributes[t]?r.attributes[t].value:null},offsetHeight:kL,offsetWidth:GL,ensureDomOrder:VL,setDomChildOrder:HL,insertWithDomOrder:D2,prependDC:function qZ(r,t){Qe(r.firstChild)?r.insertBefore(t,r.firstChild):r.appendChild(t)},addStylesToElement:BL,isHorizontalScrollShowing:UL,isVerticalScrollShowing:T2,setElementWidth:O0,setFixedWidth:cu,setElementHeight:function YZ(r,t){"flex"===t?(r.style.removeProperty("height"),r.style.removeProperty("minHeight"),r.style.removeProperty("maxHeight"),r.style.flex="1 1 auto"):Dy(r,t)},setFixedHeight:Dy,formatSize:jL,isNodeOrElement:I0,copyNodeList:R2,iterateNamedNodeMap:O2,addOrRemoveAttribute:A0,nodeListForEach:WL}),I2={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function du(r,t,e){var n=no(r,t,e);if(n&&n.className.indexOf("ag-icon")>-1)return n;var i=document.createElement("span");return i.appendChild(n),i}function no(r,t,e,n){var i=null,o=e&&e.getColDef().icons;if(o&&(i=o[r]),t&&!i){var s=t.get("icons");s&&(i=s[r])}if(!i){var d=document.createElement("span"),f=I2[r];return f||(n?f=r:(console.warn("AG Grid: Did not find icon "+r),f="")),d.setAttribute("class","ag-icon ag-icon-"+f),d.setAttribute("unselectable","on"),Ko(d,"presentation"),d}var a=void 0;if("function"==typeof i)a=i();else{if("string"!=typeof i)throw new Error("icon from grid options needs to be a string or a function");a=i}return"string"==typeof a?ls(a):I0(a)?a:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var QZ=Object.freeze({__proto__:null,iconNameClassMap:I2,createIcon:du,createIconNoSpan:no}),Fe=function(){function r(){}return r.BACKSPACE="Backspace",r.TAB="Tab",r.ENTER="Enter",r.ESCAPE="Escape",r.SPACE=" ",r.LEFT="ArrowLeft",r.UP="ArrowUp",r.RIGHT="ArrowRight",r.DOWN="ArrowDown",r.DELETE="Delete",r.F2="F2",r.PAGE_UP="PageUp",r.PAGE_DOWN="PageDown",r.PAGE_HOME="Home",r.PAGE_END="End",r.A="KeyA",r.C="KeyC",r.D="KeyD",r.V="KeyV",r.X="KeyX",r.Y="KeyY",r.Z="KeyZ",r}(),JZ=65,XZ=67,e7=86,t7=68,n7=90,r7=89;function A2(r){return!(r.altKey||r.ctrlKey||r.metaKey)&&1===r.key.length}function aA(r,t,e,n,i){var o=n?n.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;var s={event:t,editing:i,column:n,api:r.api,node:e,data:e.data,colDef:n.getColDef(),context:r.context,columnApi:r.columnApi};return!(!o||!o(s))}function P2(r,t,e,n){var i=n.getDefinition(),o=i&&i.suppressHeaderKeyboardEvent;return!!Qe(o)&&!!o({api:r.api,columnApi:r.columnApi,context:r.context,colDef:i,column:n,headerRowIndex:e,event:t})}function N2(r){var e;switch(r.keyCode){case JZ:e=Fe.A;break;case XZ:e=Fe.C;break;case e7:e=Fe.V;break;case t7:e=Fe.D;break;case n7:e=Fe.Z;break;case r7:e=Fe.Y;break;default:e=r.code}return e}function M2(r,t){return void 0===t&&(t=!1),r===Fe.DELETE||!t&&r===Fe.BACKSPACE&&AL()}var i7=Object.freeze({__proto__:null,isEventFromPrintableCharacter:A2,isUserSuppressingKeyboardEvent:aA,isUserSuppressingHeaderKeyboardEvent:P2,normaliseQwertyAzerty:N2,isDeleteKey:M2});function $L(r,t,e){if(0===e)return!1;var n=Math.abs(r.clientX-t.clientX),i=Math.abs(r.clientY-t.clientY);return Math.max(n,i)<=e}var o7=Object.freeze({__proto__:null,areEventsNear:$L}),l7=Object.freeze({__proto__:null,sortRowNodesByOrder:function s7(r,t){if(!r)return!1;for(var e=function(a,d){var f=t[a.id],g=t[d.id],C=void 0!==f,E=void 0!==g;return C&&E?f-g:C||E?C?1:-1:a.__objectId-d.__objectId},o=!1,s=0;s<r.length-1;s++)if(e(r[s],r[s+1])>0){o=!0;break}return!!o&&(r.sort(e),!0)},traverseNodesWithKey:function a7(r,t){var e=[];!function n(i){i&&i.forEach(function(o){if(o.group||o.hasChildren()){e.push(o.key);var s=e.join("|");t(o,s),n(o.childrenAfterGroup),e.pop()}})}(r)}});function zL(r){var t=new Set;return r.forEach(function(e){return t.add(e)}),t}var u7=Object.freeze({__proto__:null,convertToSet:zL}),ho=function(){return ho=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},ho.apply(this,arguments)},tn=ho(ho(ho(ho(ho(ho(ho(ho(ho(ho(ho(ho(ho(ho(ho(ho(ho(ho({},NZ),q5),MZ),BZ),ZZ),Z5),x5),iZ),b5),QZ),i7),mZ),o7),HZ),P5),l7),u7),fZ),Nw=function(){function r(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this.nextValue=t,this.step=e}return r.prototype.next=function(){var t=this.nextValue;return this.nextValue+=this.step,t},r.prototype.peek=function(){return this.nextValue},r.prototype.skip=function(t){this.nextValue+=t},r}(),Ty=(()=>(function(r){r[r.IN_PROGRESS=0]="IN_PROGRESS",r[r.RESOLVED=1]="RESOLVED"}(Ty||(Ty={})),Ty))(),ta=function(){function r(t){var e=this;this.status=Ty.IN_PROGRESS,this.resolution=null,this.waiters=[],t(function(n){return e.onDone(n)},function(n){return e.onReject(n)})}return r.all=function(t){return new r(function(e){var n=t.length,i=new Array(n);t.forEach(function(o,s){o.then(function(a){i[s]=a,0==--n&&e(i)})})})},r.resolve=function(t){return void 0===t&&(t=null),new r(function(e){return e(t)})},r.prototype.then=function(t){var e=this;return new r(function(n){e.status===Ty.RESOLVED?n(t(e.resolution)):e.waiters.push(function(i){return n(t(i))})})},r.prototype.resolveNow=function(t,e){return this.status===Ty.RESOLVED?e(this.resolution):t},r.prototype.onDone=function(t){this.status=Ty.RESOLVED,this.resolution=t,this.waiters.forEach(function(e){return e(t)})},r.prototype.onReject=function(t){console.warn("TBI")},r}(),d7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),KL=function(){return KL=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},KL.apply(this,arguments)},P0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},hu=(()=>(function(r){r[r.NOTHING=0]="NOTHING",r[r.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",r[r.SHOWING=2]="SHOWING"}(hu||(hu={})),hu))(),qL=function(r){function t(e){var n=r.call(this)||this;return n.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,n.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,n.SHOW_QUICK_TOOLTIP_DIFF=1e3,n.FADE_OUT_TOOLTIP_TIMEOUT=1e3,n.state=hu.NOTHING,n.tooltipInstanceCount=0,n.tooltipMouseTrack=!1,n.parentComp=e,n}return d7(t,r),t.prototype.postConstruct=function(){this.tooltipShowDelay=this.getTooltipDelay("show")||this.DEFAULT_SHOW_TOOLTIP_DELAY,this.tooltipHideDelay=this.getTooltipDelay("hide")||this.DEFAULT_HIDE_TOOLTIP_DELAY,this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");var e=this.parentComp.getGui();this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this)),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this))},t.prototype.destroy=function(){this.setToDoNothing(),r.prototype.destroy.call(this)},t.prototype.onMouseEnter=function(e){if(!zg()&&this.state==hu.NOTHING){var n=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.lastMouseEvent=e,this.state=hu.WAITING_TO_SHOW}},t.prototype.onMouseLeave=function(){this.setToDoNothing()},t.prototype.onKeyDown=function(){this.setToDoNothing()},t.prototype.setToDoNothing=function(){this.state===hu.SHOWING&&this.hideTooltip(),this.clearTimeouts(),this.state=hu.NOTHING},t.prototype.onMouseMove=function(e){this.lastMouseEvent=e,this.tooltipMouseTrack&&this.state===hu.SHOWING&&this.tooltipComp&&this.positionTooltipUnderLastMouseEvent()},t.prototype.onMouseDown=function(){this.setToDoNothing()},t.prototype.getTooltipDelay=function(e){var n=this.gridOptionsService.getNum("tooltipShowDelay"),i=this.gridOptionsService.getNum("tooltipHideDelay"),o="show"===e?n:i,s=Jj(e);return Qe(o)?(o<0&&Yn(function(){return console.warn("AG Grid: tooltip"+s+"Delay should not be lower than 0")},"tooltip"+s+"DelayWarn"),Math.max(200,o)):null},t.prototype.hideTooltip=function(){this.tooltipComp&&(this.destroyTooltipComp(),t.lastTooltipHideTime=(new Date).getTime()),this.state=hu.NOTHING},t.prototype.destroyTooltipComp=function(){var e=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var n=this.tooltipPopupDestroyFunc,i=this.tooltipComp;window.setTimeout(function(){n(),e.getContext().destroyBean(i)},this.FADE_OUT_TOOLTIP_TIMEOUT),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},t.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-t.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},t.prototype.showTooltip=function(){var e=KL({},this.parentComp.getTooltipParams());if(Qe(e.value)){this.state=hu.SHOWING,this.tooltipInstanceCount++;var n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(n)}else this.setToDoNothing()},t.prototype.newTooltipComponentCallback=function(e,n){if(this.state!==hu.SHOWING||this.tooltipInstanceCount!==e)this.getContext().destroyBean(n);else{var o=n.getGui();this.tooltipComp=n,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom");var s=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({eChild:o,ariaLabel:s("ariaLabelTooltip","Tooltip")});a&&(this.tooltipPopupDestroyFunc=a.hideFunc),this.positionTooltipUnderLastMouseEvent(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)}},t.prototype.positionTooltipUnderLastMouseEvent=function(){this.popupService.positionPopupUnderMouseEvent({type:"tooltip",mouseEvent:this.lastMouseEvent,ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack})},t.prototype.clearTimeouts=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0),this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},P0([F("popupService")],t.prototype,"popupService",void 0),P0([F("userComponentFactory")],t.prototype,"userComponentFactory",void 0),P0([F("columnApi")],t.prototype,"columnApi",void 0),P0([F("gridApi")],t.prototype,"gridApi",void 0),P0([rt],t.prototype,"postConstruct",null),t}(Ye),h7=function(){function r(t){this.cssClassStates={},this.getGui=t}return r.prototype.addCssClass=function(t){var e=this,n=(t||"").split(" ");if(n.length>1)n.forEach(function(s){return e.addCssClass(s)});else if(!0!==this.cssClassStates[t]&&t.length){var o=this.getGui();o&&o.classList.add(t),this.cssClassStates[t]=!0}},r.prototype.removeCssClass=function(t){var e=this,n=(t||"").split(" ");if(n.length>1)n.forEach(function(s){return e.removeCssClass(s)});else if(!1!==this.cssClassStates[t]&&t.length){var o=this.getGui();o&&o.classList.remove(t),this.cssClassStates[t]=!1}},r.prototype.containsCssClass=function(t){var e=this.getGui();return!!e&&e.classList.contains(t)},r.prototype.addOrRemoveCssClass=function(t,e){var n=this;if(t){if(t.indexOf(" ")>=0){var i=(t||"").split(" ");if(i.length>1)return void i.forEach(function(a){return n.addOrRemoveCssClass(a,e)})}if(this.cssClassStates[t]!==e&&t.length){var s=this.getGui();s&&s.classList.toggle(t,e),this.cssClassStates[t]=e}}},r}(),f7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),YL=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},p7=new Nw,Rn=function(r){function t(e){var n=r.call(this)||this;return n.displayed=!0,n.visible=!0,n.compId=p7.next(),n.cssClassManager=new h7(function(){return n.eGui}),e&&n.setTemplate(e),n}return f7(t,r),t.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")},t.prototype.getCompId=function(){return this.compId},t.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},t.prototype.setTooltip=function(e){var n=this;this.tooltipText!=e&&(this.tooltipText&&(n.usingBrowserTooltips?n.getGui().removeAttribute("title"):n.tooltipFeature=n.destroyBean(n.tooltipFeature)),null!=e&&(this.tooltipText=e,this.tooltipText&&(n.usingBrowserTooltips?n.getGui().setAttribute("title",n.tooltipText):n.tooltipFeature=n.createBean(new qL(n)))))},t.prototype.createChildComponentsFromTags=function(e,n){var i=this;R2(e.childNodes).forEach(function(s){if(s instanceof HTMLElement){var a=i.createComponentFromElement(s,function(f){f.getGui()&&i.copyAttributesFromNode(s,f.getGui())},n);if(a){if(a.addItems&&s.children.length){i.createChildComponentsFromTags(s,n);var d=Array.prototype.slice.call(s.children);a.addItems(d)}i.swapComponentForNode(a,e,s)}else s.childNodes&&i.createChildComponentsFromTags(s,n)}})},t.prototype.createComponentFromElement=function(e,n,i){var o=e.nodeName,s=i?i[e.getAttribute("ref")]:void 0,a=this.agStackComponentsRegistry.getComponentClass(o);if(a){t.elementGettingCreated=e;var d=new a(s);return d.setParentComponent(this),this.createBean(d,null,n),d}return null},t.prototype.copyAttributesFromNode=function(e,n){O2(e.attributes,function(i,o){return n.setAttribute(i,o)})},t.prototype.swapComponentForNode=function(e,n,i){var o=e.getGui();n.replaceChild(o,i),n.insertBefore(document.createComment(i.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,i)},t.prototype.swapInComponentForQuerySelectors=function(e,n){var i=this;this.iterateOverQuerySelectors(function(o){i[o.attributeName]===n&&(i[o.attributeName]=e)})},t.prototype.iterateOverQuerySelectors=function(e){for(var n=Object.getPrototypeOf(this);null!=n;){var i=n.__agComponentMetaData,o=zI(n.constructor);i&&i[o]&&i[o].querySelectors&&i[o].querySelectors.forEach(function(s){return e(s)}),n=Object.getPrototypeOf(n)}},t.prototype.setTemplate=function(e,n){var i=ls(e);this.setTemplateFromElement(i,n)},t.prototype.setTemplateFromElement=function(e,n){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),n)},t.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},t.prototype.wireQuerySelectors=function(){var e=this;if(this.eGui){var n=this;this.iterateOverQuerySelectors(function(i){var o=function(d){return n[i.attributeName]=d};if(i.refSelector&&e.eGui.getAttribute("ref")===i.refSelector)o(e.eGui);else{var a=e.eGui.querySelector(i.querySelector);a&&o(a.__agComponent||a)}})}},t.prototype.getGui=function(){return this.eGui},t.prototype.getFocusableElement=function(){return this.eGui},t.prototype.setParentComponent=function(e){this.parentComponent=e},t.prototype.getParentComponent=function(){return this.parentComponent},t.prototype.setGui=function(e){this.eGui=e},t.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)},t.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)},t.prototype.appendChild=function(e,n){null!=e&&(n||(n=this.eGui),I0(e)?n.appendChild(e):n.appendChild(e.getGui()))},t.prototype.isDisplayed=function(){return this.displayed},t.prototype.setVisible=function(e,n){void 0===n&&(n={}),e!==this.visible&&(this.visible=e,b2(this.eGui,e,{skipAriaHidden:n.skipAriaHidden}))},t.prototype.setDisplayed=function(e,n){void 0===n&&(n={}),e!==this.displayed&&(this.displayed=e,Wn(this.eGui,e,{skipAriaHidden:n.skipAriaHidden}),this.dispatchEvent({type:t.EVENT_DISPLAYED_CHANGED,visible:this.displayed}))},t.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),r.prototype.destroy.call(this)},t.prototype.addGuiEventListener=function(e,n,i){var o=this;this.eGui.addEventListener(e,n,i),this.addDestroyFunc(function(){return o.eGui.removeEventListener(e,n)})},t.prototype.addCssClass=function(e){this.cssClassManager.addCssClass(e)},t.prototype.removeCssClass=function(e){this.cssClassManager.removeCssClass(e)},t.prototype.containsCssClass=function(e){return this.cssClassManager.containsCssClass(e)},t.prototype.addOrRemoveCssClass=function(e,n){this.cssClassManager.addOrRemoveCssClass(e,n)},t.prototype.getAttribute=function(e){var n=this.eGui;return n?n.getAttribute(e):null},t.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'+e+'"]')},t.EVENT_DISPLAYED_CHANGED="displayedChanged",YL([F("agStackComponentsRegistry")],t.prototype,"agStackComponentsRegistry",void 0),YL([Lj],t.prototype,"preConstructOnComponent",null),YL([Lj],t.prototype,"createChildComponentsPreConstruct",null),t}(Ye);function ut(r){return x2.bind(this,"[ref="+r+"]",r)}function x2(r,t,e,n,i){null!==r?"number"!=typeof i?function g7(r,t,e){var n=function m7(r,t){return r.__agComponentMetaData||(r.__agComponentMetaData={}),r.__agComponentMetaData[t]||(r.__agComponentMetaData[t]={}),r.__agComponentMetaData[t]}(r,zI(r.constructor));n[t]||(n[t]=[]),n[t].push(e)}(e,"querySelectors",{attributeName:n,querySelector:r,refSelector:t}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var v7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),F2=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},y7=function(r){function t(){return r.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return v7(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){this.params=e;var n=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(n+" "+i("ariaFilterInput","Filter Input"))},t.prototype.onParentModelChanged=function(e){var n=this;e?this.params.parentFilterInstance(function(i){if(i.getModelAsString){var o=i.getModelAsString(e);n.eFloatingFilterText.setValue(o)}}):this.eFloatingFilterText.setValue("")},F2([ut("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),F2([F("columnModel")],t.prototype,"columnModel",void 0),t}(Rn),L2=function(){function r(t,e,n,i){var o=this;this.alive=!0,this.context=t,this.eParent=i,e.getDateCompDetails(n).newAgStackInstance().then(function(d){o.alive?(o.dateComp=d,d&&(i.appendChild(d.getGui()),d.afterGuiAttached&&d.afterGuiAttached(),o.tempValue&&d.setDate(o.tempValue),null!=o.disabled&&o.setDateCompDisabled(o.disabled))):t.destroyBean(d)})}return r.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},r.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},r.prototype.setDate=function(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t},r.prototype.setDisabled=function(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t},r.prototype.setDisplayed=function(t){Wn(this.eParent,t)},r.prototype.setInputPlaceholder=function(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)},r.prototype.setInputAriaLabel=function(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)},r.prototype.afterGuiAttached=function(t){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(t)},r.prototype.setDateCompDisabled=function(t){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(t)},r}(),ZL=function(){return ZL=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},ZL.apply(this,arguments)},k2=function(){function r(){this.customFilterOptions={}}return r.prototype.init=function(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t),this.checkForDeprecatedParams()},r.prototype.checkForDeprecatedParams=function(){this.filterOptions.some(function(t){return"string"!=typeof t&&null!=t.test})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, test() has been replaced with predicate()."),this.filterOptions.some(function(t){return"string"!=typeof t&&null!=t.hideFilterInput})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, useOfHideFilterInput has been replaced with numberOfInputs.")},r.prototype.getFilterOptions=function(){return this.filterOptions},r.prototype.mapCustomOptions=function(){var t=this;this.filterOptions&&this.filterOptions.forEach(function(e){if("string"!=typeof e){if(![["displayKey"],["displayName"],["predicate","test"]].every(function(a){return!!a.some(function(d){return null!=e[d]})||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+a+"'"),!1)}))return void(t.filterOptions=t.filterOptions.filter(function(a){return a===e})||[]);var o=e.test,s=ZL({},e);null!=o&&null==e.predicate&&(s.predicate=function(a,d){return o(a[0],d)},delete s.test),s.hideFilterInput&&null==s.numberOfInputs&&(s.numberOfInputs=0,delete s.hideFilterInput),t.customFilterOptions[e.displayKey]=s}})},r.prototype.selectDefaultItem=function(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];"string"==typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},r.prototype.getDefaultOption=function(){return this.defaultOption},r.prototype.getCustomOption=function(t){return this.customFilterOptions[t]},r}(),G2={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},_7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),QL=function(){return QL=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},QL.apply(this,arguments)},V2=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},qg=function(r){function t(e,n){void 0===n&&(n={});var i=r.call(this)||this;return i.eFocusableElement=e,i.callbacks=n,i.callbacks=QL({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(o){if(!o.defaultPrevented){var s=i.focusService.findNextFocusableElement(i.eFocusableElement,!1,o.shiftKey);s&&(s.focus(),o.preventDefault())}}},n),i}return _7(t,r),t.prototype.postConstruct=function(){this.eFocusableElement.classList.add(t.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},t.prototype.addKeyDownListeners=function(e){var n=this;this.addManagedListener(e,"keydown",function(i){if(!i.defaultPrevented&&!Xd(i)){if(n.callbacks.shouldStopEventPropagation(i))return void Tw(i);i.key===Fe.TAB?n.callbacks.onTabKeyDown(i):n.callbacks.handleKeyDown&&n.callbacks.handleKeyDown(i)}})},t.FOCUS_MANAGED_CLASS="ag-focus-managed",V2([F("focusService")],t.prototype,"focusService",void 0),V2([rt],t.prototype,"postConstruct",null),t}(Ye),C7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),H2=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},B2="ag-resizer-wrapper",w7='<div class="'+B2+'">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',U2=function(r){function t(e,n){var i=r.call(this)||this;return i.element=e,i.dragStartPosition={x:0,y:0},i.position={x:0,y:0},i.lastSize={width:-1,height:-1},i.positioned=!1,i.resizersAdded=!1,i.resizeListeners=[],i.boundaryEl=null,i.isResizing=!1,i.isMoving=!1,i.resizable={},i.movable=!1,i.currentResizer=null,i.config=Object.assign({},{popup:!1},n),i}return C7(t,r),t.prototype.center=function(){var e=this.offsetParent,n=e.clientHeight,o=e.clientWidth/2-this.getWidth()/2,s=n/2-this.getHeight()/2;this.offsetElement(o,s)},t.prototype.initialisePosition=function(){var e=this.config,n=e.centered,i=e.forcePopupParentAsOffsetParent,o=e.minWidth,s=e.width,a=e.minHeight,d=e.height,f=e.x,g=e.y;this.offsetParent||this.setOffsetParent();var C=0,E=0,T=!!this.element.offsetParent;if(T){var I=this.findBoundaryElement(),M=window.getComputedStyle(I);if(null!=M.minWidth){var k=I.offsetWidth-this.element.offsetWidth;E=parseInt(M.minWidth,10)-k}if(null!=M.minHeight){var W=I.offsetHeight-this.element.offsetHeight;C=parseInt(M.minHeight,10)-W}}if(this.minHeight=a||C,this.minWidth=o||E,s&&this.setWidth(s),d&&this.setHeight(d),(!s||!d)&&this.refreshSize(),n)this.center();else if(f||g)this.offsetElement(f,g);else if(T&&i&&this.boundaryEl){var z=parseFloat(this.boundaryEl.style.top),J=parseFloat(this.boundaryEl.style.left);this.offsetElement(isNaN(J)?0:J,isNaN(z)?0:z)}this.positioned=!!this.offsetParent},t.prototype.isPositioned=function(){return this.positioned},t.prototype.getPosition=function(){return this.position},t.prototype.setMovable=function(e,n){if(this.config.popup&&e!==this.movable){this.movable=e;var i=this.moveElementDragListener||{eElement:n,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}},t.prototype.setResizable=function(e){var n=this;if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(function(i){var s=!!e[i],a=n.getResizerElement(i),d={dragStartPixels:0,eElement:a,onDragStart:function(f){return n.onResizeStart(f,i)},onDragging:n.onResize.bind(n),onDragStop:function(f){return n.onResizeEnd(f,i)}};(s||!n.isAlive()&&!s)&&(s?(n.dragService.addDragSource(d),n.resizeListeners.push(d),a.style.pointerEvents="all"):a.style.pointerEvents="none",n.resizable[i]=s)})},t.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},t.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var e=this.lastSize,n=e.height,i=e.width;-1!==i&&(this.element.style.width=i+"px"),-1!==n&&(this.element.style.height=n+"px")},t.prototype.getHeight=function(){return this.element.offsetHeight},t.prototype.setHeight=function(e){var n=this.config,i=n.popup,o=n.forcePopupParentAsOffsetParent,s=this.element,a=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Dy(s,e),e=LL(s),a=!0;else if(this.positioned){var d=this.element.getBoundingClientRect(),f=this.offsetParent.getBoundingClientRect();e=Math.max(this.minHeight,e);var g=this.offsetParent.clientHeight;if(g){var C=i?this.position.y:d.top,E=i?0:f.top,T=0;o&&this.boundaryEl&&(T=this.boundaryEl.getBoundingClientRect().bottom-d.bottom);var M=g+E-C-T;e>M&&(e=M)}}this.getHeight()!==e&&(a?(s.style.maxHeight="unset",s.style.minHeight="unset"):i?Dy(s,e):(s.style.height=e+"px",s.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))},t.prototype.getWidth=function(){return this.element.offsetWidth},t.prototype.setWidth=function(e){var n=this.element,i=this.config.popup,o=!1;if("string"==typeof e&&-1!==e.indexOf("%"))cu(n,e),e=oA(n),o=!0;else if(this.positioned){e=Math.max(this.minWidth,e);var s=this.offsetParent.clientWidth,a=i?this.position.x:this.element.getBoundingClientRect().left;s&&e+a>s&&(e=s-a)}this.getWidth()!==e&&(o?(n.style.maxWidth="unset",n.style.minWidth="unset"):this.config.popup?cu(n,e):(n.style.width=e+"px",n.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))},t.prototype.offsetElement=function(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x:e,y:n}}}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top))},t.prototype.setPosition=function(e,n){this.position.x=e,this.position.y=n},t.prototype.updateDragStartPosition=function(e,n){this.dragStartPosition={x:e,y:n}},t.prototype.calculateMouseMovement=function(e){var n=e.e,o=e.isTop,a=e.topBuffer,d=n.clientX-this.dragStartPosition.x,f=n.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(n,!!e.isLeft,!!e.anywhereWithin,d)?0:d,movementY:this.shouldSkipY(n,!!o,a,f)?0:f}},t.prototype.shouldSkipX=function(e,n,i,o){var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),d=this.boundaryEl.getBoundingClientRect(),f=this.config.popup?this.position.x:s.left,g=f<=0&&a.left>=e.clientX||a.right<=e.clientX&&a.right<=d.right;return!!g||(n?o<0&&e.clientX>f+a.left||o>0&&e.clientX<f+a.left:i?o<0&&e.clientX>d.right||o>0&&e.clientX<f+a.left:o<0&&e.clientX>d.right||o>0&&e.clientX<d.right)},t.prototype.shouldSkipY=function(e,n,i,o){void 0===i&&(i=0);var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),d=this.boundaryEl.getBoundingClientRect(),f=this.config.popup?this.position.y:s.top,g=f<=0&&a.top>=e.clientY||a.bottom<=e.clientY&&a.bottom<=d.bottom;return!!g||(n?o<0&&e.clientY>f+a.top+i||o>0&&e.clientY<f+a.top:o<0&&e.clientY>d.bottom||o>0&&e.clientY<d.bottom)},t.prototype.createResizeMap=function(){var e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}},t.prototype.addResizers=function(){if(!this.resizersAdded){var e=this.element;if(e){var i=(new DOMParser).parseFromString(w7,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},t.prototype.removeResizers=function(){this.resizerMap=void 0;var e=this.element.querySelector("."+B2);e&&this.element.removeChild(e),this.resizersAdded=!1},t.prototype.getResizerElement=function(e){return this.resizerMap[e].element},t.prototype.onResizeStart=function(e,n){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!n.match(/top/i),isRight:!!n.match(/right/i),isBottom:!!n.match(/bottom/i),isLeft:!!n.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[n].element.classList.add("ag-active");var i=this.config;!i.popup&&!i.forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},t.prototype.getSiblings=function(){var n=this.element.parentElement;return n?Array.prototype.slice.call(n.children).filter(function(i){return!i.classList.contains("ag-hidden")}):null},t.prototype.getMinSizeOfSiblings=function(){for(var e=this.getSiblings()||[],n=0,i=0,o=0;o<e.length;o++){var s=e[o];if(s!==this.element){var d=this.minHeight||0,f=this.minWidth||0;if(s.style.flex&&"0 0 auto"!==s.style.flex){var g=window.getComputedStyle(s);g.minHeight&&(d=parseInt(g.minHeight,10)),g.minWidth&&(f=parseInt(g.minWidth,10))}else d=s.offsetHeight,f=s.offsetWidth;n+=d,i+=f}}return{height:n,width:i}},t.prototype.applySizeToSiblings=function(e){var n=null,i=this.getSiblings();if(i){for(var o=0;o<i.length;o++){var s=i[o];s!==n&&(e?s.style.height=s.offsetHeight+"px":s.style.width=s.offsetWidth+"px",s.style.flex="0 0 auto",s===this.element&&(n=i[o+1]))}n&&(n.style.removeProperty("height"),n.style.removeProperty("min-height"),n.style.removeProperty("max-height"),n.style.flex="1 1 auto")}},t.prototype.isResizable=function(){return Object.values(this.resizable).some(function(e){return e})},t.prototype.onResize=function(e){if(this.isResizing&&this.currentResizer){var n=this.config,i=n.popup,o=n.forcePopupParentAsOffsetParent,s=this.currentResizer,a=s.isTop,g=s.isLeft,C=s.isRight||g,E=s.isBottom||a,T=this.calculateMouseMovement({e,isLeft:g,isTop:a}),I=T.movementX,M=T.movementY,k=this.position.x,W=this.position.y,z=0,J=0;if(C&&I){var re=g?-1:1,ce=this.getWidth(),Re=ce+I*re,Xe=!1;g&&(k+(z=ce-Re)<=0||Re<=this.minWidth)&&(Xe=!0,z=0),Xe||this.setWidth(Re)}if(E&&M){re=a?-1:1;var Ke=this.getHeight(),At=Ke+M*re,Ut=!1;a?(W+(J=Ke-At)<=0||At<=this.minHeight)&&(Ut=!0,J=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&Ke<At&&this.getMinSizeOfSiblings().height+At>this.element.parentElement.offsetHeight&&(Ut=!0),Ut||this.setHeight(At)}this.updateDragStartPosition(e.clientX,e.clientY),((i||o)&&z||J)&&this.offsetElement(k+z,W+J)}},t.prototype.onResizeEnd=function(e,n){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var i={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[n].element.classList.remove("ag-active"),this.dispatchEvent(i)},t.prototype.refreshSize=function(){var e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))},t.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},t.prototype.onMove=function(e){if(this.isMoving){var s,n=this.position,i=n.x,o=n.y;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());var a=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(i+a.movementX,o+a.movementY),this.updateDragStartPosition(e.clientX,e.clientY)}},t.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},t.prototype.setOffsetParent=function(){this.offsetParent=this.config.forcePopupParentAsOffsetParent?this.popupService.getPopupParent():this.element.offsetParent},t.prototype.findBoundaryElement=function(){for(var e=this.element;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element},t.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.clearResizeListeners(),this.removeResizers()},H2([F("popupService")],t.prototype,"popupService",void 0),H2([F("dragService")],t.prototype,"dragService",void 0),t}(Ye),S7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),JL=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},lA=function(r){function t(e){var n=r.call(this)||this;return n.filterNameKey=e,n.applyActive=!1,n.hidePopup=null,n.debouncePending=!1,n.appliedModel=null,n}return S7(t,r),t.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new qg(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new U2(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},t.prototype.handleKeyDown=function(e){},t.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},t.prototype.isFilterActive=function(){return!!this.appliedModel},t.prototype.resetTemplate=function(e){var n=this.getGui();n&&n.removeEventListener("submit",this.onFormSubmit);var i='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper" ref="eFilterBody">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </form>";this.setTemplate(i,e),(n=this.getGui())&&n.addEventListener("submit",this.onFormSubmit)},t.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},t.prototype.init=function(e){var n=this;this.setParams(e),this.resetUiToDefaults(!0).then(function(){n.updateUiVisibility(),n.setupOnBtApplyDebounce()})},t.prototype.setParams=function(e){this.providedFilterParams=e,this.applyActive=t.isUseApplyButton(e),this.createButtonPanel()},t.prototype.createButtonPanel=function(){var e=this,n=this.providedFilterParams.buttons;if(!(!n||n.length<1||this.isReadOnly())){var i=document.createElement("div");i.classList.add("ag-filter-apply-panel"),zL(n).forEach(function(s){return function(s){var a,d;switch(s){case"apply":a=e.translate("applyFilter"),d=function(C){return e.onBtApply(!1,!1,C)};break;case"clear":a=e.translate("clearFilter"),d=function(){return e.onBtClear()};break;case"reset":a=e.translate("resetFilter"),d=function(){return e.onBtReset()};break;case"cancel":a=e.translate("cancelFilter"),d=function(C){e.onBtCancel(C)};break;default:return void console.warn("AG Grid: Unknown button type specified")}var g=ls('<button\n                    type="'+("apply"===s?"submit":"button")+'"\n                    ref="'+s+'FilterButton"\n                    class="ag-standard-button ag-filter-apply-panel-button"\n                >'+a+"\n                </button>");i.appendChild(g),e.addManagedListener(g,"click",d)}(s)}),this.getGui().appendChild(i)}},t.prototype.getDefaultDebounceMs=function(){return 0},t.prototype.setupOnBtApplyDebounce=function(){var e=this,n=t.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),i=Jd(this.checkApplyDebounce.bind(this),n);this.onBtApplyDebounce=function(){e.debouncePending=!0,i()}},t.prototype.checkApplyDebounce=function(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())},t.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},t.prototype.setModel=function(e){var n=this;return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then(function(){n.updateUiVisibility(),n.applyModel("api")})},t.prototype.onBtCancel=function(e){var n=this;this.resetUiToActiveModel(this.getModel(),function(){n.providedFilterParams.closeOnApply&&n.close(e)})},t.prototype.resetUiToActiveModel=function(e,n){var i=this,o=function(){i.onUiChanged(!1,"prevent"),n?.()};null!=e?this.setModelIntoUi(e).then(o):this.resetUiToDefaults().then(o)},t.prototype.onBtClear=function(){var e=this;this.resetUiToDefaults().then(function(){return e.onUiChanged()})},t.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},t.prototype.applyModel=function(e){var n=this.getModelFromUi();if(!this.isModelValid(n))return!1;var i=this.appliedModel;return this.appliedModel=n,!this.areModelsEqual(i,n)},t.prototype.isModelValid=function(e){return!0},t.prototype.onFormSubmit=function(e){e.preventDefault()},t.prototype.onBtApply=function(e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),i&&i.preventDefault(),this.applyModel(n?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:n}),this.providedFilterParams.closeOnApply&&this.applyActive&&!e&&!n&&this.close(i)},t.prototype.onNewRowsLoaded=function(){},t.prototype.close=function(e){if(this.hidePopup){var o,i=e&&e.key;("Enter"===i||"Space"===i)&&(o={keyboardEvent:e}),this.hidePopup(o),this.hidePopup=null}},t.prototype.onUiChanged=function(e,n){if(void 0===e&&(e=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var i=this.isModelValid(this.getModelFromUi());Aw(this.getRefElement("applyFilterButton"),!i)}e&&!n||"immediately"===n?this.onBtApply(e):(!this.applyActive&&!n||"debounce"===n)&&this.onBtApplyDebounce()},t.prototype.afterGuiAttached=function(e){"floatingFilter"===e?.container?(this.positionableFeature.restoreLastSize(),this.positionableFeature.setResizable(this.gridOptionsService.is("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),null!=e&&(this.hidePopup=e.hidePopup)},t.prototype.afterGuiDetached=function(){this.checkApplyDebounce()},t.getDebounceMs=function(e,n){return t.isUseApplyButton(e)?(null!=e.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:n},t.isUseApplyButton=function(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0},t.prototype.destroy=function(){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,r.prototype.destroy.call(this)},t.prototype.translate=function(e){return this.localeService.getLocaleTextFunc()(e,G2[e])},t.prototype.getCellValue=function(e){var n=this.providedFilterParams;return this.providedFilterParams.valueGetter({api:n.api,colDef:n.colDef,column:n.column,columnApi:n.columnApi,context:n.context,data:e.data,getValue:function(f){return e.data[f]},node:e})},t.prototype.getPositionableElement=function(){return this.eFilterBody},JL([F("rowModel")],t.prototype,"rowModel",void 0),JL([ut("eFilterBody")],t.prototype,"eFilterBody",void 0),JL([rt],t.prototype,"postConstruct",null),t}(Rn),E7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),j2=function(r){function t(e,n){var i=r.call(this,n)||this;return i.labelSeparator="",i.labelAlignment="left",i.disabled=!1,i.label="",i.config=e||{},i}return E7(t,r),t.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var e=this.config,n=e.labelSeparator,i=e.label,o=e.labelWidth,s=e.labelAlignment;null!=n&&this.setLabelSeparator(n),null!=i&&this.setLabel(i),null!=o&&this.setLabelWidth(o),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()},t.prototype.refreshLabel=function(){ll(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Wn(this.eLabel,!1),Ko(this.eLabel,"presentation")):(Wn(this.eLabel,!0),Ko(this.eLabel,null))},t.prototype.setLabelSeparator=function(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this},t.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e){return this.label===e||(this.label=e,this.refreshLabel()),this},t.prototype.setLabelAlignment=function(e){var i=this.getGui().classList;return i.toggle("ag-label-align-left","left"===e),i.toggle("ag-label-align-right","right"===e),i.toggle("ag-label-align-top","top"===e),this},t.prototype.setLabelEllipsis=function(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this},t.prototype.setLabelWidth=function(e){return null==this.label||O0(this.eLabel,e),this},t.prototype.setDisabled=function(e){e=!!e;var n=this.getGui();return Aw(n,e),n.classList.toggle("ag-disabled",e),this.disabled=e,this},t.prototype.isDisabled=function(){return!!this.disabled},function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(Rn),D7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Mw=function(r){function t(e,n,i){var o=r.call(this,e,n)||this;return o.className=i,o}return D7(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className)},t.prototype.onValueChange=function(e){var n=this;return this.addManagedListener(this,t.EVENT_CHANGED,function(){return e(n.getValue())}),this},t.prototype.getWidth=function(){return this.getGui().clientWidth},t.prototype.setWidth=function(e){return cu(this.getGui(),e),this},t.prototype.getPreviousValue=function(){return this.previousValue},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e,n){return this.value===e||(this.previousValue=this.value,this.value=e,n||this.dispatchEvent({type:t.EVENT_CHANGED})),this},t.EVENT_CHANGED="valueChange",t}(j2),T7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),uA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},R7=function(r){function t(e,n,i,o){var s=r.call(this,e,'<div class="ag-picker-field" role="presentation">\n                <div ref="eLabel"></div>\n                <div ref="eWrapper"\n                    class="ag-wrapper ag-picker-field-wrapper"\n                    tabIndex="-1"\n                    aria-expanded="false"\n                    '+(o?'role="'+o+'"':"")+'\n                >\n                    <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',n)||this;return s.pickerIcon=i,s.isPickerDisplayed=!1,s.isDestroyingPicker=!1,s.skipClick=!1,s}return T7(t,r),t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this);var n=this.getCompId()+"-display";this.eDisplayField.setAttribute("id",n),s2(this.eWrapper,n);var i=function(){e.skipClick?e.skipClick=!1:e.isDisabled()||(e.pickerComponent=e.showPicker())},o=this.getGui();if(this.addManagedListener(o,"mousedown",function(a){!e.skipClick&&e.pickerComponent&&e.pickerComponent.isAlive()&&Pw(e.pickerComponent.getGui())&&o.contains(a.target)&&(e.skipClick=!0)}),this.addManagedListener(o,"keydown",function(a){switch(a.key){case Fe.UP:case Fe.DOWN:case Fe.ENTER:case Fe.SPACE:i();case Fe.ESCAPE:e.isPickerDisplayed&&a.preventDefault()}}),this.addManagedListener(this.eWrapper,"click",i),this.addManagedListener(this.eLabel,"click",i),this.pickerIcon){var s=no(this.pickerIcon,this.gridOptionsService);s&&this.eIcon.appendChild(s)}},t.prototype.refreshLabel=function(){Qe(this.getLabel())?gL(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),r.prototype.refreshLabel.call(this)},t.prototype.setAriaLabel=function(e){return Sy(this.eWrapper,e),this},t.prototype.setInputWidth=function(e){return O0(this.eWrapper,e),this},t.prototype.getFocusableElement=function(){return this.eWrapper},uA([ut("eLabel")],t.prototype,"eLabel",void 0),uA([ut("eWrapper")],t.prototype,"eWrapper",void 0),uA([ut("eDisplayField")],t.prototype,"eDisplayField",void 0),uA([ut("eIcon")],t.prototype,"eIcon",void 0),t}(Mw),O7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),W2=function(r){function t(e){void 0===e&&(e="default");var n=r.call(this,'<div class="ag-list ag-'+e+'-list" role="listbox"></div>')||this;return n.cssIdentifier=e,n.options=[],n.itemEls=[],n}return O7(t,r),t.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){var n=e.key;switch(n){case Fe.ENTER:if(this.highlightedEl){var i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}else this.setValue(this.getValue());break;case Fe.DOWN:case Fe.UP:var o=n===Fe.DOWN,s=void 0;if(e.preventDefault(),this.highlightedEl){var d=this.itemEls.indexOf(this.highlightedEl)+(o?1:-1);d=Math.min(Math.max(d,0),this.itemEls.length-1),s=this.itemEls[d]}else s=this.itemEls[o?0:this.itemEls.length-1];this.highlightItem(s)}},t.prototype.addOptions=function(e){var n=this;return e.forEach(function(i){return n.addOption(i)}),this},t.prototype.addOption=function(e){var n=e.value,o=th(e.text||n);return this.options.push({value:n,text:o}),this.renderOption(n,o),this.updateIndices(),this},t.prototype.updateIndices=function(){var e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(function(n,i){yL(n,i+1),vL(n,e.length)})},t.prototype.renderOption=function(e,n){var i=this,o=document.createElement("div");Ko(o,"option"),o.classList.add("ag-list-item","ag-"+this.cssIdentifier+"-list-item"),o.innerHTML="<span>"+n+"</span>",o.tabIndex=-1,this.itemEls.push(o),this.addManagedListener(o,"mouseover",function(){return i.highlightItem(o)}),this.addManagedListener(o,"mouseleave",function(){return i.clearHighlighted()}),this.addManagedListener(o,"click",function(){return i.setValue(e)}),this.getGui().appendChild(o)},t.prototype.setValue=function(e,n){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(),this;var i=this.options.findIndex(function(s){return s.value===e});if(-1!==i){var o=this.options[i];this.value=o.value,this.displayValue=null!=o.text?o.text:o.value,this.highlightItem(this.itemEls[i]),n||this.fireChangeEvent()}return this},t.prototype.setValueByIndex=function(e){return this.setValue(this.options[e].value)},t.prototype.getValue=function(){return this.value},t.prototype.getDisplayValue=function(){return this.displayValue},t.prototype.refreshHighlighted=function(){var e=this;this.clearHighlighted();var n=this.options.findIndex(function(i){return i.value===e.value});-1!==n&&this.highlightItem(this.itemEls[n])},t.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},t.prototype.highlightItem=function(e){e.offsetParent&&(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(t.ACTIVE_CLASS),Ow(this.highlightedEl,!0),this.highlightedEl.focus())},t.prototype.clearHighlighted=function(){!this.highlightedEl||!this.highlightedEl.offsetParent||(this.highlightedEl.classList.remove(t.ACTIVE_CLASS),Ow(this.highlightedEl,!1),this.highlightedEl=null)},t.prototype.fireChangeEvent=function(){this.dispatchEvent({type:Mw.EVENT_CHANGED}),this.fireItemSelected()},t.prototype.fireItemSelected=function(){this.dispatchEvent({type:t.EVENT_ITEM_SELECTED})},t.EVENT_ITEM_SELECTED="selectedItem",t.ACTIVE_CLASS="ag-active-item",function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"init",null),t}(Rn),A7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),$2=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},cA=function(r){function t(e){return r.call(this,e,"ag-select","smallDown","listbox")||this}return A7(t,r),t.prototype.init=function(){var e=this;this.listComponent=this.createBean(new W2("select")),this.listComponent.setParentComponent(this),this.eWrapper.tabIndex=0,this.listComponent.addManagedListener(this.listComponent,W2.EVENT_ITEM_SELECTED,function(){e.hideList&&e.hideList(),e.dispatchEvent({type:t.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,Mw.EVENT_CHANGED,function(){e.setValue(e.listComponent.getValue(),!1,!0),e.hideList&&e.hideList()})},t.prototype.showPicker=function(){var e=this,n=this.listComponent.getGui(),i=this.gridOptionsService.getDocument(),o=this.addManagedListener(i.body,"wheel",function(f){!n.contains(f.target)&&e.hideList&&e.hideList()}),s=this.addManagedListener(n,"focusout",function(f){!n.contains(f.relatedTarget)&&e.hideList&&e.hideList()}),a=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:n,closeOnEsc:!0,closedCallback:function(){e.hideList=null,e.isPickerDisplayed=!1,s(),o(),e.isAlive()&&(fc(e.eWrapper,!1),e.getFocusableElement().focus())},ariaLabel:a("ariaLabelSelectField","Select Field")});return d&&(this.hideList=d.hideFunc),this.isPickerDisplayed=!0,O0(n,oA(this.eWrapper)),fc(this.eWrapper,!0),n.style.maxHeight=D0(this.popupService.getPopupParent())+"px",n.style.position="absolute",this.popupService.positionPopupByComponent({type:"ag-list",eventSource:this.eWrapper,ePopup:n,position:"under",keepWithinBounds:!0}),this.listComponent.refreshHighlighted(),this.listComponent},t.prototype.addOptions=function(e){var n=this;return e.forEach(function(i){return n.addOption(i)}),this},t.prototype.addOption=function(e){return this.listComponent.addOption(e),this},t.prototype.setValue=function(e,n,i){return this.value===e?this:(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),r.prototype.setValue.call(this,e,n)))},t.prototype.destroy=function(){this.hideList&&this.hideList(),this.destroyBean(this.listComponent),r.prototype.destroy.call(this)},t.EVENT_ITEM_SELECTED="selectedItem",$2([F("popupService")],t.prototype,"popupService",void 0),$2([rt],t.prototype,"init",null),t}(R7),P7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),XL=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Zf=function(r){function t(e,n,i,o){void 0===i&&(i="text"),void 0===o&&(o="input");var s=r.call(this,e,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+o+' ref="eInput" class="ag-input-field-input"></'+o+">\n                </div>\n            </div>",n)||this;return s.inputType=i,s.displayFieldTag=o,s}return P7(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add(this.className+"-label"),this.eWrapper.classList.add(this.className+"-input-wrapper"),this.eInput.classList.add(this.className+"-input"),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var e=this.config,n=e.width,i=e.value;null!=n&&this.setWidth(n),null!=i&&this.setValue(i),this.addInputListeners()},t.prototype.refreshLabel=function(){Qe(this.getLabel())?gL(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),r.prototype.refreshLabel.call(this)},t.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(n){return e.setValue(n.target.value)})},t.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},t.prototype.getInputElement=function(){return this.eInput},t.prototype.setInputWidth=function(e){return O0(this.eWrapper,e),this},t.prototype.setInputName=function(e){return this.getInputElement().setAttribute("name",e),this},t.prototype.getFocusableElement=function(){return this.eInput},t.prototype.setMaxLength=function(e){return this.eInput.maxLength=e,this},t.prototype.setInputPlaceholder=function(e){return A0(this.eInput,"placeholder",e),this},t.prototype.setInputAriaLabel=function(e){return Sy(this.eInput,e),this},t.prototype.setDisabled=function(e){return Aw(this.eInput,e),r.prototype.setDisabled.call(this,e)},XL([ut("eLabel")],t.prototype,"eLabel",void 0),XL([ut("eWrapper")],t.prototype,"eWrapper",void 0),XL([ut("eInput")],t.prototype,"eInput",void 0),t}(Mw),N7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),N0=function(r){function t(e,n,i){void 0===n&&(n="ag-checkbox"),void 0===i&&(i="checkbox");var o=r.call(this,e,n,i)||this;return o.labelAlignment="right",o.selected=!1,o.readOnly=!1,o.passive=!1,o}return N7(t,r),t.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},t.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},t.prototype.setPassive=function(e){this.passive=e},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.setReadOnly=function(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e},t.prototype.setDisabled=function(e){return this.eWrapper.classList.toggle("ag-disabled",e),r.prototype.setDisabled.call(this,e)},t.prototype.toggle=function(){if(!this.eInput.disabled){var e=this.isSelected(),n=this.getNextValue();this.passive?this.dispatchChange(n,e):this.setValue(n)}},t.prototype.getValue=function(){return this.isSelected()},t.prototype.setValue=function(e,n){return this.refreshSelectedClass(e),this.setSelected(e,n),this},t.prototype.setName=function(e){return this.getInputElement().name=e,this},t.prototype.isSelected=function(){return this.selected},t.prototype.setSelected=function(e,n){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,n||this.dispatchChange(this.selected,this.previousValue))},t.prototype.dispatchChange=function(e,n,i){this.dispatchEvent({type:t.EVENT_CHANGED,selected:e,previousValue:n,event:i});var o=this.getInputElement();this.eventService.dispatchEvent({type:V.EVENT_CHECKBOX_CHANGED,id:o.id,name:o.name,selected:e,previousValue:n})},t.prototype.onCheckboxClick=function(e){if(!this.passive&&!this.eInput.disabled){var n=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,n,e)}},t.prototype.refreshSelectedClass=function(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)},t}(Zf),M7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),z2=function(r){function t(e){return r.call(this,e,"ag-radio-button","radio")||this}return M7(t,r),t.prototype.isSelected=function(){return this.eInput.checked},t.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},t.prototype.addInputListeners=function(){r.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,V.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},t.prototype.onChange=function(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)},t}(N0),x7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),F7=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},ek=function(){function r(t,e){this.localeService=t,this.optionsFactory=e}return r.prototype.getModelAsString=function(t){var e=this;if(!t)return null;var n=null!=t.operator,i=this.localeService.getLocaleTextFunc();if(n){var o=t,s=o.conditions;s||(s=[o.condition1,o.condition2]);var f=s.map(function(W){return e.getModelAsString(W)}),g="AND"===o.operator?"andCondition":"orCondition";return f.join(" "+i(g,G2[g])+" ")}if(t.type===gi.BLANK||t.type===gi.NOT_BLANK)return i(t.type,t.type);var C=t,E=this.optionsFactory.getCustomOption(C.type),T=E||{},I=T.displayKey,M=T.displayName;return I&&M&&0===T.numberOfInputs?(i(I,M),M):this.conditionToString(C,E)},r}(),gi=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.eTypes=[],e.eJoinOperatorPanels=[],e.eJoinOperatorsAnd=[],e.eJoinOperatorsOr=[],e.eConditionBodies=[],e.listener=function(){return e.onUiChanged()},e.lastUiCompletePosition=null,e.joinOperatorId=0,e}return x7(t,r),t.prototype.getNumberOfInputs=function(e){var n=this.optionsFactory.getCustomOption(e);return n?n.numberOfInputs??1:e&&[t.EMPTY,t.NOT_BLANK,t.BLANK].indexOf(e)>=0?0:e===t.IN_RANGE?2:1},t.prototype.onFloatingFilterChanged=function(e,n){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(n),this.onUiChanged(!0)},t.prototype.setTypeFromFloatingFilter=function(e){var n=this;this.eTypes.forEach(function(i,o){i.setValue(0===o?e:n.optionsFactory.getDefaultOption(),!0)})},t.prototype.getModelFromUi=function(){var e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]},t.prototype.getConditionTypes=function(){return this.eTypes.map(function(e){return e.getValue()})},t.prototype.getConditionType=function(e){return this.eTypes[e].getValue()},t.prototype.getJoinOperator=function(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"},t.prototype.areModelsEqual=function(e,n){var i=this;if(!e&&!n)return!0;if(!e&&n||e&&!n)return!1;var o=!e.operator,s=!n.operator;return!(!o&&s||o&&!s)&&(o?this.areSimpleModelsEqual(e,n):e.operator===n.operator&&$g(e.conditions,n.conditions,function(T,I){return i.areSimpleModelsEqual(T,I)}))},t.prototype.setModelIntoUi=function(e){var n=this;if(e.operator){var o=e;o.conditions||(o.conditions=[o.condition1,o.condition2]);var s=this.validateAndUpdateConditions(o.conditions),a=this.getNumConditions();if(s<a)this.removeConditionsAndOperators(s);else if(s>a)for(var d=a;d<s;d++)this.createJoinOperatorPanel(),this.createOption();var f="OR"===o.operator;this.eJoinOperatorsAnd.forEach(function(C){return C.setValue(!f,!0)}),this.eJoinOperatorsOr.forEach(function(C){return C.setValue(f,!0)}),o.conditions.forEach(function(C,E){n.eTypes[E].setValue(C.type,!0),n.setConditionIntoUi(C,E)})}else{var g=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(g.type,!0),this.setConditionIntoUi(g,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),ta.resolve()},t.prototype.validateAndUpdateConditions=function(e){var n=e.length;return n>this.maxNumConditions&&(e.splice(this.maxNumConditions),Yn(function(){return console.warn('AG Grid: Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.')},"simpleFilterSetModelMaxNumConditions"),n=this.maxNumConditions),n},t.prototype.doesFilterPass=function(e){var i,n=this,o=this.getModel();if(null==o)return!0;var s=o.operator,a=[];return s?a.push.apply(a,function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(F7(arguments[t]));return r}(null!==(i=o.conditions)&&void 0!==i?i:[])):a.push(o),a[s&&"OR"===s?"some":"every"](function(g){return n.individualConditionPasses(e,g)})},t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new k2,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createOption(),this.createMissingConditionsAndOperators()},t.prototype.setNumConditions=function(e){var n,i;null!=e.suppressAndOrCondition&&Yn(function(){return console.warn('AG Grid: Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.')},"simpleFilterSuppressAndOrCondition"),null!=e.alwaysShowBothConditions&&Yn(function(){return console.warn('AG Grid: Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.')},"simpleFilterAlwaysShowBothConditions"),this.maxNumConditions=null!==(n=e.maxNumConditions)&&void 0!==n?n:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(Yn(function(){return console.warn('AG Grid: "filterParams.maxNumConditions" must be greater than or equal to zero.')},"simpleFilterMaxNumConditions"),this.maxNumConditions=1),this.numAlwaysVisibleConditions=null!==(i=e.numAlwaysVisibleConditions)&&void 0!==i?i:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(Yn(function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.')},"simpleFilterNumAlwaysVisibleConditions"),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(Yn(function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".')},"simpleFilterNumAlwaysVisibleGreaterThanMaxNumConditions"),this.numAlwaysVisibleConditions=this.maxNumConditions)},t.prototype.createOption=function(){var e=this,n=this.createManagedBean(new cA);this.eTypes.push(n),n.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(n.getGui());var i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(n),this.resetType(n);var o=this.getNumConditions()-1;this.forEachPositionInput(o,function(s){return e.resetInput(s)}),this.addChangedListeners(n,o)},t.prototype.createJoinOperatorPanel=function(){var e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");var n=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);var o=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(n,o,s),this.resetJoinOperatorOr(i,o,s),this.isReadOnly()||(n.onValueChange(this.listener),i.onValueChange(this.listener))},t.prototype.createJoinOperator=function(e,n,i){var o=this.createManagedBean(new z2);return e.push(o),o.addCssClass("ag-filter-condition-operator"),o.addCssClass("ag-filter-condition-operator-"+i),n.appendChild(o.getGui()),o},t.prototype.getDefaultJoinOperator=function(e){return"AND"===e||"OR"===e?e:"AND"},t.prototype.putOptionsIntoDropdown=function(e){var n=this,i=this.optionsFactory.getFilterOptions();i.forEach(function(o){var s="string"==typeof o?n.createBoilerplateListOption(o):n.createCustomListOption(o);e.addOption(s)}),e.setDisabled(i.length<=1)},t.prototype.createBoilerplateListOption=function(e){return{value:e,text:this.translate(e)}},t.prototype.createCustomListOption=function(e){var n=e.displayKey,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:n,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(n)}},t.prototype.isAllowTwoConditions=function(){return this.maxNumConditions>=2},t.prototype.createBodyTemplate=function(){return""},t.prototype.getCssIdentifier=function(){return"simple-filter"},t.prototype.updateUiVisibility=function(){var e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)},t.prototype.updateNumConditions=function(){for(var e,n=-1,i=!0,o=0;o<this.getNumConditions();o++)this.isConditionUiComplete(o)?n=o:i=!1;if(this.shouldAddNewConditionAtEnd(i))this.createJoinOperatorPanel(),this.createOption();else{var s=null!==(e=this.lastUiCompletePosition)&&void 0!==e?e:this.getNumConditions()-2;if(n<s){this.removeConditionsAndOperators(s+1);var a=n+1,d=s-a;d>0&&this.removeConditionsAndOperators(a,d),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=n},t.prototype.updateConditionStatusesAndValues=function(e,n){var i=this;this.eTypes.forEach(function(s,a){var d=i.isConditionDisabled(a,e);(1===a?[s,i.eJoinOperatorPanels[0],i.eJoinOperatorsAnd[0],i.eJoinOperatorsOr[0]]:[s]).forEach(function(g){g instanceof Zf||g instanceof cA?g.setDisabled(d):Aw(g,d)})}),this.eConditionBodies.forEach(function(s,a){Wn(s,i.isConditionBodyVisible(a))});var o="OR"===(n??this.getJoinOperator());this.eJoinOperatorsAnd.forEach(function(s,a){s.setValue(!o,!0)}),this.eJoinOperatorsOr.forEach(function(s,a){s.setValue(o,!0)}),this.forEachInput(function(s,a,d,f){i.setElementDisplayed(s,a<f),i.setElementDisabled(s,i.isConditionDisabled(d,e))}),this.resetPlaceholder()},t.prototype.shouldAddNewConditionAtEnd=function(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()},t.prototype.removeConditionsAndOperators=function(e,n){if(!(e>=this.getNumConditions())){this.removeComponents(this.eTypes,e,n),this.removeElements(this.eConditionBodies,e,n),this.removeValueElements(e,n);var i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,n),this.removeComponents(this.eJoinOperatorsAnd,i,n),this.removeComponents(this.eJoinOperatorsOr,i,n)}},t.prototype.removeElements=function(e,n,i){this.removeItems(e,n,i).forEach(function(s){return Yf(s)})},t.prototype.removeComponents=function(e,n,i){var o=this;this.removeItems(e,n,i).forEach(function(a){Yf(a.getGui()),o.destroyBean(a)})},t.prototype.removeItems=function(e,n,i){return null==i?e.splice(n):e.splice(n,i)},t.prototype.afterGuiAttached=function(e){if(r.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!e||!e.suppressFocus&&!this.isReadOnly()){var n=this.getInputs(0)[0];if(!n)return;n instanceof Zf&&n.getInputElement().focus()}},t.prototype.afterGuiDetached=function(){r.prototype.afterGuiDetached.call(this);var e=this.getModel();this.areModelsEqual(e,this.getModelFromUi())||this.resetUiToActiveModel(e);for(var n=-1,i=-1,o=!1,s=this.getJoinOperator(),a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))-1===n&&(n=a,i=a);else{var f=a<n;(a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1)||f)&&(this.removeConditionsAndOperators(a,1),o=!0,f&&i--)}var g=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),g=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),g=!0),g&&this.updateConditionStatusesAndValues(i,s),o&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i},t.prototype.getPlaceholderText=function(e,n){var i=this.translate(e);if(KI(this.filterPlaceholder)){var o=this.filterPlaceholder,s=this.eTypes[n].getValue();i=o({filterOptionKey:s,filterOption:this.translate(s),placeholder:i})}else"string"==typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i},t.prototype.resetPlaceholder=function(){var e=this,n=this.localeService.getLocaleTextFunc();this.forEachInput(function(i,o,s,a){if(i instanceof Zf){var d=0===o&&a>1?"inRangeStart":0===o?"filterOoo":"inRangeEnd",f=0===o&&a>1?n("ariaFilterFromValue","Filter from value"):0===o?n("ariaFilterValue","Filter Value"):n("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(e.getPlaceholderText(d,s)),i.setInputAriaLabel(f)}})},t.prototype.setElementValue=function(e,n){e instanceof Zf&&e.setValue(null!=n?String(n):null,!0)},t.prototype.setElementDisplayed=function(e,n){e instanceof Rn&&Wn(e.getGui(),n)},t.prototype.setElementDisabled=function(e,n){e instanceof Rn&&Aw(e.getGui(),n)},t.prototype.attachElementOnChange=function(e,n){e instanceof Zf&&e.onValueChange(n)},t.prototype.forEachInput=function(e){var n=this;this.getConditionTypes().forEach(function(i,o){n.forEachPositionTypeInput(o,i,e)})},t.prototype.forEachPositionInput=function(e,n){var i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,n)},t.prototype.forEachPositionTypeInput=function(e,n,i){for(var o=this.getNumberOfInputs(n),s=this.getInputs(e),a=0;a<s.length;a++){var d=s[a];null!=d&&i(d,a,e,o)}},t.prototype.isConditionDisabled=function(e,n){return!!this.isReadOnly()||0!==e&&e>n+1},t.prototype.isConditionBodyVisible=function(e){var n=this.getConditionType(e);return this.getNumberOfInputs(n)>0},t.prototype.isConditionUiComplete=function(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===t.EMPTY||this.getValues(e).some(function(i){return null==i}))},t.prototype.getNumConditions=function(){return this.eTypes.length},t.prototype.getUiCompleteConditions=function(){for(var e=[],n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)&&e.push(this.createCondition(n));return e},t.prototype.createMissingConditionsAndOperators=function(){if(!this.isReadOnly())for(var e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()},t.prototype.resetUiToDefaults=function(e){var n=this;return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(function(i){return n.resetType(i)}),this.eJoinOperatorsAnd.forEach(function(i,o){return n.resetJoinOperatorAnd(i,o,n.joinOperatorId+o)}),this.eJoinOperatorsOr.forEach(function(i,o){return n.resetJoinOperatorOr(i,o,n.joinOperatorId+o)}),this.joinOperatorId++,this.forEachInput(function(i){return n.resetInput(i)}),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),ta.resolve()},t.prototype.resetType=function(e){var i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly())},t.prototype.resetJoinOperatorAnd=function(e,n,i){this.resetJoinOperator(e,n,this.isDefaultOperator("AND"),this.translate("andCondition"),i)},t.prototype.resetJoinOperatorOr=function(e,n,i){this.resetJoinOperator(e,n,this.isDefaultOperator("OR"),this.translate("orCondition"),i)},t.prototype.resetJoinOperator=function(e,n,i,o,s){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName("ag-simple-filter-and-or-"+this.getCompId()+"-"+s).setLabel(o),n)},t.prototype.updateJoinOperatorsDisabled=function(){var e=this;this.eJoinOperatorsAnd.forEach(function(n,i){return e.updateJoinOperatorDisabled(n,i)}),this.eJoinOperatorsOr.forEach(function(n,i){return e.updateJoinOperatorDisabled(n,i)})},t.prototype.updateJoinOperatorDisabled=function(e,n){e.setDisabled(this.isReadOnly()||n>0)},t.prototype.resetInput=function(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())},t.prototype.setConditionIntoUi=function(e,n){var i=this,o=this.mapValuesFromModel(e);this.forEachInput(function(s,a,d,f){d===n&&i.setElementValue(s,null!=o[a]?o[a]:null)})},t.prototype.setValueFromFloatingFilter=function(e){var n=this;this.forEachInput(function(i,o,s,a){n.setElementValue(i,0===o&&0===s?e:null)})},t.prototype.isDefaultOperator=function(e){return e===this.defaultJoinOperator},t.prototype.addChangedListeners=function(e,n){var i=this;this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(n,function(o){i.attachElementOnChange(o,i.listener)}))},t.prototype.individualConditionPasses=function(e,n){var i=this.getCellValue(e.node),o=this.mapValuesFromModel(n),s=this.optionsFactory.getCustomOption(n.type);return this.evaluateCustomFilter(s,o,i)??(null==i?this.evaluateNullValue(n.type):this.evaluateNonNullValue(o,i,n,e))},t.prototype.evaluateCustomFilter=function(e,n,i){if(null!=e){var o=e.predicate;if(null!=o&&!n.some(function(s){return null==s}))return o(n,i)}},t.prototype.isBlank=function(e){return null==e||"string"==typeof e&&0===e.trim().length},t.EMPTY="empty",t.BLANK="blank",t.NOT_BLANK="notBlank",t.EQUALS="equals",t.NOT_EQUAL="notEqual",t.LESS_THAN="lessThan",t.LESS_THAN_OR_EQUAL="lessThanOrEqual",t.GREATER_THAN="greaterThan",t.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",t.IN_RANGE="inRange",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.STARTS_WITH="startsWith",t.ENDS_WITH="endsWith",t}(lA),k7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),qo=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return k7(t,r),t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.scalarFilterParams=e},t.prototype.evaluateNullValue=function(e){switch(e){case t.EQUALS:case t.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case t.GREATER_THAN:case t.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case t.LESS_THAN:case t.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case t.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case t.BLANK:return!0;case t.NOT_BLANK:return!1}return!1},t.prototype.evaluateNonNullValue=function(e,n,i){var o=this.comparator(),s=null!=e[0]?o(e[0],n):0;switch(i.type){case t.EQUALS:return 0===s;case t.NOT_EQUAL:return 0!==s;case t.GREATER_THAN:return s>0;case t.GREATER_THAN_OR_EQUAL:return s>=0;case t.LESS_THAN:return s<0;case t.LESS_THAN_OR_EQUAL:return s<=0;case t.IN_RANGE:var a=o(e[1],n);return this.scalarFilterParams.inRangeInclusive?s>=0&&a<=0:s>0&&a<0;case t.BLANK:return this.isBlank(n);case t.NOT_BLANK:return!this.isBlank(n);default:return console.warn('AG Grid: Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},t}(gi),K2=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),tk=function(){return tk=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},tk.apply(this,arguments)},q2=1e3,Y2=1/0,Z2=function(r){function t(e,n,i){var o=r.call(this,n,i)||this;return o.dateFilterParams=e,o}return K2(t,r),t.prototype.conditionToString=function(e,n){var i=e.type,s=i==gi.IN_RANGE||2===(n||{}).numberOfInputs,a=Kg(e.dateFrom),d=Kg(e.dateTo),f=this.dateFilterParams.inRangeFloatingFilterDateFormat;return s?(null!==a?nA(a,f):"null")+"-"+(null!==d?nA(d,f):"null"):null!=a?nA(a,f):""+i},t}(ek),Q2=function(r){function t(){var e=r.call(this,"dateFilter")||this;return e.eConditionPanelsFrom=[],e.eConditionPanelsTo=[],e.dateConditionFromComps=[],e.dateConditionToComps=[],e.minValidYear=q2,e.maxValidYear=Y2,e}return K2(t,r),t.prototype.afterGuiAttached=function(e){r.prototype.afterGuiAttached.call(this,e),this.dateConditionFromComps[0].afterGuiAttached(e)},t.prototype.mapValuesFromModel=function(e){var n=e||{},i=n.dateFrom,o=n.dateTo,s=n.type;return[i&&Kg(i)||null,o&&Kg(o)||null].slice(0,this.getNumberOfInputs(s))},t.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},t.prototype.defaultComparator=function(e,n){return null==n||n<e?-1:n>e?1:0},t.prototype.setParams=function(e){this.dateFilterParams=e,r.prototype.setParams.call(this,e);var n=function(i,o){if(null!=e[i]){if(!isNaN(e[i]))return null==e[i]?o:Number(e[i]);console.warn("AG Grid: DateFilter "+i+" is not a number")}return o};this.minValidYear=n("minValidYear",q2),this.maxValidYear=n("maxValidYear",Y2),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.filterModelFormatter=new Z2(this.dateFilterParams,this.localeService,this.optionsFactory)},t.prototype.createDateCompWrapper=function(e){var n=this,i=new L2(this.getContext(),this.userComponentFactory,{onDateChanged:function(){return n.onUiChanged()},filterParams:this.dateFilterParams},e);return this.addDestroyFunc(function(){return i.destroy()}),i},t.prototype.setElementValue=function(e,n){e.setDate(n)},t.prototype.setElementDisplayed=function(e,n){e.setDisplayed(n)},t.prototype.setElementDisabled=function(e,n){e.setDisabled(n)},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueElement=function(){var e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e},t.prototype.createFromToElement=function(e,n,i,o){var s=document.createElement("div");s.classList.add("ag-filter-"+o),s.classList.add("ag-filter-date-"+o),n.push(s),e.appendChild(s),i.push(this.createDateCompWrapper(s))},t.prototype.removeValueElements=function(e,n){this.removeDateComps(this.dateConditionFromComps,e,n),this.removeDateComps(this.dateConditionToComps,e,n),this.removeItems(this.eConditionPanelsFrom,e,n),this.removeItems(this.eConditionPanelsTo,e,n)},t.prototype.removeDateComps=function(e,n,i){this.removeItems(e,n,i).forEach(function(s){return s.destroy()})},t.prototype.isConditionUiComplete=function(e){var n=this;if(!r.prototype.isConditionUiComplete.call(this,e))return!1;var o=!0;return this.forEachInput(function(s,a,d,f){d!==e||!o||a>=f||(o=o&&function(s){return null!=s&&s.getUTCFullYear()>=n.minValidYear&&s.getUTCFullYear()<=n.maxValidYear}(s.getDate()))}),o},t.prototype.areSimpleModelsEqual=function(e,n){return e.dateFrom===n.dateFrom&&e.dateTo===n.dateTo&&e.type===n.type},t.prototype.getFilterType=function(){return"date"},t.prototype.createCondition=function(e){var n=this.getConditionType(e),i={},o=this.getValues(e);return o.length>0&&(i.dateFrom=b0(o[0])),o.length>1&&(i.dateTo=b0(o[1])),tk({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:n},i)},t.prototype.resetPlaceholder=function(){var e=this.localeService.getLocaleTextFunc(),n=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(function(o){o.setInputPlaceholder(n),o.setInputAriaLabel(i)})},t.prototype.getInputs=function(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]},t.prototype.getValues=function(e){var n=[];return this.forEachPositionInput(e,function(i,o,s,a){o<a&&n.push(i.getDate())}),n},t.prototype.getModelAsString=function(e){var n;return null!==(n=this.filterModelFormatter.getModelAsString(e))&&void 0!==n?n:""},t.DEFAULT_FILTER_OPTIONS=[qo.EQUALS,qo.GREATER_THAN,qo.LESS_THAN,qo.NOT_EQUAL,qo.IN_RANGE,qo.BLANK,qo.NOT_BLANK],function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([F("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(qo),V7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),J2=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return V7(t,r),t.prototype.getDefaultDebounceMs=function(){return 0},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.isEventFromFloatingFilter=function(e){return e&&e.afterFloatingFilter},t.prototype.isEventFromDataChange=function(e){return e?.afterDataChange},t.prototype.getLastType=function(){return this.lastType},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.setLastTypeFromModel=function(e){e?this.lastType=(e.operator?e.conditions[0]:e).type:this.lastType=this.optionsFactory.getDefaultOption()},t.prototype.canWeEditAfterModelFromParentFilter=function(e){return e?!e.operator&&this.isTypeEditable(e.type):this.isTypeEditable(this.lastType)},t.prototype.init=function(e){this.optionsFactory=new k2,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;var n=this.isTypeEditable(this.lastType);this.setEditable(n)},t.prototype.doesFilterHaveSingleInput=function(e){var i=(this.optionsFactory.getCustomOption(e)||{}).numberOfInputs;return null==i||1==i},t.prototype.isTypeEditable=function(e){var n=[gi.IN_RANGE,gi.EMPTY,gi.BLANK,gi.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&n.indexOf(e)<0},t}(Rn),H7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),nk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},B7=function(r){function t(){return r.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return H7(t,r),t.prototype.getDefaultFilterOptions=function(){return Q2.DEFAULT_FILTER_OPTIONS},t.prototype.init=function(e){r.prototype.init.call(this,e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent();var n=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(n("ariaDateFilterInput","Date Filter Input")),this.filterModelFormatter=new Z2(this.filterParams,this.localeService,this.optionsFactory)},t.prototype.setEditable=function(e){Wn(this.eDateWrapper,e),Wn(this.eReadOnlyText.getGui(),!e)},t.prototype.onParentModelChanged=function(e,n){if(!this.isEventFromFloatingFilter(n)&&!this.isEventFromDataChange(n)){r.prototype.setLastTypeFromModel.call(this,e);var i=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);this.setEditable(i),i?(this.dateComp.setDate(e?Kg(e.dateFrom):null),this.eReadOnlyText.setValue("")):(this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null))}},t.prototype.onDateChanged=function(){var e=this,i=b0(this.dateComp.getDate());this.params.parentFilterInstance(function(o){if(o){var s=Kg(i);o.onFloatingFilterChanged(e.getLastType()||null,s)}})},t.prototype.createDateComponent=function(){var e=this,n=lA.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),i={onDateChanged:Jd(this.onDateChanged.bind(this),n),filterParams:this.params.column.getColDef().filterParams};this.dateComp=new L2(this.getContext(),this.userComponentFactory,i,this.eDateWrapper),this.addDestroyFunc(function(){return e.dateComp.destroy()})},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},nk([F("userComponentFactory")],t.prototype,"userComponentFactory",void 0),nk([ut("eReadOnlyText")],t.prototype,"eReadOnlyText",void 0),nk([ut("eDateWrapper")],t.prototype,"eDateWrapper",void 0),t}(J2),U7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),W7=function(r){function t(){return r.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return U7(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var n=this,i=this.gridOptionsService.getDocument(),o=this.eDateInput.getInputElement(),s=this.shouldUseBrowserDatePicker(e);s&&(o.type="date");var a=s&&nh();this.addManagedListener(o,"mousedown",function(){n.eDateInput.isDisabled()||a||o.focus()}),this.addManagedListener(o,"input",function(C){C.target===i.activeElement&&(n.eDateInput.isDisabled()||e.onDateChanged())});var d=e.filterParams||{},f=d.minValidYear,g=d.maxValidYear;f&&(o.min=f+"-01-01"),g&&(o.max=g+"-12-31")},t.prototype.getDate=function(){return Kg(this.eDateInput.getValue())},t.prototype.setDate=function(e){this.eDateInput.setValue(b0(e,!1))},t.prototype.setInputPlaceholder=function(e){this.eDateInput.setInputPlaceholder(e)},t.prototype.setDisabled=function(e){this.eDateInput.setDisabled(e)},t.prototype.afterGuiAttached=function(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()},t.prototype.shouldUseBrowserDatePicker=function(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:S0()||IL()||nh()&&OL()>=14.1},function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([ut("eDateInput")],t.prototype,"eDateInput",void 0),t}(Rn),$7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),xw=function(r){function t(e,n,i){return void 0===n&&(n="ag-text-field"),void 0===i&&(i="text"),r.call(this,e,n,i)||this}return $7(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},t.prototype.setValue=function(e,n){var i=r.prototype.setValue.call(this,e,n);return this.eInput.value!==e&&(this.eInput.value=Qe(e)?e:""),i},t.prototype.preventDisallowedCharacters=function(){var e=new RegExp("["+this.config.allowedCharPattern+"]");this.addManagedListener(this.eInput,"keypress",function(i){i.ctrlKey||i.metaKey||i.key&&!e.test(i.key)&&i.preventDefault()}),this.addManagedListener(this.eInput,"paste",function(i){var o,s=null===(o=i.clipboardData)||void 0===o?void 0:o.getData("text");s&&s.split("").some(function(a){return!e.test(a)})&&i.preventDefault()})},t}(Zf),z7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),rk=function(r){function t(e){return r.call(this,e,"ag-number-field","number")||this}return z7(t,r),t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var n=parseFloat(e.eInput.value),i=isNaN(n)?"":e.normalizeValue(n.toString());e.value!==i&&e.setValue(i)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},t.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},t.prototype.normalizeValue=function(e){if(""===e)return"";this.precision&&(e=this.adjustPrecision(e));var n=parseFloat(e);return null!=this.min&&n<this.min?e=this.min.toString():null!=this.max&&n>this.max&&(e=this.max.toString()),e},t.prototype.adjustPrecision=function(e){if(this.precision){var n=parseFloat(e).toFixed(this.precision);e=parseFloat(n).toString()}return e},t.prototype.setMin=function(e){return this.min===e||(this.min=e,A0(this.eInput,"min",e)),this},t.prototype.setMax=function(e){return this.max===e||(this.max=e,A0(this.eInput,"max",e)),this},t.prototype.setPrecision=function(e){return this.precision=e,this},t.prototype.setStep=function(e){return this.step===e||(this.step=e,A0(this.eInput,"step",e)),this},t.prototype.setValue=function(e,n){return null!=e&&(e=this.adjustPrecision(e))!=this.normalizeValue(e)?this:r.prototype.setValue.call(this,e,n)},t}(xw),X2=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),eW=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return X2(t,r),t.prototype.conditionToString=function(e,n){return e.type==gi.IN_RANGE||2===(n||{}).numberOfInputs?e.filter+"-"+e.filterTo:null!=e.filter?""+e.filter:""+e.type},t}(ek);function tW(r){return(r??{}).allowedCharPattern||(S0()?null:"\\d\\-\\.")}var nW=function(r){function t(){var e=r.call(this,"numberFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return X2(t,r),t.prototype.mapValuesFromModel=function(e){var n=e||{},o=n.filterTo,s=n.type;return[this.processValue(n.filter),this.processValue(o)].slice(0,this.getNumberOfInputs(s))},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.comparator=function(){return function(e,n){return e===n?0:e<n?1:-1}},t.prototype.setParams=function(e){this.numberFilterParams=e,r.prototype.setParams.call(this,e),this.filterModelFormatter=new eW(this.localeService,this.optionsFactory)},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueElement=function(){var e=tW(this.numberFilterParams),n=document.createElement("div");return n.classList.add("ag-filter-body"),Ko(n,"presentation"),this.createFromToElement(n,this.eValuesFrom,"from",e),this.createFromToElement(n,this.eValuesTo,"to",e),n},t.prototype.createFromToElement=function(e,n,i,o){var s=this.createManagedBean(o?new xw({allowedCharPattern:o}):new rk);s.addCssClass("ag-filter-"+i),s.addCssClass("ag-filter-filter"),n.push(s),e.appendChild(s.getGui())},t.prototype.removeValueElements=function(e,n){this.removeComponents(this.eValuesFrom,e,n),this.removeComponents(this.eValuesTo,e,n)},t.prototype.getValues=function(e){var n=this,i=[];return this.forEachPositionInput(e,function(o,s,a,d){s<d&&i.push(n.processValue(n.stringToFloat(o.getValue())))}),i},t.prototype.areSimpleModelsEqual=function(e,n){return e.filter===n.filter&&e.filterTo===n.filterTo&&e.type===n.type},t.prototype.getFilterType=function(){return"number"},t.prototype.processValue=function(e){return null==e||isNaN(e)?null:e},t.prototype.stringToFloat=function(e){if("number"==typeof e)return e;var n=jg(e);return null!=n&&""===n.trim()&&(n=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(n):null==n||"-"===n.trim()?null:parseFloat(n)},t.prototype.createCondition=function(e){var n=this.getConditionType(e),i={filterType:this.getFilterType(),type:n},o=this.getValues(e);return o.length>0&&(i.filter=o[0]),o.length>1&&(i.filterTo=o[1]),i},t.prototype.getInputs=function(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]},t.prototype.getModelAsString=function(e){var n;return null!==(n=this.filterModelFormatter.getModelAsString(e))&&void 0!==n?n:""},t.DEFAULT_FILTER_OPTIONS=[qo.EQUALS,qo.NOT_EQUAL,qo.LESS_THAN,qo.LESS_THAN_OR_EQUAL,qo.GREATER_THAN,qo.GREATER_THAN_OR_EQUAL,qo.IN_RANGE,qo.BLANK,qo.NOT_BLANK],t}(qo),rW=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),dA=function(){return dA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},dA.apply(this,arguments)},iW=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return rW(t,r),t.prototype.conditionToString=function(e,n){return e.type==gi.IN_RANGE||2===(n||{}).numberOfInputs?e.filter+"-"+e.filterTo:null!=e.filter?""+e.filter:""+e.type},t}(ek),ik=function(r){function t(){var e=r.call(this,"textFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return rW(t,r),t.trimInput=function(e){var n=e&&e.trim();return""===n?e:n},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.setParams=function(e){this.textFilterParams=e,r.prototype.setParams.call(this,e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?t.DEFAULT_FORMATTER:t.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new iW(this.localeService,this.optionsFactory)},t.prototype.getTextMatcher=function(){var e=this.textFilterParams.textCustomComparator;return e?(tn.doOnce(function(){return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.")},"textCustomComparator.deprecated"),function(n){return e(n.filterOption,n.value,n.filterText)}):this.textFilterParams.textMatcher||t.DEFAULT_MATCHER},t.prototype.createCondition=function(e){var n=this.getConditionType(e),i={filterType:this.getFilterType(),type:n},o=this.getValues(e);return o.length>0&&(i.filter=o[0]),o.length>1&&(i.filterTo=o[1]),i},t.prototype.getFilterType=function(){return"text"},t.prototype.areSimpleModelsEqual=function(e,n){return e.filter===n.filter&&e.filterTo===n.filterTo&&e.type===n.type},t.prototype.getInputs=function(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]},t.prototype.getValues=function(e){var n=this,i=[];return this.forEachPositionInput(e,function(o,s,a,d){if(s<d){var f=jg(o.getValue()),g=(n.textFilterParams.trimInput?t.trimInput(f):f)||null;i.push(g),o.setValue(g,!0)}}),i},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueElement=function(){var e=document.createElement("div");return e.classList.add("ag-filter-body"),Ko(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e},t.prototype.createFromToElement=function(e,n,i){var o=this.createManagedBean(new xw);o.addCssClass("ag-filter-"+i),o.addCssClass("ag-filter-filter"),n.push(o),e.appendChild(o.getGui())},t.prototype.removeValueElements=function(e,n){this.removeComponents(this.eValuesFrom,e,n),this.removeComponents(this.eValuesTo,e,n)},t.prototype.mapValuesFromModel=function(e){var n=e||{};return[n.filter||null,n.filterTo||null].slice(0,this.getNumberOfInputs(n.type))},t.prototype.evaluateNullValue=function(e){return!!e&&[gi.NOT_EQUAL,gi.NOT_CONTAINS,gi.BLANK].indexOf(e)>=0},t.prototype.evaluateNonNullValue=function(e,n,i,o){var s=this,a=e.map(function(W){return s.formatter(W)})||[],d=this.formatter(n),f=this.textFilterParams,g=f.api,C=f.colDef,E=f.column,T=f.columnApi,I=f.context,M=f.textFormatter;if(i.type===gi.BLANK)return this.isBlank(n);if(i.type===gi.NOT_BLANK)return!this.isBlank(n);var k={api:g,colDef:C,column:E,columnApi:T,context:I,node:o.node,data:o.data,filterOption:i.type,value:d,textFormatter:M};return a.some(function(W){return s.matcher(dA(dA({},k),{filterText:W}))})},t.prototype.getModelAsString=function(e){var n;return null!==(n=this.filterModelFormatter.getModelAsString(e))&&void 0!==n?n:""},t.DEFAULT_FILTER_OPTIONS=[gi.CONTAINS,gi.NOT_CONTAINS,gi.EQUALS,gi.NOT_EQUAL,gi.STARTS_WITH,gi.ENDS_WITH,gi.BLANK,gi.NOT_BLANK],t.DEFAULT_FORMATTER=function(e){return e},t.DEFAULT_LOWERCASE_FORMATTER=function(e){return null==e?null:e.toString().toLowerCase()},t.DEFAULT_MATCHER=function(e){var i=e.value,o=e.filterText;if(null==o)return!1;switch(e.filterOption){case t.CONTAINS:return i.indexOf(o)>=0;case t.NOT_CONTAINS:return i.indexOf(o)<0;case t.EQUALS:return i===o;case t.NOT_EQUAL:return i!=o;case t.STARTS_WITH:return 0===i.indexOf(o);case t.ENDS_WITH:var s=i.lastIndexOf(o);return s>=0&&s===i.length-o.length;default:return!1}},t}(gi),oW=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ok=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},sW=function(r){function t(e){var n=r.call(this)||this;return n.params=e,n}return oW(t,r),t.prototype.setupGui=function(e){this.eFloatingFilterTextInput=this.createManagedBean(new xw(this.params.config)),this.eFloatingFilterTextInput.setInputAriaLabel(this.params.ariaLabel),e.appendChild(this.eFloatingFilterTextInput.getGui())},t.prototype.setEditable=function(e){this.eFloatingFilterTextInput.setDisabled(!e)},t.prototype.getValue=function(){return this.eFloatingFilterTextInput.getValue()},t.prototype.setValue=function(e,n){this.eFloatingFilterTextInput.setValue(e,n)},t.prototype.addValueChangedListener=function(e){var n=this.eFloatingFilterTextInput.getGui();this.addManagedListener(n,"input",e),this.addManagedListener(n,"keypress",e),this.addManagedListener(n,"keydown",e)},t}(Ye),aW=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return oW(t,r),t.prototype.postConstruct=function(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>\n        ')},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.onParentModelChanged=function(e,n){this.isEventFromFloatingFilter(n)||this.isEventFromDataChange(n)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))},t.prototype.init=function(e){this.params=e;var o=this.columnModel.getDisplayNameForColumn(e.column,"header",!0)+" "+this.localeService.getLocaleTextFunc()("ariaFilterInput","Filter Input");if(this.floatingFilterInputService=this.createFloatingFilterInputService(o),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer),r.prototype.init.call(this,e),this.applyActive=lA.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var s=lA.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),a=Jd(this.syncUpWithParentFilter.bind(this),s);this.floatingFilterInputService.addValueChangedListener(a)}},t.prototype.syncUpWithParentFilter=function(e){var n=this;if(!this.applyActive||e.key===Fe.ENTER){var o=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(o=ik.trimInput(o),this.floatingFilterInputService.setValue(o,!0)),this.params.parentFilterInstance(function(s){s&&s.onFloatingFilterChanged(n.getLastType()||null,o||null)})}},t.prototype.setEditable=function(e){this.floatingFilterInputService.setEditable(e)},ok([F("columnModel")],t.prototype,"columnModel",void 0),ok([ut("eFloatingFilterInputContainer")],t.prototype,"eFloatingFilterInputContainer",void 0),ok([rt],t.prototype,"postConstruct",null),t}(J2),lW=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),K7=function(r){function t(e){var n=r.call(this)||this;return n.params=e,n.numberInputActive=!0,n}return lW(t,r),t.prototype.setupGui=function(e){this.eFloatingFilterNumberInput=this.createManagedBean(new rk),this.eFloatingFilterTextInput=this.createManagedBean(new xw),this.eFloatingFilterTextInput.setDisabled(!0),this.eFloatingFilterNumberInput.setInputAriaLabel(this.params.ariaLabel),this.eFloatingFilterTextInput.setInputAriaLabel(this.params.ariaLabel),e.appendChild(this.eFloatingFilterNumberInput.getGui()),e.appendChild(this.eFloatingFilterTextInput.getGui())},t.prototype.setEditable=function(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)},t.prototype.getValue=function(){return this.getActiveInputElement().getValue()},t.prototype.setValue=function(e,n){this.getActiveInputElement().setValue(e,n)},t.prototype.getActiveInputElement=function(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput},t.prototype.addValueChangedListener=function(e){this.setupListeners(this.eFloatingFilterNumberInput.getGui(),e),this.setupListeners(this.eFloatingFilterTextInput.getGui(),e)},t.prototype.setupListeners=function(e,n){this.addManagedListener(e,"input",n),this.addManagedListener(e,"keypress",n),this.addManagedListener(e,"keydown",n)},t}(Ye),q7=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return lW(t,r),t.prototype.init=function(e){r.prototype.init.call(this,e),this.filterModelFormatter=new eW(this.localeService,this.optionsFactory)},t.prototype.getDefaultFilterOptions=function(){return nW.DEFAULT_FILTER_OPTIONS},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},t.prototype.createFloatingFilterInputService=function(e){var n=tW(this.params.filterParams);return this.createManagedBean(n?new sW({config:{allowedCharPattern:n},ariaLabel:e}):new K7({ariaLabel:e}))},t}(aW),Y7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Z7=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Y7(t,r),t.prototype.init=function(e){r.prototype.init.call(this,e),this.filterModelFormatter=new iW(this.localeService,this.optionsFactory)},t.prototype.getDefaultFilterOptions=function(){return ik.DEFAULT_FILTER_OPTIONS},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},t.prototype.createFloatingFilterInputService=function(e){return this.createManagedBean(new sW({ariaLabel:e}))},t}(aW),ul=function(){function r(t,e){var n=this;void 0===e&&(e=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new Wg,this.eElement=t,this.preventMouseClick=e;var i=this.onTouchStart.bind(this),o=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",o,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(function(){n.eElement.removeEventListener("touchstart",i,{passive:!0}),n.eElement.removeEventListener("touchmove",o,{passive:!0}),n.eElement.removeEventListener("touchend",s,{passive:!1})})}return r.prototype.getActiveTouch=function(t){for(var e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null},r.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},r.prototype.onTouchStart=function(t){var e=this;if(!this.touching){this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;var n=this.touchStart;window.setTimeout(function(){e.touching&&e.touchStart===n&&!e.moved&&(e.moved=!0,e.eventService.dispatchEvent({type:r.EVENT_LONG_TAP,touchStart:e.touchStart,touchEvent:t}))},500)}},r.prototype.onTouchMove=function(t){if(this.touching){var e=this.getActiveTouch(t.touches);e&&!$L(e,this.touchStart,4)&&(this.moved=!0)}},r.prototype.onTouchEnd=function(t){this.touching&&(this.moved||(this.eventService.dispatchEvent({type:r.EVENT_TAP,touchStart:this.touchStart}),this.checkForDoubleTap()),this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1)},r.prototype.checkForDoubleTap=function(){var t=(new Date).getTime();this.lastTapTime&&this.lastTapTime>0&&t-this.lastTapTime>r.DOUBLE_TAP_MILLIS?(this.eventService.dispatchEvent({type:r.EVENT_DOUBLE_TAP,touchStart:this.touchStart}),this.lastTapTime=null):this.lastTapTime=t},r.prototype.destroy=function(){this.destroyFuncs.forEach(function(t){return t()})},r.EVENT_TAP="tap",r.EVENT_DOUBLE_TAP="doubleTap",r.EVENT_LONG_TAP="longTap",r.DOUBLE_TAP_MILLIS=500,r}(),Q7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ry=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},sk=function(r){function t(e){var n=r.call(this)||this;return e||n.setTemplate(t.TEMPLATE),n}return Q7(t,r),t.prototype.attachCustomElements=function(e,n,i,o,s){this.eSortOrder=e,this.eSortAsc=n,this.eSortDesc=i,this.eSortMixed=o,this.eSortNone=s},t.prototype.setupSort=function(e,n){var i=this;void 0===n&&(n=!1),this.column=e,this.suppressOrder=n,this.setupMultiSortIndicator(),this.column.getColDef().sortable&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,function(){return i.onSortChanged()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return i.onSortChanged()}),this.onSortChanged())},t.prototype.addInIcon=function(e,n,i){if(null!=n){var o=no(e,this.gridOptionsService,i);o&&n.appendChild(o)}},t.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},t.prototype.updateIcons=function(){var e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc&&Wn(this.eSortAsc,"asc"===e,{skipAriaHidden:!0}),this.eSortDesc&&Wn(this.eSortDesc,"desc"===e,{skipAriaHidden:!0}),this.eSortNone){var o=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon");Wn(this.eSortNone,!o&&null==e,{skipAriaHidden:!0})}},t.prototype.setupMultiSortIndicator=function(){var e=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var n=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&n&&(this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,function(){return e.updateMultiSortIndicator()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.updateMultiSortIndicator()}),this.updateMultiSortIndicator())},t.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var e="mixed"===this.sortController.getDisplaySortForColumn(this.column);Wn(this.eSortMixed,e,{skipAriaHidden:!0})}},t.prototype.updateSortOrder=function(){var n,e=this;if(this.eSortOrder){var i=this.sortController.getColumnsWithSortingOrdered(),o=null!==(n=this.sortController.getDisplaySortIndexForColumn(this.column))&&void 0!==n?n:-1,s=i.some(function(d){var f;return null!==(f=e.sortController.getDisplaySortIndexForColumn(d))&&void 0!==f&&f});Wn(this.eSortOrder,o>=0&&s,{skipAriaHidden:!0}),o>=0?this.eSortOrder.innerHTML=(o+1).toString():ll(this.eSortOrder)}},t.TEMPLATE='<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>',Ry([ut("eSortOrder")],t.prototype,"eSortOrder",void 0),Ry([ut("eSortAsc")],t.prototype,"eSortAsc",void 0),Ry([ut("eSortDesc")],t.prototype,"eSortDesc",void 0),Ry([ut("eSortMixed")],t.prototype,"eSortMixed",void 0),Ry([ut("eSortNone")],t.prototype,"eSortNone",void 0),Ry([F("columnModel")],t.prototype,"columnModel",void 0),Ry([F("sortController")],t.prototype,"sortController",void 0),t}(Rn),J7=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),cl=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},X7=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return J7(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.refresh=function(e){return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&(this.setDisplayName(e),!0)},t.prototype.workOutTemplate=function(){var e=Hj(this.params.template,t.TEMPLATE);return e&&e.trim?e.trim():e},t.prototype.init=function(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)},t.prototype.setDisplayName=function(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;var n=th(this.currentDisplayName);this.eText&&(this.eText.innerHTML=n)}},t.prototype.setupIcons=function(e){this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)},t.prototype.addInIcon=function(e,n,i){if(null!=n){var o=no(e,this.gridOptionsService,i);o&&n.appendChild(o)}},t.prototype.setupTap=function(){var e=this,n=this.gridOptionsService;if(!n.is("suppressTouch")){var i=new ul(this.getGui(),!0),o=n.is("suppressMenuHide"),s=o&&Qe(this.eMenu),a=s?new ul(this.eMenu,!0):i;this.params.enableMenu&&this.addManagedListener(a,ul[s?"EVENT_TAP":"EVENT_LONG_TAP"],function(C){n.api.showColumnMenuAfterMouseClick(e.params.column,C.touchStart)}),this.params.enableSorting&&this.addManagedListener(i,ul.EVENT_TAP,function(C){o&&e.eMenu.contains(C.touchStart.target)||e.sortController.progressSort(e.params.column,!1,"uiColumnSorted")}),this.addDestroyFunc(function(){return i.destroy()}),s&&this.addDestroyFunc(function(){return a.destroy()})}},t.prototype.workOutShowMenu=function(){var e=!this.gridOptionsService.is("suppressMenuHide"),n=zg()&&e;return this.params.enableMenu&&!n},t.prototype.setMenu=function(){var e=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return void Yf(this.eMenu);var n=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",function(){return e.showMenu(e.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",n)}},t.prototype.showMenu=function(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")},t.prototype.workOutSort=function(){return this.params.enableSorting},t.prototype.setupSort=function(){var e=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new sk(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),this.currentSort){var n="ctrl"===this.gridOptionsService.get("multiSortKey");this.addManagedListener(this.params.column,ri.EVENT_MOVING_CHANGED,function(){e.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(o){var s=e.params.column.isMoving(),a=(new Date).getTime();s||a-e.lastMovingChanged<50||e.params.progressSort(n?o.ctrlKey||o.metaKey:o.shiftKey)});var i=function(){if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc",e.params.column.isSortAscending()),e.addOrRemoveCssClass("ag-header-cell-sorted-desc",e.params.column.isSortDescending()),e.addOrRemoveCssClass("ag-header-cell-sorted-none",e.params.column.isSortNone()),e.params.column.getColDef().showRowGroup){var s=e.columnModel.getSourceColumnsForGroupColumn(e.params.column)?.every(function(d){return e.params.column.getSort()==d.getSort()});e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",!s)}};this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,i),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,i)}},t.prototype.setupFilterIcon=function(){this.eFilter&&(this.addManagedListener(this.params.column,ri.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},t.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();Wn(this.eFilter,e,{skipAriaHidden:!0})},t.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>',cl([F("sortController")],t.prototype,"sortController",void 0),cl([F("menuFactory")],t.prototype,"menuFactory",void 0),cl([F("columnModel")],t.prototype,"columnModel",void 0),cl([ut("eFilter")],t.prototype,"eFilter",void 0),cl([ut("eSortIndicator")],t.prototype,"eSortIndicator",void 0),cl([ut("eMenu")],t.prototype,"eMenu",void 0),cl([ut("eLabel")],t.prototype,"eLabel",void 0),cl([ut("eText")],t.prototype,"eText",void 0),cl([ut("eSortOrder")],t.prototype,"eSortOrder",void 0),cl([ut("eSortAsc")],t.prototype,"eSortAsc",void 0),cl([ut("eSortDesc")],t.prototype,"eSortDesc",void 0),cl([ut("eSortMixed")],t.prototype,"eSortMixed",void 0),cl([ut("eSortNone")],t.prototype,"eSortNone",void 0),t}(Rn),e9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ak=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},t9=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return e9(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},t.prototype.checkWarnings=function(){this.params.template&&Yn(function(){return console.warn("AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},"HeaderGroupComp.templateNotSupported")},t.prototype.setupExpandIcons=function(){var e=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var n=function(s){if(!Xd(s)){var a=!e.params.columnGroup.isExpanded();e.columnModel.setColumnGroupOpened(e.params.columnGroup.getProvidedColumnGroup(),a,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,n),this.addTouchAndClickListeners(this.eOpenIcon,n);var i=function(s){Tw(s)};this.addManagedListener(this.eCloseIcon,"dblclick",i),this.addManagedListener(this.eOpenIcon,"dblclick",i),this.addManagedListener(this.getGui(),"dblclick",n),this.updateIconVisibility();var o=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(o,xi.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(o,xi.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},t.prototype.addTouchAndClickListeners=function(e,n){var i=new ul(e,!0);this.addManagedListener(i,ul.EVENT_TAP,n),this.addDestroyFunc(function(){return i.destroy()}),this.addManagedListener(e,"click",n)},t.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var n=this.params.columnGroup.isExpanded();Wn(this.eOpenIcon,n),Wn(this.eCloseIcon,!n)}else Wn(this.eOpenIcon,!1),Wn(this.eCloseIcon,!1)},t.prototype.addInIcon=function(e,n){var i=no(e,this.gridOptionsService,null);i&&this.getRefElement(n).appendChild(i)},t.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return Wn(this.eOpenIcon,!1),void Wn(this.eCloseIcon,!1)},t.prototype.setupLabel=function(){var e=this.params.displayName;if(Qe(e)){var n=th(e);this.getRefElement("agLabel").innerHTML=n}},t.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',ak([F("columnModel")],t.prototype,"columnModel",void 0),ak([ut("agOpened")],t.prototype,"eOpenIcon",void 0),ak([ut("agClosed")],t.prototype,"eCloseIcon",void 0),t}(Rn),n9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),M0=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return n9(t,r),t.prototype.isPopup=function(){return!0},t.prototype.setParentComponent=function(e){e.addCssClass("ag-has-popup"),r.prototype.setParentComponent.call(this,e)},t.prototype.destroy=function(){var e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),r.prototype.destroy.call(this)},t}(Rn),r9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),o9=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return r9(t,r),t.prototype.init=function(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Qe(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},t.prototype.onKeyDown=function(e){var n=e.key;(n===Fe.LEFT||n===Fe.UP||n===Fe.RIGHT||n===Fe.DOWN||e.shiftKey&&n===Fe.ENTER)&&e.stopPropagation()},t.prototype.afterGuiAttached=function(){var e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},t.prototype.getValue=function(){return this.params.parseValue(this.eTextArea.getValue())},t.TEMPLATE='<div class="ag-large-text" tabindex="0">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([ut("eTextArea")],t.prototype,"eTextArea",void 0),t}(M0),s9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),uW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},a9=function(r){function t(){var e=r.call(this,'<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>')||this;return e.startedByEnter=!1,e}return s9(t,r),t.prototype.init=function(e){var n=this;if(this.focusAfterAttached=e.cellStartedEdit,Qt(e.values))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=null!=e.eventKey&&e.eventKey===Fe.ENTER;var i=!1;e.values.forEach(function(o){var s={value:o},a=n.valueFormatterService.formatValue(e.column,null,o);s.text=null!=a?a:o,n.eSelect.addOption(s),i=i||e.value===o}),i?this.eSelect.setValue(e.value,!0):e.values.length&&this.eSelect.setValue(e.values[0],!0),"fullRow"!==this.gridOptionsService.get("editType")&&this.addManagedListener(this.eSelect,cA.EVENT_ITEM_SELECTED,function(){return e.stopEditing()})}},t.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&this.eSelect.showPicker()},t.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},t.prototype.getValue=function(){return this.eSelect.getValue()},t.prototype.isPopup=function(){return!1},uW([F("valueFormatterService")],t.prototype,"valueFormatterService",void 0),uW([ut("eSelect")],t.prototype,"eSelect",void 0),t}(M0),l9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),cW=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return l9(t,r),t.prototype.init=function(e){this.params=e;var i,n=this.eInput;e.cellStartedEdit?(this.focusAfterAttached=!0,e.eventKey===Fe.BACKSPACE||e.eventKey===Fe.DELETE?i="":e.charPress?i=e.charPress:(i=this.getStartValue(e),e.eventKey!==Fe.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,i=this.getStartValue(e)),null!=i&&n.setValue(i,!0),null!=e.maxLength&&n.setMaxLength(e.maxLength),this.addManagedListener(n.getGui(),"keydown",function(o){var s=o.key;(s===Fe.PAGE_UP||s===Fe.PAGE_DOWN)&&o.preventDefault()})},t.prototype.afterGuiAttached=function(){var e=this.localeService.getLocaleTextFunc(),n=this.eInput;if(n.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached){nh()||n.getFocusableElement().focus();var i=n.getInputElement();if(this.highlightAllOnFocus)i.select();else{var o=n.getValue(),s=Qe(o)&&o.length||0;s&&i.setSelectionRange(s,s)}}},t.prototype.focusIn=function(){var e=this.eInput,n=e.getFocusableElement(),i=e.getInputElement();n.focus(),i.select()},t.prototype.getValue=function(){return this.params.parseValue(this.eInput.getValue())},t.prototype.getStartValue=function(e){return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value},t.prototype.isPopup=function(){return!1},t.TEMPLATE='<div class="ag-cell-edit-wrapper">\n            <ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>\n        </div>',function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([ut("eInput")],t.prototype,"eInput",void 0),t}(M0),c9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),p9=function(r){function t(){var e=r.call(this,t.TEMPLATE)||this;return e.refreshCount=0,e}return c9(t,r),t.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)},t.prototype.showDelta=function(e,n){var i=Math.abs(n),o=e.formatValue(i),s=Qe(o)?o:i,a=n>=0;this.eDelta.innerHTML=a?"\u2191"+s:"\u2193"+s,this.eDelta.classList.toggle("ag-value-change-delta-up",a),this.eDelta.classList.toggle("ag-value-change-delta-down",!a)},t.prototype.setTimerToRemoveDelta=function(){var e=this;this.refreshCount++;var n=this.refreshCount;window.setTimeout(function(){n===e.refreshCount&&e.hideDeltaValue()},2e3)},t.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),ll(this.eDelta)},t.prototype.refresh=function(e){var n=e.value;return n!==this.lastValue&&(Qe(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:Qe(e.value)?this.eValue.innerHTML=n:ll(this.eValue),!this.filterManager.isSuppressFlashingCellsBecauseFiltering())&&("number"==typeof n&&"number"==typeof this.lastValue&&this.showDelta(e,n-this.lastValue),this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=n,!0)},t.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([F("filterManager")],t.prototype,"filterManager",void 0),t}(Rn),g9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),v9=function(r){function t(){var e=r.call(this,t.TEMPLATE)||this;return e.refreshCount=0,e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}return g9(t,r),t.prototype.init=function(e){this.refresh(e)},t.prototype.addSlideAnimation=function(){var e=this;this.refreshCount++;var n=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=ls('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){n===e.refreshCount&&e.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(function(){n===e.refreshCount&&(e.getGui().removeChild(e.ePrevious),e.ePrevious=null)},3e3)},t.prototype.refresh=function(e){var n=e.value;return Qt(n)&&(n=""),n!==this.lastValue&&!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=n,Qe(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:Qe(e.value)?this.eCurrent.innerHTML=n:ll(this.eCurrent),!0)},t.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([F("filterManager")],t.prototype,"filterManager",void 0),t}(Rn),Fw=function(){return Fw=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},Fw.apply(this,arguments)},In=function(){function r(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=r.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.selected=!1,this.beans=t}return r.prototype.setData=function(t){this.setDataCommon(t,!1)},r.prototype.updateData=function(t){this.setDataCommon(t,!0)},r.prototype.setDataCommon=function(t,e){var n=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();var i=this.createDataChangedEvent(t,n,e);this.dispatchLocalEvent(i)},r.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},r.prototype.createDataChangedEvent=function(t,e,n){return{type:r.EVENT_DATA_CHANGED,node:this,oldData:e,newData:t,update:n}},r.prototype.createLocalRowEvent=function(t){return{type:t,node:this}},r.prototype.getRowIndexString=function(){return"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()},r.prototype.createDaemonNode=function(){var t=new r(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t},r.prototype.setDataAndId=function(t,e){var n=Qe(this.id)?this.createDaemonNode():null,i=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(e),this.beans.selectionService.syncInRowNode(this,n),this.checkRowSelectable();var o=this.createDataChangedEvent(t,i,!1);this.dispatchLocalEvent(o)},r.prototype.checkRowSelectable=function(){var t=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(!t||t(this))},r.prototype.setRowSelectable=function(t){if(this.selectable!==t&&(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_SELECTABLE_CHANGED)),this.beans.gridOptionsService.is("groupSelectsChildren"))){var n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"})}},r.prototype.setId=function(t){var e=this.beans.gridOptionsService.getRowIdFunc();if(e)if(this.data){var n=this.getGroupKeys(!0);this.id=e({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level}),null!==this.id&&"string"==typeof this.id&&this.id.startsWith(r.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with "+r.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),null!==this.id&&"string"!=typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=t},r.prototype.getGroupKeys=function(t){void 0===t&&(t=!1);var e=[],n=this;for(t&&(n=n.parent);n&&n.level>=0;)e.push(n.key),n=n.parent;return e.reverse(),e},r.prototype.isPixelInRange=function(t){return!(!Qe(this.rowTop)||!Qe(this.rowHeight))&&t>=this.rowTop&&t<this.rowTop+this.rowHeight},r.prototype.setFirstChild=function(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_FIRST_CHILD_CHANGED)))},r.prototype.setLastChild=function(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_LAST_CHILD_CHANGED)))},r.prototype.setChildIndex=function(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_CHILD_INDEX_CHANGED)))},r.prototype.setRowTop=function(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_TOP_CHANGED)),this.setDisplayed(null!==t))},r.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},r.prototype.setDisplayed=function(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DISPLAYED_CHANGED)))},r.prototype.setDragging=function(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DRAGGING_CHANGED)))},r.prototype.setHighlighted=function(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HIGHLIGHT_CHANGED)))},r.prototype.setAllChildrenCount=function(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},r.prototype.setMaster=function(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_MASTER_CHANGED)))},r.prototype.setGroup=function(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_GROUP_CHANGED)))},r.prototype.setRowHeight=function(t,e){void 0===e&&(e=!1),this.rowHeight=t,this.rowHeightEstimated=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HEIGHT_CHANGED))},r.prototype.setRowAutoHeight=function(t,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=t,null!=t&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=Jd(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},r.prototype.checkAutoHeights=function(){var t=!1,e=!0,n=0,i=this.__autoHeights;if(null!=i&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(function(a){var d=i[a.getId()];null!=d?(e=!1,d>n&&(n=d)):t=!0}),!t&&((e||n<10)&&(n=this.beans.gridOptionsService.getRowHeightForNode(this).height),n!=this.rowHeight))){this.setRowHeight(n);var s=this.beans.rowModel;s.onRowHeightChangedDebounced&&s.onRowHeightChangedDebounced()}},r.prototype.setRowIndex=function(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ROW_INDEX_CHANGED)))},r.prototype.setUiLevel=function(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_UI_LEVEL_CHANGED)))},r.prototype.setExpanded=function(t,e){if(this.expanded!==t){this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_EXPANDED_CHANGED));var n=Object.assign({},this.createGlobalRowEvent(V.EVENT_ROW_GROUP_OPENED),{expanded:t,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(n),this.beans.gridOptionsService.is("groupIncludeFooter")&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},r.prototype.createGlobalRowEvent=function(t){return{type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}},r.prototype.dispatchLocalEvent=function(t){this.eventService&&this.eventService.dispatchEvent(t)},r.prototype.setDataValue=function(t,e,n){var i=this.beans.columnModel.getPrimaryColumn(t),o=this.beans.valueService.getValue(i,this);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(i,o,e,n),!1;var s=this.beans.valueService.setValue(this,i,e,n);return this.dispatchCellChangedEvent(i,e,o),this.checkRowSelectable(),s},r.prototype.dispatchEventForSaveValueReadOnly=function(t,e,n,i){var o={type:V.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue:e,newValue:n,value:n,source:i};this.beans.eventService.dispatchEvent(o)},r.prototype.setGroupValue=function(t,e){var n=this.beans.columnModel.getGridColumn(t);Qt(this.groupData)&&(this.groupData={});var i=n.getColId(),o=this.groupData[i];o!==e&&(this.groupData[i]=e,this.dispatchCellChangedEvent(n,e,o))},r.prototype.setAggData=function(t){var e=this,n=Ij([this.aggData,t]),i=this.aggData;this.aggData=t,this.eventService&&n.forEach(function(o){var s=e.beans.columnModel.getGridColumn(o);e.dispatchCellChangedEvent(s,e.aggData?e.aggData[o]:void 0,i?i[o]:void 0)})},r.prototype.updateHasChildren=function(){var t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){var n=this.beans.gridOptionsService.isTreeData(),i=this.beans.gridOptionsService.get("isServerSideGroup");t=!this.stub&&!this.footer&&(n?!!i&&i(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HAS_CHILDREN_CHANGED)))},r.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},r.prototype.isEmptyRowGroupNode=function(){return this.group&&al(this.childrenAfterGroup)},r.prototype.dispatchCellChangedEvent=function(t,e,n){this.dispatchLocalEvent({type:r.EVENT_CELL_CHANGED,node:this,column:t,newValue:e,oldValue:n})},r.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},r.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},r.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},r.prototype.depthFirstSearch=function(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(t)}),t(this)},r.prototype.calculateSelectedFromChildren=function(){var t,e=!1,n=!1,i=!1;if(null===(t=this.childrenAfterGroup)||void 0===t||!t.length)return this.selectable?this.selected:null;for(var o=0;o<this.childrenAfterGroup.length;o++){var s=this.childrenAfterGroup[o],a=s.isSelected();if(!s.selectable){var d=s.calculateSelectedFromChildren();if(null===d)continue;a=d}switch(a){case!0:e=!0;break;case!1:n=!0;break;default:i=!0}}return i||e&&n?void 0:!!e||!n&&(this.selectable?this.selected:null)},r.prototype.setSelectedInitialValue=function(t){this.selected=t},r.prototype.selectThisNode=function(t,e,n){if(void 0===n&&(n="api"),!this.selectable&&t||this.selected===t)return!1;this.selected=t,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_ROW_SELECTED));var s=Fw(Fw({},this.createGlobalRowEvent(V.EVENT_ROW_SELECTED)),{event:e||null,source:n});return this.beans.eventService.dispatchEvent(s),!0},r.prototype.setSelected=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i="api"),this.setSelectedParams({newValue:t,clearSelection:e,suppressFinishActions:n,rangeSelect:!1,source:i})},r.prototype.setSelectedParams=function(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):void 0===this.id?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodeSelected(Fw(Fw({},t),{node:this.footer?this.sibling:this}))},r.prototype.isRowPinned=function(){return"top"===this.rowPinned||"bottom"===this.rowPinned},r.prototype.isParentOfNode=function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},r.prototype.addEventListener=function(t,e){this.eventService||(this.eventService=new Wg),this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService&&(this.eventService.removeEventListener(t,e),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},r.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_ENTER))},r.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_LEAVE))},r.prototype.getFirstChildOfFirstChild=function(t){for(var e=this,n=!0,i=!1,o=null;n&&!i;){var s=e.parent;Qe(s)&&e.firstChild?s.rowGroupColumn===t&&(i=!0,o=s):n=!1,e=s}return i?o:null},r.prototype.isFullWidthCell=function(){var t=this.getIsFullWidthCellFunc();return!!t&&t({rowNode:this})},r.prototype.getIsFullWidthCellFunc=function(){var t=this.beans.gridOptionsService.getCallback("isFullWidthRow");if(t)return t;var e=this.beans.gridOptionsService.get("isFullWidthCell");return e?function(n){return e(n.rowNode)}:void 0},r.prototype.getRoute=function(){if(null!=this.key){for(var t=[],e=this;null!=e.key;)t.push(e.key),e=e.parent;return t.reverse()}},r.prototype.createFooter=function(){var t=this;if(!this.sibling){var e=new r(this.beans);Object.keys(this).forEach(function(n){e[n]=t[n]}),e.footer=!0,e.setRowTop(null),e.setRowIndex(null),e.oldRowTop=null,e.id="rowGroupFooter_"+this.id,e.sibling=this,this.sibling=e}},r.ID_PREFIX_ROW_GROUP="row-group-",r.ID_PREFIX_TOP_PINNED="t-",r.ID_PREFIX_BOTTOM_PINNED="b-",r.OBJECT_ID_SEQUENCE=0,r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_DATA_CHANGED="dataChanged",r.EVENT_CELL_CHANGED="cellChanged",r.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",r.EVENT_MASTER_CHANGED="masterChanged",r.EVENT_GROUP_CHANGED="groupChanged",r.EVENT_MOUSE_ENTER="mouseEnter",r.EVENT_MOUSE_LEAVE="mouseLeave",r.EVENT_HEIGHT_CHANGED="heightChanged",r.EVENT_TOP_CHANGED="topChanged",r.EVENT_DISPLAYED_CHANGED="displayedChanged",r.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",r.EVENT_LAST_CHILD_CHANGED="lastChildChanged",r.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",r.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",r.EVENT_SELECTABLE_CHANGED="selectableChanged",r.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",r.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",r.EVENT_DRAGGING_CHANGED="draggingChanged",r}(),y9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),hA=function(){return hA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},hA.apply(this,arguments)},dW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},hW=function(r){function t(){return r.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return y9(t,r),t.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0),a2(this.eCheckbox.getInputElement(),"polite")},t.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},t.prototype.onDataChanged=function(){this.onSelectionChanged()},t.prototype.onSelectableChanged=function(){this.showOrHideSelect()},t.prototype.onSelectionChanged=function(){var e=this.localeService.getLocaleTextFunc(),n=this.rowNode.isSelected(),i=void 0===n?e("ariaIndeterminate","indeterminate"):!0===n?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),o=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(n,!0),this.eCheckbox.setInputAriaLabel(o+" ("+i+")")},t.prototype.onCheckedClicked=function(e){var n=this.gridOptionsService.is("groupSelectsFiltered");return this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"checkboxSelected"})},t.prototype.onUncheckedClicked=function(e){var n=this.gridOptionsService.is("groupSelectsFiltered");return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"checkboxSelected"})},t.prototype.init=function(e){var n=this;if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(a){Tw(a)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(a){Tw(a),n.eCheckbox.getValue()?n.onCheckedClicked(a):n.onUncheckedClicked(a||{})}),this.addManagedListener(this.rowNode,In.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||"function"==typeof this.getIsVisible()){var s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,In.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,In.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},t.prototype.showOrHideSelect=function(){var e,n,i,o,s=this.rowNode.selectable,a=this.getIsVisible();if(s)if("function"==typeof a){var d=null===(e=this.overrides)||void 0===e?void 0:e.callbackParams,f=null===(n=this.column)||void 0===n?void 0:n.createColumnFunctionCallbackParams(this.rowNode);s=!!f&&a(hA(hA({},d),f))}else s=a??!1;if(null===(i=this.column)||void 0===i?void 0:i.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!s),this.setVisible(!0),void this.setDisplayed(!0);null!==(o=this.overrides)&&void 0!==o&&o.removeHidden?this.setDisplayed(s):this.setVisible(s)},t.prototype.getIsVisible=function(){var e,n;return this.overrides?this.overrides.isVisible:null===(n=null===(e=this.column)||void 0===e?void 0:e.getColDef())||void 0===n?void 0:n.checkboxSelection},dW([ut("eCheckbox")],t.prototype,"eCheckbox",void 0),dW([rt],t.prototype,"postConstruct",null),t}(Rn),_9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Oy=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},fA=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ps=(()=>(function(r){r[r.ToolPanel=0]="ToolPanel",r[r.HeaderCell=1]="HeaderCell",r[r.RowDrag=2]="RowDrag",r[r.ChartPanel=3]="ChartPanel"}(Ps||(Ps={})),Ps))(),Iy=(()=>(function(r){r[r.Up=0]="Up",r[r.Down=1]="Down"}(Iy||(Iy={})),Iy))(),pc=(()=>(function(r){r[r.Left=0]="Left",r[r.Right=1]="Right"}(pc||(pc={})),pc))(),us=function(r){function t(){var n=null!==r&&r.apply(this,arguments)||this;return n.dragSourceAndParamsList=[],n.dropTargets=[],n}var e;return _9(t,r),e=t,t.prototype.init=function(){this.ePinnedIcon=du("columnMovePin",this.gridOptionsService,null),this.eHideIcon=du("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=du("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=du("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=du("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=du("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=du("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=du("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=du("dropNotAllowed",this.gridOptionsService,null)},t.prototype.addDragSource=function(n,i){void 0===i&&(i=!1);var o={eElement:n.eElement,dragStartPixels:n.dragStartPixels,onDragStart:this.onDragStart.bind(this,n),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:o,dragSource:n}),this.dragService.addDragSource(o,i)},t.prototype.removeDragSource=function(n){var i=this.dragSourceAndParamsList.find(function(o){return o.dragSource===n});i&&(this.dragService.removeDragSource(i.params),As(this.dragSourceAndParamsList,i))},t.prototype.clearDragSourceParamsList=function(){var n=this;this.dragSourceAndParamsList.forEach(function(i){return n.dragService.removeDragSource(i.params)}),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0},t.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},t.prototype.onDragStart=function(n,i){this.dragging=!0,this.dragSource=n,this.eventLastTime=i,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},t.prototype.onDragStop=function(n){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var i=this.createDropTargetEvent(this.lastDropTarget,n,null,null,!1);this.lastDropTarget.onDragStop(i)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},t.prototype.onDragging=function(n,i){var s,a,d,f,o=this,g=this.getHorizontalDirection(n),C=this.getVerticalDirection(n);this.eventLastTime=n,this.positionGhost(n);var E=this.dropTargets.filter(function(M){return o.isMouseOnDropTarget(n,M)}),T=this.findCurrentDropTarget(n,E);if(T!==this.lastDropTarget)this.leaveLastTargetIfExists(n,g,C,i),null!==this.lastDropTarget&&null===T&&(null===(a=(s=this.dragSource).onGridExit)||void 0===a||a.call(s,this.dragItem)),null===this.lastDropTarget&&null!==T&&(null===(f=(d=this.dragSource).onGridEnter)||void 0===f||f.call(d,this.dragItem)),this.enterDragTargetIfExists(T,n,g,C,i),this.lastDropTarget=T;else if(T&&T.onDragging){var I=this.createDropTargetEvent(T,n,g,C,i);T.onDragging(I)}},t.prototype.getAllContainersFromDropTarget=function(n){var i=n.getSecondaryContainers?n.getSecondaryContainers():null,o=[[n.getContainer()]];return i?o.concat(i):o},t.prototype.allContainersIntersect=function(n,i){var o,s;try{for(var a=fA(i),d=a.next();!d.done;d=a.next()){var g=d.value.getBoundingClientRect();if(0===g.width||0===g.height)return!1;if(!(n.clientX>=g.left&&n.clientX<g.right&&n.clientY>=g.top&&n.clientY<g.bottom))return!1}}catch(T){o={error:T}}finally{try{d&&!d.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return!0},t.prototype.isMouseOnDropTarget=function(n,i){var o,s,a=this.getAllContainersFromDropTarget(i),d=!1;try{for(var f=fA(a),g=f.next();!g.done;g=f.next())if(this.allContainersIntersect(n,g.value)){d=!0;break}}catch(E){o={error:E}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return!(i.targetContainsSource&&!i.getContainer().contains(this.dragSource.eElement))&&d&&i.isInterestedIn(this.dragSource.type,this.dragSource.eElement)},t.prototype.findCurrentDropTarget=function(n,i){var o,s,a,d,f=i.length;if(0===f)return null;if(1===f)return i[0];var C=this.gridOptionsService.getRootNode().elementsFromPoint(n.clientX,n.clientY);try{for(var E=fA(C),T=E.next();!T.done;T=E.next()){var I=T.value;try{for(var M=(a=void 0,fA(i)),k=M.next();!k.done;k=M.next()){var W=k.value;if(-1!==Uj(this.getAllContainersFromDropTarget(W)).indexOf(I))return W}}catch(J){a={error:J}}finally{try{k&&!k.done&&(d=M.return)&&d.call(M)}finally{if(a)throw a.error}}}}catch(J){o={error:J}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}return null},t.prototype.enterDragTargetIfExists=function(n,i,o,s,a){if(n){if(n.onDragEnter){var d=this.createDropTargetEvent(n,i,o,s,a);n.onDragEnter(d)}this.setGhostIcon(n.getIconName?n.getIconName():null)}},t.prototype.leaveLastTargetIfExists=function(n,i,o,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var a=this.createDropTargetEvent(this.lastDropTarget,n,i,o,s);this.lastDropTarget.onDragLeave(a)}this.setGhostIcon(null)}},t.prototype.addDropTarget=function(n){this.dropTargets.push(n)},t.prototype.removeDropTarget=function(n){this.dropTargets=this.dropTargets.filter(function(i){return i.getContainer()!==n.getContainer()})},t.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(n){return n.external})},t.prototype.findExternalZone=function(n){return this.dropTargets.filter(function(o){return o.external}).find(function(o){return o.getContainer()===n.getContainer()})||null},t.prototype.getHorizontalDirection=function(n){var i=this.eventLastTime&&this.eventLastTime.clientX,o=n.clientX;return i===o?null:i>o?pc.Left:pc.Right},t.prototype.getVerticalDirection=function(n){var i=this.eventLastTime&&this.eventLastTime.clientY,o=n.clientY;return i===o?null:i>o?Iy.Up:Iy.Down},t.prototype.createDropTargetEvent=function(n,i,o,s,a){var d=n.getContainer(),f=d.getBoundingClientRect(),g=this;return{event:i,x:i.clientX-f.left,y:i.clientY-f.top,vDirection:s,hDirection:o,dragSource:g.dragSource,fromNudge:a,dragItem:g.dragItem,api:g.gridApi,columnApi:g.columnApi,dropZoneTarget:d}},t.prototype.positionGhost=function(n){var i=this.eGhost;if(i){var s=i.getBoundingClientRect().height,a=y2()-2,d=_2()-2,f=n.pageY-s/2,g=n.pageX-10,C=this.gridOptionsService.getDocument(),E=C.defaultView||window,T=E.pageYOffset||C.documentElement.scrollTop,I=E.pageXOffset||C.documentElement.scrollLeft;a>0&&g+i.clientWidth>a+I&&(g=a+I-i.clientWidth),g<0&&(g=0),d>0&&f+i.clientHeight>d+T&&(f=d+T-i.clientHeight),f<0&&(f=0),i.style.left=g+"px",i.style.top=f+"px"}},t.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},t.prototype.createGhost=function(){this.eGhost=ls(e.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var n=this.environment.getTheme().theme;n&&this.eGhost.classList.add(n),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var i=this.eGhost.querySelector(".ag-dnd-ghost-label"),o=this.dragSource.dragItemName;KI(o)&&(o=o()),i.innerHTML=th(o)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var s=this.gridOptionsService.getDocument(),a=null;try{a=s.fullscreenElement}catch{}finally{if(!a){var d=this.gridOptionsService.getRootNode();a=d.querySelector("body")||(d instanceof ShadowRoot?d:d?.documentElement)}}this.eGhostParent=a,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},t.prototype.setGhostIcon=function(n,i){void 0===i&&(i=!1),ll(this.eGhostIcon);var o=null;switch(n||(n=this.dragSource.defaultIconName||e.ICON_NOT_ALLOWED),n){case e.ICON_PINNED:o=this.ePinnedIcon;break;case e.ICON_MOVE:o=this.eMoveIcon;break;case e.ICON_LEFT:o=this.eLeftIcon;break;case e.ICON_RIGHT:o=this.eRightIcon;break;case e.ICON_GROUP:o=this.eGroupIcon;break;case e.ICON_AGGREGATE:o=this.eAggregateIcon;break;case e.ICON_PIVOT:o=this.ePivotIcon;break;case e.ICON_NOT_ALLOWED:o=this.eDropNotAllowedIcon;break;case e.ICON_HIDE:o=this.eHideIcon}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",i),(o!==this.eHideIcon||!this.gridOptionsService.is("suppressDragLeaveHidesColumns"))&&o&&this.eGhostIcon.appendChild(o)},t.ICON_PINNED="pinned",t.ICON_MOVE="move",t.ICON_LEFT="left",t.ICON_RIGHT="right",t.ICON_GROUP="group",t.ICON_AGGREGATE="aggregate",t.ICON_PIVOT="pivot",t.ICON_NOT_ALLOWED="notAllowed",t.ICON_HIDE="hide",t.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',Oy([F("dragService")],t.prototype,"dragService",void 0),Oy([F("mouseEventService")],t.prototype,"mouseEventService",void 0),Oy([F("columnApi")],t.prototype,"columnApi",void 0),Oy([F("gridApi")],t.prototype,"gridApi",void 0),Oy([rt],t.prototype,"init",null),Oy([as],t.prototype,"clearDragSourceParamsList",null),e=Oy([Rt("dragAndDropService")],t)}(Ye),pA=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),x0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},gA=function(r){function t(e,n,i,o,s,a){var d=r.call(this)||this;return d.cellValueFn=e,d.rowNode=n,d.column=i,d.customGui=o,d.dragStartPixels=s,d.suppressVisibilityChange=a,d.dragSource=null,d}return pA(t,r),t.prototype.isCustomGui=function(){return null!=this.customGui},t.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(no("rowDrag",this.beans.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var e=this.beans.gridOptionsService.is("rowDragManaged")?new w9(this,this.beans,this.rowNode,this.column):new C9(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}},t.prototype.setDragElement=function(e,n){this.setTemplateFromElement(e),this.addDragSource(n)},t.prototype.getSelectedNodes=function(){if(!this.beans.gridOptionsService.is("rowDragMultiRow"))return[this.rowNode];var n=this.beans.selectionService.getSelectedNodes();return-1!==n.indexOf(this.rowNode)?n:[this.rowNode]},t.prototype.checkCompatibility=function(){var e=this.beans.gridOptionsService.is("rowDragManaged");this.beans.gridOptionsService.isTreeData()&&e&&Yn(function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},t.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},t.prototype.getRowDragText=function(e){if(e){var n=e.getColDef();if(n.rowDragText)return n.rowDragText}return this.gridOptionsService.get("rowDragText")},t.prototype.addDragSource=function(e){var n=this;void 0===e&&(e=4),this.dragSource&&this.removeDragSource();var i=this.getRowDragText(this.column),o=this.localeService.getLocaleTextFunc();this.dragSource={type:Ps.RowDrag,eElement:this.getGui(),dragItemName:function(){var s,a=n.getDragItem(),d=(null===(s=a.rowNodes)||void 0===s?void 0:s.length)||1;return i?i(a,d):1===d?n.cellValueFn():d+" "+o("rowDragRows","rows")},getDragItem:function(){return n.getDragItem()},dragStartPixels:e,dragSourceDomDataKey:this.beans.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},t.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},x0([F("beans")],t.prototype,"beans",void 0),x0([rt],t.prototype,"postConstruct",null),x0([as],t.prototype,"removeDragSource",null),t}(Rn),fW=function(r){function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.rowNode=n,o.column=i,o}return pA(t,r),t.prototype.setDisplayedOrVisible=function(e){var n={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,n);else{var i=!0,o=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),o=KI(this.column.getColDef().rowDrag)),o?(this.parent.setDisplayed(!0,n),this.parent.setVisible(i,n)):(this.parent.setDisplayed(i,n),this.parent.setVisible(!0,n))}},t}(Ye),C9=function(r){function t(e,n,i,o){var s=r.call(this,e,i,o)||this;return s.beans=n,s}return pA(t,r),t.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},t.prototype.workOutVisibility=function(){var e=this.beans.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(e)},x0([rt],t.prototype,"postConstruct",null),t}(fW),w9=function(r){function t(e,n,i,o){var s=r.call(this,e,i,o)||this;return s.beans=n,s}return pA(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,V.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},t.prototype.workOutVisibility=function(){var n=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=n&&n.shouldPreventRowMove(),o=this.beans.gridOptionsService.is("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones();this.setDisplayedOrVisible(i&&!s||o)},x0([rt],t.prototype,"postConstruct",null),t}(fW),S9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),mA=function(){return mA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},mA.apply(this,arguments)},F0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},E9=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return S9(t,r),t.prototype.init=function(e,n,i,o,s,a,d){this.params=d,this.eGui=n,this.eCheckbox=i,this.eExpanded=o,this.eContracted=s,this.comp=e,this.compClass=a;var f=this.isTopLevelFooter(),g=this.isEmbeddedRowMismatch(),C=null==d.value&&!d.node.master,E=!1;if(this.gridOptionsService.is("groupIncludeFooter")&&this.gridOptionsService.is("groupHideOpenParents")){var T=d.node;T.footer&&(E=(d.colDef&&d.colDef.showRowGroup)!==(T.rowGroupColumn&&T.rowGroupColumn.getColId()))}this.cellIsBlank=!f&&(g||C&&!d.node.master||E),!this.cellIsBlank&&(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded())},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.expandListener=null},t.prototype.refreshAriaExpanded=function(){var e=this.params,n=e.node,i=e.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),this.isExpandable()){var o=function(){fc(i,!!n.expanded)};this.expandListener=this.addManagedListener(n,In.EVENT_EXPANDED_CHANGED,o)||null,o()}else u2(i)},t.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.is("groupIncludeTotalFooter")||null!=this.params.value||-1!=this.params.node.level)return!1;var e=this.params.colDef;if(null==e||!0===e.showRowGroup)return!0;var i=this.columnModel.getRowGroupColumns();return!i||0===i.length||i[0].getId()===e.showRowGroup},t.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;var e="left"===this.params.pinned,n="right"===this.params.pinned,i=!e&&!n;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!n:!i:this.columnModel.isPinningLeft()?!e:!i},t.prototype.findDisplayedGroupNode=function(){var e=this.params.column,n=this.params.node;if(this.showingValueForOpenedParent)for(var i=n.parent;null!=i;){if(i.rowGroupColumn&&e.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}Qt(this.displayedGroupNode)&&(this.displayedGroupNode=n)},t.prototype.setupShowingValueForOpenedParent=function(){var e=this.params.node,n=this.params.column;if(this.gridOptionsService.is("groupHideOpenParents"))if(e.groupData){if(null!=e.rowGroupColumn){var o=e.rowGroupColumn.getId();if(n.isRowGroupDisplayed(o))return void(this.showingValueForOpenedParent=!1)}var a=null!=e.groupData[n.getId()];this.showingValueForOpenedParent=a}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},t.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},t.prototype.addGroupValue=function(){var e=this.adjustParamsWithDetailsFromRelatedColumn(),n=this.getInnerCompDetails(e),o=e.value,s=e.valueFormatted;null==s&&(s=""===o&&this.params.node.group?this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):o??null),this.comp.setInnerRenderer(n,s)},t.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var e=this.displayedGroupNode.rowGroupColumn,n=this.params.column;if(!e)return this.params;if(null!=n&&!n.isRowGroupDisplayed(e.getId()))return this.params;var s=this.params,a=this.params,g=this.valueFormatterService.formatValue(e,a.node,a.value);return mA(mA({},s),{valueFormatted:g})},t.prototype.addFooterValue=function(){var e=this.params.footerValueGetter,n="";if(e){var i=QF(this.params);i.value=this.params.value,"function"==typeof e?n=e(i):"string"==typeof e?n=this.expressionService.evaluate(e,i):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else n="Total "+(null!=this.params.value?this.params.value:"");var o=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(o,n)},t.prototype.getInnerCompDetails=function(e){var n=this;if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);var i=this.userComponentFactory.getInnerRendererDetails(e,e),o=function(g){return g&&g.componentClass==n.compClass};if(i&&!o(i))return i;var s=this.displayedGroupNode.rowGroupColumn,a=s?s.getColDef():void 0;if(a){var d=this.userComponentFactory.getCellRendererDetails(a,e);if(d&&!o(d))return d;if(o(d)&&a.cellRendererParams&&a.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(a.cellRendererParams,e)}},t.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,In.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},t.prototype.updateChildCount=function(){var e=this.displayedGroupNode.allChildrenCount,n=this.isShowRowGroupForThisRow();this.comp.setChildCount(n&&null!=e&&e>=0?"("+e+")":"")},t.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.isTreeData())return!0;var e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;var n=this.params.column;return null==n||n.isRowGroupDisplayed(e.getId())},t.prototype.addExpandAndContract=function(){var e=this.params,n=no("groupExpanded",this.gridOptionsService,null),i=no("groupContracted",this.gridOptionsService,null);n&&this.eExpanded.appendChild(n),i&&this.eContracted.appendChild(i);var o=e.eGridCell;!this.gridOptionsService.is("enableGroupEdit")&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(o,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(o,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,In.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var s=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,In.EVENT_ALL_CHILDREN_COUNT_CHANGED,s),this.addManagedListener(this.displayedGroupNode,In.EVENT_MASTER_CHANGED,s),this.addManagedListener(this.displayedGroupNode,In.EVENT_GROUP_CHANGED,s),this.addManagedListener(this.displayedGroupNode,In.EVENT_HAS_CHILDREN_CHANGED,s)},t.prototype.onExpandClicked=function(e){Xd(e)||(Tw(e),this.onExpandOrContract(e))},t.prototype.onExpandOrContract=function(e){var n=this.displayedGroupNode,i=!n.expanded;!i&&n.sticky&&this.scrollToStickyNode(n),n.setExpanded(i,e)},t.prototype.scrollToStickyNode=function(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)},t.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var e=this.displayedGroupNode,n=this.columnModel.isPivotMode()&&e.leafGroup;if(!e.isExpandable()||e.footer||n)return!1;var o=this.params.column;return null==o||"string"!=typeof o.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},t.prototype.showExpandAndContractIcons=function(){var e=this,i=e.displayedGroupNode,o=e.columnModel,s=e.params.node,a=this.isExpandable();if(a){var d=!!this.showingValueForOpenedParent||s.expanded;this.comp.setExpandedDisplayed(d),this.comp.setContractedDisplayed(!d)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var f=o.isPivotMode(),g=f&&i.leafGroup,C=a&&!g,E=s.footer&&-1===s.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",C),this.comp.addOrRemoveCssClass("ag-row-group",C),f?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",g):E||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!C)},t.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},t.prototype.setupIndent=function(){this.params.suppressPadding||(this.addManagedListener(this.params.node,In.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},t.prototype.setIndent=function(){if(!this.gridOptionsService.is("groupHideOpenParents")){var e=this.params,n=e.node,i=!!e.colDef,o=this.gridOptionsService.isTreeData(),a=!i||o||!0===e.colDef.showRowGroup?n.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+a,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},t.prototype.addFullWidthRowDraggerIfNeeded=function(){var e=this;if(this.params.fullWidth&&this.params.rowDrag){var n=new gA(function(){return e.params.value},this.params.node);this.createManagedBean(n,this.context),this.eGui.insertAdjacentElement("afterbegin",n.getGui())}},t.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;return"function"==typeof e||!0===e},t.prototype.addCheckboxIfNeeded=function(){var e=this,n=this.displayedGroupNode,i=this.isUserWantsSelected()&&!n.footer&&!n.rowPinned&&!n.detail;if(i){var o=new hW;this.getContext().createBean(o),o.init({rowNode:n,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(o.getGui()),this.addDestroyFunc(function(){return e.getContext().destroyBean(o)})}this.comp.setCheckboxVisible(i)},t.prototype.onKeyDown=function(e){e.key!==Fe.ENTER||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)},t.prototype.onCellDblClicked=function(e){Xd(e)||ZI(this.eExpanded,e)||ZI(this.eContracted,e)||this.onExpandOrContract(e)},F0([F("expressionService")],t.prototype,"expressionService",void 0),F0([F("valueFormatterService")],t.prototype,"valueFormatterService",void 0),F0([F("columnModel")],t.prototype,"columnModel",void 0),F0([F("userComponentFactory")],t.prototype,"userComponentFactory",void 0),F0([F("ctrlsService")],t.prototype,"ctrlsService",void 0),t}(Ye),b9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),L0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},pW=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return b9(t,r),t.prototype.init=function(e){var n=this,i={setInnerRenderer:function(d,f){return n.setRenderDetails(d,f)},setChildCount:function(d){return n.eChildCount.innerHTML=d},addOrRemoveCssClass:function(d,f){return n.addOrRemoveCssClass(d,f)},setContractedDisplayed:function(d){return Wn(n.eContracted,d)},setExpandedDisplayed:function(d){return Wn(n.eExpanded,d)},setCheckboxVisible:function(d){return n.eCheckbox.classList.toggle("ag-invisible",!d)}},o=this.createManagedBean(new E9),s=!e.colDef,a=this.getGui();o.init(i,a,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),s&&Ko(a,"gridcell")},t.prototype.setRenderDetails=function(e,n){var i=this;if(e){var o=e.newAgStackInstance();if(!o)return;o.then(function(s){if(s){var a=function(){return i.context.destroyBean(s)};i.isAlive()?(i.eValue.appendChild(s.getGui()),i.addDestroyFunc(a)):a()}})}else this.eValue.innerText=n},t.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),r.prototype.destroy.call(this)},t.prototype.refresh=function(){return!1},t.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',L0([ut("eExpanded")],t.prototype,"eExpanded",void 0),L0([ut("eContracted")],t.prototype,"eContracted",void 0),L0([ut("eCheckbox")],t.prototype,"eCheckbox",void 0),L0([ut("eValue")],t.prototype,"eValue",void 0),L0([ut("eChildCount")],t.prototype,"eChildCount",void 0),t}(Rn),D9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),gW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},T9=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return D9(t,r),t.prototype.init=function(e){e.node.failedLoad?this.setupFailed():this.setupLoading()},t.prototype.setupFailed=function(){var e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")},t.prototype.setupLoading=function(){var e=no("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);var n=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=n("loadingOoo","Loading")},t.prototype.refresh=function(e){return!1},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',gW([ut("eLoadingIcon")],t.prototype,"eLoadingIcon",void 0),gW([ut("eLoadingText")],t.prototype,"eLoadingText",void 0),t}(Rn),R9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),O9=function(r){function t(){return r.call(this)||this}return R9(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var n,i=null!==(n=this.gridOptionsService.get("overlayLoadingTemplate"))&&void 0!==n?n:t.DEFAULT_LOADING_OVERLAY_TEMPLATE,o=this.localeService.getLocaleTextFunc(),s=i.replace("[LOADING...]",o("loadingOoo","Loading..."));this.setTemplate(s)},t.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',t}(Rn),I9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),A9=function(r){function t(){return r.call(this)||this}return I9(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var n,i=null!==(n=this.gridOptionsService.get("overlayNoRowsTemplate"))&&void 0!==n?n:t.DEFAULT_NO_ROWS_TEMPLATE,o=this.localeService.getLocaleTextFunc(),s=i.replace("[NO_ROWS_TO_SHOW]",o("noRowsToShow","No Rows To Show"));this.setTemplate(s)},t.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',t}(Rn),P9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),N9=function(r){function t(){return r.call(this,'<div class="ag-tooltip"></div>')||this}return P9(t,r),t.prototype.init=function(e){var n=e.value;this.getGui().innerHTML=th(n)},t}(M0),M9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),lk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},x9=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},L9=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:W7,agColumnHeader:X7,agColumnGroupHeader:t9,agSortIndicator:sk,agTextColumnFloatingFilter:Z7,agNumberColumnFloatingFilter:q7,agDateColumnFloatingFilter:B7,agReadOnlyFloatingFilter:y7,agAnimateShowChangeCellRenderer:p9,agAnimateSlideCellRenderer:v9,agGroupCellRenderer:pW,agGroupRowRenderer:pW,agLoadingCellRenderer:T9,agCellEditor:cW,agTextCellEditor:cW,agSelectCellEditor:a9,agLargeTextCellEditor:o9,agTextColumnFilter:ik,agNumberColumnFilter:nW,agDateColumnFilter:Q2,agLoadingOverlay:O9,agNoRowsOverlay:A9,agTooltipComponent:N9},e.enterpriseAgDefaultCompsModule={agSetColumnFilter:Ot.SetFilterModule,agSetColumnFloatingFilter:Ot.SetFilterModule,agMultiColumnFilter:Ot.MultiFilterModule,agMultiColumnFloatingFilter:Ot.MultiFilterModule,agGroupColumnFilter:Ot.RowGroupingModule,agGroupColumnFloatingFilter:Ot.RowGroupingModule,agRichSelect:Ot.RichSelectModule,agRichSelectCellEditor:Ot.RichSelectModule,agDetailCellRenderer:Ot.MasterDetailModule,agSparklineCellRenderer:Ot.SparklinesModule},e.deprecatedAgGridDefaults={agPopupTextCellEditor:'AG Grid: Since v27.1 The agPopupTextCellEditor is deprecated. Instead use { cellEditor: "agTextCellEditor", cellEditorPopup: true }',agPopupSelectCellEditor:'AG Grid: Since v27.1 the agPopupSelectCellEditor is deprecated. Instead use { cellEditor: "agSelectCellEditor", cellEditorPopup: true }'},e.jsComps={},e.fwComps={},e}return M9(t,r),t.prototype.init=function(){var e=this;null!=this.gridOptions.components&&Wr(this.gridOptions.components,function(n,i){return e.registerJsComponent(n,i)}),null!=this.gridOptions.frameworkComponents&&Wr(this.gridOptions.frameworkComponents,function(n,i){return e.registerFwComponent(n,i)})},t.prototype.registerDefaultComponent=function(e,n){this.agGridDefaults[e]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[e]=n},t.prototype.registerJsComponent=function(e,n){this.fwComps[e]?console.error("Trying to register a component that you have already registered for frameworks: "+e):this.jsComps[e]=n},t.prototype.registerFwComponent=function(e,n){Yn(function(){return console.warn("AG Grid: As of v27, registering components via grid property frameworkComponents is deprecated. Instead register both JavaScript AND Framework Components via the components property.")},"UserComponentRegistry.frameworkComponentsDeprecated"),this.fwComps[e]=n},t.prototype.retrieve=function(e,n){var i=this,o=function(E,T){return{componentFromFramework:T,component:E}},s=this.getFrameworkOverrides().frameworkComponent(n,this.gridOptions.components);if(null!=s)return o(s,!0);var a=this.fwComps[n];if(a)return o(a,!0);var d=this.jsComps[n];if(d)return o(d,this.getFrameworkOverrides().isFrameworkComponent(d));var g=this.agGridDefaults[n];if(g)return o(g,!1);var C=this.enterpriseAgDefaultCompsModule[n];return C?on.assertRegistered(C,"AG Grid '"+e+"' component: "+n):this.deprecatedAgGridDefaults[n]?Yn(function(){return console.warn(i.deprecatedAgGridDefaults[n])},n):Yn(function(){i.warnAboutMissingComponent(e,n)},"MissingComp"+n),null},t.prototype.warnAboutMissingComponent=function(e,n){var i=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(x9(arguments[t]));return r}(Object.keys(this.agGridDefaults).filter(function(s){return!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)}),Object.keys(this.jsComps),Object.keys(this.fwComps)),o=cL(n,i,!0,.8);console.warn("AG Grid: Could not find '"+n+"' component. It was configured as \""+e+": '"+n+"'\" but it wasn't found in the list of registered components."),o.length>0&&console.warn("         Did you mean: ["+o.slice(0,3)+"]?"),console.warn("If using a custom component check it has been registered as described in: https://ag-grid.com/javascript-data-grid/components/")},lk([F("gridOptions")],t.prototype,"gridOptions",void 0),lk([rt],t.prototype,"init",null),lk([Rt("userComponentRegistry")],t)}(Ye),k9={propertyName:"dateComponent",cellRenderer:!1},G9={propertyName:"headerComponent",cellRenderer:!1},V9={propertyName:"headerGroupComponent",cellRenderer:!1},mW={propertyName:"cellRenderer",cellRenderer:!0},H9={propertyName:"cellEditor",cellRenderer:!1},vW={propertyName:"innerRenderer",cellRenderer:!0},B9={propertyName:"loadingOverlayComponent",cellRenderer:!1},U9={propertyName:"noRowsOverlayComponent",cellRenderer:!1},j9={propertyName:"tooltipComponent",cellRenderer:!1},uk={propertyName:"filter",cellRenderer:!1},W9={propertyName:"floatingFilterComponent",cellRenderer:!1},$9={propertyName:"toolPanel",cellRenderer:!1},z9={propertyName:"statusPanel",cellRenderer:!1},K9={propertyName:"fullWidthCellRenderer",cellRenderer:!0},q9={propertyName:"loadingCellRenderer",cellRenderer:!0},Y9={propertyName:"groupRowRenderer",cellRenderer:!0},Z9={propertyName:"detailCellRenderer",cellRenderer:!0},Q9=function(){function r(){}return r.getFloatingFilterType=function(t){return this.filterToFloatingFilterMapping[t]},r.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},r}(),J9=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lw=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},X9=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return J9(t,r),t.prototype.getHeaderCompDetails=function(e,n){return this.getCompDetails(e,G9,"agColumnHeader",n)},t.prototype.getHeaderGroupCompDetails=function(e){var n=e.columnGroup.getColGroupDef();return this.getCompDetails(n,V9,"agColumnGroupHeader",e)},t.prototype.getFullWidthCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,K9,null,e,!0)},t.prototype.getFullWidthLoadingCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,q9,"agLoadingCellRenderer",e,!0)},t.prototype.getFullWidthGroupCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,Y9,"agGroupRowRenderer",e,!0)},t.prototype.getFullWidthDetailCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,Z9,"agDetailCellRenderer",e,!0)},t.prototype.getInnerRendererDetails=function(e,n){return this.getCompDetails(e,vW,null,n)},t.prototype.getFullWidthGroupRowInnerCellRenderer=function(e,n){return this.getCompDetails(e,vW,null,n)},t.prototype.getCellRendererDetails=function(e,n){return this.getCompDetails(e,mW,null,n)},t.prototype.getCellEditorDetails=function(e,n){return this.getCompDetails(e,H9,"agCellEditor",n,!0)},t.prototype.getFilterDetails=function(e,n,i){return this.getCompDetails(e,uk,i,n,!0)},t.prototype.getDateCompDetails=function(e){return this.getCompDetails(this.gridOptions,k9,"agDateInput",e,!0)},t.prototype.getLoadingOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,B9,"agLoadingOverlay",e,!0)},t.prototype.getNoRowsOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,U9,"agNoRowsOverlay",e,!0)},t.prototype.getTooltipCompDetails=function(e){return this.getCompDetails(e.colDef,j9,"agTooltipComponent",e,!0)},t.prototype.getSetFilterCellRendererDetails=function(e,n){return this.getCompDetails(e,mW,null,n)},t.prototype.getFloatingFilterCompDetails=function(e,n,i){return this.getCompDetails(e,W9,i,n)},t.prototype.getToolPanelCompDetails=function(e,n){return this.getCompDetails(e,$9,null,n,!0)},t.prototype.getStatusPanelCompDetails=function(e,n){return this.getCompDetails(e,z9,null,n,!0)},t.prototype.getCompDetails=function(e,n,i,o,s){var a=this;void 0===s&&(s=!1);var d=n.propertyName,f=n.cellRenderer,g=this.getCompKeys(e,n,o),C=g.compName,E=g.jsComp,T=g.fwComp,I=g.paramsFromSelector,M=g.popupFromSelector,k=g.popupPositionFromSelector,W=function(ce){var Re=a.userComponentRegistry.retrieve(d,ce);Re&&(E=Re.componentFromFramework?void 0:Re.component,T=Re.componentFromFramework?Re.component:void 0)};if(null!=C&&W(C),null==E&&null==T&&null!=i&&W(i),E&&f&&!this.agComponentUtils.doesImplementIComponent(E)&&(E=this.agComponentUtils.adaptFunction(d,E)),E||T){var z=this.mergeParamsWithApplicationProvidedParams(e,n,o,I),J=null==E,re=E||T;return{componentFromFramework:J,componentClass:re,params:z,type:n,popupFromSelector:M,popupPositionFromSelector:k,newAgStackInstance:function(){return a.newAgStackInstance(re,J,z,n)}}}s&&console.error("AG Grid: Could not find component "+C+", did you forget to configure this component?")},t.prototype.getCompKeys=function(e,n,i){var a,d,f,g,C,E,o=this,s=n.propertyName;if(e){var T=e,I=T[s+"Selector"],M=I?I(i):null,k=function(z,J){var re=function(){var Re="AG Grid: As of v27, the property "+s+"Framework is deprecated. The property "+s+" can now be used for JavaScript AND Framework Components.";Yn(function(){return console.warn(Re)},"UserComponentFactory."+s+"FrameworkDeprecated")};"string"==typeof z?a=z:"string"==typeof J?(re(),a=J):null!=z&&!0!==z?o.getFrameworkOverrides().isFrameworkComponent(z)?f=z:d=z:null!=J&&(re(),f=J)};if(M){if(null!=M.frameworkComponent){var W="AG Grid: As of v27, the return for "+s+"Selector has attributes [component, params] only. The attribute frameworkComponent is deprecated. You should now return back Framework Components using the 'component' attribute and the grid works out if it's a framework component or not.";Yn(function(){return console.warn(W)},"UserComponentFactory."+s+"FrameworkSelectorDeprecated"),k(M.frameworkComponent,void 0)}else k(M.component,void 0);g=M.params,C=M.popup,E=M.popupPosition}else k(T[s],T[s+"Framework"])}return{compName:a,jsComp:d,fwComp:f,paramsFromSelector:g,popupFromSelector:C,popupPositionFromSelector:E}},t.prototype.newAgStackInstance=function(e,n,i,o){var d;if(n){var f=this.componentMetadataProvider.retrieve(o.propertyName);d=this.frameworkComponentWrapper.wrap(e,f.mandatoryMethodList,f.optionalMethodList,o)}else d=new e;var g=this.initComponent(d,i);return null==g?ta.resolve(d):g.then(function(){return d})},t.prototype.mergeParamsWithApplicationProvidedParams=function(e,n,i,o){void 0===o&&(o=null);var s={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};Ia(s,i);var d=e&&e[n.propertyName+"Params"];return"function"==typeof d?Ia(s,d(i)):"object"==typeof d&&Ia(s,d),Ia(s,o),s},t.prototype.initComponent=function(e,n){if(this.context.createBean(e),null!=e.init)return e.init(n)},t.prototype.getDefaultFloatingFilterType=function(e){if(null==e)return null;var n=null,i=this.getCompKeys(e,uk),o=i.compName,s=i.jsComp,a=i.fwComp;return o?n=Q9.getFloatingFilterType(o):null==s&&null==a&&!0===e.filter&&(n=on.isRegistered(Ot.SetFilterModule)?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter"),n},Lw([F("gridOptions")],t.prototype,"gridOptions",void 0),Lw([F("agComponentUtils")],t.prototype,"agComponentUtils",void 0),Lw([F("componentMetadataProvider")],t.prototype,"componentMetadataProvider",void 0),Lw([F("userComponentRegistry")],t.prototype,"userComponentRegistry",void 0),Lw([tr("frameworkComponentWrapper")],t.prototype,"frameworkComponentWrapper",void 0),Lw([Rt("userComponentFactory")],t)}(Ye),k0=(()=>(function(r){r[r.SINGLE_SHEET=0]="SINGLE_SHEET",r[r.MULTI_SHEET=1]="MULTI_SHEET"}(k0||(k0={})),k0))(),eQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),G0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},tQ=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return eQ(t,r),t.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},t.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},t.prototype.removeListener=function(e){var n=e.dragSource.eElement;n.removeEventListener("mousedown",e.mouseDownListener),e.touchEnabled&&n.removeEventListener("touchstart",e.touchStartListener,{passive:!0})},t.prototype.removeDragSource=function(e){var n=this.dragSources.find(function(i){return i.dragSource===e});n&&(this.removeListener(n),As(this.dragSources,n))},t.prototype.isDragging=function(){return this.dragging},t.prototype.addDragSource=function(e,n){var i=this;void 0===n&&(n=!1);var o=this.onMouseDown.bind(this,e);e.eElement.addEventListener("mousedown",o);var s=null,a=this.gridOptionsService.is("suppressTouch");n&&!a&&e.eElement.addEventListener("touchstart",s=function(d){FL(d.target)||(d.cancelable&&(d.preventDefault(),d.stopPropagation()),i.onTouchStart(e,d))},{passive:!1}),this.dragSources.push({dragSource:e,mouseDownListener:o,touchStartListener:s,touchEnabled:n})},t.prototype.onTouchStart=function(e,n){var i=this;this.currentDragParams=e,this.dragging=!1;var o=n.touches[0];this.touchLastTime=o,this.touchStart=o;var a=function(C){return i.onTouchUp(C,e.eElement)},f=n.target,g=[{target:document,type:"touchmove",listener:function(C){C.cancelable&&C.preventDefault()},options:{passive:!1}},{target:f,type:"touchmove",listener:function(C){return i.onTouchMove(C,e.eElement)},options:{passive:!0}},{target:f,type:"touchend",listener:a,options:{passive:!0}},{target:f,type:"touchcancel",listener:a,options:{passive:!0}}];this.addTemporaryEvents(g),0===e.dragStartPixels&&this.onCommonMove(o,this.touchStart,e.eElement)},t.prototype.onMouseDown=function(e,n){var i=this,o=n;if(!(e.skipMouseEvent&&e.skipMouseEvent(n)||o._alreadyProcessedByDragService||(o._alreadyProcessedByDragService=!0,0!==n.button))){this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=n;var s=this.gridOptionsService.getDocument();this.addTemporaryEvents([{target:s,type:"mousemove",listener:function(E){return i.onMouseMove(E,e.eElement)}},{target:s,type:"mouseup",listener:function(E){return i.onMouseUp(E,e.eElement)}},{target:s,type:"contextmenu",listener:function(E){return E.preventDefault()}}]),0===e.dragStartPixels&&this.onMouseMove(n,e.eElement)}},t.prototype.addTemporaryEvents=function(e){e.forEach(function(n){n.target.addEventListener(n.type,n.listener,n.options)}),this.dragEndFunctions.push(function(){e.forEach(function(n){n.target.removeEventListener(n.type,n.listener,n.options)})})},t.prototype.isEventNearStartEvent=function(e,n){var i=this.currentDragParams.dragStartPixels;return $L(e,n,Qe(i)?i:4)},t.prototype.getFirstActiveTouch=function(e){for(var n=0;n<e.length;n++)if(e[n].identifier===this.touchStart.identifier)return e[n];return null},t.prototype.onCommonMove=function(e,n,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,n))return;this.dragging=!0,this.eventService.dispatchEvent({type:V.EVENT_DRAG_STARTED,target:i}),this.currentDragParams.onDragStart(n),this.currentDragParams.onDragging(n)}this.currentDragParams.onDragging(e)},t.prototype.onTouchMove=function(e,n){var i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,n)},t.prototype.onMouseMove=function(e,n){(this.gridOptionsService.is("enableCellTextSelection")||nh())&&"mousemove"===e.type&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,n)},t.prototype.isOverFormFieldElement=function(e){var i=e.target?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")},t.prototype.onTouchUp=function(e,n){var i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,n)},t.prototype.onMouseUp=function(e,n){this.onUpCommon(e,n)},t.prototype.onUpCommon=function(e,n){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:V.EVENT_DRAG_STOPPED,target:n})),this.mouseStartEvent=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(o){return o()}),this.dragEndFunctions.length=0},G0([F("loggerFactory")],t.prototype,"loggerFactory",void 0),G0([F("mouseEventService")],t.prototype,"mouseEventService",void 0),G0([rt],t.prototype,"init",null),G0([as],t.prototype,"removeAllListeners",null),G0([Rt("dragService")],t)}(Ye),rh=(()=>(function(r){r[r.Above=0]="Above",r[r.Below=1]="Below"}(rh||(rh={})),rh))(),Jn=(()=>(function(r){r.EVERYTHING="group",r.FILTER="filter",r.SORT="sort",r.MAP="map",r.AGGREGATE="aggregate",r.FILTER_AGGREGATES="filter_aggregates",r.PIVOT="pivot",r.NOTHING="nothing"}(Jn||(Jn={})),Jn))(),Zn=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o};function Ay(r){return null!=r&&null!=r.getFrameworkComponentInstance?r.getFrameworkComponentInstance():r}var nQ=function(){function r(){this.detailGridInfoMap={},this.destroyCalled=!1}return r.prototype.registerOverlayWrapperComp=function(t){this.overlayWrapperComp=t},r.prototype.registerSideBarComp=function(t){this.sideBarComp=t},r.prototype.init=function(){var t=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl()})},r.prototype.__getAlignedGridService=function(){return this.alignedGridsService},r.prototype.__getContext=function(){return this.context},r.prototype.getSetterMethod=function(t){return"set"+t.charAt(0).toUpperCase()+t.substring(1)},r.prototype.__setProperty=function(t,e){this.gridOptionsService.set(t,e);var n=this.getSetterMethod(t);this[n]&&this[n](e)},r.prototype.addDetailGridInfo=function(t,e){this.detailGridInfoMap[t]=e},r.prototype.removeDetailGridInfo=function(t){this.detailGridInfoMap[t]=void 0},r.prototype.getDetailGridInfo=function(t){return this.detailGridInfoMap[t]},r.prototype.forEachDetailGridInfo=function(t){var e=0;Wr(this.detailGridInfoMap,function(n,i){Qe(i)&&(t(i,e),e++)})},r.prototype.getDataAsCsv=function(t){if(on.assertRegistered(Ot.CsvExportModule,"api.getDataAsCsv"))return this.csvCreator.getDataAsCsv(t)},r.prototype.exportDataAsCsv=function(t){on.assertRegistered(Ot.CsvExportModule,"api.exportDataAsCSv")&&this.csvCreator.exportDataAsCsv(t)},r.prototype.getExcelExportMode=function(t){var e=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({exportMode:"xlsx"},e,t).exportMode},r.prototype.assertNotExcelMultiSheet=function(t,e){if(!on.assertRegistered(Ot.ExcelExportModule,"api."+t))return!1;var n=this.getExcelExportMode(e);return this.excelCreator.getFactoryMode(n)!==k0.MULTI_SHEET||(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1)},r.prototype.getDataAsExcel=function(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)},r.prototype.exportDataAsExcel=function(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)},r.prototype.getSheetDataForExcel=function(t){if(on.assertRegistered(Ot.ExcelExportModule,"api.getSheetDataForExcel")){var e=this.getExcelExportMode(t);return this.excelCreator.setFactoryMode(k0.MULTI_SHEET,e),this.excelCreator.getSheetDataForExcel(t)}},r.prototype.getMultipleSheetsAsExcel=function(t){if(on.assertRegistered(Ot.ExcelExportModule,"api.getMultipleSheetsAsExcel"))return this.excelCreator.getMultipleSheetsAsExcel(t)},r.prototype.exportMultipleSheetsAsExcel=function(t){if(on.assertRegistered(Ot.ExcelExportModule,"api.exportMultipleSheetsAsExcel"))return this.excelCreator.exportMultipleSheetsAsExcel(t)},r.prototype.setGridAriaProperty=function(t,e){if(t){var n=this.ctrlsService.getGridBodyCtrl().getGui(),i="aria-"+t;null===e?n.removeAttribute(i):n.setAttribute(i,e)}},r.prototype.logMissingRowModel=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.error("AG Grid: api."+t+" can only be called when gridOptions.rowModelType is "+e.join(" or "))},r.prototype.setServerSideDatasource=function(t){this.serverSideRowModel?this.serverSideRowModel.setDatasource(t):this.logMissingRowModel("setServerSideDatasource","serverSide")},r.prototype.setCacheBlockSize=function(t){this.serverSideRowModel?(this.gridOptionsService.set("cacheBlockSize",t),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")},r.prototype.setDatasource=function(t){this.gridOptionsService.isRowModelType("infinite")?this.rowModel.setDatasource(t):this.logMissingRowModel("setDatasource","infinite")},r.prototype.setViewportDatasource=function(t){this.gridOptionsService.isRowModelType("viewport")?this.rowModel.setViewportDatasource(t):this.logMissingRowModel("setViewportDatasource","viewport")},r.prototype.setRowData=function(t){null==this.immutableService?this.logMissingRowModel("setRowData","clientSide"):this.immutableService.isActive()?this.immutableService.setRowData(t):(this.selectionService.reset(),this.clientSideRowModel.setRowData(t))},r.prototype.setPinnedTopRowData=function(t){this.pinnedRowModel.setPinnedTopRowData(t)},r.prototype.setPinnedBottomRowData=function(t){this.pinnedRowModel.setPinnedBottomRowData(t)},r.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},r.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},r.prototype.getPinnedTopRow=function(t){return this.pinnedRowModel.getPinnedTopRow(t)},r.prototype.getPinnedBottomRow=function(t){return this.pinnedRowModel.getPinnedBottomRow(t)},r.prototype.setColumnDefs=function(t,e){void 0===e&&(e="api"),this.columnModel.setColumnDefs(t,e),this.gridOptionsService.set("columnDefs",t,!0,{source:e})},r.prototype.setAutoGroupColumnDef=function(t,e){void 0===e&&(e="api"),this.gridOptionsService.set("autoGroupColumnDef",t,!0,{source:e})},r.prototype.setDefaultColDef=function(t,e){void 0===e&&(e="api"),this.gridOptionsService.set("defaultColDef",t,!0,{source:e})},r.prototype.setColumnTypes=function(t,e){void 0===e&&(e="api"),this.gridOptionsService.set("columnTypes",t,!0,{source:e})},r.prototype.expireValueCache=function(){this.valueCache.expire()},r.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},r.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},r.prototype.setAlwaysShowHorizontalScroll=function(t){this.gridOptionsService.set("alwaysShowHorizontalScroll",t)},r.prototype.setAlwaysShowVerticalScroll=function(t){this.gridOptionsService.set("alwaysShowVerticalScroll",t)},r.prototype.refreshCells=function(t){void 0===t&&(t={}),this.rowRenderer.refreshCells(t)},r.prototype.flashCells=function(t){void 0===t&&(t={}),this.rowRenderer.flashCells(t)},r.prototype.redrawRows=function(t){void 0===t&&(t={}),this.rowRenderer.redrawRows(t?t.rowNodes:void 0)},r.prototype.setFunctionsReadOnly=function(t){this.gridOptionsService.set("functionsReadOnly",t)},r.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(t){return t.refresh()})},r.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},r.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},r.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},r.prototype.getModel=function(){return this.rowModel},r.prototype.setRowNodeExpanded=function(t,e,n){t&&(n&&t.parent&&-1!==t.parent.level&&this.setRowNodeExpanded(t.parent,e,n),t.setExpanded(e))},r.prototype.onGroupExpandedOrCollapsed=function(){Qt(this.clientSideRowModel)?this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide"):this.clientSideRowModel.refreshModel({step:Jn.MAP})},r.prototype.refreshClientSideRowModel=function(t){Qt(this.clientSideRowModel)?this.logMissingRowModel("refreshClientSideRowModel","clientSide"):this.clientSideRowModel.refreshModel(t)},r.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},r.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},r.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},r.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gridOptionsService.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},r.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},r.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")},r.prototype.addRenderedRowListener=function(t,e,n){this.rowRenderer.addRenderedRowListener(t,e,n)},r.prototype.getQuickFilter=function(){return this.gridOptionsService.get("quickFilterText")},r.prototype.setQuickFilter=function(t){this.gridOptionsService.set("quickFilterText",t)},r.prototype.setExcludeHiddenColumnsFromQuickFilter=function(t){this.gridOptionsService.set("excludeHiddenColumnsFromQuickFilter",t)},r.prototype.selectAll=function(t){void 0===t&&(t="apiSelectAll"),this.selectionService.selectAllRowNodes({source:t})},r.prototype.deselectAll=function(t){void 0===t&&(t="apiSelectAll"),this.selectionService.deselectAllRowNodes({source:t})},r.prototype.selectAllFiltered=function(t){void 0===t&&(t="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},r.prototype.deselectAllFiltered=function(t){void 0===t&&(t="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},r.prototype.getServerSideSelectionState=function(){return Qt(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getServerSideSelectionState()},r.prototype.setServerSideSelectionState=function(t){Qt(this.serverSideRowModel)?this.logMissingRowModel("setServerSideSelectionState","serverSide"):this.selectionService.setServerSideSelectionState(t)},r.prototype.selectAllOnCurrentPage=function(t){void 0===t&&(t="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},r.prototype.deselectAllOnCurrentPage=function(t){void 0===t&&(t="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},r.prototype.sizeColumnsToFit=function(t){this.gridBodyCtrl.sizeColumnsToFit(t)},r.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},r.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},r.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},r.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},r.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},r.prototype.getBestCostNodeSelection=function(){if(!Qt(this.clientSideRowModel))return this.selectionService.getBestCostNodeSelection();this.logMissingRowModel("getBestCostNodeSelection","clientSide")},r.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},r.prototype.ensureColumnVisible=function(t,e){void 0===e&&(e="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e)},r.prototype.ensureIndexVisible=function(t,e){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e)},r.prototype.ensureNodeVisible=function(t,e){void 0===e&&(e=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e)},r.prototype.forEachLeafNode=function(t){Qt(this.clientSideRowModel)?this.logMissingRowModel("forEachLeafNode","clientSide"):this.clientSideRowModel.forEachLeafNode(t)},r.prototype.forEachNode=function(t,e){this.rowModel.forEachNode(t,e)},r.prototype.forEachNodeAfterFilter=function(t){Qt(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilter","clientSide"):this.clientSideRowModel.forEachNodeAfterFilter(t)},r.prototype.forEachNodeAfterFilterAndSort=function(t){Qt(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide"):this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)},r.prototype.getFilterInstance=function(t,e){var n=this.getFilterInstanceImpl(t,function(o){if(e){var s=Ay(o);e(s)}});return Ay(n)},r.prototype.getFilterInstanceImpl=function(t,e){var n=this.columnModel.getPrimaryColumn(t);if(n){var i=this.filterManager.getFilterComponent(n,"NO_UI"),o=i&&i.resolveNow(null,function(s){return s});return o?setTimeout(e,0,o):i&&i.then(function(s){e(s)}),o}},r.prototype.destroyFilter=function(t){var e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")},r.prototype.getStatusPanel=function(t){if(on.assertRegistered(Ot.StatusBarModule,"api.getStatusPanel"))return Ay(this.statusBarService.getStatusPanel(t))},r.prototype.getColumnDef=function(t){var e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null},r.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},r.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},r.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},r.prototype.setFilterModel=function(t){this.filterManager.setFilterModel(t)},r.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},r.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},r.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},r.prototype.setFocusedCell=function(t,e,n){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:n,forceBrowserFocus:!0})},r.prototype.setSuppressRowDrag=function(t){this.gridOptionsService.set("suppressRowDrag",t)},r.prototype.setSuppressMoveWhenRowDragging=function(t){this.gridOptionsService.set("suppressMoveWhenRowDragging",t)},r.prototype.setSuppressRowClickSelection=function(t){this.gridOptionsService.set("suppressRowClickSelection",t)},r.prototype.addRowDropZone=function(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)},r.prototype.removeRowDropZone=function(t){var e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)},r.prototype.getRowDropZoneParams=function(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)},r.prototype.setHeaderHeight=function(t){this.gridOptionsService.set("headerHeight",t)},r.prototype.setDomLayout=function(t){this.gridOptionsService.set("domLayout",t)},r.prototype.setEnableCellTextSelection=function(t){this.gridBodyCtrl.setCellTextSelection(t)},r.prototype.setFillHandleDirection=function(t){this.gridOptionsService.set("fillHandleDirection",t)},r.prototype.setGroupHeaderHeight=function(t){this.gridOptionsService.set("groupHeaderHeight",t)},r.prototype.setFloatingFiltersHeight=function(t){this.gridOptionsService.set("floatingFiltersHeight",t)},r.prototype.setPivotHeaderHeight=function(t){this.gridOptionsService.set("pivotHeaderHeight",t)},r.prototype.setPivotGroupHeaderHeight=function(t){this.gridOptionsService.set("pivotGroupHeaderHeight",t)},r.prototype.setPivotMode=function(t){this.columnModel.setPivotMode(t)},r.prototype.setAnimateRows=function(t){this.gridOptionsService.set("animateRows",t)},r.prototype.setIsExternalFilterPresent=function(t){this.gridOptionsService.set("isExternalFilterPresent",t)},r.prototype.setDoesExternalFilterPass=function(t){this.gridOptionsService.set("doesExternalFilterPass",t)},r.prototype.setNavigateToNextCell=function(t){this.gridOptionsService.set("navigateToNextCell",t)},r.prototype.setTabToNextCell=function(t){this.gridOptionsService.set("tabToNextCell",t)},r.prototype.setTabToNextHeader=function(t){this.gridOptionsService.set("tabToNextHeader",t)},r.prototype.setNavigateToNextHeader=function(t){this.gridOptionsService.set("navigateToNextHeader",t)},r.prototype.setRowGroupPanelShow=function(t){this.gridOptionsService.set("rowGroupPanelShow",t)},r.prototype.setGroupRowAggNodes=function(t){$o("27.2","setGroupRowAggNodes","setGetGroupRowAgg"),this.gridOptionsService.set("groupRowAggNodes",t)},r.prototype.setGetGroupRowAgg=function(t){this.gridOptionsService.set("getGroupRowAgg",t)},r.prototype.setGetBusinessKeyForNode=function(t){this.gridOptionsService.set("getBusinessKeyForNode",t)},r.prototype.setGetChildCount=function(t){this.gridOptionsService.set("getChildCount",t)},r.prototype.setProcessRowPostCreate=function(t){this.gridOptionsService.set("processRowPostCreate",t)},r.prototype.setGetRowNodeId=function(t){$o("27.1","setGetRowNodeId","setGetRowId"),this.gridOptionsService.set("getRowNodeId",t)},r.prototype.setGetRowId=function(t){this.gridOptionsService.set("getRowId",t)},r.prototype.setGetRowClass=function(t){this.gridOptionsService.set("getRowClass",t)},r.prototype.setIsFullWidthCell=function(t){$o("27.2","setIsFullWidthCell","setIsFullWidthRow"),this.gridOptionsService.set("isFullWidthCell",t)},r.prototype.setIsFullWidthRow=function(t){this.gridOptionsService.set("isFullWidthRow",t)},r.prototype.setIsRowSelectable=function(t){this.gridOptionsService.set("isRowSelectable",t)},r.prototype.setIsRowMaster=function(t){this.gridOptionsService.set("isRowMaster",t)},r.prototype.setPostSort=function(t){$o("27.2","setPostSort","setPostSortRows"),this.gridOptionsService.set("postSort",t)},r.prototype.setPostSortRows=function(t){this.gridOptionsService.set("postSortRows",t)},r.prototype.setGetDocument=function(t){this.gridOptionsService.set("getDocument",t)},r.prototype.setGetContextMenuItems=function(t){this.gridOptionsService.set("getContextMenuItems",t)},r.prototype.setGetMainMenuItems=function(t){this.gridOptionsService.set("getMainMenuItems",t)},r.prototype.setProcessCellForClipboard=function(t){this.gridOptionsService.set("processCellForClipboard",t)},r.prototype.setSendToClipboard=function(t){this.gridOptionsService.set("sendToClipboard",t)},r.prototype.setProcessCellFromClipboard=function(t){this.gridOptionsService.set("processCellFromClipboard",t)},r.prototype.setProcessSecondaryColDef=function(t){$o("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(t)},r.prototype.setProcessSecondaryColGroupDef=function(t){$o("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(t)},r.prototype.setProcessPivotResultColDef=function(t){this.gridOptionsService.set("processPivotResultColDef",t)},r.prototype.setProcessPivotResultColGroupDef=function(t){this.gridOptionsService.set("processPivotResultColGroupDef",t)},r.prototype.setPostProcessPopup=function(t){this.gridOptionsService.set("postProcessPopup",t)},r.prototype.setDefaultGroupOrderComparator=function(t){$o("27.2","setDefaultGroupOrderComparator","setInitialGroupOrderComparator"),this.gridOptionsService.set("defaultGroupOrderComparator",t)},r.prototype.setInitialGroupOrderComparator=function(t){this.gridOptionsService.set("initialGroupOrderComparator",t)},r.prototype.setGetChartToolbarItems=function(t){this.gridOptionsService.set("getChartToolbarItems",t)},r.prototype.setPaginationNumberFormatter=function(t){this.gridOptionsService.set("paginationNumberFormatter",t)},r.prototype.setGetServerSideStoreParams=function(t){$o("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(t)},r.prototype.setGetServerSideGroupLevelParams=function(t){this.gridOptionsService.set("getServerSideGroupLevelParams",t)},r.prototype.setIsServerSideGroupOpenByDefault=function(t){this.gridOptionsService.set("isServerSideGroupOpenByDefault",t)},r.prototype.setIsApplyServerSideTransaction=function(t){this.gridOptionsService.set("isApplyServerSideTransaction",t)},r.prototype.setIsServerSideGroup=function(t){this.gridOptionsService.set("isServerSideGroup",t)},r.prototype.setGetServerSideGroupKey=function(t){this.gridOptionsService.set("getServerSideGroupKey",t)},r.prototype.setGetRowStyle=function(t){this.gridOptionsService.set("getRowStyle",t)},r.prototype.setGetRowHeight=function(t){this.gridOptionsService.set("getRowHeight",t)},r.prototype.assertSideBarLoaded=function(t){return on.assertRegistered(Ot.SideBarModule,"api."+t)},r.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()},r.prototype.setSideBarVisible=function(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(t)},r.prototype.setSideBarPosition=function(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(t)},r.prototype.openToolPanel=function(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(t,"api")},r.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")},r.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null},r.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()},r.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()},r.prototype.getToolPanelInstance=function(t){if(this.assertSideBarLoaded("getToolPanelInstance"))return Ay(this.sideBarComp.getToolPanelInstance(t))},r.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()},r.prototype.setSideBar=function(t){this.gridOptionsService.set("sideBar",t)},r.prototype.setSuppressClipboardPaste=function(t){this.gridOptionsService.set("suppressClipboardPaste",t)},r.prototype.resetRowHeights=function(){if(Qe(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}},r.prototype.setGroupRemoveSingleChildren=function(t){this.gridOptionsService.set("groupRemoveSingleChildren",t)},r.prototype.setGroupRemoveLowestSingleChildren=function(t){this.gridOptionsService.set("groupRemoveLowestSingleChildren",t)},r.prototype.setGroupDisplayType=function(t){this.gridOptionsService.set("groupDisplayType",t)},r.prototype.setRowClass=function(t){this.gridOptionsService.set("rowClass",t)},r.prototype.setDeltaSort=function(t){this.gridOptionsService.set("deltaSort",t)},r.prototype.setRowCount=function(t,e){if(this.serverSideRowModel)return this.columnModel.isRowGroupEmpty()?void this.serverSideRowModel.setRowCount(t,e):void console.error("AG Grid: setRowCount cannot be used while using row grouping.");this.infiniteRowModel?this.infiniteRowModel.setRowCount(t,e):this.logMissingRowModel("setRowCount","infinite","serverSide")},r.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},r.prototype.getValue=function(t,e){var n=this.columnModel.getPrimaryColumn(t);return Qt(n)&&(n=this.columnModel.getGridColumn(t)),Qt(n)?null:this.valueService.getValue(n,e)},r.prototype.addEventListener=function(t,e){var n=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(t,e,n)},r.prototype.addGlobalListener=function(t){var e=this.gridOptionsService.useAsyncEvents();this.eventService.addGlobalListener(t,e)},r.prototype.removeEventListener=function(t,e){var n=this.gridOptionsService.useAsyncEvents();this.eventService.removeEventListener(t,e,n)},r.prototype.removeGlobalListener=function(t){var e=this.gridOptionsService.useAsyncEvents();this.eventService.removeGlobalListener(t,e)},r.prototype.dispatchEvent=function(t){this.eventService.dispatchEvent(t)},r.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0;var t=this.ctrlsService.getGridCtrl();t&&t.destroyGridUi(),this.context.destroy()}},r.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(Aj.bind(window,this,"Grid API"),100)},r.prototype.warnIfDestroyed=function(t){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+t+" was called on a grid that was destroyed."),this.destroyCalled},r.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()},r.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(on.assertRegistered(Ot.RangeSelectionModule,"api.getCellRanges"),null)},r.prototype.addCellRange=function(t){this.rangeService?this.rangeService.addCellRange(t):on.assertRegistered(Ot.RangeSelectionModule,"api.addCellRange")},r.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),on.assertRegistered(Ot.RangeSelectionModule,"gridApi.clearRangeSelection")},r.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},r.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},r.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},r.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},r.prototype.getChartModels=function(){if(on.assertRegistered(Ot.GridChartsModule,"api.getChartModels"))return this.chartService.getChartModels()},r.prototype.getChartRef=function(t){if(on.assertRegistered(Ot.GridChartsModule,"api.getChartRef"))return this.chartService.getChartRef(t)},r.prototype.getChartImageDataURL=function(t){if(on.assertRegistered(Ot.GridChartsModule,"api.getChartImageDataURL"))return this.chartService.getChartImageDataURL(t)},r.prototype.downloadChart=function(t){if(on.assertRegistered(Ot.GridChartsModule,"api.downloadChart"))return this.chartService.downloadChart(t)},r.prototype.openChartToolPanel=function(t){if(on.assertRegistered(Ot.GridChartsModule,"api.openChartToolPanel"))return this.chartService.openChartToolPanel(t)},r.prototype.closeChartToolPanel=function(t){if(on.assertRegistered(Ot.GridChartsModule,"api.closeChartToolPanel"))return this.chartService.closeChartToolPanel(t.chartId)},r.prototype.createRangeChart=function(t){if(on.assertRegistered(Ot.GridChartsModule,"api.createRangeChart"))return this.chartService.createRangeChart(t)},r.prototype.createCrossFilterChart=function(t){if(on.assertRegistered(Ot.GridChartsModule,"api.createCrossFilterChart"))return this.chartService.createCrossFilterChart(t)},r.prototype.restoreChart=function(t,e){if(on.assertRegistered(Ot.GridChartsModule,"api.restoreChart"))return this.chartService.restoreChart(t,e)},r.prototype.createPivotChart=function(t){if(on.assertRegistered(Ot.GridChartsModule,"api.createPivotChart"))return this.chartService.createPivotChart(t)},r.prototype.copyToClipboard=function(t){on.assertRegistered(Ot.ClipboardModule,"api.copyToClipboard")&&this.clipboardService.copyToClipboard(t)},r.prototype.cutToClipboard=function(t){on.assertRegistered(Ot.ClipboardModule,"api.cutToClipboard")&&this.clipboardService.cutToClipboard(t)},r.prototype.copySelectedRowsToClipboard=function(t){on.assertRegistered(Ot.ClipboardModule,"api.copySelectedRowsToClipboard")&&this.clipboardService.copySelectedRowsToClipboard(t)},r.prototype.copySelectedRangeToClipboard=function(t){on.assertRegistered(Ot.ClipboardModule,"api.copySelectedRangeToClipboard")&&this.clipboardService.copySelectedRangeToClipboard(t)},r.prototype.copySelectedRangeDown=function(){on.assertRegistered(Ot.ClipboardModule,"api.copySelectedRangeDown")&&this.clipboardService.copyRangeDown()},r.prototype.showColumnMenuAfterButtonClick=function(t,e){var n=this.columnModel.getGridColumn(t);this.menuFactory.showMenuAfterButtonClick(n,e,"columnMenu")},r.prototype.showColumnMenuAfterMouseClick=function(t,e){var n=this.columnModel.getGridColumn(t);n||(n=this.columnModel.getPrimaryColumn(t)),n?this.menuFactory.showMenuAfterMouseEvent(n,e):console.error("AG Grid: column '"+t+"' not found")},r.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},r.prototype.setPopupParent=function(t){this.gridOptionsService.set("popupParent",t)},r.prototype.tabToNextCell=function(t){return this.navigationService.tabToNextCell(!1,t)},r.prototype.tabToPreviousCell=function(t){return this.navigationService.tabToNextCell(!0,t)},r.prototype.getCellRendererInstances=function(t){return void 0===t&&(t={}),this.rowRenderer.getCellRendererInstances(t).map(Ay)},r.prototype.getCellEditorInstances=function(t){return void 0===t&&(t={}),this.rowRenderer.getCellEditorInstances(t).map(Ay)},r.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},r.prototype.stopEditing=function(t){void 0===t&&(t=!1),this.rowRenderer.stopEditing(t)},r.prototype.startEditingCell=function(t){var e=this.columnModel.getGridColumn(t.colKey);if(e){var n={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e};null==t.rowPinned&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t.rowIndex);var o=this.navigationService.getCellByPosition(n);o&&o.startRowOrCellEdit(t.key,t.charPress)}else console.warn("AG Grid: no column found for "+t.colKey)},r.prototype.addAggFunc=function(t,e){this.aggFuncService&&this.aggFuncService.addAggFunc(t,e)},r.prototype.addAggFuncs=function(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)},r.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},r.prototype.applyServerSideTransaction=function(t){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(t);this.logMissingRowModel("applyServerSideTransaction","serverSide")},r.prototype.applyServerSideTransactionAsync=function(t,e){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(t,e);this.logMissingRowModel("applyServerSideTransactionAsync","serverSide")},r.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():this.logMissingRowModel("retryServerSideLoads","serverSide")},r.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide")},r.prototype.applyTransaction=function(t){if(this.clientSideRowModel){var e=this.clientSideRowModel.updateRowData(t);return this.rowRenderer.refreshFullWidthRows(e.update),this.gridOptionsService.is("suppressChangeDetection")||this.rowRenderer.refreshCells(),e}this.logMissingRowModel("applyTransaction","clientSide")},r.prototype.applyTransactionAsync=function(t,e){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(t,e):this.logMissingRowModel("applyTransactionAsync","clientSide")},r.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():this.logMissingRowModel("flushAsyncTransactions","clientSide")},r.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(t){this.gridOptionsService.set("suppressModelUpdateAfterUpdateTransaction",t)},r.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},r.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},r.prototype.refreshServerSide=function(t){this.serverSideRowModel?this.serverSideRowModel.refreshStore(t):this.logMissingRowModel("refreshServerSide","serverSide")},r.prototype.refreshServerSideStore=function(t){return $o("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(t)},r.prototype.getServerSideStoreState=function(){return $o("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()},r.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},r.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},r.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},r.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},r.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},r.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},r.prototype.getDisplayedRowAtIndex=function(t){return this.rowModel.getRow(t)},r.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},r.prototype.setPagination=function(t){this.gridOptionsService.set("pagination",t)},r.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},r.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},r.prototype.paginationSetPageSize=function(t){this.gridOptionsService.set("paginationPageSize",t)},r.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},r.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},r.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},r.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},r.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},r.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},r.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},r.prototype.paginationGoToPage=function(t){this.paginationProxy.goToPage(t)},Zn([tr("immutableService")],r.prototype,"immutableService",void 0),Zn([tr("csvCreator")],r.prototype,"csvCreator",void 0),Zn([tr("excelCreator")],r.prototype,"excelCreator",void 0),Zn([F("rowRenderer")],r.prototype,"rowRenderer",void 0),Zn([F("navigationService")],r.prototype,"navigationService",void 0),Zn([F("filterManager")],r.prototype,"filterManager",void 0),Zn([F("columnModel")],r.prototype,"columnModel",void 0),Zn([F("selectionService")],r.prototype,"selectionService",void 0),Zn([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),Zn([F("valueService")],r.prototype,"valueService",void 0),Zn([F("alignedGridsService")],r.prototype,"alignedGridsService",void 0),Zn([F("eventService")],r.prototype,"eventService",void 0),Zn([F("pinnedRowModel")],r.prototype,"pinnedRowModel",void 0),Zn([F("context")],r.prototype,"context",void 0),Zn([F("rowModel")],r.prototype,"rowModel",void 0),Zn([F("sortController")],r.prototype,"sortController",void 0),Zn([F("paginationProxy")],r.prototype,"paginationProxy",void 0),Zn([F("focusService")],r.prototype,"focusService",void 0),Zn([F("dragAndDropService")],r.prototype,"dragAndDropService",void 0),Zn([tr("rangeService")],r.prototype,"rangeService",void 0),Zn([tr("clipboardService")],r.prototype,"clipboardService",void 0),Zn([tr("aggFuncService")],r.prototype,"aggFuncService",void 0),Zn([F("menuFactory")],r.prototype,"menuFactory",void 0),Zn([tr("contextMenuFactory")],r.prototype,"contextMenuFactory",void 0),Zn([F("valueCache")],r.prototype,"valueCache",void 0),Zn([F("animationFrameService")],r.prototype,"animationFrameService",void 0),Zn([tr("statusBarService")],r.prototype,"statusBarService",void 0),Zn([tr("chartService")],r.prototype,"chartService",void 0),Zn([tr("undoRedoService")],r.prototype,"undoRedoService",void 0),Zn([tr("rowNodeBlockLoader")],r.prototype,"rowNodeBlockLoader",void 0),Zn([tr("ssrmTransactionManager")],r.prototype,"serverSideTransactionManager",void 0),Zn([F("ctrlsService")],r.prototype,"ctrlsService",void 0),Zn([rt],r.prototype,"init",null),Zn([as],r.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),Zn([Rt("gridApi")],r)}(),rQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),vA=function(){return vA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},vA.apply(this,arguments)},Py=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},iQ=function(r){function t(){var n=null!==r&&r.apply(this,arguments)||this;return n.allColumnFilters=new Map,n.activeAggregateFilters=[],n.activeColumnFilters=[],n.quickFilter=null,n.quickFilterParts=null,n.processingFilterChange=!1,n}var e;return rQ(t,r),e=t,t.prototype.init=function(){var n=this;this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,function(){return n.onColumnsChanged()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,function(){return n.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,function(){return n.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){n.refreshFiltersForAggregations(),n.resetQuickFilterCache()}),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,function(){return n.resetQuickFilterCache()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return n.resetQuickFilterCache()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,function(){n.gridOptionsService.is("excludeHiddenColumnsFromQuickFilter")&&n.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",function(i){return n.setQuickFilter(i.currentValue)}),this.addManagedPropertyListener("excludeHiddenColumnsFromQuickFilter",function(){return n.onExcludeHiddenColumnsFromQuickFilterChanged()}),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback()},t.prototype.isExternalFilterPresentCallback=function(){var n=this.gridOptionsService.getCallback("isExternalFilterPresent");return"function"==typeof n&&n({})},t.prototype.doesExternalFilterPass=function(n){var i=this.gridOptionsService.get("doesExternalFilterPass");return"function"==typeof i&&i(n)},t.prototype.setQuickFilterParts=function(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null},t.prototype.setFilterModel=function(n){var i=this,o=[],s=this.getFilterModel();if(n){var a=zL(Object.keys(n));this.allColumnFilters.forEach(function(d,f){o.push(i.setModelOnFilterWrapper(d.filterPromise,n[f])),a.delete(f)}),a.forEach(function(d){var f=i.columnModel.getPrimaryColumn(d)||i.columnModel.getGridColumn(d);if(f)if(f.isFilterAllowed()){var g=i.getOrCreateFilterWrapper(f,"NO_UI");g?o.push(i.setModelOnFilterWrapper(g.filterPromise,n[d])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+d)}else console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+d);else console.warn("AG Grid: setFilterModel() - no column found for colId: "+d)})}else this.allColumnFilters.forEach(function(d){o.push(i.setModelOnFilterWrapper(d.filterPromise,null))});ta.all(o).then(function(){var d=i.getFilterModel(),f=[];i.allColumnFilters.forEach(function(g,C){tn.jsonEquals(s?s[C]:null,d?d[C]:null)||f.push(g.column)}),f.length>0&&i.onFilterChanged({columns:f})})},t.prototype.setModelOnFilterWrapper=function(n,i){return new ta(function(o){n.then(function(s){"function"!=typeof s.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),o()),(s.setModel(i)||ta.resolve()).then(function(){return o()})})})},t.prototype.getFilterModel=function(){var n={};return this.allColumnFilters.forEach(function(i,o){var a=i.filterPromise.resolveNow(null,function(f){return f});if(null==a)return null;if("function"==typeof a.getModel){var d=a.getModel();Qe(d)&&(n[o]=d)}else console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel")}),n},t.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},t.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},t.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},t.prototype.doAggregateFiltersPass=function(n,i){return this.doColumnFiltersPass(n,i,!0)},t.prototype.updateActiveFilters=function(){var n=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var i=function(a){return!!a&&(a.isFilterActive?a.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))},o=!!this.gridOptionsService.getGroupAggFiltering();this.allColumnFilters.forEach(function(a){if(a.filterPromise.resolveNow(!1,i)){var d=a.filterPromise.resolveNow(null,function(f){return f});!function(a){if(!a.isPrimary())return!0;var f=!n.columnModel.isPivotActive();return!(!a.isValueActive()||!f)&&(!!n.columnModel.isPivotMode()||o)}(a.column)?n.activeColumnFilters.push(d):n.activeAggregateFilters.push(d)}})},t.prototype.updateFilterFlagInColumns=function(n,i){this.allColumnFilters.forEach(function(o){var s=o.filterPromise.resolveNow(!1,function(a){return a.isFilterActive()});o.column.setFilterActive(s,n,i)})},t.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()},t.prototype.doColumnFiltersPass=function(n,i,o){for(var d=o?this.activeAggregateFilters:this.activeColumnFilters,f=o?n.aggData:n.data,g=0;g<d.length;g++){var C=d[g];if(null!=C&&C!==i){if("function"!=typeof C.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!C.doesFilterPass({node:n,data:f}))return!1}}return!0},t.prototype.parseQuickFilter=function(n){return Qe(n)?this.gridOptionsService.isRowModelType("clientSide")?n.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},t.prototype.setQuickFilter=function(n){if(null==n||"string"==typeof n){var i=this.parseQuickFilter(n);this.quickFilter!==i&&(this.quickFilter=i,this.setQuickFilterParts(),this.onFilterChanged())}else console.warn("AG Grid - setQuickFilter() only supports string inputs, received: "+typeof n)},t.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode(function(n){return n.quickFilterAggregateText=null})},t.prototype.onExcludeHiddenColumnsFromQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.onFilterChanged()},t.prototype.refreshFiltersForAggregations=function(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()},t.prototype.callOnFilterChangedOutsideRenderCycle=function(n){var i=this;void 0===n&&(n={});var o=function(){return i.onFilterChanged(n)};this.rowRenderer.isRefreshInProgress()?setTimeout(o,0):o()},t.prototype.onFilterChanged=function(n){void 0===n&&(n={});var i=n.filterInstance,o=n.additionalEventAttributes,s=n.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",o),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(function(d){d.filterPromise&&d.filterPromise.then(function(f){f&&f!==i&&f.onAnyFilterChanged&&f.onAnyFilterChanged()})});var a={type:V.EVENT_FILTER_CHANGED,columns:s||[]};o&&Ia(a,o),this.processingFilterChange=!0,this.eventService.dispatchEvent(a),this.processingFilterChange=!1},t.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},t.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},t.prototype.doesRowPassOtherFilters=function(n,i){return this.doesRowPassFilter({rowNode:i,filterInstanceToSkip:n})},t.prototype.doesRowPassQuickFilterNoCache=function(n,i){var o=this;return this.columnModel.getAllColumnsForQuickFilter().some(function(a){var d=o.getQuickFilterTextForColumn(a,n);return Qe(d)&&d.indexOf(i)>=0})},t.prototype.doesRowPassQuickFilterCache=function(n,i){return n.quickFilterAggregateText||this.aggregateRowForQuickFilter(n),n.quickFilterAggregateText.indexOf(i)>=0},t.prototype.doesRowPassQuickFilter=function(n){var i=this,o=this.gridOptionsService.is("cacheQuickFilter");return this.quickFilterParts.every(function(s){return o?i.doesRowPassQuickFilterCache(n,s):i.doesRowPassQuickFilterNoCache(n,s)})},t.prototype.doesRowPassAggregateFilters=function(n){return!(this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(n.rowNode,n.filterInstanceToSkip))},t.prototype.doesRowPassFilter=function(n){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(n.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(n.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(n.rowNode,n.filterInstanceToSkip))},t.prototype.getQuickFilterTextForColumn=function(n,i){var o=this.valueService.getValue(n,i,!0),s=n.getColDef();return s.getQuickFilterText&&(o=s.getQuickFilterText({value:o,node:i,data:i.data,column:n,colDef:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context})),Qe(o)?o.toString().toUpperCase():null},t.prototype.aggregateRowForQuickFilter=function(n){var i=this,o=[];this.columnModel.getAllColumnsForQuickFilter().forEach(function(a){var d=i.getQuickFilterTextForColumn(a,n);Qe(d)&&o.push(d)}),n.quickFilterAggregateText=o.join(e.QUICK_FILTER_SEPARATOR)},t.prototype.onNewRowsLoaded=function(n){this.allColumnFilters.forEach(function(i){i.filterPromise.then(function(o){o.onNewRowsLoaded&&o.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(n,{afterDataChange:!0}),this.updateActiveFilters()},t.prototype.createValueGetter=function(n){var i=this;return function(o){return i.valueService.getValue(n,o.node,!0)}},t.prototype.getFilterComponent=function(n,i,o){var s;if(void 0===o&&(o=!0),o)return(null===(s=this.getOrCreateFilterWrapper(n,i))||void 0===s?void 0:s.filterPromise)||null;var a=this.cachedFilter(n);return a?a.filterPromise:null},t.prototype.isFilterActive=function(n){var i=this.cachedFilter(n);return!!i&&i.filterPromise.resolveNow(!1,function(o){return o.isFilterActive()})},t.prototype.getOrCreateFilterWrapper=function(n,i){if(!n.isFilterAllowed())return null;var o=this.cachedFilter(n);return o?"NO_UI"!==i&&this.putIntoGui(o,i):(o=this.createFilterWrapper(n,i),this.allColumnFilters.set(n.getColId(),o)),o},t.prototype.cachedFilter=function(n){return this.allColumnFilters.get(n.getColId())},t.prototype.createFilterInstance=function(n){var a,i=this,o=on.isRegistered(Ot.SetFilterModule)?"agSetColumnFilter":"agTextColumnFilter",s=n.getColDef(),d=vA(vA({},this.createFilterParams(n,s)),{filterModifiedCallback:function(){i.eventService.dispatchEvent({type:V.EVENT_FILTER_MODIFIED,column:n,filterInstance:a})},filterChangedCallback:function(C){i.callOnFilterChangedOutsideRenderCycle({filterInstance:a,additionalEventAttributes:C,columns:[n]})},doesRowPassOtherFilter:function(C){return i.doesRowPassOtherFilters(a,C)}}),f=this.userComponentFactory.getFilterDetails(s,d,o);if(!f)return null;var g=f.newAgStackInstance();return g&&g.then(function(C){return a=C}),g},t.prototype.createFilterParams=function(n,i){return{column:n,colDef:QF(i),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(n),doesRowPassOtherFilter:function(){return!0},api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},t.prototype.createFilterWrapper=function(n,i){var o={column:n,filterPromise:null,compiledElement:null,guiPromise:ta.resolve(null)};return o.filterPromise=this.createFilterInstance(n),o.filterPromise&&this.putIntoGui(o,i),o},t.prototype.putIntoGui=function(n,i){var o=this,s=document.createElement("div");s.className="ag-filter",n.guiPromise=new ta(function(a){n.filterPromise.then(function(d){var f=d.getGui();Qe(f)||console.warn("AG Grid: getGui method from filter returned "+f+", it should be a DOM element or an HTML template string."),"string"==typeof f&&(f=ls(f)),s.appendChild(f),a(s),o.eventService.dispatchEvent({type:V.EVENT_FILTER_OPENED,column:n.column,source:i,eGui:s})})})},t.prototype.onColumnsChanged=function(){var n=this,i=[];this.allColumnFilters.forEach(function(o,s){!(o.column.isPrimary()?n.columnModel.getPrimaryColumn(s):n.columnModel.getGridColumn(s))&&(i.push(o.column),n.disposeFilterWrapper(o,"columnChanged"))}),i.length>0?this.onFilterChanged({columns:i}):this.updateDependantFilters()},t.prototype.updateDependantFilters=function(){var n=this;this.columnModel.getGroupAutoColumns()?.forEach(function(o){"agGroupColumnFilter"===o.getColDef().filter&&n.getOrCreateFilterWrapper(o,"NO_UI")})},t.prototype.isFilterAllowed=function(n){var i,o;return!!n.isFilterAllowed()&&(null===(o=null===(i=this.allColumnFilters.get(n.getColId())?.filterPromise)||void 0===i?void 0:i.resolveNow(!0,function(d){var f,g;return"function"!=typeof(null===(f=d)||void 0===f?void 0:f.isFilterAllowed)||(null===(g=d)||void 0===g?void 0:g.isFilterAllowed())}))||void 0===o||o)},t.prototype.getFloatingFilterCompDetails=function(n,i){var o=this,s=n.getColDef(),a=this.createFilterParams(n,s),d=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,uk,a),f=this.userComponentFactory.getDefaultFloatingFilterType(s);return null==f&&(f="agReadOnlyFloatingFilter"),this.userComponentFactory.getFloatingFilterCompDetails(s,{column:n,filterParams:d,currentParentModel:function(){return o.getCurrentFloatingFilterParentModel(n)},parentFilterInstance:function(E){o.getFilterComponent(n,"NO_UI")?.then(function(I){E(Ay(I))})},showParentFilter:i,suppressFilterButton:!1},f)},t.prototype.getCurrentFloatingFilterParentModel=function(n){var i=this.getFilterComponent(n,"NO_UI",!1);return i?i.resolveNow(null,function(o){return o&&o.getModel()}):null},t.prototype.destroyFilter=function(n,i){void 0===i&&(i="api");var o=this.allColumnFilters.get(n.getColId());o&&(this.disposeFilterWrapper(o,i),this.onFilterChanged({columns:[n]}))},t.prototype.disposeFilterWrapper=function(n,i){var o=this;n.filterPromise.then(function(s){(s.setModel(null)||ta.resolve()).then(function(){o.getContext().destroyBean(s),n.column.setFilterActive(!1,"filterDestroyed"),o.allColumnFilters.delete(n.column.getColId()),o.eventService.dispatchEvent({type:V.EVENT_FILTER_DESTROYED,source:i,column:n.column})})})},t.prototype.destroy=function(){var n=this;r.prototype.destroy.call(this),this.allColumnFilters.forEach(function(i){return n.disposeFilterWrapper(i,"gridDestroyed")})},t.QUICK_FILTER_SEPARATOR="\n",Py([F("valueService")],t.prototype,"valueService",void 0),Py([F("columnModel")],t.prototype,"columnModel",void 0),Py([F("rowModel")],t.prototype,"rowModel",void 0),Py([F("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Py([F("rowRenderer")],t.prototype,"rowRenderer",void 0),Py([rt],t.prototype,"init",null),e=Py([Rt("filterManager")],t)}(Ye),oQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ck=function(r){function t(e,n){var i=r.call(this,e)||this;return i.ctrl=n,i}return oQ(t,r),t.prototype.getCtrl=function(){return this.ctrl},t}(Rn),sQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),yA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},aQ=function(r){function t(e){return r.call(this,t.TEMPLATE,e)||this}return sQ(t,r),t.prototype.postConstruct=function(){var e=this,n=this.getGui();this.ctrl.setComp({addOrRemoveCssClass:function(o,s){return e.addOrRemoveCssClass(o,s)},addOrRemoveBodyCssClass:function(o,s){return e.eFloatingFilterBody.classList.toggle(o,s)},setButtonWrapperDisplayed:function(o){return Wn(e.eButtonWrapper,o)},setCompDetails:function(o){return e.setCompDetails(o)},getFloatingFilterComp:function(){return e.compPromise},setWidth:function(o){return n.style.width=o},setMenuIcon:function(o){return e.eButtonShowMainFilter.appendChild(o)}},n,this.eButtonShowMainFilter,this.eFloatingFilterBody)},t.prototype.setCompDetails=function(e){var n=this;this.compPromise=e.newAgStackInstance(),this.compPromise.then(function(i){return n.afterCompCreated(i)})},t.prototype.afterCompCreated=function(e){var n=this;e&&(this.addDestroyFunc(function(){return n.context.destroyBean(e)}),this.isAlive()&&(this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()))},t.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',yA([ut("eFloatingFilterBody")],t.prototype,"eFloatingFilterBody",void 0),yA([ut("eButtonWrapper")],t.prototype,"eButtonWrapper",void 0),yA([ut("eButtonShowMainFilter")],t.prototype,"eButtonShowMainFilter",void 0),yA([rt],t.prototype,"postConstruct",null),t}(ck),lQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ro=(()=>(function(r){r.AUTO_HEIGHT="ag-layout-auto-height",r.NORMAL="ag-layout-normal",r.PRINT="ag-layout-print"}(ro||(ro={})),ro))(),dk=function(r){function t(e){var n=r.call(this)||this;return n.view=e,n}return lQ(t,r),t.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},t.prototype.updateLayoutClasses=function(){var e=this.getDomLayout(),n={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e};this.view.updateLayoutClasses(n.autoHeight?ro.AUTO_HEIGHT:n.print?ro.PRINT:ro.NORMAL,n)},t.prototype.getDomLayout=function(){var e,n=null!==(e=this.gridOptionsService.get("domLayout"))&&void 0!==e?e:"normal";return-1===["normal","print","autoHeight"].indexOf(n)?(Yn(function(){return console.warn("AG Grid: "+n+" is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")},"warn about dom layout values"),"normal"):n},function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(Ye),cQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),_A=function(){return _A=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},_A.apply(this,arguments)},Yg=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},dQ=function(r){function t(e){var n=r.call(this)||this;return n.scrollLeft=-1,n.nextScrollTop=-1,n.scrollTop=-1,n.eBodyViewport=e,n.resetLastHScrollDebounced=Jd(function(){return n.eLastHScroll=null},500),n.resetLastVScrollDebounced=Jd(function(){return n.eLastVScroll=null},500),n}return cQ(t,r),t.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(n){e.centerRowContainerCtrl=n.centerRowContainerCtrl,e.onDisplayedColumnsWidthChanged(),e.addScrollListener()})},t.prototype.addScrollListener=function(){var e=this.ctrlsService.getFakeHScrollComp(),n=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),this.addManagedListener(e.getViewport(),"scroll",this.onFakeHScroll.bind(this));var i=this.gridOptionsService.is("debounceVerticalScrollbar"),o=i?Jd(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=i?Jd(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",o),this.addManagedListener(n.getViewport(),"scroll",s)},t.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},t.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(e){if(null!=this.centerRowContainerCtrl){void 0===e&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var i=this.enableRtl?e:-e,o=this.ctrlsService.getTopCenterRowContainerCtrl(),s=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),a=this.ctrlsService.getBottomCenterRowContainerCtrl(),d=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(i),a.setContainerTranslateX(i),o.setContainerTranslateX(i),s.setContainerTranslateX(i);var g=this.centerRowContainerCtrl.getViewportElement();sA(this.eLastHScroll===g?d.getViewport():this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl)}},t.prototype.isControllingHScroll=function(e){return this.eLastHScroll?e===this.eLastHScroll:(this.eLastHScroll=e,!0)},t.prototype.isControllingVScroll=function(e){return this.eLastVScroll?e===this.eLastVScroll:(this.eLastVScroll=e,!0)},t.prototype.onFakeHScroll=function(){var e=this.ctrlsService.getFakeHScrollComp().getViewport();this.isControllingHScroll(e)&&this.onHScrollCommon(e)},t.prototype.onHScroll=function(){var e=this.centerRowContainerCtrl.getViewportElement();this.isControllingHScroll(e)&&this.onHScrollCommon(e)},t.prototype.onHScrollCommon=function(e){var n=this.centerRowContainerCtrl.getViewportElement();this.shouldBlockScrollUpdate("horizontal",n.scrollLeft,!0)||(this.doHorizontalScroll(Math.round(R0(e,this.enableRtl))),this.resetLastHScrollDebounced())},t.prototype.onFakeVScroll=function(){var e=this.ctrlsService.getFakeVScrollComp().getViewport();this.isControllingVScroll(e)&&this.onVScrollCommon(e)},t.prototype.onVScroll=function(){this.isControllingVScroll(this.eBodyViewport)&&this.onVScrollCommon(this.eBodyViewport)},t.prototype.onVScrollCommon=function(e){var n=e.scrollTop;this.shouldBlockScrollUpdate("vertical",n,!0)||(this.animationFrameService.setScrollTop(n),this.nextScrollTop=n,e===this.eBodyViewport?this.ctrlsService.getFakeVScrollComp().getViewport().scrollTop=n:this.eBodyViewport.scrollTop=n,this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())},t.prototype.doHorizontalScroll=function(e){var i=R0(this.ctrlsService.getFakeHScrollComp().getViewport(),this.enableRtl);this.scrollLeft===e&&e===i||(this.scrollLeft=e,this.fireScrollEvent("horizontal"),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.onHorizontalViewportChanged())},t.prototype.fireScrollEvent=function(e){var n=this,i={type:V.EVENT_BODY_SCROLL,direction:e,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(i),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var o=_A(_A({},i),{type:V.EVENT_BODY_SCROLL_END});n.eventService.dispatchEvent(o)},100)},t.prototype.shouldBlockScrollUpdate=function(e,n,i){return void 0===i&&(i=!1),!(i&&!zg())&&("vertical"===e?this.shouldBlockVerticalScroll(n):this.shouldBlockHorizontalScroll(n))},t.prototype.shouldBlockVerticalScroll=function(e){var n=D0(this.eBodyViewport);return e<0||e+n>this.eBodyViewport.scrollHeight},t.prototype.shouldBlockHorizontalScroll=function(e){var n=this.centerRowContainerCtrl.getCenterWidth(),i=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&T0()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+n>i},t.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent("vertical")},t.prototype.onHorizontalViewportChanged=function(){this.centerRowContainerCtrl.onHorizontalViewportChanged()},t.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(this.centerRowContainerCtrl.getViewportElement())},t.prototype.scrollGridIfNeeded=function(){var e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e},t.prototype.setHorizontalScrollPosition=function(e){var i=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();this.shouldBlockScrollUpdate("horizontal",e)&&(e=this.enableRtl&&T0()?e>0?0:i:Math.min(Math.max(e,0),i)),sA(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)},t.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e},t.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},t.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},t.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},t.prototype.scrollHorizontally=function(e){var n=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(n+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-n},t.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},t.prototype.ensureNodeVisible=function(e,n){void 0===n&&(n=null);for(var i=this.rowModel.getRowCount(),o=-1,s=0;s<i;s++){var a=this.rowModel.getRow(s);if("function"==typeof e){if(a&&e(a)){o=s;break}}else if(e===a||e===a.data){o=s;break}}o>=0&&this.ensureIndexVisible(o,n)},t.prototype.ensureIndexVisible=function(e,n){if(!this.gridOptionsService.isDomLayout("print")){var i=this.paginationProxy.getRowCount();if("number"!=typeof e||e<0||e>=i)return void console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel")||this.paginationProxy.goToPageWithIndex(e);var g,d=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),f=this.paginationProxy.getRow(e);do{var C=f.rowTop,E=f.rowHeight,T=this.paginationProxy.getPixelOffset(),I=f.rowTop-T,M=I+f.rowHeight,k=this.getVScrollPosition(),W=this.heightScaler.getDivStretchOffset(),z=k.top+W,J=k.bottom+W,re=J-z,ce=this.heightScaler.getScrollPositionForPixel(I),Re=this.heightScaler.getScrollPositionForPixel(M-re),Xe=Math.min((ce+Re)/2,I),Ut=null;"top"===n?Ut=ce:"bottom"===n?Ut=Re:"middle"===n?Ut=Xe:z+d>I?Ut=ce-d:J<M&&(Ut=Re),null!==Ut&&(this.eBodyViewport.scrollTop=Ut,this.rowRenderer.redrawAfterScroll()),g=C!==f.rowTop||E!==f.rowHeight}while(g);this.animationFrameService.flushAllFrames()}},t.prototype.ensureColumnVisible=function(e,n){void 0===n&&(n="auto");var i=this.columnModel.getGridColumn(e);if(i&&!i.isPinned()&&this.columnModel.isColumnDisplayed(i)){var o=this.getPositionedHorizontalScroll(i,n);null!==o&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(o),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},t.prototype.getPositionedHorizontalScroll=function(e,n){var i=this.isColumnOutsideViewport(e),o=i.columnBeforeStart,s=i.columnAfterEnd,a=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),d=this.centerRowContainerCtrl.getCenterWidth(),f=this.enableRtl,g=(f?o:s)||a,C=f?s:o;"auto"!==n&&(g="start"===n,C="end"===n);var E="middle"===n;if(g||C||E){var T=this.getColumnBounds(e),I=T.colLeft,k=T.colRight;return E?T.colMiddle-d/2:g?f?k:I:f?I-d:k-d}return null},t.prototype.isColumnOutsideViewport=function(e){var n=this.getViewportBounds(),i=n.start,o=n.end,s=this.getColumnBounds(e),a=s.colLeft,d=s.colRight,f=this.enableRtl;return{columnBeforeStart:f?i>d:o<d,columnAfterEnd:f?o<a:i>a}},t.prototype.getColumnBounds=function(e){var n=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),o=e.getActualWidth(),s=e.getLeft(),a=n?-1:1,d=n?i-s:s;return{colLeft:d,colMiddle:d+o/2*a,colRight:d+o*a}},t.prototype.getViewportBounds=function(){var e=this.centerRowContainerCtrl.getCenterWidth(),n=this.centerRowContainerCtrl.getCenterViewportScrollLeft();return{start:n,end:e+n,width:e}},Yg([F("ctrlsService")],t.prototype,"ctrlsService",void 0),Yg([F("animationFrameService")],t.prototype,"animationFrameService",void 0),Yg([F("paginationProxy")],t.prototype,"paginationProxy",void 0),Yg([F("rowModel")],t.prototype,"rowModel",void 0),Yg([F("rowContainerHeightService")],t.prototype,"heightScaler",void 0),Yg([F("rowRenderer")],t.prototype,"rowRenderer",void 0),Yg([F("columnModel")],t.prototype,"columnModel",void 0),Yg([rt],t.prototype,"postConstruct",null),t}(Ye),hQ=function(){function r(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=-1!==t.scrollAxis.indexOf("x"),this.scrollVertically=-1!==t.scrollAxis.indexOf("y"),this.scrollByTick=null!=t.scrollByTick?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||function(){return!1}}return r.prototype.check=function(t,e){void 0===e&&(e=!1);var n=e||this.shouldSkipVerticalScroll();if(!n||!this.shouldSkipHorizontalScroll()){var i=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=t.clientX<i.left+o,this.tickRight=t.clientX>i.right-o,this.tickUp=t.clientY<i.top+o&&!n,this.tickDown=t.clientY>i.bottom-o&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},r.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},r.prototype.doTick=function(){var t;if(this.tickCount++,t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){var n=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(n-t),this.tickRight&&this.setHorizontalPosition(n+t)}this.onScrollCallback&&this.onScrollCallback()},r.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},r}(),fQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),hk=function(){return hk=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},hk.apply(this,arguments)},fu=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},pQ=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},mQ=function(r){function t(e){var n=r.call(this)||this;return n.isMultiRowDrag=!1,n.isGridSorted=!1,n.isGridFiltered=!1,n.isRowGroupActive=!1,n.eContainer=e,n}return fQ(t,r),t.prototype.postConstruct=function(){var e=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);var n=function(){e.onSortChanged(),e.onFilterChanged(),e.onRowGroupChanged()};this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,function(){n()}),n(),this.ctrlsService.whenReady(function(){var i=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new hQ({scrollContainer:i.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return i.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(o){return i.getScrollFeature().setVerticalScrollPosition(o)},onScrollCallback:function(){e.onDragging(e.lastDraggingEvent)}})})},t.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},t.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},t.prototype.onRowGroupChanged=function(){var e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!al(e)},t.prototype.getContainer=function(){return this.eContainer},t.prototype.isInterestedIn=function(e){return e===Ps.RowDrag},t.prototype.getIconName=function(){return this.gridOptionsService.is("rowDragManaged")&&this.shouldPreventRowMove()?us.ICON_NOT_ALLOWED:us.ICON_MOVE},t.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},t.prototype.getRowNodes=function(e){var n=this;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];var i=this.gridOptionsService.is("rowDragMultiRow"),o=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(pQ(arguments[t]));return r}(this.selectionService.getSelectedNodes()).sort(function(a,d){return null==a.rowIndex||null==d.rowIndex?0:n.getRowIndexNumber(a)-n.getRowIndexNumber(d)}),s=e.dragItem.rowNode;return i&&-1!==o.indexOf(s)?(this.isMultiRowDrag=!0,o):(this.isMultiRowDrag=!1,[s])},t.prototype.onDragEnter=function(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(V.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(function(n){n.setDragging(!0)}),this.onEnterOrDragging(e)},t.prototype.onDragging=function(e){this.onEnterOrDragging(e)},t.prototype.isFromThisGrid=function(e){return e.dragSource.dragSourceDomDataKey===this.gridOptionsService.getDomDataKey()},t.prototype.isDropZoneWithinThisGrid=function(e){return!this.ctrlsService.getGridBodyCtrl().getGui().contains(e.dropZoneTarget)},t.prototype.onEnterOrDragging=function(e){this.dispatchGridEvent(V.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;var n=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsService.is("rowDragManaged")&&this.doManagedDrag(e,n),this.autoScrollService.check(e.event)},t.prototype.doManagedDrag=function(e,n){var i=this.isFromThisGrid(e),o=this.gridOptionsService.is("rowDragManaged"),s=e.dragItem.rowNodes;o&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],n):this.moveRows(s,n))},t.prototype.getRowIndexNumber=function(e){return parseInt(pr(e.getRowIndexString().split("-")),10)},t.prototype.moveRowAndClearHighlight=function(e){var n=this,i=this.clientSideRowModel.getLastHighlightedRowNode(),o=i&&i.highlighted===rh.Below,s=this.mouseEventService.getNormalisedPosition(e).y,a=e.dragItem.rowNodes,d=o?1:0;if(this.isFromThisGrid(e))a.forEach(function(C){C.rowTop<s&&(d-=1)}),this.moveRows(a,s,d);else{var f=this.gridOptionsService.getRowIdFunc(),g=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===rh.Above&&g--,this.clientSideRowModel.updateRowData({add:a.map(function(C){return C.data}).filter(function(C){return!n.clientSideRowModel.getRowNode(f?f({data:C,level:0}):C.id)}),addIndex:g})}this.clearRowHighlight()},t.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},t.prototype.moveRows=function(e,n,i){void 0===i&&(i=0),this.clientSideRowModel.ensureRowsAtPixel(e,n,i)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},t.prototype.addRowDropZone=function(e){var n=this;if(e.getContainer())if(this.dragAndDropService.findExternalZone(e))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var i={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,i=e):(e.onDragEnter&&(i.onDragEnter=function(o){e.onDragEnter(n.draggingToRowDragEvent(V.EVENT_ROW_DRAG_ENTER,o))}),e.onDragLeave&&(i.onDragLeave=function(o){e.onDragLeave(n.draggingToRowDragEvent(V.EVENT_ROW_DRAG_LEAVE,o))}),e.onDragging&&(i.onDragging=function(o){e.onDragging(n.draggingToRowDragEvent(V.EVENT_ROW_DRAG_MOVE,o))}),e.onDragStop&&(i.onDragStop=function(o){e.onDragStop(n.draggingToRowDragEvent(V.EVENT_ROW_DRAG_END,o))})),this.dragAndDropService.addDropTarget(hk({isInterestedIn:function(o){return o===Ps.RowDrag},getIconName:function(){return us.ICON_MOVE},external:!0},i))}else Yn(function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")},"add-drop-zone-empty-target")},t.prototype.getRowDropZone=function(e){var n=this,i=this.getContainer.bind(this),o=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),a=this.onDragging.bind(this),d=this.onDragStop.bind(this);return e?{getContainer:i,onDragEnter:e.onDragEnter?function(f){o(f),e.onDragEnter(n.draggingToRowDragEvent(V.EVENT_ROW_DRAG_ENTER,f))}:o,onDragLeave:e.onDragLeave?function(f){s(f),e.onDragLeave(n.draggingToRowDragEvent(V.EVENT_ROW_DRAG_LEAVE,f))}:s,onDragging:e.onDragging?function(f){a(f),e.onDragging(n.draggingToRowDragEvent(V.EVENT_ROW_DRAG_MOVE,f))}:a,onDragStop:e.onDragStop?function(f){d(f),e.onDragStop(n.draggingToRowDragEvent(V.EVENT_ROW_DRAG_END,f))}:d,fromGrid:!0}:{getContainer:i,onDragEnter:o,onDragLeave:s,onDragging:a,onDragStop:d,fromGrid:!0}},t.prototype.draggingToRowDragEvent=function(e,n){var a,d,i=this.mouseEventService.getNormalisedPosition(n).y,s=-1;switch(i>this.paginationProxy.getCurrentPageHeight()||(s=this.rowModel.getRowIndexAtPixel(i),a=this.rowModel.getRow(s)),n.vDirection){case Iy.Down:d="down";break;case Iy.Up:d="up";break;default:d=null}return{type:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:n.event,node:n.dragItem.rowNode,nodes:n.dragItem.rowNodes,overIndex:s,overNode:a,y:i,vDirection:d}},t.prototype.dispatchGridEvent=function(e,n){var i=this.draggingToRowDragEvent(e,n);this.eventService.dispatchEvent(i)},t.prototype.onDragLeave=function(e){this.dispatchGridEvent(V.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)},t.prototype.onDragStop=function(e){this.dispatchGridEvent(V.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)},t.prototype.stopDragging=function(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(function(n){n.setDragging(!1)})},fu([F("dragAndDropService")],t.prototype,"dragAndDropService",void 0),fu([F("rowModel")],t.prototype,"rowModel",void 0),fu([F("paginationProxy")],t.prototype,"paginationProxy",void 0),fu([F("columnModel")],t.prototype,"columnModel",void 0),fu([F("focusService")],t.prototype,"focusService",void 0),fu([F("sortController")],t.prototype,"sortController",void 0),fu([F("filterManager")],t.prototype,"filterManager",void 0),fu([F("selectionService")],t.prototype,"selectionService",void 0),fu([F("mouseEventService")],t.prototype,"mouseEventService",void 0),fu([F("ctrlsService")],t.prototype,"ctrlsService",void 0),fu([tr("rangeService")],t.prototype,"rangeService",void 0),fu([rt],t.prototype,"postConstruct",null),t}(Ye),vQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),pu=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Ny=(()=>(function(r){r.ANIMATION_ON="ag-row-animation",r.ANIMATION_OFF="ag-row-no-animation"}(Ny||(Ny={})),Ny))(),yW="ag-selectable",_W="ag-force-vertical-scroll",_Q=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.stickyTopHeight=0,e}return vQ(t,r),t.prototype.getScrollFeature=function(){return this.bodyScrollFeature},t.prototype.getBodyViewportElement=function(){return this.eBodyViewport},t.prototype.setComp=function(e,n,i,o,s,a){this.comp=e,this.eGridBody=n,this.eBodyViewport=i,this.eTop=o,this.eBottom=s,this.eStickyTop=a,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new dk(this.comp)),this.bodyScrollFeature=this.createManagedBean(new dQ(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,i,s,a]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.ctrlsService.registerGridBodyCtrl(this)},t.prototype.getComp=function(){return this.comp},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},t.prototype.addFocusListeners=function(e){var n=this;e.forEach(function(i){n.addManagedListener(i,"focusin",function(o){var a=Ey(o.target,"ag-root",i);i.classList.toggle("ag-has-focus",!a)}),n.addManagedListener(i,"focusout",function(o){var s=o.target,a=o.relatedTarget,d=i.contains(a),f=Ey(a,"ag-root",i);Ey(s,"ag-root",i)||(!d||f)&&i.classList.remove("ag-has-focus")})})},t.prototype.setColumnMovingCss=function(e){this.comp.setColumnMovingCss("ag-column-moving",e)},t.prototype.setCellTextSelection=function(e){void 0===e&&(e=!1),this.comp.setCellSelectableCss(e?yW:null,e)},t.prototype.onScrollVisibilityChanged=function(){var e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);var n=e&&this.gridOptionsService.getScrollbarWidth()||0,i=E0()?16:0;this.comp.setBodyViewportWidth("calc(100% + "+(n+i)+"px)")},t.prototype.onGridColumnsChanged=function(){var e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)},t.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(e){if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})},t.prototype.addStopEditingWhenGridLosesFocus=function(){var e=this;if(this.gridOptionsService.is("stopEditingWhenCellsLoseFocus")){var n=function(o){var s=o.relatedTarget;if(null!==tA(s)){var a=i.some(function(f){return f.contains(s)})&&e.mouseEventService.isElementInThisGrid(s);if(!a){var d=e.popupService;a=d.getActivePopups().some(function(f){return f.contains(s)})||d.isElementWithinCustomPopup(s)}a||e.rowRenderer.stopEditing()}else e.rowRenderer.stopEditing()},i=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];i.forEach(function(o){return e.addManagedListener(o,"focusout",n)})}},t.prototype.updateRowCount=function(){var e=this.headerNavigationService.getHeaderRowCount(),n=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1;this.comp.setRowCount(-1===n?-1:e+n)},t.prototype.registerBodyViewportResizeListener=function(e){this.comp.registerBodyViewportResizeListener(e)},t.prototype.setVerticalScrollPaddingVisible=function(e){this.comp.setPinnedTopBottomOverflowY(e?"scroll":"hidden")},t.prototype.isVerticalScrollShowing=function(){var e=this.gridOptionsService.is("alwaysShowVerticalScroll"),n=e?_W:null,i=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(n,e),e||i&&T2(this.eBodyViewport)},t.prototype.setupRowAnimationCssClass=function(){var e=this,n=function(){var i=e.gridOptionsService.isAnimateRows()&&!e.rowContainerHeightService.isStretching();e.comp.setRowAnimationCssOnBodyViewport(i?Ny.ANIMATION_ON:Ny.ANIMATION_OFF,i)};n(),this.addManagedListener(this.eventService,V.EVENT_HEIGHT_SCALE_CHANGED,n),this.addManagedPropertyListener("animateRows",n)},t.prototype.getGridBodyElement=function(){return this.eGridBody},t.prototype.addBodyViewportListener=function(){var e=this,n=function(i,o,s){if(i||s){e.gridOptionsService.is("preventDefaultOnContextMenu")&&(i||s).preventDefault();var d=(i||o).target;(d===e.eBodyViewport||d===e.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&e.contextMenuFactory&&(i?e.contextMenuFactory.onContextMenu(i,null,null,null,null,e.eGridBody):s&&e.contextMenuFactory.onContextMenu(null,s,null,null,null,e.eGridBody))}};this.addManagedListener(this.eBodyViewport,"contextmenu",n),this.mockContextMenuForIPad(n),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this))},t.prototype.mockContextMenuForIPad=function(e){if(zg()){var n=new ul(this.eBodyViewport);this.addManagedListener(n,ul.EVENT_LONG_TAP,function(o){e(void 0,o.touchStart,o.touchEvent)}),this.addDestroyFunc(function(){return n.destroy()})}},t.prototype.onBodyViewportWheel=function(e){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()},t.prototype.onStickyTopWheel=function(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)},t.prototype.getGui=function(){return this.eGridBody},t.prototype.scrollVertically=function(e){var n=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(n+e),this.eBodyViewport.scrollTop-n},t.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new mQ(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},t.prototype.getRowDragFeature=function(){return this.rowDragFeature},t.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},t.prototype.setFloatingHeights=function(){var e=this.pinnedRowModel,n=e.getPinnedTopTotalHeight();n&&(n+=1);var i=e.getPinnedBottomTotalHeight();i&&(i+=1),this.comp.setTopHeight(n),this.comp.setBottomHeight(i),this.comp.setTopDisplay(n?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop()},t.prototype.setStickyTopHeight=function(e){void 0===e&&(e=0),this.comp.setStickyTopHeight(e+"px"),this.stickyTopHeight=e},t.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},t.prototype.setStickyTopWidth=function(e){if(e){var n=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - "+n+"px)")}else this.comp.setStickyTopWidth("100%")},t.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},t.prototype.setStickyTopOffsetTop=function(){var n=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight(),o=0;n>0&&(o+=n+1),i>0&&(o+=i+1),this.comp.setStickyTopTop(o+"px")},t.prototype.sizeColumnsToFit=function(e,n){var i=this,s=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,d=iA(this.eGridBody)-s;d>0?this.columnModel.sizeColumnsToFit(d,"sizeColumnsToFit",!1,e):void 0===n?window.setTimeout(function(){i.sizeColumnsToFit(e,100)},0):100===n?window.setTimeout(function(){i.sizeColumnsToFit(e,500)},100):500===n?window.setTimeout(function(){i.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},t.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})},t.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)},pu([F("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),pu([F("ctrlsService")],t.prototype,"ctrlsService",void 0),pu([F("columnModel")],t.prototype,"columnModel",void 0),pu([F("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),pu([tr("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),pu([F("headerNavigationService")],t.prototype,"headerNavigationService",void 0),pu([F("dragAndDropService")],t.prototype,"dragAndDropService",void 0),pu([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),pu([F("rowRenderer")],t.prototype,"rowRenderer",void 0),pu([F("popupService")],t.prototype,"popupService",void 0),pu([F("mouseEventService")],t.prototype,"mouseEventService",void 0),pu([F("rowModel")],t.prototype,"rowModel",void 0),t}(Ye),V0=(()=>(function(r){r[r.FILL=0]="FILL",r[r.RANGE=1]="RANGE"}(V0||(V0={})),V0))(),My=(()=>(function(r){r[r.VALUE=0]="VALUE",r[r.DIMENSION=1]="DIMENSION"}(My||(My={})),My))(),H0="ag-cell-range-selected",OQ=function(){function r(t,e){this.beans=t,this.cellCtrl=e}return r.prototype.setComp=function(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()},r.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(H0,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(H0+"-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass(H0+"-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass(H0+"-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass(H0+"-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),Ow(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},r.prototype.updateRangeBorders=function(){var t=this.getRangeBorders(),e=this.isSingleCell(),i=!e&&t.right,o=!e&&t.bottom,s=!e&&t.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",!e&&t.top),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",i),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",o),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",s)},r.prototype.isSingleCell=function(){var t=this.beans.rangeService;return 1===this.rangeCount&&t&&!t.isMoreThanOneCell()},r.prototype.getHasChartRange=function(){var t=this.beans.rangeService;if(!this.rangeCount||!t)return!1;var e=t.getCellRanges();return e.length>0&&e.every(function(n){return lu([My.DIMENSION,My.VALUE],n.type)})},r.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},r.prototype.getRangeBorders=function(){var C,E,t=this,e=this.beans.gridOptionsService.is("enableRtl"),n=!1,i=!1,o=!1,s=!1,a=this.cellCtrl.getCellPosition().column,d=this.beans,f=d.rangeService,g=d.columnModel;e?(C=g.getDisplayedColAfter(a),E=g.getDisplayedColBefore(a)):(C=g.getDisplayedColBefore(a),E=g.getDisplayedColAfter(a));var T=f.getCellRanges().filter(function(z){return f.isCellInSpecificRange(t.cellCtrl.getCellPosition(),z)});C||(s=!0),E||(i=!0);for(var I=0;I<T.length&&!(n&&i&&o&&s);I++){var M=T[I],k=f.getRangeStartRow(M),W=f.getRangeEndRow(M);!n&&this.beans.rowPositionUtils.sameRow(k,this.cellCtrl.getCellPosition())&&(n=!0),!o&&this.beans.rowPositionUtils.sameRow(W,this.cellCtrl.getCellPosition())&&(o=!0),!s&&C&&M.columns.indexOf(C)<0&&(s=!0),!i&&E&&M.columns.indexOf(E)<0&&(i=!0)}return{top:n,right:i,bottom:o,left:s}},r.prototype.refreshHandle=function(){if(this.beans.rangeService){var t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},r.prototype.shouldHaveSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,n=t.rangeService,i=n.getCellRanges(),o=i.length;if(this.rangeCount<1||o<1)return!1;var s=pr(i),a=this.cellCtrl.getCellPosition(),d=e.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),f=e.is("enableRangeHandle"),g=1===o&&!this.cellCtrl.isEditing()&&(d||f);if(this.hasChartRange){var E=i[0].type===My.DIMENSION&&n.isCellInSpecificRange(a,i[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",E),g=s.type===My.VALUE}return g&&null!=s.endRow&&n.isContiguousRange(s)&&n.isBottomRightCell(s,a)},r.prototype.addSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,i=pr(t.rangeService.getCellRanges()).type,s=e.is("enableFillHandle")&&Qt(i)?V0.FILL:V0.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)},r.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},r}(),IQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),AQ=function(r){function t(e,n){var i=r.call(this)||this;return i.cellCtrl=e,i.beans=n,i.column=e.getColumn(),i.rowNode=e.getRowNode(),i.setupColSpan(),i.setupRowSpan(),i}return IQ(t,r),t.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},t.prototype.setComp=function(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},t.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();$g(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())},t.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},t.prototype.onWidthChanged=function(){if(this.eGui){var e=this.getCellWidth();this.eGui.style.width=e+"px"}},t.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(e,n){return e+n.getActualWidth()},0):this.column.getActualWidth()},t.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode),n=[];if(1===e)n.push(this.column);else for(var i=this.column,o=this.column.getPinned(),s=0;i&&s<e&&(n.push(i),(i=this.beans.columnModel.getDisplayedColAfter(i))&&!Qt(i)&&o===i.getPinned());s++);return n},t.prototype.onLeftChanged=function(){if(this.eGui){var e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}},t.prototype.getCellLeft=function(){return(this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?pr(this.colsSpanning):this.column).getLeft()},t.prototype.modifyLeftForPrintLayout=function(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;var n=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===this.column.getPinned()?n+this.beans.columnModel.getBodyContainerWidth()+(e||0):n+(e||0)},t.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var e=this.beans.gridOptionsService.getRowHeightAsNumber();this.eGui.style.height=e*this.rowSpan+"px",this.eGui.style.zIndex="1"}},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(Ye),PQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),NQ=function(r){function t(e,n){var i=r.call(this)||this;return i.staticClasses=[],i.cellCtrl=e,i.beans=n,i.column=e.getColumn(),i.rowNode=e.getRowNode(),i}return PQ(t,r),t.prototype.setComp=function(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},t.prototype.applyCellClassRules=function(){var e=this,n=this.column.getColDef(),i={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:n,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(n.cellClassRules,i,function(o){return e.cellComp.addOrRemoveCssClass(o,!0)},function(o){return e.cellComp.addOrRemoveCssClass(o,!1)})},t.prototype.applyUserStyles=function(){var e=this.column.getColDef();if(e.cellStyle){var n;if("function"==typeof e.cellStyle){var i={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};n=(0,e.cellStyle)(i)}else n=e.cellStyle;n&&this.cellComp.setUserStyles(n)}},t.prototype.applyClassesFromColDef=function(){var e=this,n=this.column.getColDef(),i={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:n,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach(function(o){return e.cellComp.addOrRemoveCssClass(o,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(n,i),this.staticClasses.length&&this.staticClasses.forEach(function(o){return e.cellComp.addOrRemoveCssClass(o,!0)})},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(Ye),MQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),fk=function(r){function t(e,n){var i=r.call(this)||this;return i.ctrl=e,i.beans=n,i}return MQ(t,r),t.prototype.setComp=function(e){this.comp=e,this.setupTooltip()},t.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.comp.setTitle(null!=this.tooltip?this.tooltip:void 0):this.createTooltipFeatureIfNeeded()},t.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},t.prototype.createTooltipFeatureIfNeeded=function(){var e=this;null==this.genericTooltipFeature&&(this.genericTooltipFeature=this.createManagedBean(new qL({getTooltipParams:function(){return e.getTooltipParams()},getGui:function(){return e.ctrl.getGui()}}),this.beans.context))},t.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.comp.setTitle(null!=this.tooltip?this.tooltip:void 0)},t.prototype.getTooltipParams=function(){var e=this.ctrl,n=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,o=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:n,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:o,data:o?o.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0}},t.prototype.getTooltipText=function(){return this.tooltip},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(Ye),Cn=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},CW=function(){function r(){}return r.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsService.isMasterDetail(),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},Cn([F("resizeObserverService")],r.prototype,"resizeObserverService",void 0),Cn([F("paginationProxy")],r.prototype,"paginationProxy",void 0),Cn([F("context")],r.prototype,"context",void 0),Cn([F("columnApi")],r.prototype,"columnApi",void 0),Cn([F("gridApi")],r.prototype,"gridApi",void 0),Cn([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),Cn([F("expressionService")],r.prototype,"expressionService",void 0),Cn([F("environment")],r.prototype,"environment",void 0),Cn([F("rowRenderer")],r.prototype,"rowRenderer",void 0),Cn([F("templateService")],r.prototype,"templateService",void 0),Cn([F("valueService")],r.prototype,"valueService",void 0),Cn([F("eventService")],r.prototype,"eventService",void 0),Cn([F("columnModel")],r.prototype,"columnModel",void 0),Cn([F("headerNavigationService")],r.prototype,"headerNavigationService",void 0),Cn([F("navigationService")],r.prototype,"navigationService",void 0),Cn([F("columnAnimationService")],r.prototype,"columnAnimationService",void 0),Cn([tr("rangeService")],r.prototype,"rangeService",void 0),Cn([F("focusService")],r.prototype,"focusService",void 0),Cn([tr("contextMenuFactory")],r.prototype,"contextMenuFactory",void 0),Cn([F("popupService")],r.prototype,"popupService",void 0),Cn([F("valueFormatterService")],r.prototype,"valueFormatterService",void 0),Cn([F("stylingService")],r.prototype,"stylingService",void 0),Cn([F("columnHoverService")],r.prototype,"columnHoverService",void 0),Cn([F("userComponentFactory")],r.prototype,"userComponentFactory",void 0),Cn([F("userComponentRegistry")],r.prototype,"userComponentRegistry",void 0),Cn([F("animationFrameService")],r.prototype,"animationFrameService",void 0),Cn([F("dragService")],r.prototype,"dragService",void 0),Cn([F("dragAndDropService")],r.prototype,"dragAndDropService",void 0),Cn([F("sortController")],r.prototype,"sortController",void 0),Cn([F("filterManager")],r.prototype,"filterManager",void 0),Cn([F("rowContainerHeightService")],r.prototype,"rowContainerHeightService",void 0),Cn([F("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),Cn([F("cellPositionUtils")],r.prototype,"cellPositionUtils",void 0),Cn([F("rowPositionUtils")],r.prototype,"rowPositionUtils",void 0),Cn([F("selectionService")],r.prototype,"selectionService",void 0),Cn([tr("selectionHandleFactory")],r.prototype,"selectionHandleFactory",void 0),Cn([F("rowCssClassCalculator")],r.prototype,"rowCssClassCalculator",void 0),Cn([F("rowModel")],r.prototype,"rowModel",void 0),Cn([F("ctrlsService")],r.prototype,"ctrlsService",void 0),Cn([F("ctrlsFactory")],r.prototype,"ctrlsFactory",void 0),Cn([F("agStackComponentsRegistry")],r.prototype,"agStackComponentsRegistry",void 0),Cn([F("valueCache")],r.prototype,"valueCache",void 0),Cn([F("rowNodeEventThrottle")],r.prototype,"rowNodeEventThrottle",void 0),Cn([F("localeService")],r.prototype,"localeService",void 0),Cn([rt],r.prototype,"postConstruct",null),Cn([Rt("beans")],r)}(),xQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),FQ=function(r){function t(e,n,i){var o=r.call(this)||this;return o.cellCtrl=e,o.beans=n,o.column=i,o}return xQ(t,r),t.prototype.onMouseEvent=function(e,n){if(!Xd(n))switch(e){case"click":this.onCellClicked(n);break;case"mousedown":case"touchstart":this.onMouseDown(n);break;case"dblclick":this.onCellDoubleClicked(n);break;case"mouseout":this.onMouseOut(n);break;case"mouseover":this.onMouseOver(n)}},t.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();var n=this.beans,i=n.eventService,o=n.rangeService,s=n.gridOptionsService;o&&(e.ctrlKey||e.metaKey)&&o.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&o.intersectLastRange(!0);var d=this.cellCtrl.createEvent(e,V.EVENT_CELL_CLICKED);i.dispatchEvent(d);var f=this.column.getColDef();f.onCellClicked&&window.setTimeout(function(){return f.onCellClicked(d)},0),(s.is("singleClickEdit")||f.singleClickEdit)&&!s.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit()},t.prototype.isDoubleClickOnIPad=function(){if(!zg()||aL("dblclick"))return!1;var e=(new Date).getTime(),n=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,n},t.prototype.onCellDoubleClicked=function(e){var n=this.column.getColDef(),i=this.cellCtrl.createEvent(e,V.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),"function"==typeof n.onCellDoubleClicked&&window.setTimeout(function(){return n.onCellDoubleClicked(i)},0),!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,null,e)},t.prototype.onMouseDown=function(e){var n=e.ctrlKey,i=e.metaKey,o=e.shiftKey,s=e.target,a=this.beans,d=a.eventService,f=a.rangeService;if(!this.isRightClickInExistingRange(e)){var g=f&&0!=f.getCellRanges().length;if(!o||!g){var C=nh()&&!this.cellCtrl.isEditing()&&!FL(s);this.cellCtrl.focusCell(C)}if(o&&g&&e.preventDefault(),!this.containsWidget(s)){if(f){var E=this.cellCtrl.getCellPosition();o?f.extendLatestRangeToCell(E):f.setRangeToCell(E,n||i)}d.dispatchEvent(this.cellCtrl.createEvent(e,V.EVENT_CELL_MOUSE_DOWN))}}},t.prototype.isRightClickInExistingRange=function(e){var n=this.beans.rangeService;return!(!n||!n.isCellInAnyRange(this.cellCtrl.getCellPosition())||2!==e.button)},t.prototype.containsWidget=function(e){return Ey(e,"ag-selection-checkbox",3)},t.prototype.onMouseOut=function(e){if(!this.mouseStayingInsideCell(e)){var n=this.cellCtrl.createEvent(e,V.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(n),this.beans.columnHoverService.clearMouseOver()}},t.prototype.onMouseOver=function(e){if(!this.mouseStayingInsideCell(e)){var n=this.cellCtrl.createEvent(e,V.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(n),this.beans.columnHoverService.setMouseOver([this.column])}},t.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var n=this.cellCtrl.getGui(),i=n.contains(e.target),o=n.contains(e.relatedTarget);return i&&o},t.prototype.destroy=function(){},t}(CW),LQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),kQ=function(r){function t(e,n,i,o,s){var a=r.call(this)||this;return a.cellCtrl=e,a.beans=n,a.rowNode=o,a.rowCtrl=s,a}return LQ(t,r),t.prototype.setComp=function(e){this.eGui=e},t.prototype.onKeyDown=function(e){var n=e.key;switch(n){case Fe.ENTER:this.onEnterKeyDown(e);break;case Fe.F2:this.onF2KeyDown(e);break;case Fe.ESCAPE:this.onEscapeKeyDown(e);break;case Fe.TAB:this.onTabKeyDown(e);break;case Fe.BACKSPACE:case Fe.DELETE:this.onBackspaceOrDeleteKeyPressed(n,e);break;case Fe.DOWN:case Fe.UP:case Fe.RIGHT:case Fe.LEFT:this.onNavigationKeyPressed(e,n)}},t.prototype.onNavigationKeyPressed=function(e,n){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,n,this.cellCtrl.getCellPosition(),!0),e.preventDefault())},t.prototype.onShiftRangeSelect=function(e){if(this.beans.rangeService){var n=this.beans.rangeService.extendLatestRangeInDirection(e);n&&this.beans.navigationService.ensureCellVisible(n)}},t.prototype.onTabKeyDown=function(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)},t.prototype.onBackspaceOrDeleteKeyPressed=function(e,n){var i=this,o=i.cellCtrl,s=i.beans,a=i.rowNode,d=s.gridOptionsService,f=s.rangeService,g=s.eventService;o.isEditing()||(g.dispatchEvent({type:V.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),M2(e,d.is("enableCellEditingOnBackspace"))?f&&d.isEnableRangeSelection()?f.clearCellRangeCellValues():o.isCellEditable()&&a.setDataValue(o.getColumn(),null,"cellClear"):o.startRowOrCellEdit(e,void 0,n),g.dispatchEvent({type:V.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},t.prototype.onEnterKeyDown=function(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus():this.beans.gridOptionsService.is("enterMovesDown")?this.beans.navigationService.navigateToNextCell(null,Fe.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit(Fe.ENTER,void 0,e),this.cellCtrl.isEditing()&&e.preventDefault())},t.prototype.onF2KeyDown=function(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Fe.F2,void 0,e)},t.prototype.onEscapeKeyDown=function(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},t.prototype.onKeyPress=function(e){if(e.target===this.eGui&&!this.cellCtrl.isEditing()){var o=String.fromCharCode(e.charCode);" "===o?this.onSpaceKeyPressed(e):A2(e)&&(this.cellCtrl.startRowOrCellEdit(null,o,e),e.preventDefault())}},t.prototype.onSpaceKeyPressed=function(e){var n=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&n.isRowSelection()){var i=this.rowNode.isSelected(),o=!i;if(o||!n.is("suppressRowDeselection")){var s=this.beans.gridOptionsService.is("groupSelectsFiltered"),a=this.rowNode.setSelectedParams({newValue:o,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spacePressed"});void 0===i&&0===a&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spacePressed"})}}e.preventDefault()},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(Ye),GQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),HQ=function(r){function t(e,n,i,o){var s=r.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return s.rowNode=e,s.column=n,s.beans=i,s.eCell=o,s}return GQ(t,r),t.prototype.postConstruct=function(){this.getGui().appendChild(no("rowDrag",this.beans.gridOptionsService,null)),this.addGuiEventListener("mousedown",function(n){n.stopPropagation()}),this.addDragSource(),this.checkVisibility()},t.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},t.prototype.onDragStart=function(e){var n=this,i=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0),i?i({rowNode:this.rowNode,dragEvent:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):function(){try{var a=JSON.stringify(n.rowNode.data);e.dataTransfer.setData("application/json",a),e.dataTransfer.setData("text/plain",a)}catch{}}()},t.prototype.checkVisibility=function(){var e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)},function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(Rn),BQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),CA=function(){return CA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},CA.apply(this,arguments)},QQ=0,xy=function(r){function t(e,n,i,o){var s=r.call(this)||this;return s.cellRangeFeature=null,s.cellPositionFeature=null,s.cellCustomStyleFeature=null,s.tooltipFeature=null,s.cellMouseListenerFeature=null,s.cellKeyboardListenerFeature=null,s.suppressRefreshCell=!1,s.onCellCompAttachedFuncs=[],s.column=e,s.rowNode=n,s.beans=i,s.rowCtrl=o,s.instanceId=e.getId()+"-"+QQ++,s.createCellPosition(),s.addFeatures(),s}return BQ(t,r),t.prototype.addFeatures=function(){var e=this;this.cellPositionFeature=new AQ(this,this.beans),this.addDestroyFunc(function(){var i;null===(i=e.cellPositionFeature)||void 0===i||i.destroy(),e.cellPositionFeature=null}),this.cellCustomStyleFeature=new NQ(this,this.beans),this.addDestroyFunc(function(){var i;null===(i=e.cellCustomStyleFeature)||void 0===i||i.destroy(),e.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new FQ(this,this.beans,this.column),this.addDestroyFunc(function(){var i;null===(i=e.cellMouseListenerFeature)||void 0===i||i.destroy(),e.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new kQ(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(function(){var i;null===(i=e.cellKeyboardListenerFeature)||void 0===i||i.destroy(),e.cellKeyboardListenerFeature=null}),this.beans.rangeService&&this.beans.gridOptionsService.isEnableRangeSelection()&&(this.cellRangeFeature=new OQ(this.beans,this),this.addDestroyFunc(function(){var i;null===(i=e.cellRangeFeature)||void 0===i||i.destroy(),e.cellRangeFeature=null})),this.addTooltipFeature()},t.prototype.addTooltipFeature=function(){var e=this;this.tooltipFeature=new fk({getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getRowIndex:function(){return e.cellPosition.rowIndex},getRowNode:function(){return e.rowNode},getGui:function(){return e.getGui()},getLocation:function(){return"cell"},getTooltipValue:function(){var o=e.column.getColDef(),s=e.rowNode.data;if(o.tooltipField&&Qe(s))return WI(s,o.tooltipField,e.column.isTooltipFieldContainsDots());var a=o.tooltipValueGetter;return a?a({location:"cell",api:e.beans.gridOptionsService.api,columnApi:e.beans.gridOptionsService.columnApi,context:e.beans.gridOptionsService.context,colDef:e.column.getColDef(),column:e.column,rowIndex:e.cellPosition.rowIndex,node:e.rowNode,data:e.rowNode.data,value:e.value,valueFormatted:e.valueFormatted}):null},getValueFormatted:function(){return e.valueFormatted}},this.beans),this.addDestroyFunc(function(){var o;null===(o=e.tooltipFeature)||void 0===o||o.destroy(),e.tooltipFeature=null})},t.prototype.setComp=function(e,n,i,o,s){var a,d,f,g;this.cellComp=e,this.eGui=n,this.printLayout=o,this.updateAndFormatValue(!0),this.addDomData(),this.onCellFocused(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),i&&this.setupAutoHeight(i),this.setAriaColIndex(),this.beans.gridOptionsService.is("suppressCellFocus")||this.cellComp.setTabIndex(-1);var C=th(this.column.getId());this.cellComp.setColId(C),this.cellComp.setRole("gridcell"),null===(a=this.cellPositionFeature)||void 0===a||a.setComp(n),null===(d=this.cellCustomStyleFeature)||void 0===d||d.setComp(e),null===(f=this.tooltipFeature)||void 0===f||f.setComp(e),null===(g=this.cellKeyboardListenerFeature)||void 0===g||g.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,n),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(function(E){return E()}),this.onCellCompAttachedFuncs=[])},t.prototype.setupAutoHeight=function(e){var n=this;if(this.column.isAutoHeight()){var i=e.parentElement,o=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,s=function(f){if(!n.editing&&n.isAlive()){var g=by(i),W=e.offsetHeight+(g.paddingTop+g.paddingBottom+g.borderBottomWidth+g.borderTopWidth);if(f<5){var z=n.beans.gridOptionsService.getDocument();if(!z||!z.contains(e)||0==W)return void n.beans.frameworkOverrides.setTimeout(function(){return s(f+1)},0)}var ce=Math.max(W,o);n.rowNode.setRowAutoHeight(ce,n.column)}},a=function(){return s(0)};a();var d=this.beans.resizeObserverService.observeResize(e,a);this.addDestroyFunc(function(){d(),n.rowNode.setRowAutoHeight(void 0,n.column)})}},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.showValue=function(e){void 0===e&&(e=!1);var n=null!=this.valueFormatted?this.valueFormatted:this.value,i=this.createCellRendererParams(),o=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),i);this.cellComp.setRenderDetails(o,n,e),this.refreshHandle()},t.prototype.setupControlComps=function(){var e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},t.prototype.isForceWrapper=function(){return this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight()},t.prototype.isIncludeControl=function(e){return!(null!=this.rowNode.rowPinned||"function"!=typeof e&&!0!==e)},t.prototype.refreshShouldDestroy=function(){var e=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),o=this.includeDndSource!=this.isIncludeControl(e.dndSource);return n||i||o},t.prototype.startEditing=function(e,n,i,o){var s=this;if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=null),this.isCellEditable()&&!this.editing){if(!this.cellComp)return void this.onCellCompAttachedFuncs.push(function(){s.startEditing(e,n,i,o)});var a=this.createCellEditorParams(e,n,i),d=this.column.getColDef(),f=this.beans.userComponentFactory.getCellEditorDetails(d,a),g=null!=f?.popupFromSelector?f.popupFromSelector:!!d.cellEditorPopup,C=null!=f?.popupPositionFromSelector?f.popupPositionFromSelector:d.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(f,g,C);var E=this.createEvent(o,V.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(E)}},t.prototype.setEditing=function(e){this.editing!==e&&(this.editing=e,this.refreshHandle())},t.prototype.stopRowOrCellEdit=function(e){void 0===e&&(e=!1),"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)},t.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},t.prototype.takeValueFromCellEditor=function(e){var n={newValueExists:!1};if(e)return n;var i=this.cellComp.getCellEditor();return i?i.isCancelAfterEnd&&i.isCancelAfterEnd()?n:{newValue:i.getValue(),newValueExists:!0}:n},t.prototype.saveNewValue=function(e,n){if(n===e)return!1;this.suppressRefreshCell=!0;var i=this.rowNode.setDataValue(this.column,n,"edit");return this.suppressRefreshCell=!1,i},t.prototype.stopEditing=function(e){if(void 0===e&&(e=!1),!this.editing)return!1;var n=this.takeValueFromCellEditor(e),i=n.newValue,o=n.newValueExists,s=this.getValueFromValueService(),a=!1;return o&&(a=this.saveNewValue(s,i)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(s,i,!e&&!!a),a},t.prototype.dispatchEditingStoppedEvent=function(e,n,i){var o=CA(CA({},this.createEvent(null,V.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:n,valueChanged:i});this.beans.eventService.dispatchEvent(o)},t.prototype.createCellEditorParams=function(e,n,i){return{value:this.getValueFromValueService(),eventKey:e,charPress:n,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit:i,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},t.prototype.createCellRendererParams=function(){var e=this;return{value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValueFromValueService.bind(this),setValue:function(i){return e.beans.valueService.setValue(e.rowNode,e.column,i)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(i,o,s,a){return e.registerRowDragger(i,o,a)}}},t.prototype.parseValue=function(e){var n=this.column.getColDef(),i={node:this.rowNode,data:this.rowNode.data,oldValue:this.getValue(),newValue:e,colDef:n,column:this.column,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context},o=n.valueParser;return Qe(o)?"function"==typeof o?o(i):this.beans.expressionService.evaluate(o,i):e},t.prototype.setFocusOutOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}},t.prototype.setFocusInOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}},t.prototype.onCellChanged=function(e){this.cellComp&&e.column===this.column&&this.refreshCell({})},t.prototype.refreshCell=function(e){var n,i,o;if(!this.suppressRefreshCell&&!this.editing&&this.cellComp){var s=this.column.getColDef(),a=null!=e&&!!e.newData,d=null!=e&&!!e.suppressFlash||!!s.suppressCellFlash,g=e&&e.forceRefresh||null==s.field&&null==s.valueGetter&&null==s.showRowGroup||a,C=this.updateAndFormatValue();if(g||C){this.showValue(a);var T=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!d&&!T&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||s.enableCellChangeFlash)&&this.flashCell(),null===(n=this.cellCustomStyleFeature)||void 0===n||n.applyUserStyles(),null===(i=this.cellCustomStyleFeature)||void 0===i||i.applyClassesFromColDef()}this.refreshToolTip(),null===(o=this.cellCustomStyleFeature)||void 0===o||o.applyCellClassRules()}},t.prototype.stopEditingAndFocus=function(e){void 0===e&&(e=!1),this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit()},t.prototype.navigateAfterEdit=function(){"fullRow"===this.beans.gridOptionsService.get("editType")||this.beans.gridOptionsService.is("enterMovesDownAfterEdit")&&this.beans.navigationService.navigateToNextCell(null,Fe.DOWN,this.getCellPosition(),!1)},t.prototype.flashCell=function(e){this.animateCell("data-changed",e&&e.flashDelay,e&&e.fadeDelay)},t.prototype.animateCell=function(e,n,i){var s,a,o=this,d="ag-cell-"+e,f="ag-cell-"+e+"-animation",g=this.beans.gridOptionsService;n||(n=null!==(s=g.getNum("cellFlashDelay"))&&void 0!==s?s:500),Qe(i)||(i=null!==(a=g.getNum("cellFadeDelay"))&&void 0!==a?a:1e3),this.cellComp.addOrRemoveCssClass(d,!0),this.cellComp.addOrRemoveCssClass(f,!1),window.setTimeout(function(){o.isAlive()&&(o.cellComp.addOrRemoveCssClass(d,!1),o.cellComp.addOrRemoveCssClass(f,!0),o.eGui.style.transition="background-color "+i+"ms",window.setTimeout(function(){o.isAlive()&&(o.cellComp.addOrRemoveCssClass(f,!1),o.eGui.style.transition="")},i))},n)},t.prototype.onFlashCells=function(e){if(this.cellComp){var n=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[n]&&this.animateCell("highlight")}},t.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},t.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},t.prototype.formatValue=function(e){return this.callValueFormatter(e)??e},t.prototype.callValueFormatter=function(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)},t.prototype.updateAndFormatValue=function(e){void 0===e&&(e=!1);var n=this.value,i=this.valueFormatted;return this.value=this.getValueFromValueService(),this.valueFormatted=this.callValueFormatter(this.value),!!e||!this.valuesAreEqual(n,this.value)||this.valueFormatted!=i},t.prototype.valuesAreEqual=function(e,n){var i=this.column.getColDef();return i.equals?i.equals(e,n):e===n},t.prototype.getComp=function(){return this.cellComp},t.prototype.getValueFromValueService=function(){var e=this.rowNode.leafGroup&&this.beans.columnModel.isPivotMode(),n=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!e,i=this.beans.gridOptionsService.is("groupIncludeFooter"),o=this.beans.gridOptionsService.is("groupSuppressBlankHeader");return this.beans.valueService.getValue(this.column,this.rowNode,!1,n&&i&&!o)},t.prototype.getValue=function(){return this.value},t.prototype.getValueFormatted=function(){return this.valueFormatted},t.prototype.addDomData=function(){var e=this,n=this.getGui();this.beans.gridOptionsService.setDomData(n,t.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return e.beans.gridOptionsService.setDomData(n,t.DOM_DATA_KEY_CELL_CTRL,null)})},t.prototype.createEvent=function(e,n){return{type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex}},t.prototype.onKeyPress=function(e){var n;null===(n=this.cellKeyboardListenerFeature)||void 0===n||n.onKeyPress(e)},t.prototype.onKeyDown=function(e){var n;null===(n=this.cellKeyboardListenerFeature)||void 0===n||n.onKeyDown(e)},t.prototype.onMouseEvent=function(e,n){var i;null===(i=this.cellMouseListenerFeature)||void 0===i||i.onMouseEvent(e,n)},t.prototype.getGui=function(){return this.eGui},t.prototype.refreshToolTip=function(){var e;null===(e=this.tooltipFeature)||void 0===e||e.refreshToolTip()},t.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},t.prototype.onLeftChanged=function(){var e;this.cellComp&&(null===(e=this.cellPositionFeature)||void 0===e||e.onLeftChanged())},t.prototype.onDisplayedColumnsChanged=function(){this.eGui&&this.setAriaColIndex()},t.prototype.setAriaColIndex=function(){var e=this.beans.columnModel.getAriaColumnIndex(this.column);CL(this.getGui(),e)},t.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},t.prototype.onWidthChanged=function(){var e;return null===(e=this.cellPositionFeature)||void 0===e?void 0:e.onWidthChanged()},t.prototype.getColumn=function(){return this.column},t.prototype.getRowNode=function(){return this.rowNode},t.prototype.getBeans=function(){return this.beans},t.prototype.isPrintLayout=function(){return this.printLayout},t.prototype.appendChild=function(e){this.eGui.appendChild(e)},t.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},t.prototype.getCellPosition=function(){return this.cellPosition},t.prototype.isEditing=function(){return this.editing},t.prototype.startRowOrCellEdit=function(e,n,i){void 0===i&&(i=null),this.cellComp&&("fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.startRowEditing(e,n,this):this.startEditing(e,n,!0,i))},t.prototype.getRowCtrl=function(){return this.rowCtrl},t.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},t.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},t.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},t.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},t.prototype.focusCell=function(e){void 0===e&&(e=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})},t.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},t.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}},t.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}},t.prototype.onCellFocused=function(e){if(this.cellComp&&!this.beans.gridOptionsService.is("suppressCellFocus")){var n=this.beans.focusService.isCellFocused(this.cellPosition);this.cellComp.addOrRemoveCssClass("ag-cell-focus",n),n&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});var o="fullRow"===this.beans.gridOptionsService.get("editType");!n&&!o&&this.editing&&this.stopRowOrCellEdit()}},t.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:jg(this.rowNode.rowPinned),column:this.column}},t.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);var e=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)},t.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.is("columnHoverHighlight")){var e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}},t.prototype.onColDefChanged=function(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},t.prototype.setWrapText=function(){var e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)},t.prototype.dispatchCellContextMenuEvent=function(e){var n=this.column.getColDef(),i=this.createEvent(e,V.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(i),n.onCellContextMenu&&window.setTimeout(function(){return n.onCellContextMenu(i)},0)},t.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},t.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},t.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],r.prototype.destroy.call(this)},t.prototype.createSelectionCheckbox=function(){var e=new hW;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e},t.prototype.createDndSource=function(){var e=new HQ(this.rowNode,this.column,this.beans,this.eGui);return this.beans.context.createBean(e),e},t.prototype.registerRowDragger=function(e,n,i){var o=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(e,n);else{var s=this.createRowDragComp(e,n,i);s&&(this.customRowDragComp=s,this.addDestroyFunc(function(){o.beans.context.destroyBean(s),o.customRowDragComp=null}))}},t.prototype.createRowDragComp=function(e,n,i){var o=this,s=this.beans.gridOptionsService.is("pagination"),a=this.beans.gridOptionsService.is("rowDragManaged"),d=this.beans.gridOptionsService.isRowModelType("clientSide");if(a){if(!d)return void Yn(function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")},"CellComp.addRowDragging");if(s)return void Yn(function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")},"CellComp.addRowDragging")}var f=new gA(function(){return o.value},this.rowNode,this.column,e,n,i);return this.beans.context.createBean(f),f},t.DOM_DATA_KEY_CELL_CTRL="cellCtrl",t}(Ye),JQ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),eJ=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},na=(()=>(function(r){r.Normal="Normal",r.FullWidth="FullWidth",r.FullWidthLoading="FullWidthLoading",r.FullWidthGroup="FullWidthGroup",r.FullWidthDetail="FullWidthDetail"}(na||(na={})),na))(),nJ=0,Fy=function(r){function t(e,n,i,o,s){var a=r.call(this)||this;return a.allRowGuis=[],a.active=!0,a.centerCellCtrls={list:[],map:{}},a.leftCellCtrls={list:[],map:{}},a.rightCellCtrls={list:[],map:{}},a.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},a.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},a.lastMouseDownOnDragger=!1,a.updateColumnListsPending=!1,a.businessKeySanitised=null,a.beans=n,a.rowNode=e,a.paginationPage=a.beans.paginationProxy.getCurrentPage(),a.useAnimationFrameForCreate=o,a.printLayout=s,a.instanceId=e.id+"-"+nJ++,a.setAnimateFlags(i),a.initRowBusinessKey(),a.rowFocused=a.beans.focusService.isRowFocused(a.rowNode.rowIndex,a.rowNode.rowPinned),a.rowLevel=a.beans.rowCssClassCalculator.calculateRowLevel(a.rowNode),a.setRowType(),a.addListeners(),a}return JQ(t,r),t.prototype.initRowBusinessKey=function(){var e=this.beans.gridOptionsService.get("getBusinessKeyForNode");if("function"==typeof e){var n=e(this.rowNode);this.businessKeySanitised=th(n)}},t.prototype.isSticky=function(){return this.rowNode.sticky},t.prototype.getBeans=function(){return this.beans},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setComp=function(e,n,i){var o={rowComp:e,element:n,containerType:i};this.allRowGuis.push(o),i===cs.LEFT?this.leftGui=o:i===cs.RIGHT?this.rightGui=o:i===cs.FULL_WIDTH?this.fullWidthGui=o:this.centerGui=o,this.initialiseRowComp(o),"FullWidthLoading"!==this.rowType&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},t.prototype.unsetComp=function(e){this.allRowGuis=this.allRowGuis.filter(function(n){return n.containerType!==e}),e===cs.LEFT?this.leftGui=void 0:e===cs.RIGHT?this.rightGui=void 0:e===cs.FULL_WIDTH&&(this.fullWidthGui=void 0)},t.prototype.isCacheable=function(){return this.rowType===na.FullWidthDetail&&this.beans.gridOptionsService.is("keepDetailRows")},t.prototype.setCached=function(e){var n=e?"none":"";this.allRowGuis.forEach(function(i){return i.element.style.display=n})},t.prototype.initialiseRowComp=function(e){var n=this,i=this.beans.gridOptionsService;this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(e),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);var o=e.rowComp;o.setRole("row"),this.getInitialRowClasses(e.containerType).forEach(function(d){return o.addOrRemoveCssClass(d,!0)}),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&fc(e.element,1==this.rowNode.expanded);var a=th(this.rowNode.id);null!=a&&o.setRowId(a),null!=this.businessKeySanitised&&o.setRowBusinessKey(this.businessKeySanitised),this.isFullWidth()&&!this.beans.gridOptionsService.is("suppressCellFocus")&&o.setTabIndex(-1),i.setDomData(e.element,t.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(function(){return i.setDomData(e.element,t.DOM_DATA_KEY_ROW_CTRL,null)}),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),i.is("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(function(){n.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()},t.prototype.executeSlideAndFadeAnimations=function(e){var n=this,i=e.containerType;this.slideInAnimation[i]&&(eL(function(){n.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(eL(function(){e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)},t.prototype.addRowDraggerToRow=function(e){if(this.beans.gridOptionsService.isEnableRangeSelection())Yn(function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");else{var n=this.beans.localeService.getLocaleTextFunc(),i=new gA(function(){return"1 "+n("rowDragRow","row")},this.rowNode,void 0,e.element,void 0,!0);this.createManagedBean(i,this.beans.context)}},t.prototype.setupFullWidth=function(e){var n=this.getPinnedForContainer(e.containerType),i=this.createFullWidthParams(e.element,n);if(this.rowType!=na.FullWidthDetail||on.assertRegistered(Ot.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)")){var o;switch(this.rowType){case na.FullWidthDetail:o=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(i);break;case na.FullWidthGroup:o=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(i);break;case na.FullWidthLoading:o=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(i);break;default:o=this.beans.userComponentFactory.getFullWidthCellRendererDetails(i)}e.rowComp.showFullWidth(o)}},t.prototype.isPrintLayout=function(){return this.printLayout},t.prototype.getFullWidthCellRenderer=function(){var e,n;return null===(n=null===(e=this.fullWidthGui)||void 0===e?void 0:e.rowComp)||void 0===n?void 0:n.getFullWidthCellRenderer()},t.prototype.getCellElement=function(e){var n=this.getCellCtrl(e);return n?n.getGui():null},t.prototype.executeProcessRowPostCreateFunc=function(){var e,n=this.beans.gridOptionsService.getCallback("processRowPostCreate");n&&this.areAllContainersReady()&&n({eRow:null===(e=this.centerGui)||void 0===e?void 0:e.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})},t.prototype.areAllContainersReady=function(){var e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),n=!!this.centerGui,i=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&n&&i},t.prototype.setRowType=function(){var e=this.rowNode.stub,n=this.rowNode.isFullWidthCell(),i=this.beans.doingMasterDetail&&this.rowNode.detail,o=this.beans.columnModel.isPivotMode(),a=!!this.rowNode.group&&!this.rowNode.footer&&this.beans.gridOptionsService.isGroupUseEntireRow(o);this.rowType=e?na.FullWidthLoading:i?na.FullWidthDetail:n?na.FullWidth:a?na.FullWidthGroup:na.Normal},t.prototype.updateColumnLists=function(e){var n=this;if(void 0===e&&(e=!1),!this.isFullWidth()){if(e||this.beans.gridOptionsService.is("suppressAnimationFrame")||this.printLayout)return void this.updateColumnListsImpl();this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){n.active&&n.updateColumnListsImpl()},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},t.prototype.createCellCtrls=function(e,n,i){var o=this;void 0===i&&(i=null);var s={list:[],map:{}},a=function(d,f){s.list.push(f),s.map[d]=f};return n.forEach(function(d){var f=d.getInstanceId(),g=e.map[f];g||(g=new xy(d,o.rowNode,o.beans,o)),a(f,g)}),e.list.forEach(function(d){if(null==s.map[d.getColumn().getInstanceId()]){if(!o.isCellEligibleToBeRemoved(d,i))return void a(d.getColumn().getInstanceId(),d);d.destroy()}}),s},t.prototype.updateColumnListsImpl=function(){var e=this;this.updateColumnListsPending=!1;var n=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var i=n.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);var o=n.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,o,"left");var s=n.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}this.allRowGuis.forEach(function(a){a.rowComp.setCellCtrls((a.containerType===cs.LEFT?e.leftCellCtrls:a.containerType===cs.RIGHT?e.rightCellCtrls:e.centerCellCtrls).list)})},t.prototype.isCellEligibleToBeRemoved=function(e,n){var i=!0;if(e.getColumn().getPinned()!=n)return i;var a=e.isEditing(),d=this.beans.focusService.isCellFocused(e.getCellPosition());if(a||d){var g=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(g)>=0)&&i}return i},t.prototype.setAnimateFlags=function(e){if(!this.isSticky()&&e){var n=Qe(this.rowNode.oldRowTop),i=this.beans.columnModel.isPinningLeft(),o=this.beans.columnModel.isPinningRight();n?(this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=o):(this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=o)}},t.prototype.isEditing=function(){return this.editingRow},t.prototype.stopRowEditing=function(e){this.stopEditing(e)},t.prototype.isFullWidth=function(){return this.rowType!==na.Normal},t.prototype.getRowType=function(){return this.rowType},t.prototype.refreshFullWidth=function(){var e=this,n=function(f,g){if(!f)return!0;var C=f.rowComp.getFullWidthCellRenderer();if(!C||!C.refresh)return!1;var E=e.createFullWidthParams(f.element,g);return C.refresh(E)},i=n(this.fullWidthGui,null),o=n(this.centerGui,null),s=n(this.leftGui,"left"),a=n(this.rightGui,"right");return i&&o&&s&&a},t.prototype.addListeners=function(){var e=this;this.addManagedListener(this.rowNode,In.EVENT_HEIGHT_CHANGED,function(){return e.onRowHeightChanged()}),this.addManagedListener(this.rowNode,In.EVENT_ROW_SELECTED,function(){return e.onRowSelected()}),this.addManagedListener(this.rowNode,In.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,In.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var n=this.beans.eventService;this.addManagedListener(n,V.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(n,V.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(n,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(n,V.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(n,V.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(n,V.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(n,V.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(n,V.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(n,V.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},t.prototype.onColumnMoved=function(){this.updateColumnLists()},t.prototype.addListenersForCellComps=function(){var e=this;this.addManagedListener(this.rowNode,In.EVENT_ROW_INDEX_CHANGED,function(){e.getAllCellCtrls().forEach(function(n){return n.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,In.EVENT_CELL_CHANGED,function(n){e.getAllCellCtrls().forEach(function(i){return i.onCellChanged(n)})})},t.prototype.onRowNodeDataChanged=function(e){this.getAllCellCtrls().forEach(function(n){return n.refreshCell({suppressFlash:!e.update,newData:!e.update})}),this.onRowSelected(),this.postProcessCss()},t.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},t.prototype.postProcessCss=function(){this.setStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},t.prototype.onRowNodeHighlightChanged=function(){var e=this.rowNode.highlighted;this.allRowGuis.forEach(function(n){var o=e===rh.Below;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",e===rh.Above),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",o)})},t.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},t.prototype.postProcessRowDragging=function(){var e=this.rowNode.dragging;this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-dragging",e)})},t.prototype.updateExpandedCss=function(){var e=this.rowNode.isExpandable(),n=1==this.rowNode.expanded;this.allRowGuis.forEach(function(i){i.rowComp.addOrRemoveCssClass("ag-row-group",e),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&n),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!n),fc(i.element,e&&n)})},t.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},t.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists()},t.prototype.getRowPosition=function(){return{rowPinned:jg(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},t.prototype.onKeyboardNavigate=function(e){var n=this.allRowGuis.find(function(f){return f.element.contains(e.target)});if((n?n.element:null)===e.target){var s=this.rowNode,a=this.beans.focusService.getFocusedCell();this.beans.navigationService.navigateToNextCell(e,e.key,{rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:a&&a.column},!0),e.preventDefault()}},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented&&!Xd(e)){var n=this.allRowGuis.find(function(a){return a.element.contains(e.target)}),i=n?n.element:null,o=i===e.target,s=null;o||(s=this.beans.focusService.findNextFocusableElement(i,!1,e.shiftKey)),(this.isFullWidth()&&o||!s)&&this.beans.navigationService.onTabKeyDown(this,e)}},t.prototype.onFullWidthRowFocused=function(e){var n,i=this.rowNode,o=!!e&&this.isFullWidth()&&e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned,s=this.fullWidthGui?this.fullWidthGui.element:null===(n=this.centerGui)||void 0===n?void 0:n.element;s&&(s.classList.toggle("ag-full-width-focus",o),o&&s.focus({preventScroll:!0}))},t.prototype.refreshCell=function(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()},t.prototype.removeCellCtrl=function(e,n){var i={list:[],map:{}};return e.list.forEach(function(o){o!==n&&(i.list.push(o),i.map[o.getInstanceId()]=o)}),i},t.prototype.onMouseEvent=function(e,n){switch(e){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n)}},t.prototype.createRowEvent=function(e,n){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,event:n}},t.prototype.createRowEventWithSource=function(e,n){var i=this.createRowEvent(e,n);return i.source=this,i},t.prototype.onRowDblClick=function(e){if(!Xd(e)){var n=this.createRowEventWithSource(V.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(n)}},t.prototype.onRowMouseDown=function(e){if(this.lastMouseDownOnDragger=Ey(e.target,"ag-row-drag",3),this.isFullWidth()){var n=this.rowNode,i=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:i.getAllDisplayedColumns()[0],rowPinned:n.rowPinned,forceBrowserFocus:!0})}},t.prototype.onRowClick=function(e){if(!Xd(e)&&!this.lastMouseDownOnDragger){var i=this.createRowEventWithSource(V.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(i);var o=e.ctrlKey||e.metaKey,s=e.shiftKey;if(!(this.beans.gridOptionsService.is("groupSelectsChildren")&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.beans.gridOptionsService.isRowSelection()||this.beans.gridOptionsService.is("suppressRowClickSelection"))){var d=this.beans.gridOptionsService.is("rowMultiSelectWithClick"),f=!this.beans.gridOptionsService.is("suppressRowDeselection"),g="rowClicked";this.rowNode.isSelected()?d?this.rowNode.setSelectedParams({newValue:!1,event:e,source:g}):o?f&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:g}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:g}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!d&&!o,rangeSelect:s,event:e,source:g})}}},t.prototype.setupDetailRowAutoHeight=function(e){var n=this;if(this.rowType===na.FullWidthDetail&&this.beans.gridOptionsService.is("detailRowAutoHeight")){var i=function(){var s=e.clientHeight;null!=s&&s>0&&n.beans.frameworkOverrides.setTimeout(function(){n.rowNode.setRowHeight(s),n.beans.clientSideRowModel?n.beans.clientSideRowModel.onRowHeightChanged():n.beans.serverSideRowModel&&n.beans.serverSideRowModel.onRowHeightChanged()},0)},o=this.beans.resizeObserverService.observeResize(e,i);this.addDestroyFunc(o),i()}},t.prototype.createFullWidthParams=function(e,n){var i=this;return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,eGridCell:e,eParentOfValue:e,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(s,a,d,f){return i.addFullWidthRowDragging(s,a,d,f)}}},t.prototype.addFullWidthRowDragging=function(e,n,i,o){if(void 0===i&&(i=""),this.isFullWidth()){var s=new gA(function(){return i},this.rowNode,void 0,e,n,o);this.createManagedBean(s,this.beans.context)}},t.prototype.onUiLevelChanged=function(){var e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){var n="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(o){o.rowComp.addOrRemoveCssClass(n,!0),o.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=e},t.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},t.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},t.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},t.prototype.refreshFirstAndLastRowStyles=function(){var e=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass("ag-row-first",e)})),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass("ag-row-last",n)}))},t.prototype.stopEditing=function(e){var n,i;if(void 0===e&&(e=!1),!this.stoppingRowEdit){var o=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;var a=!1;try{for(var d=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),f=d.next();!f.done;f=d.next()){var C=f.value.stopEditing(e);s&&!e&&!a&&C&&(a=!0)}}catch(T){n={error:T}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}if(a){var E=this.createRowEvent(V.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(E)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},t.prototype.setInlineEditingCss=function(e){this.allRowGuis.forEach(function(n){n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})},t.prototype.setEditingRow=function(e){this.editingRow=e,this.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass("ag-row-editing",e)});var n=this.createRowEvent(e?V.EVENT_ROW_EDITING_STARTED:V.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(n)},t.prototype.startRowEditing=function(e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),this.editingRow||this.getAllCellCtrls().reduce(function(a,d){var f=d===i;return f?d.startEditing(e,n,f,o):d.startEditing(null,null,f,o),!!a||d.isEditing()},!1)&&this.setEditingRow(!0)},t.prototype.getAllCellCtrls=function(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;var e=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(eJ(arguments[t]));return r}(this.centerCellCtrls.list,this.leftCellCtrls.list,this.rightCellCtrls.list);return e},t.prototype.postProcessClassesFromGridOptions=function(){var e=this,n=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!n||!n.length||n.forEach(function(i){e.allRowGuis.forEach(function(o){return o.rowComp.addOrRemoveCssClass(i,!0)})})},t.prototype.postProcessRowClassRules=function(){var e=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,function(n){e.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass(n,!0)})},function(n){e.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass(n,!1)})})},t.prototype.setStylesFromGridOptions=function(e){var n=this.processStylesFromGridOptions();this.forEachGui(e,function(i){return i.rowComp.setUserStyles(n)})},t.prototype.getPinnedForContainer=function(e){return e===cs.LEFT?"left":e===cs.RIGHT?"right":null},t.prototype.getInitialRowClasses=function(e){var n=this.getPinnedForContainer(e),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)},t.prototype.processStylesFromGridOptions=function(){var e=this.beans.gridOptionsService.get("rowStyle");if(!e||"function"!=typeof e){var i,n=this.beans.gridOptionsService.getCallback("getRowStyle");return n&&(i=n({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})),Object.assign({},e,i)}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},t.prototype.onRowSelected=function(e){var n=this,i=!!this.rowNode.isSelected();this.forEachGui(e,function(o){o.rowComp.addOrRemoveCssClass("ag-row-selected",i),Ow(o.element,!!i||void 0);var s=n.createAriaLabel();Sy(o.element,s??"")})},t.prototype.createAriaLabel=function(){var e=this.rowNode.isSelected();if(!e||!this.beans.gridOptionsService.is("suppressRowDeselection"))return this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(e?"deselect":"select")+" this row.")},t.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},t.prototype.addHoverFunctionality=function(e){var n=this;this.active&&(this.addManagedListener(e,"mouseenter",function(){return n.rowNode.onMouseEnter()}),this.addManagedListener(e,"mouseleave",function(){return n.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,In.EVENT_MOUSE_ENTER,function(){!n.beans.dragService.isDragging()&&!n.beans.gridOptionsService.is("suppressRowHoverHighlight")&&e.classList.add("ag-row-hover")}),this.addManagedListener(this.rowNode,In.EVENT_MOUSE_LEAVE,function(){e.classList.remove("ag-row-hover")}))},t.prototype.roundRowTopToBounds=function(e){var i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.applyPaginationOffset(i.top,!0)-100,s=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(o,e),s)},t.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},t.prototype.forEachGui=function(e,n){(e?[e]:this.allRowGuis).forEach(n)},t.prototype.onRowHeightChanged=function(e){if(null!=this.rowNode.rowHeight){var n=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=this.beans.gridOptionsService.isGetRowHeightFunction()?this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,a=s?Math.min(i,s)-2+"px":void 0;this.forEachGui(e,function(d){d.element.style.height=n+"px",a&&d.element.style.setProperty("--ag-line-height",a)})}},t.prototype.addEventListener=function(e,n){r.prototype.addEventListener.call(this,e,n)},t.prototype.removeEventListener=function(e,n){r.prototype.removeEventListener.call(this,e,n)},t.prototype.destroyFirstPass=function(){this.active=!1,this.setupRemoveAnimation();var e=this.createRowEvent(V.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),r.prototype.destroy.call(this)},t.prototype.setupRemoveAnimation=function(){if(!this.isSticky())if(null!=this.rowNode.rowTop){var n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})},t.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var e=function(n){return n.list.forEach(function(i){return i.destroy()}),{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)},t.prototype.setFocusedClasses=function(e){var n=this;this.forEachGui(e,function(i){i.rowComp.addOrRemoveCssClass("ag-row-focus",n.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!n.rowFocused)})},t.prototype.onCellFocused=function(){this.onCellFocusChanged()},t.prototype.onCellFocusCleared=function(){this.onCellFocusChanged()},t.prototype.onCellFocusChanged=function(){var e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)},t.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},t.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},t.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},t.prototype.applyPaginationOffset=function(e,n){return void 0===n&&(n=!1),this.rowNode.isRowPinned()?e:e+this.beans.paginationProxy.getPixelOffset()*(n?1:-1)},t.prototype.setRowTop=function(e){if(!this.printLayout&&Qe(e)){var n=this.applyPaginationOffset(e),i=this.rowNode.isRowPinned()?n:this.beans.rowContainerHeightService.getRealPixelPosition(n);this.setRowTopStyle(i+"px")}},t.prototype.getInitialRowTop=function(e){return this.beans.gridOptionsService.is("suppressRowTransform")?this.getInitialRowTopShared(e):void 0},t.prototype.getInitialTransform=function(e){return this.beans.gridOptionsService.is("suppressRowTransform")?void 0:"translateY("+this.getInitialRowTopShared(e)+")"},t.prototype.getInitialRowTopShared=function(e){if(this.printLayout)return"";var n;if(this.isSticky())n=this.rowNode.stickyRowTop;else{var i=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,o=this.applyPaginationOffset(i);n=this.rowNode.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return n+"px"},t.prototype.setRowTopStyle=function(e){var n=this.beans.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach(function(i){return n?i.rowComp.setTop(e):i.rowComp.setTransform("translateY("+e+")")})},t.prototype.getRowNode=function(){return this.rowNode},t.prototype.getCellCtrl=function(e){var n=null;return this.getAllCellCtrls().forEach(function(i){i.getColumn()==e&&(n=i)}),null!=n||this.getAllCellCtrls().forEach(function(i){i.getColSpanningList().indexOf(e)>=0&&(n=i)}),n},t.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},t.prototype.updateRowIndexes=function(e){var n=this.rowNode.getRowIndexString(),i=this.beans.headerNavigationService.getHeaderRowCount(),o=this.rowNode.rowIndex%2==0,s=i+this.rowNode.rowIndex+1;this.forEachGui(e,function(a){a.rowComp.setRowIndex(n),a.rowComp.addOrRemoveCssClass("ag-row-even",o),a.rowComp.addOrRemoveCssClass("ag-row-odd",!o),_L(a.element,s)})},t.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},t.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},t.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},t.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},t.DOM_DATA_KEY_ROW_CTRL="renderedRow",t}(Ye),rJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),dl=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},oJ=function(r){function t(e){var n=r.call(this)||this;return n.element=e,n}return rJ(t,r),t.prototype.postConstruct=function(){this.addMouseListeners(),this.mockContextMenuForIPad(),this.addKeyboardEvents()},t.prototype.addKeyboardEvents=function(){var e=this;["keydown","keypress"].forEach(function(i){var o=e.processKeyboardEvent.bind(e,i);e.addManagedListener(e.element,i,o)})},t.prototype.addMouseListeners=function(){var e=this;["dblclick","contextmenu","mouseover","mouseout","click",aL("touchstart")?"touchstart":"mousedown"].forEach(function(o){var s=e.processMouseEvent.bind(e,o);e.addManagedListener(e.element,o,s)})},t.prototype.processMouseEvent=function(e,n){if(this.mouseEventService.isEventFromThisGrid(n)&&!Xd(n)){var i=this.getRowForEvent(n),o=this.mouseEventService.getRenderedCellForEvent(n);"contextmenu"===e?this.handleContextMenuMouseEvent(n,null,i,o):(o&&o.onMouseEvent(e,n),i&&i.onMouseEvent(e,n))}},t.prototype.mockContextMenuForIPad=function(){var e=this;if(zg()){var n=new ul(this.element);this.addManagedListener(n,ul.EVENT_LONG_TAP,function(o){var s=e.getRowForEvent(o.touchEvent),a=e.mouseEventService.getRenderedCellForEvent(o.touchEvent);e.handleContextMenuMouseEvent(null,o.touchEvent,s,a)}),this.addDestroyFunc(function(){return n.destroy()})}},t.prototype.getRowForEvent=function(e){for(var n=e.target;n;){var i=this.gridOptionsService.getDomData(n,Fy.DOM_DATA_KEY_ROW_CTRL);if(i)return i;n=n.parentElement}return null},t.prototype.handleContextMenuMouseEvent=function(e,n,i,o){var s=i?i.getRowNode():null,a=o?o.getColumn():null,d=null;a&&(o.dispatchCellContextMenuEvent(e||n),d=this.valueService.getValue(a,s));var g=this.ctrlsService.getGridBodyCtrl(),C=o?o.getGui():g.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,n,s,a,d,C)},t.prototype.processKeyboardEvent=function(e,n){var i=YI(this.gridOptionsService,n,xy.DOM_DATA_KEY_CELL_CTRL),o=YI(this.gridOptionsService,n,Fy.DOM_DATA_KEY_ROW_CTRL);n.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,n):o&&o.isFullWidth()&&this.processFullWidthRowKeyboardEvent(o,e,n))},t.prototype.processCellKeyboardEvent=function(e,n,i){var o=e.getRowNode(),s=e.getColumn(),a=e.isEditing();if(!aA(this.gridOptionsService,i,o,s,a))switch(n){case"keydown":!a&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing());break;case"keypress":e.onKeyPress(i)}if("keydown"===n){var g=e.createEvent(i,V.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(g)}if("keypress"===n){var C=e.createEvent(i,V.EVENT_CELL_KEY_PRESS);this.eventService.dispatchEvent(C)}},t.prototype.processFullWidthRowKeyboardEvent=function(e,n,i){var o=e.getRowNode(),s=this.focusService.getFocusedCell();if(!aA(this.gridOptionsService,i,o,s&&s.column,!1)&&"keydown"===n)switch(i.key){case Fe.PAGE_HOME:case Fe.PAGE_END:this.navigationService.handlePageScrollingKey(i);break;case Fe.UP:case Fe.DOWN:e.onKeyboardNavigate(i);break;case Fe.TAB:e.onTabKeyDown(i)}if("keydown"===n){var g=e.createRowEvent(V.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(g)}if("keypress"===n){var C=e.createRowEvent(V.EVENT_CELL_KEY_PRESS,i);this.eventService.dispatchEvent(C)}},t.prototype.doGridOperations=function(e,n){if((e.ctrlKey||e.metaKey)&&!n&&this.mouseEventService.isEventFromThisGrid(e)){var i=N2(e);if(i===Fe.A)return this.onCtrlAndA(e);if(i===Fe.C)return this.onCtrlAndC(e);if(i===Fe.X)return this.onCtrlAndX(e);if(i===Fe.V)return this.onCtrlAndV();if(i===Fe.D)return this.onCtrlAndD(e);if(i===Fe.Z)return this.onCtrlAndZ(e);if(i===Fe.Y)return this.onCtrlAndY()}},t.prototype.onCtrlAndA=function(e){var n=this,i=n.pinnedRowModel,s=n.rangeService;if(s&&n.paginationProxy.isRowsToRender()){var a=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o}([i.isEmpty("top"),i.isEmpty("bottom")],2),g=a[0]?null:"top",C=void 0,E=void 0;a[1]?(C=null,E=this.paginationProxy.getRowCount()-1):(C="bottom",E=i.getPinnedBottomRowData().length-1);var T=this.columnModel.getAllDisplayedColumns();if(al(T))return;s.setCellRange({rowStartIndex:0,rowStartPinned:g,rowEndIndex:E,rowEndPinned:C,columnStart:T[0],columnEnd:pr(T)})}e.preventDefault()},t.prototype.onCtrlAndC=function(e){!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection")||(this.clipboardService.copyToClipboard(),e.preventDefault())},t.prototype.onCtrlAndX=function(e){!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection")||this.gridOptionsService.is("suppressCutToClipboard")||(this.clipboardService.cutToClipboard(),e.preventDefault())},t.prototype.onCtrlAndV=function(){on.isRegistered(Ot.ClipboardModule)&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},t.prototype.onCtrlAndD=function(e){on.isRegistered(Ot.ClipboardModule)&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()},t.prototype.onCtrlAndZ=function(e){this.gridOptionsService.is("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},t.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},dl([F("mouseEventService")],t.prototype,"mouseEventService",void 0),dl([F("valueService")],t.prototype,"valueService",void 0),dl([tr("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),dl([F("ctrlsService")],t.prototype,"ctrlsService",void 0),dl([F("navigationService")],t.prototype,"navigationService",void 0),dl([F("focusService")],t.prototype,"focusService",void 0),dl([F("undoRedoService")],t.prototype,"undoRedoService",void 0),dl([F("columnModel")],t.prototype,"columnModel",void 0),dl([F("paginationProxy")],t.prototype,"paginationProxy",void 0),dl([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),dl([tr("rangeService")],t.prototype,"rangeService",void 0),dl([tr("clipboardService")],t.prototype,"clipboardService",void 0),dl([rt],t.prototype,"postConstruct",null),t}(Ye),sJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),wA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},aJ=function(r){function t(e){var n=r.call(this)||this;return n.centerContainerCtrl=e,n}return sJ(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.listenForResize()}),this.addManagedListener(this.eventService,V.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},t.prototype.listenForResize=function(){var e=this,n=function(){return e.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(n),this.gridBodyCtrl.registerBodyViewportResizeListener(n)},t.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},t.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();var e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},t.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},t.prototype.getBodyHeight=function(){return this.bodyHeight},t.prototype.checkBodyHeight=function(){var n=D0(this.gridBodyCtrl.getBodyViewportElement());this.bodyHeight!==n&&(this.bodyHeight=n,this.eventService.dispatchEvent({type:V.EVENT_BODY_HEIGHT_CHANGED}))},t.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},t.prototype.updateScrollVisibleServiceImpl=function(){var e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e),this.gridBodyCtrl.setVerticalScrollPaddingVisible(e.verticalScrollShowing)},t.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||this.centerContainerCtrl.isViewportHScrollShowing()},t.prototype.onHorizontalViewportChanged=function(){var e=this.centerContainerCtrl.getCenterWidth(),n=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,n)},wA([F("ctrlsService")],t.prototype,"ctrlsService",void 0),wA([F("columnModel")],t.prototype,"columnModel",void 0),wA([F("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),wA([rt],t.prototype,"postConstruct",null),t}(Ye),lJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),wW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},uJ=function(r){function t(e){var n=r.call(this)||this;return n.element=e,n}return lJ(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},t.prototype.onPinnedLeftWidthChanged=function(){var e=this.pinnedWidthService.getPinnedLeftWidth();Wn(this.element,e>0),cu(this.element,e)},t.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},wW([F("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),wW([rt],t.prototype,"postConstruct",null),t}(Ye),cJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),SW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},dJ=function(r){function t(e){var n=r.call(this)||this;return n.element=e,n}return cJ(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},t.prototype.onPinnedRightWidthChanged=function(){var e=this.pinnedWidthService.getPinnedRightWidth();Wn(this.element,e>0),cu(this.element,e)},t.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},SW([F("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),SW([rt],t.prototype,"postConstruct",null),t}(Ye),hJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),EW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},bW=function(r){function t(e,n){var i=r.call(this)||this;return i.eContainer=e,i.eWrapper=n,i}return hJ(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,V.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},t.prototype.onHeightChanged=function(){var e=this.maxDivHeightScaler.getUiContainerHeight(),n=null!=e?e+"px":"";this.eContainer.style.height=n,this.eWrapper&&(this.eWrapper.style.height=n)},EW([F("rowContainerHeightService")],t.prototype,"maxDivHeightScaler",void 0),EW([rt],t.prototype,"postConstruct",null),t}(Ye),fJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),pk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},pJ=function(r){function t(e){var n=r.call(this)||this;return n.eContainer=e,n}return fJ(t,r),t.prototype.postConstruct=function(){var e=this;if(this.gridOptionsService.isEnableRangeSelection()&&!Qt(this.rangeService)){var n={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(n),this.addDestroyFunc(function(){return e.dragService.removeDragSource(n)})}},pk([tr("rangeService")],t.prototype,"rangeService",void 0),pk([F("dragService")],t.prototype,"dragService",void 0),pk([rt],t.prototype,"postConstruct",null),t}(Ye),gJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),DW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},gk=function(r){function t(e){var n=r.call(this)||this;return n.callback=e,n}return gJ(t,r),t.prototype.postConstruct=function(){var e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.setWidth()},t.prototype.setWidth=function(){var e=this.columnModel,n=this.gridOptionsService.isDomLayout("print"),i=e.getBodyContainerWidth(),o=e.getDisplayedColumnsLeftWidth(),s=e.getDisplayedColumnsRightWidth();this.callback(n?i+o+s:i)},DW([F("columnModel")],t.prototype,"columnModel",void 0),DW([rt],t.prototype,"postConstruct",null),t}(Ye),mJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ly=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},vJ=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},we=(()=>(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r.TOP_LEFT="topLeft",r.TOP_RIGHT="topRight",r.TOP_CENTER="topCenter",r.TOP_FULL_WIDTH="topFullWidth",r.STICKY_TOP_LEFT="stickyTopLeft",r.STICKY_TOP_RIGHT="stickyTopRight",r.STICKY_TOP_CENTER="stickyTopCenter",r.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",r.BOTTOM_LEFT="bottomLeft",r.BOTTOM_RIGHT="bottomRight",r.BOTTOM_CENTER="bottomCenter",r.BOTTOM_FULL_WIDTH="bottomFullWidth"}(we||(we={})),we))(),cs=(()=>(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth"}(cs||(cs={})),cs))(),CJ=Kf([[we.CENTER,"ag-center-cols-container"],[we.LEFT,"ag-pinned-left-cols-container"],[we.RIGHT,"ag-pinned-right-cols-container"],[we.FULL_WIDTH,"ag-full-width-container"],[we.TOP_CENTER,"ag-floating-top-container"],[we.TOP_LEFT,"ag-pinned-left-floating-top"],[we.TOP_RIGHT,"ag-pinned-right-floating-top"],[we.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[we.STICKY_TOP_CENTER,"ag-sticky-top-container"],[we.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[we.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[we.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[we.BOTTOM_CENTER,"ag-floating-bottom-container"],[we.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[we.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[we.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),wJ=Kf([[we.CENTER,"ag-center-cols-viewport"],[we.TOP_CENTER,"ag-floating-top-viewport"],[we.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[we.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),SJ=Kf([[we.CENTER,"ag-center-cols-clipper"]]),TW=function(r){function t(e){var n=r.call(this)||this;return n.visible=!0,n.EMPTY_CTRLS=[],n.name=e,n.isFullWithContainer=n.name===we.TOP_FULL_WIDTH||n.name===we.STICKY_TOP_FULL_WIDTH||n.name===we.BOTTOM_FULL_WIDTH||n.name===we.FULL_WIDTH,n}return mJ(t,r),t.getRowContainerCssClasses=function(e){return{container:CJ.get(e),viewport:wJ.get(e),wrapper:SJ.get(e)}},t.getPinned=function(e){switch(e){case we.BOTTOM_LEFT:case we.TOP_LEFT:case we.STICKY_TOP_LEFT:case we.LEFT:return"left";case we.BOTTOM_RIGHT:case we.TOP_RIGHT:case we.STICKY_TOP_RIGHT:case we.RIGHT:return"right";default:return null}},t.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([we.CENTER],function(){return e.viewportSizeFeature=e.createManagedBean(new aJ(e))})},t.prototype.registerWithCtrlsService=function(){switch(this.name){case we.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case we.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case we.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case we.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case we.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case we.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case we.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case we.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case we.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case we.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case we.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case we.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},t.prototype.forContainers=function(e,n){e.indexOf(this.name)>=0&&n()},t.prototype.getContainerElement=function(){return this.eContainer},t.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},t.prototype.setComp=function(e,n,i,o){var s=this;this.comp=e,this.eContainer=n,this.eViewport=i,this.eWrapper=o,this.createManagedBean(new oJ(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var C=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(vJ(arguments[t]));return r}([we.TOP_CENTER,we.TOP_LEFT,we.TOP_RIGHT],[we.BOTTOM_CENTER,we.BOTTOM_LEFT,we.BOTTOM_RIGHT],[we.CENTER,we.LEFT,we.RIGHT],[we.STICKY_TOP_CENTER,we.STICKY_TOP_LEFT,we.STICKY_TOP_RIGHT]),E=[we.CENTER,we.LEFT,we.RIGHT,we.FULL_WIDTH],T=[we.CENTER,we.TOP_CENTER,we.STICKY_TOP_CENTER,we.BOTTOM_CENTER],M=[we.RIGHT,we.BOTTOM_RIGHT,we.TOP_RIGHT,we.STICKY_TOP_RIGHT];this.forContainers([we.LEFT,we.BOTTOM_LEFT,we.TOP_LEFT,we.STICKY_TOP_LEFT],function(){s.pinnedWidthFeature=s.createManagedBean(new uJ(s.eContainer)),s.addManagedListener(s.eventService,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,function(){return s.onPinnedWidthChanged()})}),this.forContainers(M,function(){s.pinnedWidthFeature=s.createManagedBean(new dJ(s.eContainer)),s.addManagedListener(s.eventService,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return s.onPinnedWidthChanged()})}),this.forContainers(E,function(){return s.createManagedBean(new bW(s.eContainer,s.eWrapper))}),this.forContainers(C,function(){return s.createManagedBean(new pJ(s.eContainer))}),this.forContainers(T,function(){return s.createManagedBean(new gk(function(k){return s.comp.setContainerWidth(k+"px")}))}),E0()&&(this.forContainers([we.CENTER],function(){s.addManagedListener(s.eventService,s.enableRtl?V.EVENT_LEFT_PINNED_WIDTH_CHANGED:V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return s.refreshPaddingForFakeScrollbar()})}),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()},t.prototype.refreshPaddingForFakeScrollbar=function(){var e=this,n=e.enableRtl,i=e.columnModel,o=e.name,s=e.eWrapper,a=e.eContainer,d=n?we.LEFT:we.RIGHT;this.forContainers([we.CENTER,d],function(){var f=i.getContainerWidth(d),g=n?"marginLeft":"marginRight";o===we.CENTER?s.style[g]=f?"0px":"16px":a.style[g]=f?"16px":"0px"})},t.prototype.addListeners=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,function(){return e.onScrollVisibilityChanged()}),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return e.onDisplayedColumnsChanged()}),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){return e.onDisplayedColumnsWidthChanged()}),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_ROWS_CHANGED,function(){return e.onDisplayedRowsChanged()}),this.onScrollVisibilityChanged(),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},t.prototype.listenOnDomOrder=function(){var e=this;if([we.STICKY_TOP_CENTER,we.STICKY_TOP_LEFT,we.STICKY_TOP_RIGHT,we.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0)this.comp.setDomOrder(!0);else{var o=function(){var s=e.gridOptionsService.is("ensureDomOrder"),a=e.gridOptionsService.isDomLayout("print");e.comp.setDomOrder(s||a)};this.addManagedPropertyListener("domLayout",o),o()}},t.prototype.stopHScrollOnPinnedRows=function(){var e=this;this.forContainers([we.TOP_CENTER,we.STICKY_TOP_CENTER,we.BOTTOM_CENTER],function(){e.addManagedListener(e.eViewport,"scroll",function(){return e.eViewport.scrollLeft=0})})},t.prototype.onDisplayedColumnsChanged=function(){var e=this;this.forContainers([we.CENTER],function(){return e.onHorizontalViewportChanged()})},t.prototype.onDisplayedColumnsWidthChanged=function(){var e=this;this.forContainers([we.CENTER],function(){return e.onHorizontalViewportChanged()})},t.prototype.onScrollVisibilityChanged=function(){if(this.name===we.CENTER){var n=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gridOptionsService.getScrollbarWidth()||0;this.comp.setViewportHeight(0==n?"100%":"calc(100% + "+n+"px)")}},t.prototype.addPreventScrollWhileDragging=function(){var e=this,n=function(i){e.dragService.isDragging()&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",n,{passive:!1}),this.addDestroyFunc(function(){return e.eContainer.removeEventListener("touchmove",n)})},t.prototype.onHorizontalViewportChanged=function(){var e=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,n)},t.prototype.getCenterWidth=function(){return iA(this.eViewport)},t.prototype.getCenterViewportScrollLeft=function(){return R0(this.eViewport,this.enableRtl)},t.prototype.registerViewportResizeListener=function(e){var n=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(function(){return n()})},t.prototype.isViewportVisible=function(){return Pw(this.eViewport)},t.prototype.isViewportHScrollShowing=function(){return UL(this.eViewport)},t.prototype.getViewportScrollLeft=function(){return R0(this.eViewport,this.enableRtl)},t.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||UL(this.eViewport)},t.prototype.getViewportElement=function(){return this.eViewport},t.prototype.setContainerTranslateX=function(e){this.eContainer.style.transform="translateX("+e+"px)"},t.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},t.prototype.setCenterViewportScrollLeft=function(e){sA(this.eViewport,e,this.enableRtl)},t.prototype.isContainerVisible=function(){return!t.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},t.prototype.onPinnedWidthChanged=function(){var e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged()),E0()&&this.refreshPaddingForFakeScrollbar()},t.prototype.onDisplayedRowsChanged=function(){var e=this;if(this.visible){var n=this.gridOptionsService.isDomLayout("print"),o=this.getRowCtrls().filter(function(s){var a=s.isFullWidth(),d=e.embedFullWidthRows||n;return e.isFullWithContainer?!d&&a:d||!a});this.comp.setRowCtrls(o)}else this.comp.setRowCtrls(this.EMPTY_CTRLS)},t.prototype.getRowCtrls=function(){switch(this.name){case we.TOP_CENTER:case we.TOP_LEFT:case we.TOP_RIGHT:case we.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case we.STICKY_TOP_CENTER:case we.STICKY_TOP_LEFT:case we.STICKY_TOP_RIGHT:case we.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case we.BOTTOM_CENTER:case we.BOTTOM_LEFT:case we.BOTTOM_RIGHT:case we.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getRowCtrls()}},Ly([F("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),Ly([F("dragService")],t.prototype,"dragService",void 0),Ly([F("ctrlsService")],t.prototype,"ctrlsService",void 0),Ly([F("columnModel")],t.prototype,"columnModel",void 0),Ly([F("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Ly([F("rowRenderer")],t.prototype,"rowRenderer",void 0),Ly([rt],t.prototype,"postConstruct",null),t}(Ye),EJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ih=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},bJ='<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="'+we.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+we.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+we.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+we.TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-body-clipper" ref="eBodyClipper" role="presentation">\n                <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                    <ag-row-container ref="leftContainer" name="'+we.LEFT+'"></ag-row-container>\n                    <ag-row-container ref="centerContainer" name="'+we.CENTER+'"></ag-row-container>\n                    <ag-row-container ref="rightContainer" name="'+we.RIGHT+'"></ag-row-container>\n                    <ag-row-container ref="fullWidthContainer" name="'+we.FULL_WIDTH+'"></ag-row-container>\n                </div>\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="'+we.STICKY_TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="'+we.STICKY_TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="'+we.STICKY_TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="'+we.STICKY_TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="'+we.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+we.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+we.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+we.BOTTOM_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',DJ=function(r){function t(){return r.call(this,bJ)||this}return EJ(t,r),t.prototype.init=function(){var e=this,n=function(o,s){var a=o+"px";s.style.minHeight=a,s.style.height=a},i={setRowAnimationCssOnBodyViewport:function(o,s){return e.setRowAnimationCssOnBodyViewport(o,s)},setColumnCount:function(o){return h2(e.getGui(),o)},setRowCount:function(o){return d2(e.getGui(),o)},setTopHeight:function(o){return n(o,e.eTop)},setBottomHeight:function(o){return n(o,e.eBottom)},setTopDisplay:function(o){return e.eTop.style.display=o},setBottomDisplay:function(o){return e.eBottom.style.display=o},setStickyTopHeight:function(o){return e.eStickyTop.style.height=o},setStickyTopTop:function(o){return e.eStickyTop.style.top=o},setStickyTopWidth:function(o){return e.eStickyTop.style.width=o},setColumnMovingCss:function(o,s){return e.addOrRemoveCssClass(o,s)},updateLayoutClasses:function(o,s){[e.eBodyViewport.classList,e.eBodyClipper.classList,e.eBody.classList].forEach(function(d){d.toggle(ro.AUTO_HEIGHT,s.autoHeight),d.toggle(ro.NORMAL,s.normal),d.toggle(ro.PRINT,s.print)}),e.addOrRemoveCssClass(ro.AUTO_HEIGHT,s.autoHeight),e.addOrRemoveCssClass(ro.NORMAL,s.normal),e.addOrRemoveCssClass(ro.PRINT,s.print)},setAlwaysVerticalScrollClass:function(o,s){return e.eBodyViewport.classList.toggle(_W,s)},registerBodyViewportResizeListener:function(o){var s=e.resizeObserverService.observeResize(e.eBodyViewport,o);e.addDestroyFunc(function(){return s()})},setPinnedTopBottomOverflowY:function(o){return e.eTop.style.overflowY=e.eBottom.style.overflowY=o},setCellSelectableCss:function(o,s){[e.eTop,e.eBodyViewport,e.eBottom].forEach(function(a){return a.classList.toggle(yW,s)})},setBodyViewportWidth:function(o){return e.eBodyViewport.style.width=o}};this.ctrl=this.createManagedBean(new _Q),this.ctrl.setComp(i,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||"multiple"===this.gridOptionsService.get("rowSelection"))&&c2(this.getGui(),!0)},t.prototype.setRowAnimationCssOnBodyViewport=function(e,n){var i=this.eBodyViewport.classList;i.toggle(Ny.ANIMATION_ON,n),i.toggle(Ny.ANIMATION_OFF,!n)},t.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},ih([F("resizeObserverService")],t.prototype,"resizeObserverService",void 0),ih([tr("rangeService")],t.prototype,"rangeService",void 0),ih([ut("eBodyViewport")],t.prototype,"eBodyViewport",void 0),ih([ut("eStickyTop")],t.prototype,"eStickyTop",void 0),ih([ut("eTop")],t.prototype,"eTop",void 0),ih([ut("eBottom")],t.prototype,"eBottom",void 0),ih([ut("gridHeader")],t.prototype,"headerRootComp",void 0),ih([ut("eBodyClipper")],t.prototype,"eBodyClipper",void 0),ih([ut("eBody")],t.prototype,"eBody",void 0),ih([rt],t.prototype,"init",null),t}(Rn),TJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),mk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},RJ=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return TJ(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},t.prototype.onDisplayedColumnsChanged=function(){this.update()},t.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},t.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},t.prototype.updateImpl=function(){var e=this.ctrlsService.getCenterRowContainerCtrl();if(e){var n={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(n)}},t.prototype.setScrollsVisible=function(e){this.horizontalScrollShowing===e.horizontalScrollShowing&&this.verticalScrollShowing===e.verticalScrollShowing||(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:V.EVENT_SCROLL_VISIBILITY_CHANGED}))},t.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},t.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},mk([F("ctrlsService")],t.prototype,"ctrlsService",void 0),mk([rt],t.prototype,"postConstruct",null),mk([Rt("scrollVisibleService")],t)}(Ye),OJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),RW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},IJ=function(r){function t(){var n=null!==r&&r.apply(this,arguments)||this;return n.gridInstanceId=e.gridInstanceSequence.next(),n}var e;return OJ(t,r),e=t,t.prototype.stampTopLevelGridCompWithGridInstance=function(n){n[e.GRID_DOM_KEY]=this.gridInstanceId},t.prototype.getRenderedCellForEvent=function(n){return YI(this.gridOptionsService,n,xy.DOM_DATA_KEY_CELL_CTRL)},t.prototype.isEventFromThisGrid=function(n){return this.isElementInThisGrid(n.target)},t.prototype.isElementInThisGrid=function(n){for(var i=n;i;){var o=i[e.GRID_DOM_KEY];if(Qe(o))return o===this.gridInstanceId;i=i.parentElement}return!1},t.prototype.getCellPositionForEvent=function(n){var i=this.getRenderedCellForEvent(n);return i?i.getCellPosition():null},t.prototype.getNormalisedPosition=function(n){var s,a,i=this.gridOptionsService.isDomLayout("normal");if(null!=n.clientX||null!=n.clientY?(s=n.clientX,a=n.clientY):(s=n.x,a=n.y),i){var d=this.ctrlsService.getGridBodyCtrl(),f=d.getScrollFeature().getVScrollPosition();s+=d.getScrollFeature().getHScrollPosition().left,a+=f.top}return{x:s,y:a}},t.gridInstanceSequence=new Nw,t.GRID_DOM_KEY="__ag_grid_instance",RW([F("ctrlsService")],t.prototype,"ctrlsService",void 0),e=RW([Rt("mouseEventService")],t)}(Ye),AJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),SA=function(){return SA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},SA.apply(this,arguments)},Pa=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},PJ=function(r){function t(){var e=r.call(this)||this;return e.onPageDown=tL(e.onPageDown,100),e.onPageUp=tL(e.onPageUp,100),e}return AJ(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(n){e.gridBodyCon=n.gridBodyCtrl})},t.prototype.handlePageScrollingKey=function(e){var n=e.key,i=e.altKey,o=e.ctrlKey||e.metaKey,s=!!this.rangeService&&e.shiftKey,a=this.mouseEventService.getCellPositionForEvent(e),d=!1;switch(n){case Fe.PAGE_HOME:case Fe.PAGE_END:!o&&!i&&(this.onHomeOrEndKey(n),d=!0);break;case Fe.LEFT:case Fe.RIGHT:case Fe.UP:case Fe.DOWN:if(!a)return!1;o&&!i&&!s&&(this.onCtrlUpDownLeftRight(n,a),d=!0);break;case Fe.PAGE_DOWN:if(!a)return!1;!o&&!i&&(this.onPageDown(a),d=!0);break;case Fe.PAGE_UP:if(!a)return!1;!o&&!i&&(this.onPageUp(a),d=!0)}return d&&e.preventDefault(),d},t.prototype.navigateTo=function(e){var n=e.scrollIndex,i=e.scrollType,o=e.scrollColumn,s=e.focusIndex,a=e.focusColumn;Qe(o)&&!o.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(o),Qe(n)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(n,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:a,rowPinned:null,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:s,rowPinned:null,column:a})},t.prototype.onPageDown=function(e){var i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.getViewportHeight(),s=this.paginationProxy.getPixelOffset(),d=this.paginationProxy.getRowIndexAtPixel(i.top+o+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,d):this.navigateToNextPage(e,d)},t.prototype.onPageUp=function(e){var i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRowIndexAtPixel(i.top+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a,!0):this.navigateToNextPage(e,a,!0)},t.prototype.navigateToNextPage=function(e,n,i){void 0===i&&(i=!1);var I,o=this.getViewportHeight(),s=this.paginationProxy.getPageFirstRow(),a=this.paginationProxy.getPageLastRow(),d=this.paginationProxy.getPixelOffset(),f=this.paginationProxy.getRow(e.rowIndex),E=this.paginationProxy.getRowIndexAtPixel(f?.rowTop+(i?f?.rowHeight-o-d:o-d)+d);E===e.rowIndex&&(n=E=e.rowIndex+(i?-1:1)),i?(I="bottom",E<s&&(E=s),n<s&&(n=s)):(I="top",E>a&&(E=a),n>a&&(n=a)),this.isRowTallerThanView(E)&&(n=E,I="top"),this.navigateTo({scrollIndex:n,scrollType:I,scrollColumn:null,focusIndex:E,focusColumn:e.column})},t.prototype.navigateToNextPageWithAutoHeight=function(e,n,i){var o=this;void 0===i&&(i=!1),this.navigateTo({scrollIndex:n,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column}),setTimeout(function(){var s=o.getNextFocusIndexForAutoHeight(e,i);o.navigateTo({scrollIndex:n,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)},t.prototype.getNextFocusIndexForAutoHeight=function(e,n){var i;void 0===n&&(n=!1);for(var o=n?-1:1,s=this.getViewportHeight(),a=this.paginationProxy.getPageLastRow(),d=0,f=e.rowIndex;f>=0&&f<=a;){var g=this.paginationProxy.getRow(f);if(g){var C=null!==(i=g.rowHeight)&&void 0!==i?i:0;if(d+C>s)break;d+=C}f+=o}return Math.max(0,Math.min(f,a))},t.prototype.getViewportHeight=function(){var n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.gridOptionsService.getScrollbarWidth(),o=n.bottom-n.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(o-=i),o},t.prototype.isRowTallerThanView=function(e){var n=this.paginationProxy.getRow(e);if(!n)return!1;var i=n.rowHeight;return"number"==typeof i&&i>this.getViewportHeight()},t.prototype.onCtrlUpDownLeftRight=function(e,n){var i=this.cellNavigationService.getNextCellToFocus(e,n,!0),o=i.rowIndex,s=i.column;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:s,focusIndex:o,focusColumn:s})},t.prototype.onHomeOrEndKey=function(e){var n=e===Fe.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),o=n?i[0]:pr(i),s=n?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:o,focusIndex:s,focusColumn:o})},t.prototype.onTabKeyDown=function(e,n){var i=n.shiftKey;if(this.tabToNextCellCommon(e,i,n))n.preventDefault();else if(i){var s=e.getRowPosition(),a=s.rowIndex;(s.rowPinned?0===a:a===this.paginationProxy.getPageFirstRow())&&(n.preventDefault(),this.focusService.focusLastHeader(n))}else e instanceof xy&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&n.preventDefault()},t.prototype.tabToNextCell=function(e,n){var i=this.focusService.getFocusedCell();if(!i)return!1;var o=this.getCellByPosition(i);return!!(o||(o=this.rowRenderer.getRowByPosition(i),o&&o.isFullWidth()))&&this.tabToNextCellCommon(o,e,n)},t.prototype.tabToNextCellCommon=function(e,n,i){var o=e.isEditing();if(!o&&e instanceof xy){var a=e.getRowCtrl();a&&(o=a.isEditing())}return(o?"fullRow"===this.gridOptionsService.get("editType")?this.moveToNextEditingRow(e,n,i):this.moveToNextEditingCell(e,n,i):this.moveToNextCellNotEditing(e,n))||!!this.focusService.getFocusedHeader()},t.prototype.moveToNextEditingCell=function(e,n,i){void 0===i&&(i=null);var o=e.getCellPosition();e.getGui().focus(),e.stopEditing();var s=this.findNextCellToFocusOn(o,n,!0);return null!=s&&(s.startEditing(null,null,!0,i),s.focusCell(!1),!0)},t.prototype.moveToNextEditingRow=function(e,n,i){void 0===i&&(i=null);var o=e.getCellPosition(),s=this.findNextCellToFocusOn(o,n,!0);if(null==s)return!1;var a=s.getCellPosition(),d=this.isCellEditable(o),f=this.isCellEditable(a),g=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;return d&&e.setFocusOutOnEditor(),g||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,void 0,i)),f?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0},t.prototype.moveToNextCellNotEditing=function(e,n){var o,i=this.columnModel.getAllDisplayedColumns();o=e instanceof Fy?SA(SA({},e.getRowPosition()),{column:n?i[0]:pr(i)}):e.getCellPosition();var s=this.findNextCellToFocusOn(o,n,!1);if(s instanceof xy)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),n);return Qe(s)},t.prototype.findNextCellToFocusOn=function(e,n,i){for(var o=e;;){e!==o&&(e=o),n||(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextTabbedCell(o,n);var s=this.gridOptionsService.getCallback("tabToNextCell");if(Qe(s)){var d=s({backwards:n,editing:i,previousCellPosition:e,nextCellPosition:o||null});Qe(d)?(d.floating&&(Yn(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),d.rowPinned=d.floating),o={rowIndex:d.rowIndex,column:d.column,rowPinned:d.rowPinned}):o=null}if(!o)return null;if(o.rowIndex<0){var f=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:f+o.rowIndex,column:o.column}}),null}var g="fullRow"===this.gridOptionsService.get("editType");if(!i||g||this.isCellEditable(o)){this.ensureCellVisible(o);var E=this.getCellByPosition(o);if(!E){var T=this.rowRenderer.getRowByPosition(o);if(!T||!T.isFullWidth()||i)continue;return T}if(!E.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(o),E}}},t.prototype.isCellEditable=function(e){var n=this.lookupRowNodeForCell(e);return!!n&&e.column.isCellEditable(n)},t.prototype.getCellByPosition=function(e){var n=this.rowRenderer.getRowByPosition(e);return n?n.getCellCtrl(e.column):null},t.prototype.lookupRowNodeForCell=function(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)},t.prototype.navigateToNextCell=function(e,n,i,o){for(var s=i,a=!1;s&&(s===i||!this.isValidNavigateCell(s));)this.gridOptionsService.is("enableRtl")?n===Fe.LEFT&&(s=this.getLastCellOfColSpan(s)):n===Fe.RIGHT&&(s=this.getLastCellOfColSpan(s)),a=Qt(s=this.cellNavigationService.getNextCellToFocus(n,s));if(a&&e&&e.key===Fe.UP&&(s={rowIndex:-1,rowPinned:null,column:i.column}),o){var d=this.gridOptionsService.getCallback("navigateToNextCell");if(Qe(d)){var g=d({key:n,previousCellPosition:i,nextCellPosition:s||null,event:e});Qe(g)?(g.floating&&(Yn(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),g.rowPinned=g.floating),s={rowPinned:g.rowPinned,rowIndex:g.rowIndex,column:g.column}):s=null}}if(s){if(s.rowIndex<0){var C=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:C+s.rowIndex,column:i.column},event:e||void 0})}var E=this.getNormalisedPosition(s);E?this.focusPosition(E):this.tryToFocusFullWidthRow(s)}},t.prototype.getNormalisedPosition=function(e){this.ensureCellVisible(e);var n=this.getCellByPosition(e);return n?(e=n.getCellPosition(),this.ensureCellVisible(e),e):null},t.prototype.tryToFocusFullWidthRow=function(e,n){void 0===n&&(n=!1);var i=this.columnModel.getAllDisplayedColumns(),o=this.rowRenderer.getRowByPosition(e);if(!o||!o.isFullWidth())return!1;var s=this.focusService.getFocusedCell(),a={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(n?pr(i):i[0])};this.focusPosition(a);var d=null!=s&&this.rowPositionUtils.before(a,s);return this.eventService.dispatchEvent({type:V.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:a.column,isFullWidthCell:!0,floating:a.rowPinned,fromBelow:d}),!0},t.prototype.focusPosition=function(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)},t.prototype.isValidNavigateCell=function(e){return!!this.rowPositionUtils.getRowNode(e)},t.prototype.getLastCellOfColSpan=function(e){var n=this.getCellByPosition(e);if(!n)return e;var i=n.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:pr(i),rowPinned:e.rowPinned}},t.prototype.ensureCellVisible=function(e){var n=this.gridOptionsService.is("groupRowsSticky"),i=this.rowModel.getRow(e.rowIndex);!(n&&i?.sticky)&&Qt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)},Pa([F("mouseEventService")],t.prototype,"mouseEventService",void 0),Pa([F("paginationProxy")],t.prototype,"paginationProxy",void 0),Pa([F("focusService")],t.prototype,"focusService",void 0),Pa([tr("rangeService")],t.prototype,"rangeService",void 0),Pa([F("columnModel")],t.prototype,"columnModel",void 0),Pa([F("rowModel")],t.prototype,"rowModel",void 0),Pa([F("ctrlsService")],t.prototype,"ctrlsService",void 0),Pa([F("rowRenderer")],t.prototype,"rowRenderer",void 0),Pa([F("headerNavigationService")],t.prototype,"headerNavigationService",void 0),Pa([F("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Pa([F("cellNavigationService")],t.prototype,"cellNavigationService",void 0),Pa([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Pa([rt],t.prototype,"postConstruct",null),Pa([Rt("navigationService")],t)}(Ye),NJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),xJ=function(r){function t(e){var n=r.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return n.params=e,n}return NJ(t,r),t.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),t.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},t.prototype.addKeyDownListener=function(){var e=this,n=this.getGui(),i=this.params;this.addManagedListener(n,"keydown",function(s){aA(e.gridOptionsService,s,i.node,i.column,!0)||i.onKeyDown(s)})},t.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(M0),FJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),LJ=function(r){function t(e,n,i,o,s){var a=r.call(this)||this;a.rendererVersion=0,a.editorVersion=0,a.beans=e,a.column=n.getColumn(),a.rowNode=n.getRowNode(),a.rowCtrl=n.getRowCtrl(),a.eRow=o,a.setTemplate('<div comp-id="'+a.getCompId()+'"/>');var d=a.getGui();a.forceWrapper=n.isForceWrapper(),a.refreshWrapper(!1);var f=function(C,E,T){var I=T||d;null!=E&&""!=E?I.setAttribute(C,E):I.removeAttribute(C)},g={addOrRemoveCssClass:function(C,E){return a.addOrRemoveCssClass(C,E)},setUserStyles:function(C){return BL(d,C)},getFocusableElement:function(){return a.getFocusableElement()},setTabIndex:function(C){return f("tabindex",C.toString())},setRole:function(C){return Ko(d,C)},setColId:function(C){return f("col-id",C)},setTitle:function(C){return f("title",C)},setIncludeSelection:function(C){return a.includeSelection=C},setIncludeRowDrag:function(C){return a.includeRowDrag=C},setIncludeDndSource:function(C){return a.includeDndSource=C},setRenderDetails:function(C,E,T){return a.setRenderDetails(C,E,T)},setEditDetails:function(C,E,T){return a.setEditDetails(C,E,T)},getCellEditor:function(){return a.cellEditor||null},getCellRenderer:function(){return a.cellRenderer||null},getParentOfValue:function(){return a.getParentOfValue()}};return a.cellCtrl=n,n.setComp(g,a.getGui(),a.eCellWrapper,i,s),a}return FJ(t,r),t.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},t.prototype.setRenderDetails=function(e,n,i){if(!this.cellEditor||this.cellEditorPopupWrapper){this.firstRender=null==this.firstRender;var s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!i&&!s&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(n))}},t.prototype.setEditDetails=function(e,n,i){e?this.createCellEditorInstance(e,n,i):this.destroyEditor()},t.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},t.prototype.refreshWrapper=function(e){var n=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=n||this.forceWrapper,o=i&&null==this.eCellWrapper;o&&(this.eCellWrapper=ls('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));var s=!i&&null!=this.eCellWrapper;s&&(Yf(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);var a=!e&&i,d=a&&null==this.eCellValue;d&&(this.eCellValue=ls('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var f=!a&&null!=this.eCellValue;f&&(Yf(this.eCellValue),this.eCellValue=void 0);var g=o||s||d||f;return g&&this.removeControls(),e||n&&this.addControls(),g},t.prototype.addControls=function(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},t.prototype.createCellEditorInstance=function(e,n,i){var o=this,s=this.editorVersion,a=e.newAgStackInstance();if(a){var d=e.params;a.then(function(g){return o.afterCellEditorCreated(s,g,d,n,i)}),Qt(this.cellEditor)&&d.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},t.prototype.insertValueWithoutCellRenderer=function(e){var n=this.getParentOfValue();ll(n);var i=null!=e?th(e):null;null!=i&&(n.innerHTML=i)},t.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},t.prototype.destroyRenderer=function(){this.cellRenderer=this.beans.context.destroyBean(this.cellRenderer),Yf(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},t.prototype.destroyEditor=function(){var e=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Yf(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},t.prototype.refreshCellRenderer=function(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh||this.cellRendererClass!==e.componentClass)return!1;var n=this.cellRenderer.refresh(e.params);return!0===n||void 0===n},t.prototype.createCellRendererInstance=function(e){var n=this,i=this.beans.gridOptionsService.is("suppressAnimationFrame"),s=this.rendererVersion,a=e.componentClass,d=function(){if(n.rendererVersion===s&&n.isAlive()){var g=e.newAgStackInstance(),C=n.afterCellRendererCreated.bind(n,s,a);g&&g.then(C)}};!i&&this.firstRender?this.beans.animationFrameService.createTask(d,this.rowNode.rowIndex,"createTasksP2"):d()},t.prototype.getCtrl=function(){return this.cellCtrl},t.prototype.getRowCtrl=function(){return this.rowCtrl},t.prototype.getCellRenderer=function(){return this.cellRenderer},t.prototype.getCellEditor=function(){return this.cellEditor},t.prototype.afterCellRendererCreated=function(e,n,i){if(this.isAlive()&&e===this.rendererVersion){if(this.cellRenderer=i,this.cellRendererClass=n,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){var s=this.getParentOfValue();ll(s),s.appendChild(this.cellRendererGui)}}else this.beans.context.destroyBean(i)},t.prototype.afterCellEditorCreated=function(e,n,i,o,s){if(e!==this.editorVersion)this.beans.context.destroyBean(n);else{if(n.isCancelBeforeStart&&n.isCancelBeforeStart())return this.beans.context.destroyBean(n),void this.cellCtrl.stopEditing(!0);if(!n.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(n);this.cellEditor=n,this.cellEditorGui=n.getGui();var f=o||void 0!==n.isPopup&&n.isPopup();f?this.addPopupCellEditor(i,s):this.addInCellEditor(),this.refreshEditStyles(!0,f),n.afterGuiAttached&&n.afterGuiAttached()}},t.prototype.refreshEditStyles=function(e,n){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!n),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!n),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!n),null===(i=this.rowCtrl)||void 0===i||i.setInlineEditingCss(e)},t.prototype.addInCellEditor=function(){var e=this.getGui(),n=this.beans.gridOptionsService.getDocument();e.contains(n.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)},t.prototype.addPopupCellEditor=function(e,n){var i=this;"fullRow"===this.beans.gridOptionsService.get("editType")&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var o=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new xJ(e));var s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);var a=this.beans.popupService,d=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),f=n??(o.getPopupPosition?o.getPopupPosition():"over"),g=this.beans.gridOptionsService.is("enableRtl"),C={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:f,alignSide:g?"right":"left",keepWithinBounds:!0},E=a.positionPopupByComponent.bind(a,C),T=this.beans.localeService.getLocaleTextFunc(),I=a.addPopup({modal:d,eChild:s,closeOnEsc:!0,closedCallback:function(){i.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:E,ariaLabel:T("ariaLabelCellEditor","Cell Editor")});I&&(this.hideEditorPopup=I.hideFunc)},t.prototype.detach=function(){this.eRow.removeChild(this.getGui())},t.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),r.prototype.destroy.call(this)},t.prototype.clearParentOfValue=function(){var e=this.getGui(),n=this.beans.gridOptionsService.getDocument();e.contains(n.activeElement)&&eA()&&e.focus({preventScroll:!0}),ll(this.getParentOfValue())},t}(Rn),kJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),GJ=function(r){function t(e,n,i){var o=r.call(this)||this;o.cellComps={},o.beans=n,o.rowCtrl=e,o.setTemplate('<div comp-id="'+o.getCompId()+'" style="'+o.getInitialStyle(i)+'"/>');var s=o.getGui(),a=s.style;return e.setComp({setDomOrder:function(f){return o.domOrder=f},setCellCtrls:function(f){return o.setCellCtrls(f)},showFullWidth:function(f){return o.showFullWidth(f)},getFullWidthCellRenderer:function(){return o.getFullWidthCellRenderer()},addOrRemoveCssClass:function(f,g){return o.addOrRemoveCssClass(f,g)},setUserStyles:function(f){return BL(s,f)},setTop:function(f){return a.top=f},setTransform:function(f){return a.transform=f},setRowIndex:function(f){return s.setAttribute("row-index",f)},setRole:function(f){return Ko(s,f)},setRowId:function(f){return s.setAttribute("row-id",f)},setRowBusinessKey:function(f){return s.setAttribute("row-business-key",f)},setTabIndex:function(f){return s.setAttribute("tabindex",f.toString())}},o.getGui(),i),o.addDestroyFunc(function(){e.unsetComp(i)}),o}return kJ(t,r),t.prototype.getInitialStyle=function(e){var n=this.rowCtrl.getInitialTransform(e),i=this.rowCtrl.getInitialRowTop(e);return n?"transform: "+n:"top: "+i},t.prototype.showFullWidth=function(e){var n=this,o=e.newAgStackInstance();o&&o.then(function(s){if(n.isAlive()){var a=s.getGui();n.getGui().appendChild(a),n.rowCtrl.setupDetailRowAutoHeight(a),n.setFullWidthRowComp(s)}else n.beans.context.destroyBean(s)})},t.prototype.setCellCtrls=function(e){var n=this,i=Object.assign({},this.cellComps);e.forEach(function(s){var a=s.getInstanceId();null==n.cellComps[a]?n.newCellComp(s):i[a]=null});var o=hc(i).filter(function(s){return null!=s});this.destroyCells(o),this.ensureDomOrder(e)},t.prototype.ensureDomOrder=function(e){var n=this;if(this.domOrder){var i=[];e.forEach(function(o){var s=n.cellComps[o.getInstanceId()];s&&i.push(s.getGui())}),HL(this.getGui(),i)}},t.prototype.newCellComp=function(e){var n=new LJ(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=n,this.getGui().appendChild(n.getGui())},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.destroyAllCells()},t.prototype.destroyAllCells=function(){var e=hc(this.cellComps).filter(function(n){return null!=n});this.destroyCells(e)},t.prototype.setFullWidthRowComp=function(e){var n=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(function(){n.fullWidthCellRenderer=n.beans.context.destroyBean(n.fullWidthCellRenderer)})},t.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},t.prototype.destroyCells=function(e){var n=this;e.forEach(function(i){if(i){var o=i.getCtrl().getInstanceId();n.cellComps[o]===i&&(i.detach(),i.destroy(),n.cellComps[o]=null)}})},t}(Rn),VJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),vk=function(){return vk=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},vk.apply(this,arguments)},kw=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},BJ=function(r){function t(){var e=r.call(this,function HJ(){var r=Rn.elementGettingCreated.getAttribute("name"),t=TW.getRowContainerCssClasses(r);return r===we.CENTER?'<div class="'+t.wrapper+'" ref="eWrapper" role="presentation">\n                <div class="'+t.viewport+'" ref="eViewport" role="presentation">\n                    <div class="'+t.container+'" ref="eContainer"></div>\n                </div>\n            </div>':r===we.TOP_CENTER||r===we.STICKY_TOP_CENTER||r===we.BOTTOM_CENTER?'<div class="'+t.viewport+'" ref="eViewport" role="presentation">\n                <div class="'+t.container+'" ref="eContainer"></div>\n            </div>':'<div class="'+t.container+'" ref="eContainer"></div>'}())||this;return e.rowComps={},e.name=Rn.elementGettingCreated.getAttribute("name"),e.type=function _J(r){switch(r){case we.CENTER:case we.TOP_CENTER:case we.STICKY_TOP_CENTER:case we.BOTTOM_CENTER:return cs.CENTER;case we.LEFT:case we.TOP_LEFT:case we.STICKY_TOP_LEFT:case we.BOTTOM_LEFT:return cs.LEFT;case we.RIGHT:case we.TOP_RIGHT:case we.STICKY_TOP_RIGHT:case we.BOTTOM_RIGHT:return cs.RIGHT;case we.FULL_WIDTH:case we.TOP_FULL_WIDTH:case we.STICKY_TOP_FULL_WIDTH:case we.BOTTOM_FULL_WIDTH:return cs.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}(e.name),e}return VJ(t,r),t.prototype.postConstruct=function(){var e=this,n={setViewportHeight:function(o){return e.eViewport.style.height=o},setRowCtrls:function(o){return e.setRowCtrls(o)},setDomOrder:function(o){e.domOrder=o},setContainerWidth:function(o){return e.eContainer.style.width=o}};this.createManagedBean(new TW(this.name)).setComp(n,this.eContainer,this.eViewport,this.eWrapper)},t.prototype.preDestroy=function(){this.setRowCtrls([])},t.prototype.setRowCtrls=function(e){var n=this,i=vk({},this.rowComps);this.rowComps={},this.lastPlacedElement=null,e.forEach(function(s){var a=s.getInstanceId(),d=i[a];if(d)n.rowComps[a]=d,delete i[a],n.ensureDomOrder(d.getGui());else{var f=new GJ(s,n.beans,n.type);n.rowComps[a]=f,n.appendRow(f.getGui())}}),hc(i).forEach(function(s){n.eContainer.removeChild(s.getGui()),s.destroy()}),Ko(this.eContainer,e.length?"rowgroup":"presentation")},t.prototype.appendRow=function(e){this.domOrder?D2(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e},t.prototype.ensureDomOrder=function(e){this.domOrder&&(VL(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)},kw([F("beans")],t.prototype,"beans",void 0),kw([ut("eViewport")],t.prototype,"eViewport",void 0),kw([ut("eContainer")],t.prototype,"eContainer",void 0),kw([ut("eWrapper")],t.prototype,"eWrapper",void 0),kw([rt],t.prototype,"postConstruct",null),kw([as],t.prototype,"preDestroy",null),t}(Rn),OW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},UJ=function(){function r(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}return r.prototype.onDragEnter=function(t){var e=this;if(this.clearColumnsList(),!this.gridOptionsService.is("functionsReadOnly")){var n=t.dragItem.columns;n&&n.forEach(function(i){i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?e.columnsToAggregate.push(i):i.isAllowRowGroup()?e.columnsToGroup.push(i):i.isAllowPivot()&&e.columnsToPivot.push(i)))})}},r.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?us.ICON_PINNED:us.ICON_MOVE:null},r.prototype.onDragLeave=function(t){this.clearColumnsList()},r.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},r.prototype.onDragging=function(t){},r.prototype.onDragStop=function(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},OW([F("columnModel")],r.prototype,"columnModel",void 0),OW([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),r}(),B0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},WJ=function(){function r(t,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.eContainer=e,this.centerContainer=!Qe(t)}return r.prototype.init=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCon=t.ctrlsService.getGridBodyCtrl()})},r.prototype.getIconName=function(){return this.pinned?us.ICON_PINNED:us.ICON_MOVE},r.prototype.onDragEnter=function(t){var e=t.dragItem.columns;if(t.dragSource.type===Ps.ToolPanel)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var i=t.dragItem.visibleState,o=(e||[]).filter(function(s){return i[s.getId()]});this.setColumnsVisible(o,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)},r.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},r.prototype.setColumnsVisible=function(t,e,n){if(void 0===n&&(n="api"),t){var i=t.filter(function(o){return!o.getColDef().lockVisible});this.columnModel.setColumnsVisible(i,e,n)}},r.prototype.setColumnsPinned=function(t,e,n){if(void 0===n&&(n="api"),t){var i=t.filter(function(o){return!o.getColDef().lockPinned});this.columnModel.setColumnsPinned(i,e,n)}},r.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},r.prototype.normaliseX=function(t){return this.gridOptionsService.is("enableRtl")&&(t=this.eContainer.clientWidth-t),this.centerContainer&&(t+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),t},r.prototype.checkCenterForScrolling=function(t){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),n=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=t<e+50,this.needToMoveLeft=t>n-50):(this.needToMoveLeft=t<e+50,this.needToMoveRight=t>n-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},r.prototype.onDragging=function(t,e,n,i){var s,o=this;if(void 0===t&&(t=this.lastDraggingEvent),void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),i){if(this.lastMovedInfo){var a=this.lastMovedInfo;this.moveColumns(a.columns,a.toIndex,"uiColumnMoved",!0)}}else if(this.lastDraggingEvent=t,!Qt(t.hDirection)){var g=this.normaliseX(t.x);e||this.checkCenterForScrolling(g);var C=this.normaliseDirection(t.hDirection),E=t.dragSource.type,T=(null===(s=t.dragSource.getDragItem().columns)||void 0===s?void 0:s.filter(function(I){return!I.getColDef().lockPinned||I.getPinned()==o.pinned}))||[];this.attemptMoveColumns({dragSourceType:E,allMovingColumns:T,hDirection:C,mouseX:g,fromEnter:e,fakeEvent:n})}},r.prototype.normaliseDirection=function(t){if(!this.gridOptionsService.is("enableRtl"))return t;switch(t){case pc.Left:return pc.Right;case pc.Right:return pc.Left;default:console.error("AG Grid: Unknown direction "+t)}},r.prototype.attemptMoveColumns=function(t){var e=t.dragSourceType,n=t.hDirection,i=t.mouseX,o=t.fromEnter,s=t.fakeEvent,a=n===pc.Left,d=n===pc.Right,f=t.allMovingColumns;if(e===Ps.HeaderCell){var g=[];f.forEach(function(Ke){for(var At=null,Ut=Ke.getParent();null!=Ut&&1===Ut.getDisplayedLeafColumns().length;)At=Ut,Ut=Ut.getParent();null!=At?At.getLeafColumns().forEach(function(an){g.includes(an)||g.push(an)}):g.includes(Ke)||g.push(Ke)}),f=g}var C=f.slice();this.columnModel.sortColumnsLikeGridColumns(C);var E=this.calculateValidMoves(C,d,i),T=this.calculateOldIndex(C);if(0!==E.length){var I=E[0],M=null!==T&&!o;if(e==Ps.HeaderCell&&(M=null!==T),!M||s||!(a&&I>=T||d&&I<=T)){for(var k=this.columnModel.getAllDisplayedColumns(),W=[],z=null,J=0;J<E.length;J++){var re=E[J],ce=this.columnModel.getProposedColumnOrder(C,re);if(this.columnModel.doesOrderPassRules(ce)){var Re=ce.filter(function(Ke){return k.includes(Ke)});if(null===z)z=Re;else if(!tn.areEqual(Re,z))break;var Xe=this.groupFragCount(ce);W.push({move:re,fragCount:Xe})}}0!==W.length&&(W.sort(function(Ke,At){return Ke.fragCount-At.fragCount}),this.moveColumns(f,W[0].move,"uiColumnMoved",!1))}}},r.prototype.calculateOldIndex=function(t){var e=this.columnModel.getAllGridColumns(),n=Bj(t.map(function(d){return e.indexOf(d)})),i=n[0];return pr(n)-i!=n.length-1?null:i},r.prototype.moveColumns=function(t,e,n,i){this.columnModel.moveColumns(t,e,n,i),this.lastMovedInfo=i?null:{columns:t,toIndex:e}},r.prototype.groupFragCount=function(t){function e(s){for(var a=[],d=s.getOriginalParent();null!=d;)a.push(d),d=d.getOriginalParent();return a}for(var n=0,i=function(s){var a,d=e(t[s]),f=e(t[s+1]);a=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o}(d.length>f.length?[d,f]:[f,d],2),f=a[1],(d=a[0]).forEach(function(g){-1===f.indexOf(g)&&n++})},o=0;o<t.length-1;o++)i(o);return n},r.prototype.calculateValidMoves=function(t,e,n){if(this.gridOptionsService.is("suppressMovableColumns")||t.some(function(Xe){return Xe.getColDef().suppressMovable}))return[];var M,o=this.columnModel.getDisplayedColumns(this.pinned),s=this.columnModel.getAllGridColumns(),a=o.filter(function(Xe){return lu(t,Xe)}),d=o.filter(function(Xe){return!lu(t,Xe)}),f=s.filter(function(Xe){return!lu(t,Xe)}),g=0,C=n;if(e){var E=0;a.forEach(function(Xe){return E+=Xe.getActualWidth()}),C-=E}if(C>0){for(var T=0;T<d.length&&!((C-=d[T].getActualWidth())<0);T++)g++;e&&g++}g>0?M=f.indexOf(d[g-1])+1:-1===(M=f.indexOf(d[0]))&&(M=0);var W=[M],z=function(Xe,Ke){return Xe-Ke};if(e){for(var J=M+1,re=s.length-1;J<=re;)W.push(J),J++;W.sort(z)}else{re=s.length-1;for(var ce=s[J=M];J<=re&&this.isColumnHidden(o,ce);)J++,W.push(J),ce=s[J];for(J=M-1;J>=0;)W.push(J),J--;W.sort(z).reverse()}return W},r.prototype.isColumnHidden=function(t,e){return t.indexOf(e)<0},r.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?us.ICON_LEFT:us.ICON_RIGHT,!0))},r.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(us.ICON_MOVE))},r.prototype.moveInterval=function(){var t;this.intervalCount++,(t=10+5*this.intervalCount)>100&&(t=100);var e=null,n=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=n.scrollHorizontally(-t):this.needToMoveRight&&(e=n.scrollHorizontally(t)),0!==e)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var o=this.lastDraggingEvent.dragItem.columns.filter(function(a){return!a.getColDef().lockPinned});o.length>0&&(this.dragAndDropService.setGhostIcon(us.ICON_PINNED),this.failedMoveAttempts>7)&&(this.setColumnsPinned(o,this.needToMoveLeft?"left":"right","uiColumnDragged"),this.dragAndDropService.nudge())}},B0([F("columnModel")],r.prototype,"columnModel",void 0),B0([F("dragAndDropService")],r.prototype,"dragAndDropService",void 0),B0([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),B0([F("ctrlsService")],r.prototype,"ctrlsService",void 0),B0([rt],r.prototype,"init",null),r}(),$J=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),U0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},zJ=function(r){function t(e,n){var i=r.call(this)||this;return i.pinned=e,i.eContainer=n,i}return $J(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(n){switch(e.pinned){case"left":e.eSecondaryContainers=[[n.gridBodyCtrl.getBodyViewportElement(),n.leftRowContainerCtrl.getContainerElement()],[n.bottomLeftRowContainerCtrl.getContainerElement()],[n.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":e.eSecondaryContainers=[[n.gridBodyCtrl.getBodyViewportElement(),n.rightRowContainerCtrl.getContainerElement()],[n.bottomRightRowContainerCtrl.getContainerElement()],[n.topRightRowContainerCtrl.getContainerElement()]];break;default:e.eSecondaryContainers=[[n.gridBodyCtrl.getBodyViewportElement(),n.centerRowContainerCtrl.getViewportElement()],[n.bottomCenterRowContainerCtrl.getViewportElement()],[n.topCenterRowContainerCtrl.getViewportElement()]]}})},t.prototype.isInterestedIn=function(e){return e===Ps.HeaderCell||e===Ps.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")},t.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},t.prototype.getContainer=function(){return this.eContainer},t.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new WJ(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new UJ(this.pinned)),this.dragAndDropService.addDropTarget(this)},t.prototype.getIconName=function(){return this.currentDropListener.getIconName()},t.prototype.isDropColumnInPivotMode=function(e){return this.columnModel.isPivotMode()&&e.dragSource.type===Ps.ToolPanel},t.prototype.onDragEnter=function(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)},t.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)},t.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)},t.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)},U0([F("dragAndDropService")],t.prototype,"dragAndDropService",void 0),U0([F("columnModel")],t.prototype,"columnModel",void 0),U0([F("ctrlsService")],t.prototype,"ctrlsService",void 0),U0([rt],t.prototype,"postConstruct",null),U0([rt],t.prototype,"init",null),t}(Ye),KJ=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},IW=function(){function r(){}return r.getHeaderClassesFromColDef=function(t,e,n,i){return Qt(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,n,i)},r.getToolPanelClassesFromColDef=function(t,e,n,i){return Qt(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,n,i)},r.getClassParams=function(t,e,n,i){return{colDef:t,column:n,columnGroup:i,api:e.api,columnApi:e.columnApi,context:e.context}},r.getColumnClassesFromCollDef=function(t,e,n,i,o){return Qt(t)?[]:"string"==typeof(s="function"==typeof t?t(this.getClassParams(e,n,i,o)):t)?[s]:Array.isArray(s)?function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(KJ(arguments[t]));return r}(s):[];var s},r}(),YJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),EA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},ZJ=function(r){function t(e){var n=r.call(this,t.TEMPLATE,e)||this;return n.headerCompVersion=0,n.column=e.getColumnGroupChild(),n.pinned=e.getPinned(),n}return YJ(t,r),t.prototype.postConstruct=function(){var e=this,n=this.getGui(),i=function(a,d,f){var g=f||n;null!=d&&""!=d?g.setAttribute(a,d):g.removeAttribute(a)};this.ctrl.setComp({setWidth:function(a){return n.style.width=a},addOrRemoveCssClass:function(a,d){return e.addOrRemoveCssClass(a,d)},setColId:function(a){return i("col-id",a)},setTitle:function(a){return i("title",a)},setAriaDescription:function(a){return o2(n,a)},setAriaSort:function(a){return a?p2(n,a):g2(n)},setUserCompDetails:function(a){return e.setUserCompDetails(a)},getUserCompInstance:function(){return e.headerComp}},this.getGui(),this.eResize,this.eHeaderCompWrapper);var s=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",s)},t.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},t.prototype.setUserCompDetails=function(e){var n=this;this.headerCompVersion++;var i=this.headerCompVersion;e.newAgStackInstance().then(function(o){return n.afterCompCreated(i,o)})},t.prototype.afterCompCreated=function(e,n){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=n,this.headerCompGui=n.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(n)},t.TEMPLATE='<div class="ag-header-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',EA([ut("eResize")],t.prototype,"eResize",void 0),EA([ut("eHeaderCompWrapper")],t.prototype,"eHeaderCompWrapper",void 0),EA([rt],t.prototype,"postConstruct",null),EA([as],t.prototype,"destroyHeaderComp",null),t}(ck),QJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),yk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},JJ=function(r){function t(e){return r.call(this,t.TEMPLATE,e)||this}return QJ(t,r),t.prototype.postConstruct=function(){var e=this,n=this.getGui(),i=function(s,a){return null!=a?n.setAttribute(s,a):n.removeAttribute(s)};this.ctrl.setComp({addOrRemoveCssClass:function(s,a){return e.addOrRemoveCssClass(s,a)},setResizableDisplayed:function(s){return Wn(e.eResize,s)},setWidth:function(s){return n.style.width=s},setColId:function(s){return n.setAttribute("col-id",s)},setAriaExpanded:function(s){return i("aria-expanded",s)},setTitle:function(s){return i("title",s)},setUserCompDetails:function(s){return e.setUserCompDetails(s)}},n,this.eResize)},t.prototype.setUserCompDetails=function(e){var n=this;e.newAgStackInstance().then(function(i){return n.afterHeaderCompCreated(i)})},t.prototype.afterHeaderCompCreated=function(e){var n=this,i=function(){return n.destroyBean(e)};this.isAlive()?(this.getGui().appendChild(e.getGui()),this.addDestroyFunc(i),this.ctrl.setDragSource(e.getGui())):i()},t.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',yk([F("userComponentFactory")],t.prototype,"userComponentFactory",void 0),yk([ut("eResize")],t.prototype,"eResize",void 0),yk([rt],t.prototype,"postConstruct",null),t}(ck),XJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),AW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Yo=(()=>(function(r){r.COLUMN_GROUP="group",r.COLUMN="column",r.FLOATING_FILTER="filter"}(Yo||(Yo={})),Yo))(),eX=function(r){function t(e){var n=r.call(this)||this;n.headerComps={};var i=e.getType()==Yo.COLUMN_GROUP?"ag-header-row-column-group":e.getType()==Yo.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return n.setTemplate('<div class="ag-header-row '+i+'" role="row"></div>'),n.ctrl=e,n}return XJ(t,r),t.prototype.init=function(){var e=this;this.ctrl.setComp({setTransform:function(i){return e.getGui().style.transform=i},setHeight:function(i){return e.getGui().style.height=i},setTop:function(i){return e.getGui().style.top=i},setHeaderCtrls:function(i){return e.setHeaderCtrls(i)},setWidth:function(i){return e.getGui().style.width=i},setAriaRowIndex:function(i){return _L(e.getGui(),i)}})},t.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([])},t.prototype.setHeaderCtrls=function(e){var n=this;if(this.isAlive()){var i=this.headerComps;this.headerComps={},e.forEach(function(f){var g=f.getInstanceId(),C=i[g];delete i[g],null==C&&(C=n.createHeaderComp(f),n.getGui().appendChild(C.getGui())),n.headerComps[g]=C}),Wr(i,function(f,g){n.getGui().removeChild(g.getGui()),n.destroyBean(g)});var o=this.gridOptionsService.is("ensureDomOrder"),s=this.gridOptionsService.isDomLayout("print");if(o||s){var a=hc(this.headerComps);a.sort(function(f,g){return f.getCtrl().getColumnGroupChild().getLeft()-g.getCtrl().getColumnGroupChild().getLeft()});var d=a.map(function(f){return f.getGui()});HL(this.getGui(),d)}}},t.prototype.createHeaderComp=function(e){var n;switch(this.ctrl.getType()){case Yo.COLUMN_GROUP:n=new JJ(e);break;case Yo.FLOATING_FILTER:n=new aQ(e);break;default:n=new ZJ(e)}return this.createBean(n),n.setParentComponent(this),n},AW([rt],t.prototype,"init",null),AW([as],t.prototype,"destroyHeaderCtrls",null),t}(Rn),tX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),_k=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},nX=0,bA=function(r){function t(e,n){var i=r.call(this)||this;return i.lastFocusEvent=null,i.columnGroupChild=e,i.parentRowCtrl=n,i.instanceId=e.getUniqueId()+"-"+nX++,i}return tX(t,r),t.prototype.shouldStopEventPropagation=function(e){var n=this.focusService.getFocusedHeader();return P2(this.gridOptionsService,e,n.headerRowIndex,n.column)},t.prototype.getWrapperHasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.eGui},t.prototype.setGui=function(e){this.eGui=e,this.addDomData()},t.prototype.handleKeyDown=function(e){var n=this.getWrapperHasFocus();switch(e.key){case Fe.PAGE_DOWN:case Fe.PAGE_UP:case Fe.PAGE_HOME:case Fe.PAGE_END:n&&e.preventDefault()}},t.prototype.addDomData=function(){var e=this,n=t.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,n,this),this.addDestroyFunc(function(){return e.gridOptionsService.setDomData(e.eGui,n,null)})},t.prototype.getGui=function(){return this.eGui},t.prototype.focus=function(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)},t.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},t.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},t.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.getColumnGroupChild=function(){return this.columnGroupChild},t.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",_k([F("focusService")],t.prototype,"focusService",void 0),_k([F("beans")],t.prototype,"beans",void 0),_k([F("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(Ye),rX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ck=function(r){function t(e,n,i,o){var s=r.call(this)||this;return s.columnOrGroup=e,s.eCell=n,s.ariaEl=s.eCell.querySelector("[role=columnheader]")||s.eCell,s.colsSpanning=o,s.beans=i,s}return rX(t,r),t.prototype.setColsSpanning=function(e){this.colsSpanning=e,this.onLeftChanged()},t.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?pr(this.colsSpanning):this.columnOrGroup},t.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,ri.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},t.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),n=Qe(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&n&&!e?this.animateInLeft():this.onLeftChanged()},t.prototype.animateInLeft=function(){var e=this,n=this.getColumnOrGroup(),i=n.getLeft(),o=n.getOldLeft(),s=this.modifyLeftForPrintLayout(n,o),a=this.modifyLeftForPrintLayout(n,i);this.setLeft(s),this.actualLeft=a,this.beans.columnAnimationService.executeNextVMTurn(function(){e.actualLeft===a&&e.setLeft(a)})},t.prototype.onLeftChanged=function(){var e=this.getColumnOrGroup(),n=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,n),this.setLeft(this.actualLeft)},t.prototype.modifyLeftForPrintLayout=function(e,n){if(!this.beans.gridOptionsService.isDomLayout("print")||"left"===e.getPinned())return n;var o=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===e.getPinned()?o+this.beans.columnModel.getBodyContainerWidth()+n:o+n},t.prototype.setLeft=function(e){var n;if(Qe(e)&&(this.eCell.style.left=e+"px"),this.columnOrGroup instanceof ri)n=this.columnOrGroup;else{var o=this.columnOrGroup.getLeafColumns();if(!o.length)return;o.length>1&&f2(this.ariaEl,o.length),n=o[0]}var s=this.beans.columnModel.getAriaColumnIndex(n);CL(this.ariaEl,s)},function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(Ye),oX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),PW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},wk=function(r){function t(e,n){var i=r.call(this)||this;return i.columns=e,i.element=n,i}return oX(t,r),t.prototype.postConstruct=function(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()},t.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},t.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},t.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},PW([F("columnHoverService")],t.prototype,"columnHoverService",void 0),PW([rt],t.prototype,"postConstruct",null),t}(Ye),sX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Sk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},aX=function(r){function t(e,n){var i=r.call(this,e,n)||this;return i.column=e,i}return sX(t,r),t.prototype.setComp=function(e,n,i,o){r.prototype.setGui.call(this,n),this.comp=e,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=o;var s=this.column.getColDef();this.active=!(!s.filter&&!s.filterFramework||!s.floatingFilter),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.active&&this.addManagedListener(this.column,ri.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this))},t.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.active){this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton);var e=no("filter",this.gridOptionsService,this.column);e&&this.eButtonShowMainFilter.appendChild(e)}},t.prototype.setupFocus=function(){this.createManagedBean(new qg(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},t.prototype.onTabKeyDown=function(e){if(this.gridOptionsService.getDocument().activeElement!==this.eGui){var s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void s.focus();var a=this.findNextColumnWithFloatingFilter(e.shiftKey);a&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:a},event:e})&&e.preventDefault()}},t.prototype.findNextColumnWithFloatingFilter=function(e){var n=this.beans.columnModel,i=this.column;do{if(!(i=e?n.getDisplayedColBefore(i):n.getDisplayedColAfter(i)))break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e);var n=this.getWrapperHasFocus();switch(e.key){case Fe.UP:case Fe.DOWN:n||e.preventDefault();case Fe.LEFT:case Fe.RIGHT:if(n)return;e.stopPropagation();case Fe.ENTER:n&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case Fe.ESCAPE:n||this.eGui.focus()}},t.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),o=!!e.relatedTarget&&Ey(e.relatedTarget,"ag-floating-filter");if(i&&o&&e.target===this.eGui){var s=this.lastFocusEvent;s&&s&&s.key===Fe.TAB&&this.focusService.focusInto(this.eGui,s.shiftKey)}var f=this.getRowIndex();this.beans.focusService.setFocusedHeader(f,this.column)}},t.prototype.setupHover=function(){var e=this;this.createManagedBean(new wk([this.column],this.eGui));var n=function(){if(e.gridOptionsService.is("columnHoverHighlight")){var i=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",i)}};this.addManagedListener(this.eventService,V.EVENT_COLUMN_HOVER_CHANGED,n),n()},t.prototype.setupLeft=function(){var e=new Ck(this.column,this.eGui,this.beans);this.createManagedBean(e)},t.prototype.setupUserComp=function(){var e=this;if(this.active){var n=this.column.getColDef();this.suppressFilterButton=!!n.floatingFilterComponentParams&&!!n.floatingFilterComponentParams.suppressFilterButton;var i=this.filterManager.getFloatingFilterCompDetails(this.column,function(){return e.showParentFilter()});i&&this.comp.setCompDetails(i)}},t.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter,"floatingFilter","filterMenuTab",["filterMenuTab"])},t.prototype.setupSyncWithFilter=function(){var e=this;if(this.active){var n=function(i){var o=e.comp.getFloatingFilterComp();if(o){var s=e.filterManager.getCurrentFloatingFilterParentModel(e.column);o.then(function(a){a&&a.onParentModelChanged(s,i)})}};this.addManagedListener(this.column,ri.EVENT_FILTER_CHANGED,n),this.filterManager.isFilterActive(this.column)&&n(null)}},t.prototype.setupWidth=function(){var e=this,n=function(){var i=e.column.getActualWidth()+"px";e.comp.setWidth(i)};this.addManagedListener(this.column,ri.EVENT_WIDTH_CHANGED,n),n()},t.prototype.updateFilterButton=function(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))},Sk([F("filterManager")],t.prototype,"filterManager",void 0),Sk([F("columnHoverService")],t.prototype,"columnHoverService",void 0),Sk([F("menuFactory")],t.prototype,"menuFactory",void 0),t}(bA),lX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ek=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},uX=function(r){function t(e,n,i,o,s){var a=r.call(this)||this;return a.pinned=e,a.column=n,a.eResize=i,a.comp=o,a.ctrl=s,a}return lX(t,r),t.prototype.postConstruct=function(){var o,s,e=this,n=this.column.getColDef(),i=[],d=function(){i.forEach(function(g){return g()}),i.length=0},f=function(){var g=e.column.isResizable(),C=!e.gridOptionsService.is("suppressAutoSize")&&!n.suppressAutoSize;(g!==o||C!==s)&&(o=g,s=C,d(),function(){if(Wn(e.eResize,o),o){var g=e.horizontalResizeService.addResizeBar({eResizeBar:e.eResize,onResizeStart:e.onResizeStart.bind(e),onResizing:e.onResizing.bind(e,!1),onResizeEnd:e.onResizing.bind(e,!0)});if(i.push(g),s){var C=e.gridOptionsService.is("skipHeaderOnAutoSize"),E=function(){e.columnModel.autoSizeColumn(e.column,C,"uiColumnResized")};e.eResize.addEventListener("dblclick",E);var T=new ul(e.eResize);T.addEventListener(ul.EVENT_DOUBLE_TAP,E),e.addDestroyFunc(function(){e.eResize.removeEventListener("dblclick",E),T.removeEventListener(ul.EVENT_DOUBLE_TAP,E),T.destroy()})}}}())};f(),this.addDestroyFunc(d),this.ctrl.addRefreshFunction(f)},t.prototype.onResizing=function(e,n){var i=this.normaliseResizeAmount(n);this.columnModel.setColumnWidths([{key:this.column,newWidth:this.resizeStartWidth+i}],this.resizeWithShiftKey,e,"uiColumnDragged"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},t.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},t.prototype.normaliseResizeAmount=function(e){var n=e,i="left"!==this.pinned,o="right"===this.pinned;return this.gridOptionsService.is("enableRtl")?i&&(n*=-1):o&&(n*=-1),n},Ek([F("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),Ek([F("columnModel")],t.prototype,"columnModel",void 0),Ek([rt],t.prototype,"postConstruct",null),t}(Ye),cX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),DA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},dX=function(r){function t(e){var n=r.call(this)||this;n.cbSelectAllVisible=!1,n.processingEventFromCheckbox=!1,n.column=e;var i=e.getColDef();return n.filteredOnly=!!i?.headerCheckboxSelectionFilteredOnly,n.currentPageOnly=!!i?.headerCheckboxSelectionCurrentPageOnly,n}return cX(t,r),t.prototype.onSpaceKeyPressed=function(e){var n=this.cbSelectAll,i=this.gridOptionsService.getDocument();n.isDisplayed()&&!n.getGui().contains(i.activeElement)&&(e.preventDefault(),n.setValue(!n.getValue()))},t.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},t.prototype.setComp=function(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new N0),this.cbSelectAll.addCssClass("ag-header-select-all"),Ko(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,N0.EVENT_CHANGED,this.onCbSelectAll.bind(this)),JI(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},t.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},t.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},t.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},t.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var e=this.selectionService.getSelectAllState();this.cbSelectAll.setValue(e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},t.prototype.refreshSelectAllLabel=function(){if(this.cbSelectAllVisible){var e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),o=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.headerCellCtrl.setAriaDescriptionProperty("selectAll",o+" ("+i+")"),this.cbSelectAll.setInputAriaLabel(o+" ("+i+")")}else this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(null);this.headerCellCtrl.refreshAriaDescription()},t.prototype.checkRightRowModelType=function(e){var n=this.rowModel.getType();return!("clientSide"!==n&&"serverSide"!==n&&(console.warn("AG Grid: "+e+" is only available if using 'clientSide' or 'serverSide' rowModelType, you are using "+n+"."),1))},t.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var e=this.cbSelectAll.getValue(),n="uiSelectAll";this.currentPageOnly?n="uiSelectAllCurrentPage":this.filteredOnly&&(n="uiSelectAllFiltered");var i={source:n,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};e?this.selectionService.selectAllRowNodes(i):this.selectionService.deselectAllRowNodes(i)}},t.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;return"function"==typeof e&&(e=e({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context})),!!e&&this.checkRightRowModelType("headerCheckboxSelection")},DA([F("gridApi")],t.prototype,"gridApi",void 0),DA([F("columnApi")],t.prototype,"columnApi",void 0),DA([F("rowModel")],t.prototype,"rowModel",void 0),DA([F("selectionService")],t.prototype,"selectionService",void 0),t}(Ye),hX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qf=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},fX=function(r){function t(e,n){var i=r.call(this,e,n)||this;return i.refreshFunctions=[],i.userHeaderClasses=new Set,i.ariaDescriptionProperties=new Map,i.column=e,i}return hX(t,r),t.prototype.setComp=function(e,n,i,o){var s=this;r.prototype.setGui.call(this,n),this.comp=e,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(o),this.addColumnHoverListener(),this.setupFilterCss(),this.setupColId(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new uX(this.getPinned(),this.column,i,e,this)),this.createManagedBean(new wk([this.column],n)),this.createManagedBean(new Ck(this.column,n,this.beans)),this.createManagedBean(new qg(n,{shouldStopEventPropagation:function(a){return s.shouldStopEventPropagation(a)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.column,ri.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},t.prototype.setupUserComp=function(){var e=this.lookupUserCompDetails();this.setCompDetails(e)},t.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)},t.prototype.lookupUserCompDetails=function(){var e=this.createParams(),n=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(n,e)},t.prototype.createParams=function(){var e=this,n=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:n.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(o){e.gridApi.showColumnMenuAfterButtonClick(e.column,o)},progressSort:function(o){e.sortController.progressSort(e.column,!!o,"uiColumnSorted")},setSort:function(o,s){e.sortController.setSortForColumn(e.column,o,!!s,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()}},t.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new dX(this.column)),this.selectAllFeature.setComp(this)},t.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e),e.key===Fe.SPACE&&this.selectAllFeature.onSpaceKeyPressed(e),e.key===Fe.ENTER&&this.onEnterKeyPressed(e)},t.prototype.onEnterKeyPressed=function(e){var n=this.comp.getUserCompInstance();n&&(e.ctrlKey||e.metaKey?this.menuEnabled&&n.showMenu&&(e.preventDefault(),n.showMenu()):this.sortable&&this.sortController.progressSort(this.column,e.shiftKey,"uiColumnSorted"))},t.prototype.isMenuEnabled=function(){return this.menuEnabled},t.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var n=this.getRowIndex();this.focusService.setFocusedHeader(n,this.column)}this.setActiveHeader(!0)},t.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},t.prototype.setupTooltip=function(){var e=this,i=this.createManagedBean(new fk({getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getGui:function(){return e.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return e.column.getColDef().headerTooltip}},this.beans));i.setComp(this.comp),this.refreshFunctions.push(function(){return i.refreshToolTip()})},t.prototype.setupClassesFromColDef=function(){var e=this,n=function(){var i=e.column.getColDef(),o=IW.getHeaderClassesFromColDef(i,e.gridOptionsService,e.column,null),s=e.userHeaderClasses;e.userHeaderClasses=new Set(o),o.forEach(function(a){s.has(a)?s.delete(a):e.comp.addOrRemoveCssClass(a,!0)}),s.forEach(function(a){return e.comp.addOrRemoveCssClass(a,!1)})};this.refreshFunctions.push(n),n()},t.prototype.setDragSource=function(e){var n=this;if(this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable){var i=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:Ps.HeaderCell,eElement:e,defaultIconName:i?us.ICON_HIDE:us.ICON_NOT_ALLOWED,getDragItem:function(){return n.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){return n.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return n.column.setMoving(!1,"uiColumnMoved")},onGridEnter:function(o){var s;if(i){var a=(null===(s=o?.columns)||void 0===s?void 0:s.filter(function(d){return!d.getColDef().lockVisible}))||[];n.columnModel.setColumnsVisible(a,!0,"uiColumnMoved")}},onGridExit:function(o){var s;if(i){var a=(null===(s=o?.columns)||void 0===s?void 0:s.filter(function(d){return!d.getColDef().lockVisible}))||[];n.columnModel.setColumnsVisible(a,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},t.prototype.onColDefChanged=function(){this.refresh()},t.prototype.updateState=function(){var e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},t.prototype.addRefreshFunction=function(e){this.refreshFunctions.push(e)},t.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(function(e){return e()})},t.prototype.refreshHeaderComp=function(){var e=this.lookupUserCompDetails();null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)},t.prototype.attemptHeaderCompRefresh=function(e){var n=this.comp.getUserCompInstance();return!(!n||!n.refresh)&&n.refresh(e)},t.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},t.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},t.prototype.workOutDraggable=function(){var e=this.column.getColDef();return!(this.gridOptionsService.is("suppressMovableColumns")||e.suppressMovable||e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot},t.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},t.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},t.prototype.onColumnValueChanged=function(){this.checkDisplayName()},t.prototype.setupWidth=function(){var e=this,n=function(){var i=e.column.getActualWidth();e.comp.setWidth(i+"px")};this.addManagedListener(this.column,ri.EVENT_WIDTH_CHANGED,n),n()},t.prototype.setupMovingCss=function(){var e=this,n=function(){e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.column.isMoving())};this.addManagedListener(this.column,ri.EVENT_MOVING_CHANGED,n),n()},t.prototype.setupMenuClass=function(){var e=this,n=function(){e.comp.addOrRemoveCssClass("ag-column-menu-visible",e.column.isMenuVisible())};this.addManagedListener(this.column,ri.EVENT_MENU_VISIBLE_CHANGED,n),n()},t.prototype.setupSortableClass=function(){var e=this,n=function(){e.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!e.sortable)};n(),this.addRefreshFunction(n),this.addManagedListener(this.eventService,ri.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},t.prototype.setupWrapTextClass=function(){var e=this,n=function(){var i=!!e.column.getColDef().wrapHeaderText;e.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",i)};n(),this.addRefreshFunction(n)},t.prototype.onHeaderHeightChanged=function(){this.refreshSpanHeaderHeight()},t.prototype.refreshSpanHeaderHeight=function(){var e=this,n=e.eGui,o=e.comp,s=e.columnModel,a=e.gridOptionsService;if(e.column.isSpanHeaderHeight()){var d=this.getColumnGroupPaddingInfo(),f=d.numberOfParents,g=d.isSpanningTotal;if(o.addOrRemoveCssClass("ag-header-span-height",f>0),0!==f){o.addOrRemoveCssClass("ag-header-span-total",g);var E=a.is("pivotMode")?s.getPivotGroupHeaderHeight():s.getGroupHeaderHeight(),T=s.getColumnHeaderRowHeight(),I=f*E;n.style.setProperty("top",-I+"px"),n.style.setProperty("height",T+I+"px")}}},t.prototype.getColumnGroupPaddingInfo=function(){var e=this.column.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};for(var n=e.getPaddingLevel()+1,i=!0;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:n,isSpanningTotal:i}},t.prototype.setupAutoHeight=function(e){var s,n=this,i=function(g){if(n.isAlive()){var C=by(n.getGui()),z=e.offsetHeight+(C.paddingTop+C.paddingBottom+C.borderBottomWidth+C.borderTopWidth);if(g<5){var J=n.beans.gridOptionsService.getDocument();if(!J||!J.contains(e)||0==z)return void n.beans.frameworkOverrides.setTimeout(function(){return i(g+1)},0)}n.columnModel.setColumnHeaderHeight(n.column,z)}},o=!1,a=function(){var g=n.column.isSpanHeaderHeight(),C=n.column.isAutoHeaderHeight();g?(f(),C&&Yn(function(){return console.warn("AG Grid: The properties `spanHeaderHeight` and `autoHeaderHeight` cannot be used together in the same column.")},"HeaderCellCtrl.spanHeaderHeightAndAutoHeaderHeight")):(C&&!o&&d(),!C&&o&&f())},d=function(){o=!0,i(0),n.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),s=n.resizeObserverService.observeResize(e,function(){return i(0)})},f=function(){o=!1,s&&s(),n.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),s=void 0};a(),this.addDestroyFunc(function(){return f()}),this.addManagedListener(this.column,ri.EVENT_WIDTH_CHANGED,function(){return o&&i(0)}),this.addManagedListener(this.eventService,ri.EVENT_SORT_CHANGED,function(){o&&n.beans.frameworkOverrides.setTimeout(function(){return i(0)})}),this.addRefreshFunction(a)},t.prototype.refreshAriaSort=function(){if(this.sortable){var e=this.localeService.getLocaleTextFunc(),n=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(n2(n)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},t.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},t.prototype.setAriaDescriptionProperty=function(e,n){null!=n?this.ariaDescriptionProperties.set(e,n):this.ariaDescriptionProperties.delete(e)},t.prototype.refreshAriaDescription=function(){var e=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(e.length?e.join(" "):void 0)},t.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()},t.prototype.addColumnHoverListener=function(){var e=this,n=function(){if(e.gridOptionsService.is("columnHoverHighlight")){var i=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",i)}};this.addManagedListener(this.eventService,V.EVENT_COLUMN_HOVER_CHANGED,n),n()},t.prototype.setupFilterCss=function(){var e=this,n=function(){e.comp.addOrRemoveCssClass("ag-header-cell-filtered",e.column.isFilterActive())};this.addManagedListener(this.column,ri.EVENT_FILTER_ACTIVE_CHANGED,n),n()},t.prototype.setupColId=function(){this.comp.setColId(this.column.getColId())},t.prototype.addActiveHeaderMouseListeners=function(){var e=this,n=function(i){return e.setActiveHeader("mouseenter"===i.type)};this.addManagedListener(this.getGui(),"mouseenter",n),this.addManagedListener(this.getGui(),"mouseleave",n)},t.prototype.setActiveHeader=function(e){this.comp.addOrRemoveCssClass("ag-header-active",e)},Qf([F("columnModel")],t.prototype,"columnModel",void 0),Qf([F("columnHoverService")],t.prototype,"columnHoverService",void 0),Qf([F("sortController")],t.prototype,"sortController",void 0),Qf([F("menuFactory")],t.prototype,"menuFactory",void 0),Qf([F("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Qf([F("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Qf([F("gridApi")],t.prototype,"gridApi",void 0),Qf([F("columnApi")],t.prototype,"columnApi",void 0),Qf([as],t.prototype,"removeDragSource",null),t}(bA),pX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),TA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},gX=function(r){function t(e,n,i,o){var s=r.call(this)||this;return s.eResize=n,s.comp=e,s.pinned=i,s.columnGroup=o,s}return pX(t,r),t.prototype.postConstruct=function(){var e=this;if(this.columnGroup.isResizable()){var n=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(n),!this.gridOptionsService.is("suppressAutoSize")){var i=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",function(){var o=[];e.columnGroup.getDisplayedLeafColumns().forEach(function(a){a.getColDef().suppressAutoSize||o.push(a.getColId())}),o.length>0&&e.columnModel.autoSizeColumns({columns:o,skipHeader:i,stopAtGroup:e.columnGroup,source:"uiColumnResized"}),e.resizeLeafColumnsToFit()})}}else this.comp.setResizableDisplayed(!1)},t.prototype.onResizeStart=function(e){var n=this;this.calculateInitialValues();var i=null;if(e&&(i=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),i){var o=i.getDisplayedLeafColumns();this.resizeTakeFromCols=o.filter(function(s){return s.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(s){return n.resizeTakeFromStartWidth+=s.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(s){return n.resizeTakeFromRatios.push(s.getActualWidth()/n.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},t.prototype.onResizing=function(e,n){var i=this.normaliseDragChange(n);this.resizeColumns(this.resizeStartWidth+i,e)},t.prototype.resizeLeafColumnsToFit=function(){var e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),e>this.resizeStartWidth&&this.resizeColumns(e,!0)},t.prototype.resizeColumns=function(e,n){void 0===n&&(n=!0);var i=[];i.push({columns:this.resizeCols,ratios:this.resizeRatios,width:e}),this.resizeTakeFromCols&&i.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-(e-this.resizeStartWidth)}),this.columnModel.resizeColumnSets({resizeSets:i,finished:n,source:"uiColumnDragged"}),n&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},t.prototype.calculateInitialValues=function(){var e=this,n=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=n.filter(function(i){return i.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(i){return e.resizeStartWidth+=i.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(i){return e.resizeRatios.push(i.getActualWidth()/e.resizeStartWidth)})},t.prototype.normaliseDragChange=function(e){var n=e;return this.gridOptionsService.is("enableRtl")?"left"!==this.pinned&&(n*=-1):"right"===this.pinned&&(n*=-1),n},TA([F("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),TA([F("autoWidthCalculator")],t.prototype,"autoWidthCalculator",void 0),TA([F("columnModel")],t.prototype,"columnModel",void 0),TA([rt],t.prototype,"postConstruct",null),t}(Ye),mX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),yX=function(r){function t(e,n){var i=r.call(this)||this;return i.removeChildListenersFuncs=[],i.columnGroup=n,i.comp=e,i}return mX(t,r),t.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,Aa.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},t.prototype.addListenersToChildrenColumns=function(){var e=this;this.removeListenersOnChildrenColumns();var n=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(i){i.addEventListener("widthChanged",n),i.addEventListener("visibleChanged",n),e.removeChildListenersFuncs.push(function(){i.removeEventListener("widthChanged",n),i.removeEventListener("visibleChanged",n)})})},t.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(e){return e()}),this.removeChildListenersFuncs=[]},t.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},t.prototype.onWidthChanged=function(){var e=this.columnGroup.getActualWidth();this.comp.setWidth(e+"px"),this.comp.addOrRemoveCssClass("ag-hidden",0===e)},function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(Ye),_X=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),RA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},CX=function(r){function t(e,n){var i=r.call(this,e,n)||this;return i.columnGroup=e,i}return _X(t,r),t.prototype.setComp=function(e,n,i){r.prototype.setGui.call(this,n),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.addAttributes(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var o=this.getParentRowCtrl().getPinned(),s=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new wk(s,n)),this.createManagedBean(new Ck(this.columnGroup,n,this.beans)),this.createManagedBean(new yX(e,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new gX(e,i,o,this.columnGroup)),this.createManagedBean(new qg(n,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},t.prototype.resizeLeafColumnsToFit=function(){var e,n;null===(e=this.groupResizeFeature)||void 0===e||e.onResizeStart(!1),null===(n=this.groupResizeFeature)||void 0===n||n.resizeLeafColumnsToFit()},t.prototype.setupUserComp=function(){var e=this,n=this.displayName,i={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(f){e.columnModel.setColumnGroupOpened(e.columnGroup.getProvidedColumnGroup(),f,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!n){for(var o=this.columnGroup,s=o.getLeafColumns();o.getParent()&&o.getParent().getLeafColumns().length===s.length;)o=o.getParent();var a=o.getColGroupDef();a&&(n=a.headerName),n||(n=s?this.columnModel.getDisplayNameForColumn(s[0],"header",!0):"")}var d=this.userComponentFactory.getHeaderGroupCompDetails(i);this.comp.setUserCompDetails(d)},t.prototype.setupTooltip=function(){var e=this,n=this.columnGroup.getColGroupDef(),i={getColumn:function(){return e.columnGroup},getGui:function(){return e.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return n&&n.headerTooltip}};n&&(i.getColDef=function(){return n}),this.createManagedBean(new fk(i,this.beans)).setComp(this.comp)},t.prototype.setupExpandable=function(){var e=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,xi.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,xi.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},t.prototype.refreshExpanded=function(){var e=this.columnGroup;this.expandable=e.isExpandable();var n=e.isExpanded();this.comp.setAriaExpanded(this.expandable?n?"true":"false":void 0)},t.prototype.addAttributes=function(){this.comp.setColId(this.columnGroup.getUniqueId())},t.prototype.addClasses=function(){var e=this,n=this.columnGroup.getColGroupDef(),i=IW.getHeaderClassesFromColDef(n,this.gridOptionsService,null,this.columnGroup);this.columnGroup.isPadding()?(i.push("ag-header-group-cell-no-group"),this.columnGroup.getLeafColumns().every(function(s){return s.isSpanHeaderHeight()})&&i.push("ag-header-span-height")):i.push("ag-header-group-cell-with-group"),i.forEach(function(s){return e.comp.addOrRemoveCssClass(s,!0)})},t.prototype.setupMovingCss=function(){var e=this,i=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),o=function(){return e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.columnGroup.isMoving())};i.forEach(function(s){e.addManagedListener(s,ri.EVENT_MOVING_CHANGED,o)}),o()},t.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.columnGroup)}},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e);var n=this.getWrapperHasFocus();if(this.expandable&&n&&e.key===Fe.ENTER){var i=this.columnGroup,o=!i.isExpanded();this.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),o,"uiColumnExpanded")}},t.prototype.setDragSource=function(e){var n=this;if(!this.isSuppressMoving()){var i=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),o=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),s={type:Ps.HeaderCell,eElement:e,defaultIconName:o?us.ICON_HIDE:us.ICON_NOT_ALLOWED,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){return i.forEach(function(a){return a.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return i.forEach(function(a){return a.setMoving(!1,"uiColumnDragged")})},onGridEnter:function(a){var d;if(o){var f=(null===(d=a?.columns)||void 0===d?void 0:d.filter(function(g){return!g.getColDef().lockVisible}))||[];n.columnModel.setColumnsVisible(f,!0,"uiColumnMoved")}},onGridExit:function(a){var d;if(o){var f=(null===(d=a?.columns)||void 0===d?void 0:d.filter(function(g){return!g.getColDef().lockVisible}))||[];n.columnModel.setColumnsVisible(f,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(s,!0),this.addDestroyFunc(function(){return n.dragAndDropService.removeDragSource(s)})}},t.prototype.getDragItemForGroup=function(){var e=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),n={};e.forEach(function(o){return n[o.getId()]=o.isVisible()});var i=[];return this.columnModel.getAllDisplayedColumns().forEach(function(o){e.indexOf(o)>=0&&(i.push(o),As(e,o))}),e.forEach(function(o){return i.push(o)}),{columns:i,visibleState:n}},t.prototype.isSuppressMoving=function(){var e=!1;return this.columnGroup.getLeafColumns().forEach(function(i){(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsService.is("suppressMovableColumns")},RA([F("columnModel")],t.prototype,"columnModel",void 0),RA([F("dragAndDropService")],t.prototype,"dragAndDropService",void 0),RA([F("gridApi")],t.prototype,"gridApi",void 0),RA([F("columnApi")],t.prototype,"columnApi",void 0),t}(bA),wX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),NW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},SX=0,bk=function(r){function t(e,n,i){var o=r.call(this)||this;return o.instanceId=SX++,o.headerCellCtrls={},o.rowIndex=e,o.pinned=n,o.type=i,o}return wX(t,r),t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setComp=function(e){this.comp=e,this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addEventListeners(),nh()&&this.comp.setTransform("translateZ(0)"),e.setAriaRowIndex(this.rowIndex+1)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,V.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},t.prototype.getHeaderCellCtrl=function(e){return y0(this.headerCellCtrls).find(function(n){return n.getColumnGroupChild()===e})},t.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},t.prototype.getType=function(){return this.type},t.prototype.onColumnResized=function(){this.setWidth()},t.prototype.setWidth=function(){var e=this.getWidthForRow();this.comp.setWidth(e+"px")},t.prototype.getWidthForRow=function(){return this.gridOptionsService.isDomLayout("print")?null!=this.pinned?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)},t.prototype.onRowHeightChanged=function(){var e=this.columnModel.getHeaderRowCount(),n=[],i=0;this.columnModel.hasFloatingFilters()&&(e++,i=1);for(var o=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),d=e-(1+i),f=0;f<d;f++)n.push(o);for(n.push(s),f=0;f<i;f++)n.push(this.columnModel.getFloatingFiltersHeight());var g=0;for(f=0;f<this.rowIndex;f++)g+=n[f];var C=n[this.rowIndex]+"px";this.comp.setTop(g+"px"),this.comp.setHeight(C)},t.prototype.getPinned=function(){return this.pinned},t.prototype.getRowIndex=function(){return this.rowIndex},t.prototype.onVirtualColumnsChanged=function(){var e=this,n=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach(function(a){if(!a.isEmptyGroup()){var d=a.getUniqueId(),f=n[d];if(delete n[d],f&&f.getColumnGroupChild()!=a&&(e.destroyBean(f),f=void 0),null==f)switch(e.type){case Yo.FLOATING_FILTER:f=e.createBean(new aX(a,e));break;case Yo.COLUMN_GROUP:f=e.createBean(new CX(a,e));break;default:f=e.createBean(new fX(a,e))}e.headerCellCtrls[d]=f}}),Wr(n,function(a,d){var f=function(a){return!!e.focusService.isHeaderWrapperFocused(a)&&e.columnModel.isDisplayed(a.getColumnGroupChild())}(d);f?e.headerCellCtrls[a]=d:e.destroyBean(d)});var s=hc(this.headerCellCtrls);this.comp.setHeaderCtrls(s)},t.prototype.getColumnsInViewport=function(){return this.gridOptionsService.isDomLayout("print")?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},t.prototype.getColumnsInViewportPrintLayout=function(){var e=this;if(null!=this.pinned)return[];var n=[],i=this.getActualDepth();return["left",null,"right"].forEach(function(o){var s=e.columnModel.getVirtualHeaderGroupRow(o,i);n=n.concat(s)}),n},t.prototype.getActualDepth=function(){return this.type==Yo.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},t.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},t.prototype.focusHeader=function(e,n){var o=hc(this.headerCellCtrls).find(function(s){return s.getColumnGroupChild()==e});return!!o&&(o.focus(n),!0)},t.prototype.destroy=function(){var e=this;Wr(this.headerCellCtrls,function(n,i){e.destroyBean(i)}),this.headerCellCtrls={},r.prototype.destroy.call(this)},NW([F("columnModel")],t.prototype,"columnModel",void 0),NW([F("focusService")],t.prototype,"focusService",void 0),t}(Ye),EX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),j0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},bX=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},TX=function(r){function t(e){var n=r.call(this)||this;return n.hidden=!1,n.groupsRowCtrls=[],n.pinned=e,n}return EX(t,r),t.prototype.setComp=function(e,n){this.comp=e,this.eViewport=n,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eViewport,"scroll",this.resetScrollLeft.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},t.prototype.setupDragAndDrop=function(e){var n=new zJ(this.pinned,e);this.createManagedBean(n)},t.prototype.refresh=function(e){var n=this;void 0===e&&(e=!1);var g,C,i=new Nw,o=this.focusService.getFocusHeaderToUseAfterRefresh();(function(){var g=n.columnModel.getHeaderRowCount()-1;n.groupsRowCtrls=n.destroyBeans(n.groupsRowCtrls);for(var C=0;C<g;C++){var E=n.createBean(new bk(i.next(),n.pinned,Yo.COLUMN_GROUP));n.groupsRowCtrls.push(E)}})(),g=i.next(),((C=!(n.hidden||null!=n.columnsRowCtrl&&e&&n.columnsRowCtrl.getRowIndex()===g))||n.hidden)&&(n.columnsRowCtrl=n.destroyBean(n.columnsRowCtrl)),C&&(n.columnsRowCtrl=n.createBean(new bk(g,n.pinned,Yo.COLUMN))),function(){var C=function(){n.filtersRowCtrl=n.destroyBean(n.filtersRowCtrl)};if(n.columnModel.hasFloatingFilters()&&!n.hidden){var E=i.next();if(n.filtersRowCtrl){var T=n.filtersRowCtrl.getRowIndex()!==E;(!e||T)&&C()}n.filtersRowCtrl||(n.filtersRowCtrl=n.createBean(new bk(E,n.pinned,Yo.FLOATING_FILTER)))}else C()}();var f=this.getAllCtrls();this.comp.setCtrls(f),this.restoreFocusOnHeader(o)},t.prototype.restoreFocusOnHeader=function(e){null==e||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})},t.prototype.getAllCtrls=function(){var e=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(bX(arguments[t]));return r}(this.groupsRowCtrls);return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e},t.prototype.onGridColumnsChanged=function(){this.refresh(!0)},t.prototype.setupCenterWidth=function(){var e=this;null==this.pinned&&this.createManagedBean(new gk(function(n){return e.comp.setCenterWidth(n+"px")}))},t.prototype.setHorizontalScroll=function(e){this.comp.setContainerTransform("translateX("+e+"px)")},t.prototype.resetScrollLeft=function(){this.eViewport.scrollLeft=0},t.prototype.setupPinnedWidth=function(){var e=this;if(null!=this.pinned){var n="left"===this.pinned,i="right"===this.pinned;this.hidden=!0;var o=function(){var s=n?e.pinnedWidthService.getPinnedLeftWidth():e.pinnedWidthService.getPinnedRightWidth();if(null!=s){var a=0==s,d=e.hidden!==a,f=e.gridOptionsService.is("enableRtl"),g=e.gridOptionsService.getScrollbarWidth(),C=e.scrollVisibleService.isVerticalScrollShowing()&&(f&&n||!f&&i);e.comp.setPinnedContainerWidth((C?s+g:s)+"px"),e.comp.setDisplayed(!a),d&&(e.hidden=a,e.refresh())}};this.addManagedListener(this.eventService,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,o),this.addManagedListener(this.eventService,V.EVENT_SCROLLBAR_WIDTH_CHANGED,o)}},t.prototype.getHeaderCtrlForColumn=function(e){if(e instanceof ri)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(0!==this.groupsRowCtrls.length)for(var n=0;n<this.groupsRowCtrls.length;n++){var i=this.groupsRowCtrls[n].getHeaderCellCtrl(e);if(i)return i}},t.prototype.getHtmlElementForColumnHeader=function(e){var n=this.getHeaderCtrlForColumn(e);return n?n.getGui():null},t.prototype.getRowType=function(e){var i=this.getAllCtrls()[e];return i?i.getType():void 0},t.prototype.focusHeader=function(e,n,i){var s=this.getAllCtrls()[e];return!!s&&s.focusHeader(n,i)},t.prototype.getRowCount=function(){return this.getAllCtrls().length},t.prototype.destroy=function(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),r.prototype.destroy.call(this)},j0([F("ctrlsService")],t.prototype,"ctrlsService",void 0),j0([F("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),j0([F("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),j0([F("columnModel")],t.prototype,"columnModel",void 0),j0([F("focusService")],t.prototype,"focusService",void 0),t}(Ye),RX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Dk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Tk=function(r){function t(e){var n=r.call(this)||this;return n.headerRowComps={},n.rowCompsList=[],n.pinned=e,n}return RX(t,r),t.prototype.init=function(){var e=this;this.selectAndSetTemplate();var n={setDisplayed:function(o){return e.setDisplayed(o)},setCtrls:function(o){return e.setCtrls(o)},setCenterWidth:function(o){return e.eCenterContainer.style.width=o},setContainerTransform:function(o){return e.eCenterContainer.style.transform=o},setPinnedContainerWidth:function(o){var s=e.getGui();s.style.width=o,s.style.maxWidth=o,s.style.minWidth=o}};this.createManagedBean(new TX(this.pinned)).setComp(n,this.getGui())},t.prototype.selectAndSetTemplate=function(){this.setTemplate("left"==this.pinned?t.PINNED_LEFT_TEMPLATE:"right"==this.pinned?t.PINNED_RIGHT_TEMPLATE:t.CENTER_TEMPLATE),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},t.prototype.destroyRowComps=function(){this.setCtrls([])},t.prototype.destroyRowComp=function(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())},t.prototype.setCtrls=function(e){var o,n=this,i=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[],e.forEach(function(a){var d=a.getInstanceId(),f=i[d];delete i[d];var g=f||n.createBean(new eX(a));n.headerRowComps[d]=g,n.rowCompsList.push(g),function(a){var d=a.getGui();d.parentElement!=n.eRowContainer&&n.eRowContainer.appendChild(d),o&&VL(n.eRowContainer,d,o),o=d}(g)}),hc(i).forEach(function(a){return n.destroyRowComp(a)})},t.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>',t.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>',t.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',Dk([ut("eCenterContainer")],t.prototype,"eCenterContainer",void 0),Dk([rt],t.prototype,"init",null),Dk([as],t.prototype,"destroyRowComps",null),t}(Rn),OX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),W0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},gc=(()=>(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"}(gc||(gc={})),gc))(),IX=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return OX(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(n){e.gridBodyCon=n.gridBodyCtrl})},t.prototype.getHeaderRowCount=function(){var e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0},t.prototype.navigateVertically=function(e,n,i){if(n||(n=this.focusService.getFocusedHeader()),!n)return!1;var o=n.headerRowIndex,s=n.column,a=this.getHeaderRowCount(),f=e===gc.UP?this.headerPositionUtils.getColumnVisibleParent(s,o):this.headerPositionUtils.getColumnVisibleChild(s,o),g=f.nextRow,C=f.nextFocusColumn,E=!1;return g<0&&(g=0,C=s,E=!0),g>=a&&(g=-1),!(!E&&!C)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:g,column:C},allowUserOverride:!0,event:i})},t.prototype.navigateHorizontally=function(e,n,i){void 0===n&&(n=!1);var d,f,o=this.focusService.getFocusedHeader();return(d=e===gc.LEFT!==this.gridOptionsService.is("enableRtl")?this.headerPositionUtils.findHeader(o,f="Before"):this.headerPositionUtils.findHeader(o,f="After"))||!n?this.focusService.focusHeaderPosition({headerPosition:d,direction:f,fromTab:n,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(o,f,i)},t.prototype.focusNextHeaderRow=function(e,n,i){var o=e.headerRowIndex,s=null;return"Before"===n?o>0&&(s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o-1,"end")):s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o+1,"start"),this.focusService.focusHeaderPosition({headerPosition:s,direction:n,fromTab:!0,allowUserOverride:!0,event:i})},t.prototype.scrollToColumn=function(e,n){if(void 0===n&&(n="After"),!e.getPinned()){var i;if(e instanceof Aa){var o=e.getDisplayedLeafColumns();i="Before"===n?pr(o):o[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},W0([F("focusService")],t.prototype,"focusService",void 0),W0([F("headerPositionUtils")],t.prototype,"headerPositionUtils",void 0),W0([F("ctrlsService")],t.prototype,"ctrlsService",void 0),W0([rt],t.prototype,"postConstruct",null),W0([Rt("headerNavigationService")],t)}(Ye),AX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),OA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},PX=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return AX(t,r),t.prototype.setComp=function(e,n,i){this.comp=e,this.eGui=n,this.createManagedBean(new qg(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},t.prototype.setupHeaderHeight=function(){var e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,e)},t.prototype.getHeaderHeight=function(){return this.headerHeight},t.prototype.setHeaderHeight=function(){var o,e=this.columnModel,n=0,i=e.getHeaderRowCount();e.hasFloatingFilters()&&(i++,n=1);var a=this.columnModel.getColumnGroupHeaderRowHeight(),d=this.columnModel.getColumnHeaderRowHeight(),g=i-(1+n);o=n*e.getFloatingFiltersHeight(),o+=g*a,this.headerHeight!==(o+=d)&&(this.headerHeight=o,this.comp.setHeightAndMinHeight(o+1+"px"),this.eventService.dispatchEvent({type:V.EVENT_HEADER_HEIGHT_CHANGED}))},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)},t.prototype.onDisplayedColumnsChanged=function(){var n=this.columnModel.getAllDisplayedColumns().some(function(i){return i.isSpanHeaderHeight()});this.comp.addOrRemoveCssClass("ag-header-allow-overflow",n)},t.prototype.onTabKeyDown=function(e){var n=this.gridOptionsService.is("enableRtl");(this.headerNavigationService.navigateHorizontally(e.shiftKey!==n?gc.LEFT:gc.RIGHT,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},t.prototype.handleKeyDown=function(e){var n=null;switch(e.key){case Fe.LEFT:n=gc.LEFT;case Fe.RIGHT:Qe(n)||(n=gc.RIGHT),this.headerNavigationService.navigateHorizontally(n,!1,e);break;case Fe.UP:n=gc.UP;case Fe.DOWN:Qe(n)||(n=gc.DOWN),this.headerNavigationService.navigateVertically(n,null,e)&&e.preventDefault();break;default:return}},t.prototype.onFocusOut=function(e){var n=this.gridOptionsService.getDocument(),i=e.relatedTarget;!i&&this.eGui.contains(n.activeElement)||this.eGui.contains(i)||this.focusService.clearFocusedHeader()},OA([F("headerNavigationService")],t.prototype,"headerNavigationService",void 0),OA([F("focusService")],t.prototype,"focusService",void 0),OA([F("columnModel")],t.prototype,"columnModel",void 0),OA([F("ctrlsService")],t.prototype,"ctrlsService",void 0),t}(Ye),NX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),xX=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return NX(t,r),t.prototype.postConstruct=function(){var e=this,n={addOrRemoveCssClass:function(s,a){return e.addOrRemoveCssClass(s,a)},setHeightAndMinHeight:function(s){e.getGui().style.height=s,e.getGui().style.minHeight=s}};this.createManagedBean(new PX).setComp(n,this.getGui(),this.getFocusableElement());var o=function(s){e.createManagedBean(s),e.appendChild(s)};o(new Tk("left")),o(new Tk(null)),o(new Tk("right"))},t.TEMPLATE='<div class="ag-header" role="presentation"/>',function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(Rn),FX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},LX=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return FX(t,r),t.prototype.addResizeBar=function(e){var n=this,i={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e)};return this.dragService.addDragSource(i,!0),function(){return n.dragService.removeDragSource(i)}},t.prototype.onDragStart=function(e,n){this.dragStartX=n.clientX,this.setResizeIcons();var i=n instanceof MouseEvent&&!0===n.shiftKey;e.onResizeStart(i)},t.prototype.setResizeIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)},t.prototype.onDragStop=function(e,n){e.onResizeEnd(this.resizeAmount),this.resetIcons()},t.prototype.resetIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)},t.prototype.onDragging=function(e,n){this.resizeAmount=n.clientX-this.dragStartX,e.onResizing(this.resizeAmount)},Rk([F("dragService")],t.prototype,"dragService",void 0),Rk([F("ctrlsService")],t.prototype,"ctrlsService",void 0),Rk([Rt("horizontalResizeService")],t)}(Ye),kX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),$0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},GX=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return kX(t,r),t.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},t.prototype.showMenuAfterMouseEvent=function(e,n){var i=this;this.showPopup(e,function(o){i.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:n,ePopup:o})},"columnMenu",n.target)},t.prototype.showMenuAfterButtonClick=function(e,n,i){var o=this;this.showPopup(e,function(s){o.popupService.positionPopupByComponent({type:i,eventSource:n,ePopup:s,keepWithinBounds:!0,position:"under",column:e,shouldSetMaxHeight:!0})},i,n)},t.prototype.showPopup=function(e,n,i,o){var s=this,a=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(!a)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var d=document.createElement("div");Ko(d,"presentation"),d.classList.add("ag-menu"),this.tabListener=this.addManagedListener(d,"keydown",function(M){return s.trapFocusWithin(M,d)}),a.guiPromise.then(function(M){return d.appendChild(M)});var f,C=o||this.ctrlsService.getGridBodyCtrl().getGui(),T=this.localeService.getLocaleTextFunc(),I=this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(M){e.setMenuVisible(!1,"contextMenu");var k=M instanceof KeyboardEvent;if(s.tabListener&&(s.tabListener=s.tabListener()),k&&o&&Pw(o)){var W=s.focusService.findTabbableParent(o);W&&W.focus()}!function(){var M;null===(M=a.filterPromise)||void 0===M||M.then(function(k){var W;return null===(W=k?.afterGuiDetached)||void 0===W?void 0:W.call(k)})}()},positionCallback:function(){return n(d)},anchorToElement:C,ariaLabel:T("ariaLabelColumnMenu","Column Menu")});I&&(this.hidePopup=f=I.hideFunc),a.filterPromise.then(function(M){n(d),M.afterGuiAttached&&M.afterGuiAttached({container:i,hidePopup:f})}),e.setMenuVisible(!0,"contextMenu")},t.prototype.trapFocusWithin=function(e,n){e.key!==Fe.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(n,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(n,e.shiftKey))},t.prototype.isMenuEnabled=function(e){return e.isFilterAllowed()},$0([F("filterManager")],t.prototype,"filterManager",void 0),$0([F("popupService")],t.prototype,"popupService",void 0),$0([F("focusService")],t.prototype,"focusService",void 0),$0([F("ctrlsService")],t.prototype,"ctrlsService",void 0),$0([Rt("menuFactory")],t)}(Ye),VX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),IA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o};!function(r){function t(e){var n=r.call(this,t.getTemplate(e.cssClass))||this;return n.items=[],n.tabbedItemScrollMap=new Map,n.params=e,e.items&&e.items.forEach(function(i){return n.addItem(i)}),n}VX(t,r),t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new qg(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc(function(){var n,i,o;return null===(o=null===(i=null===(n=e.activeItem)||void 0===n?void 0:n.tabbedItem)||void 0===i?void 0:i.afterDetachedCallback)||void 0===o?void 0:o.call(i)})},t.getTemplate=function(e){return'<div class="ag-tabs '+e+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(e?e+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(e?e+"-body":"")+'"></div>\n        </div>'},t.prototype.handleKeyDown=function(e){var n=this.gridOptionsService.getDocument();switch(e.key){case Fe.RIGHT:case Fe.LEFT:if(!this.eHeader.contains(n.activeElement))return;var i=e.key===Fe.RIGHT,o=this.gridOptionsService.is("enableRtl"),s=this.items.indexOf(this.activeItem),a=i!==o?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===a)return;e.preventDefault();var d=this.items[a];this.showItemWrapper(d),d.eHeaderButton.focus();break;case Fe.UP:case Fe.DOWN:e.stopPropagation()}},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var n=this,i=n.focusService,o=n.eHeader,s=n.eBody,a=n.activeItem,f=this.gridOptionsService.getDocument().activeElement,g=e.target;if(e.preventDefault(),o.contains(f))return void i.focusInto(s,e.shiftKey);var C=null;i.isTargetUnderManagedComponent(s,g)&&(e.shiftKey&&(C=this.focusService.findFocusableElementBeforeTabGuard(s,g)),C||(C=a.eHeaderButton)),!C&&s.contains(f)&&((C=i.findNextFocusableElement(s,!1,e.shiftKey))||(C=a.eHeaderButton)),C&&C.focus()}},t.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e},t.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},t.prototype.addItem=function(e){var n=document.createElement("span");Ko(n,"tab"),n.setAttribute("tabIndex","-1"),n.appendChild(e.title),n.classList.add("ag-tab"),this.eHeader.appendChild(n),Sy(n,e.titleLabel);var i={tabbedItem:e,eHeaderButton:n};this.items.push(i),n.addEventListener("click",this.showItemWrapper.bind(this,i))},t.prototype.showItem=function(e){var n=this.items.find(function(i){return i.tabbedItem===e});n&&this.showItemWrapper(n)},t.prototype.showItemWrapper=function(e){var i,o,n=this,s=e.tabbedItem,a=e.eHeaderButton;this.params.onItemClicked&&this.params.onItemClicked({item:s}),this.activeItem!==e?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),ll(this.eBody),s.bodyPromise.then(function(d){n.eBody.appendChild(d);var f=!n.focusService.isKeyboardMode();if(n.focusService.focusInto(n.eBody,!1,f),s.afterAttachedCallback&&s.afterAttachedCallback(n.afterAttachedParams),n.params.keepScrollPosition){var g=s.getScrollableContainer&&s.getScrollableContainer()||d;n.lastScrollListener=n.addManagedListener(g,"scroll",function(){n.tabbedItemScrollMap.set(s.name,g.scrollTop)});var C=n.tabbedItemScrollMap.get(s.name);void 0!==C&&setTimeout(function(){g.scrollTop=C},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(o=(i=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===o||o.call(i)),a.classList.add("ag-tab-selected"),this.activeItem=e):Fj(this.params.onActiveItemClicked)},IA([F("focusService")],t.prototype,"focusService",void 0),IA([ut("eHeader")],t.prototype,"eHeader",void 0),IA([ut("eBody")],t.prototype,"eBody",void 0),IA([rt],t.prototype,"postConstruct",null)}(Rn);var HX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),UX=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return HX(t,r),t.prototype.observeResize=function(e,n){var E,i=this,s=this.gridOptionsService.getDocument().defaultView||window,a=Jd(n,50),g=this.gridOptionsService.is("suppressBrowserResizeObserver");return s.ResizeObserver&&!g?((E=new s.ResizeObserver(a)).observe(e),function(){return E.disconnect()}):function(){var E=GL(e),T=kL(e),I=!0,M=function(){if(I){var k=GL(e),W=kL(e);(k!==E||W!==T)&&(E=k,T=W,n()),i.doNextPolyfillTurn(M)}};return M(),function(){return I=!1}}()},t.prototype.doNextPolyfillTurn=function(e){this.polyfillFunctions.push(e),this.schedulePolyfill()},t.prototype.schedulePolyfill=function(){var e=this;this.polyfillScheduled||(this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(function(){var i=e.polyfillFunctions;e.polyfillScheduled=!1,e.polyfillFunctions=[],i.forEach(function(o){return o()})},50))},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("resizeObserverService")],t),t}(Ye),jX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),AA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},WX=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastPage=0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return jX(t,r),t.prototype.setScrollTop=function(e){var n=this.gridOptionsService.is("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,n&&0===e){var i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e},t.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")},t.prototype.isOn=function(){return this.useAnimationFrame},t.prototype.verifyAnimationFrameOn=function(e){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+e+" called but animation frames are off")},t.prototype.createTask=function(e,n,i){this.verifyAnimationFrameOn(i);var o={task:e,index:n,createOrder:++this.taskCount};this.addTaskToList(this[i],o),this.schedule()},t.prototype.cancelTask=function(e){this.cancelledTasks.add(e)},t.prototype.addTaskToList=function(e,n){e.list.push(n),e.sorted=!1},t.prototype.sortTaskList=function(e){if(!e.sorted){var n=this.scrollGoingDown?1:-1;e.list.sort(function(i,o){return i.index!==o.index?n*(o.index-i.index):o.createOrder-i.createOrder}),e.sorted=!0}},t.prototype.addDestroyTask=function(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()},t.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");for(var n=this.createTasksP1,i=n.list,o=this.createTasksP2,s=o.list,a=this.destroyTasks,d=(new Date).getTime(),f=(new Date).getTime()-d,g=e<=0,C=this.ctrlsService.getGridBodyCtrl();g||f<e;){if(!C.getScrollFeature().scrollGridIfNeeded()){var T=void 0;if(i.length)this.sortTaskList(n),T=i.pop().task;else if(s.length)this.sortTaskList(o),T=s.pop().task;else{if(!a.length){this.cancelledTasks.clear();break}T=a.pop()}this.cancelledTasks.has(T)||T()}f=(new Date).getTime()-d}i.length||s.length||a.length?this.requestFrame():this.stopTicking()},t.prototype.stopTicking=function(){this.ticking=!1},t.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},t.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},t.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60),i=this.gridOptionsService.getDocument().defaultView||window;i.requestAnimationFrame?i.requestAnimationFrame(e):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(e):i.setTimeout(e,0)},t.prototype.isQueueEmpty=function(){return!this.ticking},t.prototype.debounce=function(e){var n=this,i=!1;return function(){n.isOn()?i||(i=!0,n.addDestroyTask(function(){i=!1,e()})):n.getFrameworkOverrides().setTimeout(e,0)}},AA([F("ctrlsService")],t.prototype,"ctrlsService",void 0),AA([F("paginationProxy")],t.prototype,"paginationProxy",void 0),AA([rt],t.prototype,"init",null),AA([Rt("animationFrameService")],t)}(Ye),$X=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),z0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},zX=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return $X(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(n){e.centerRowContainerCtrl=n.centerRowContainerCtrl})},t.prototype.getPreferredWidthForColumn=function(e,n){var i=this.getHeaderCellForColumn(e);if(!i)return-1;var o=this.rowRenderer.getAllCellsForColumn(e);return n||o.push(i),this.addElementsToContainerAndGetWidth(o)},t.prototype.getPreferredWidthForColumnGroup=function(e){var n=this.getHeaderCellForColumn(e);return n?this.addElementsToContainerAndGetWidth([n]):-1},t.prototype.addElementsToContainerAndGetWidth=function(e){var n=this,i=document.createElement("form");i.style.position="fixed";var o=this.centerRowContainerCtrl.getContainerElement();o.appendChild(i),e.forEach(function(d){return n.cloneItemIntoDummy(d,i)});var s=i.offsetWidth;return o.removeChild(i),s+this.getAutoSizePadding()},t.prototype.getAutoSizePadding=function(){var e=this.gridOptionsService.getNum("autoSizePadding");return null!=e&&e>=0?e:20},t.prototype.getHeaderCellForColumn=function(e){var n=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(i){var o=i.getHtmlElementForColumnHeader(e);null!=o&&(n=o)}),n},t.prototype.cloneItemIntoDummy=function(e,n){var i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";var o=document.createElement("div"),s=o.classList;["ag-header-cell","ag-header-group-cell"].some(function(E){return i.classList.contains(E)})?(s.add("ag-header","ag-header-row"),o.style.position="static"):s.add("ag-row");for(var d=e.parentElement;d;){if(["ag-header-row","ag-row"].some(function(E){return d.classList.contains(E)})){for(var g=0;g<d.classList.length;g++){var C=d.classList[g];"ag-row-position-absolute"!=C&&s.add(C)}break}d=d.parentElement}o.appendChild(i),n.appendChild(o)},z0([F("rowRenderer")],t.prototype,"rowRenderer",void 0),z0([F("ctrlsService")],t.prototype,"ctrlsService",void 0),z0([F("rowCssClassCalculator")],t.prototype,"rowCssClassCalculator",void 0),z0([rt],t.prototype,"postConstruct",null),z0([Rt("autoWidthCalculator")],t)}(Ye),KX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),PA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},YX=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},QX=function(r){function t(e,n){var i=r.call(this)||this;return i.createRowCon=e,i.destroyRowCtrls=n,i.stickyRowCtrls=[],i.containerHeight=0,i}return KX(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(n){e.gridBodyCtrl=n.gridBodyCtrl})},t.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},t.prototype.checkStickyRows=function(){var e=0;if(this.gridOptionsService.is("groupRowsSticky")){for(var n=[],i=this.rowRenderer.getFirstVisibleVerticalPixel(),o=function(E){n.push(E);for(var T=E;T.expanded;)T=pr(T.childrenAfterSort);var I=T.rowTop+T.rowHeight,M=i+e+E.rowHeight;E.stickyRowTop=I<M?e+(I-M):e,e=0,n.forEach(function(k){var W=k.stickyRowTop+k.rowHeight;e<W&&(e=W)})};;){var s=i+e,a=this.rowModel.getRowIndexAtPixel(s),d=this.rowModel.getRow(a);if(null==d||d.level<0)break;for(var f=[],g=d.parent;g.level>=0;)f.push(g),g=g.parent;var C=f.reverse().find(function(E){return n.indexOf(E)<0&&E.displayed});if(C)o(C);else{if(!(d.group&&d.expanded&&!d.footer&&d.rowTop<s))break;o(d)}}this.refreshNodesAndContainerHeight(n,e)}else this.refreshNodesAndContainerHeight([],e)},t.prototype.refreshNodesAndContainerHeight=function(e,n){var i,o,s,a=this,d=this.stickyRowCtrls.filter(function(M){return-1===e.indexOf(M.getRowNode())}),f=e.filter(function(M){return-1===a.stickyRowCtrls.findIndex(function(k){return k.getRowNode()===M})}),g={};d.forEach(function(M){g[M.getRowNode().id]=M,a.stickyRowCtrls=a.stickyRowCtrls.filter(function(k){return k!==M})});try{for(var C=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.values(g)),E=C.next();!E.done;E=C.next())E.value.getRowNode().sticky=!1}catch(M){i={error:M}}finally{try{E&&!E.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}this.destroyRowCtrls(g,!1);var I=f.map(function(M){return M.sticky=!0,a.createRowCon(M,!1,!1)});(s=this.stickyRowCtrls).push.apply(s,function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(YX(arguments[t]));return r}(I)),this.stickyRowCtrls.forEach(function(M){return M.setRowTop(M.getRowNode().stickyRowTop)}),this.stickyRowCtrls.sort(function(M,k){return k.getRowNode().rowIndex-M.getRowNode().rowIndex}),this.containerHeight!==n&&(this.containerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n))},PA([F("rowModel")],t.prototype,"rowModel",void 0),PA([F("rowRenderer")],t.prototype,"rowRenderer",void 0),PA([F("ctrlsService")],t.prototype,"ctrlsService",void 0),PA([rt],t.prototype,"postConstruct",null),t}(Ye),JX=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),mc=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},XX=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},Ok=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(XX(arguments[t]));return r},nee=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e.dataFirstRenderedFired=!1,e}return JX(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.initialise()})},t.prototype.initialise=function(){this.addManagedListener(this.eventService,V.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,V.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,V.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.is("groupRowsSticky")&&("clientSide"!=this.rowModel.getType()?Yn(function(){return console.warn("AG Grid: The feature Sticky Row Groups only works with the Client Side Row Model")},"rowRenderer.stickyWorksWithCsrmOnly"):this.gridOptionsService.isTreeData()?Yn(function(){return console.warn("AG Grid: The feature Sticky Row Groups does not work with Tree Data.")},"rowRenderer.stickyDoesNotWorkWithTreeData"):this.stickyRowFeature=this.createManagedBean(new QX(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()},t.prototype.initialiseCache=function(){if(this.gridOptionsService.is("keepDetailRows")){var e=this.getKeepDetailRowsCount();this.cachedRowCtrls=new ree(e??3)}},t.prototype.getKeepDetailRowsCount=function(){var e=this.gridOptionsService.getNum("keepDetailRowsCount");return Qe(e)&&e>0?e:10},t.prototype.getRowCtrls=function(){return this.allRowCtrls},t.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},t.prototype.updateAllRowCtrls=function(){var e=hc(this.rowCtrlsByRowIndex),n=this.gridOptionsService.is("ensureDomOrder"),i=this.gridOptionsService.isDomLayout("print");(n||i)&&e.sort(function(a,d){return a.getRowNode().rowIndex-d.getRowNode.rowIndex});var o=hc(this.zombieRowCtrls),s=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=Ok(e,o,s)},t.prototype.onCellFocusChanged=function(e){this.getAllCellCtrls().forEach(function(n){return n.onCellFocused(e)}),this.getFullWidthRowCtrls().forEach(function(n){return n.onFullWidthRowFocused(e)})},t.prototype.registerCellEventListeners=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_CELL_FOCUSED,function(i){e.onCellFocusChanged(i)}),this.addManagedListener(this.eventService,V.EVENT_CELL_FOCUS_CLEARED,function(){e.onCellFocusChanged()}),this.addManagedListener(this.eventService,V.EVENT_FLASH_CELLS,function(i){e.getAllCellCtrls().forEach(function(o){return o.onFlashCells(i)})}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_HOVER_CHANGED,function(){e.getAllCellCtrls().forEach(function(i){return i.onColumnHover()})}),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){e.getAllCellCtrls().forEach(function(i){return i.onDisplayedColumnsChanged()})}),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){e.printLayout&&e.getAllCellCtrls().forEach(function(i){return i.onLeftChanged()})}),this.gridOptionsService.isEnableRangeSelection()&&(this.addManagedListener(this.eventService,V.EVENT_RANGE_SELECTION_CHANGED,function(){e.getAllCellCtrls().forEach(function(i){return i.onRangeSelectionChanged()})}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,function(){e.getAllCellCtrls().forEach(function(i){return i.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PINNED,function(){e.getAllCellCtrls().forEach(function(i){return i.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,function(){e.getAllCellCtrls().forEach(function(i){return i.updateRangeBordersIfRangeCount()})})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},t.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(e){return e()}),this.destroyFuncsForColumnListeners.length=0},t.prototype.refreshListenersToColumnsForCellComps=function(){var e=this;this.removeGridColumnListeners();var n=this.columnModel.getAllGridColumns();n&&n.forEach(function(i){var o=function(C){e.getAllCellCtrls().forEach(function(E){E.getColumn()===i&&C(E)})},s=function(){o(function(C){return C.onLeftChanged()})},a=function(){o(function(C){return C.onWidthChanged()})},d=function(){o(function(C){return C.onFirstRightPinnedChanged()})},f=function(){o(function(C){return C.onLastLeftPinnedChanged()})},g=function(){o(function(C){return C.onColDefChanged()})};i.addEventListener("leftChanged",s),i.addEventListener("widthChanged",a),i.addEventListener("firstRightPinnedChanged",d),i.addEventListener("lastLeftPinnedChanged",f),i.addEventListener("colDefChanged",g),e.destroyFuncsForColumnListeners.push(function(){i.removeEventListener("leftChanged",s),i.removeEventListener("widthChanged",a),i.removeEventListener("firstRightPinnedChanged",d),i.removeEventListener("lastLeftPinnedChanged",f),i.removeEventListener("colDefChanged",g)})})},t.prototype.onDomLayoutChanged=function(){var e=this.gridOptionsService.isDomLayout("print"),n=e||this.gridOptionsService.is("embedFullWidthRows"),i=n!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=n,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},t.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},t.prototype.onPageLoaded=function(e){this.redrawAfterModelUpdate({recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0})},t.prototype.getAllCellsForColumn=function(e){var n=[];return this.getAllRowCtrls().forEach(function(i){var o=i.getCellElement(e);o&&n.push(o)}),n},t.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},t.prototype.getTopRowCtrls=function(){return this.topRowCtrls},t.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},t.prototype.refreshFloatingRows=function(e,n){var i=this;e.forEach(function(o){o.destroyFirstPass(),o.destroySecondPass()}),e.length=0,n&&n.forEach(function(o){var s=new Fy(o,i.beans,!1,!1,i.printLayout);e.push(s)})},t.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},t.prototype.getRenderedIndexesForRowNodes=function(e){var n=[];return Qt(e)||Wr(this.rowCtrlsByRowIndex,function(i,o){var s=o.getRowNode();e.indexOf(s)>=0&&n.push(i)}),n},t.prototype.redrawRows=function(e){var n=null!=e&&e.length>0;if(n){var i=this.getRenderedIndexesForRowNodes(e);this.removeRowCtrls(i)}this.redrawAfterModelUpdate({recycleRows:n})},t.prototype.getCellToRestoreFocusToAfterRefresh=function(e){var n=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==n)return null;var o=this.gridOptionsService.getDocument().activeElement,s=this.gridOptionsService.getDomData(o,xy.DOM_DATA_KEY_CELL_CTRL),a=this.gridOptionsService.getDomData(o,Fy.DOM_DATA_KEY_ROW_CTRL);return s||a?n:null},t.prototype.redrawAfterModelUpdate=function(e){void 0===e&&(e={}),this.getLockOnRefresh();var n=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);var i=!e.domLayoutChanged&&!!e.recycleRows,o=e.animate&&this.gridOptionsService.isAnimateRows(),s=i?this.recycleRows():null;i||this.removeAllRowComps(),this.redraw(s,o),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=n&&this.restoreFocusedCell(n),this.releaseLockOnRefresh()},t.prototype.scrollToTopIfNewData=function(e){var n=e.newData||e.newPage,i=this.gridOptionsService.is("suppressScrollOnNewData");n&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},t.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var e=this.paginationProxy.getCurrentPageHeight();0===e&&(e=1),this.rowContainerHeightService.setModelHeight(e)}},t.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},t.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},t.prototype.isRefreshInProgress=function(){return this.refreshInProgress},t.prototype.restoreFocusedCell=function(e){e&&this.onCellFocusChanged({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"})},t.prototype.stopEditing=function(e){void 0===e&&(e=!1),this.getAllRowCtrls().forEach(function(n){n.stopEditing(e)})},t.prototype.getAllCellCtrls=function(){for(var e=[],n=this.getAllRowCtrls(),i=n.length,o=0;o<i;o++)for(var s=n[o].getAllCellCtrls(),a=s.length,d=0;d<a;d++)e.push(s[d]);return e},t.prototype.getAllRowCtrls=function(){var e,n,i=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],o=Ok(this.topRowCtrls,this.bottomRowCtrls,i);try{for(var s=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(this.rowCtrlsByRowIndex)),a=s.next();!a.done;a=s.next())o.push(this.rowCtrlsByRowIndex[a.value])}catch(f){e={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o},t.prototype.addRenderedRowListener=function(e,n,i){var o=this.rowCtrlsByRowIndex[n];o&&o.addEventListener(e,i)},t.prototype.flashCells=function(e){void 0===e&&(e={});var n=e.flashDelay,i=e.fadeDelay;this.getCellCtrls(e.rowNodes,e.columns).forEach(function(o){return o.flashCell({flashDelay:n,fadeDelay:i})})},t.prototype.refreshCells=function(e){void 0===e&&(e={});var n={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(function(i){if(i.refreshShouldDestroy()){var o=i.getRowCtrl();o&&o.refreshCell(i)}else i.refreshCell(n)}),this.getFullWidthRowCtrls(e.rowNodes).forEach(function(i){i.refreshFullWidth()})},t.prototype.getCellRendererInstances=function(e){var i,n=this,o=this.getCellCtrls(e.rowNodes,e.columns).map(function(d){return d.getCellRenderer()}).filter(function(d){return null!=d});if(null!==(i=e.columns)&&void 0!==i&&i.length)return o;var s=[],a=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(function(d){if((!a||n.isRowInMap(d.getRowNode(),a))&&d.isFullWidth()){var f=d.getFullWidthCellRenderer();f&&s.push(f)}}),Ok(s,o)},t.prototype.getCellEditorInstances=function(e){var n=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(function(i){var o=i.getCellEditor();o&&n.push(o)}),n},t.prototype.getEditingCells=function(){var e=[];return this.getAllCellCtrls().forEach(function(n){if(n.isEditing()){var i=n.getCellPosition();e.push(i)}}),e},t.prototype.mapRowNodes=function(e){if(e){var n={top:{},bottom:{},normal:{}};return e.forEach(function(i){var o=i.id;"top"===i.rowPinned?n.top[o]=i:"bottom"===i.rowPinned?n.bottom[o]=i:n.normal[o]=i}),n}},t.prototype.isRowInMap=function(e,n){var i=e.id,o=e.rowPinned;return"bottom"===o?null!=n.bottom[i]:"top"===o?null!=n.top[i]:null!=n.normal[i]},t.prototype.getCellCtrls=function(e,n){var a,i=this,o=this.mapRowNodes(e),s=[];return Qe(n)&&(a={},n.forEach(function(f){var g=i.columnModel.getGridColumn(f);Qe(g)&&(a[g.getId()]=!0)})),this.getAllRowCtrls().forEach(function(f){return function(f){var g=f.getRowNode();null!=o&&!i.isRowInMap(g,o)||f.getAllCellCtrls().forEach(function(C){var E=C.getColumn().getId();a&&!a[E]||s.push(C)})}(f)}),s},t.prototype.destroy=function(){this.removeAllRowComps(),r.prototype.destroy.call(this)},t.prototype.removeAllRowComps=function(){var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},t.prototype.recycleRows=function(){var e=[];Wr(this.rowCtrlsByRowIndex,function(i,o){null==o.getRowNode().id&&e.push(i)}),this.removeRowCtrls(e);var n={};return Wr(this.rowCtrlsByRowIndex,function(i,o){var s=o.getRowNode();n[s.id]=o}),this.rowCtrlsByRowIndex={},n},t.prototype.removeRowCtrls=function(e){var n=this;e.forEach(function(i){var o=n.rowCtrlsByRowIndex[i];o&&(o.destroyFirstPass(),o.destroySecondPass()),delete n.rowCtrlsByRowIndex[i]})},t.prototype.onBodyScroll=function(e){"vertical"===e.direction&&this.redrawAfterScroll()},t.prototype.redrawAfterScroll=function(){var e;if(this.stickyRowFeature&&eA()&&(e=this.getCellToRestoreFocusToAfterRefresh()||void 0),this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(),null!=e){var n=this.getCellToRestoreFocusToAfterRefresh();null!=e&&null==n&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(e))}},t.prototype.removeRowCompsNotToDraw=function(e){var n={};e.forEach(function(s){return n[s]=!0});var o=Object.keys(this.rowCtrlsByRowIndex).filter(function(s){return!n[s]});this.removeRowCtrls(o)},t.prototype.calculateIndexesToDraw=function(e){var n=this,i=S2(this.firstRenderedRow,this.lastRenderedRow),o=function(s,a){var d=a.getRowNode().rowIndex;null!=d&&(d<n.firstRenderedRow||d>n.lastRenderedRow)&&n.doNotUnVirtualiseRow(a)&&i.push(d)};return Wr(this.rowCtrlsByRowIndex,o),Wr(e,o),i.sort(function(s,a){return s-a}),i=i.filter(function(s){var a=n.paginationProxy.getRow(s);return a&&!a.sticky})},t.prototype.redraw=function(e,n,i){var o=this;void 0===n&&(n=!1),void 0===i&&(i=!1),this.rowContainerHeightService.updateOffset(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows();var s=this.calculateIndexesToDraw(e);this.removeRowCompsNotToDraw(s),this.printLayout&&(n=!1),s.forEach(function(d){Qe(o.createOrUpdateRowCtrl(d,e,n,i))}),e&&(!i||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout?this.destroyRowCtrls(e,n):this.beans.animationFrameService.addDestroyTask(function(){o.destroyRowCtrls(e,n),o.updateAllRowCtrls(),o.dispatchDisplayedRowsChanged()})),this.updateAllRowCtrls()},t.prototype.dispatchDisplayedRowsChanged=function(){this.eventService.dispatchEvent({type:V.EVENT_DISPLAYED_ROWS_CHANGED})},t.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.isPinningLeft(),n=this.columnModel.isPinningRight();(this.pinningLeft!==e||n!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},t.prototype.redrawFullWidthEmbeddedRows=function(){var e=[];this.getFullWidthRowCtrls().forEach(function(n){var i=n.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redrawAfterScroll()},t.prototype.getFullWidthRowCtrls=function(e){var n=this,i=this.mapRowNodes(e);return hc(this.rowCtrlsByRowIndex).filter(function(o){if(!o.isFullWidth())return!1;var s=o.getRowNode();return!(null!=i&&!n.isRowInMap(s,i))})},t.prototype.refreshFullWidthRows=function(e){var n=[],i=!!e,o=i?{}:void 0;i&&o&&e.forEach(function(s){return o[s.id]=!0}),this.getFullWidthRowCtrls().forEach(function(s){var a=s.getRowNode();if((!i||!o||o[a.id]||o[a.level>0&&a.parent?a.parent.id:void 0])&&!s.refreshFullWidth()){var C=s.getRowNode().rowIndex;n.push(C.toString())}}),this.removeRowCtrls(n),this.redrawAfterScroll()},t.prototype.createOrUpdateRowCtrl=function(e,n,i,o){var s,a=this.rowCtrlsByRowIndex[e];if(a||Qe(s=this.paginationProxy.getRow(e))&&Qe(n)&&n[s.id]&&s.alreadyRendered&&(a=n[s.id],n[s.id]=null),!a){if(s||(s=this.paginationProxy.getRow(e)),!Qe(s))return;a=this.createRowCon(s,i,o)}return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=a,a},t.prototype.destroyRowCtrls=function(e,n){var i=this,o=[];Wr(e,function(s,a){if(a){if(i.cachedRowCtrls&&a.isCacheable())return void i.cachedRowCtrls.addRow(a);a.destroyFirstPass(),n?(i.zombieRowCtrls[a.getInstanceId()]=a,o.push(function(){a.destroySecondPass(),delete i.zombieRowCtrls[a.getInstanceId()]})):a.destroySecondPass()}}),n&&(o.push(function(){i.updateAllRowCtrls(),i.dispatchDisplayedRowsChanged()}),Nj(o))},t.prototype.getRowBuffer=function(){var e=this.gridOptionsService.getNum("rowBuffer");return"number"==typeof e?e<0&&(Yn(function(){return console.warn("AG Grid: rowBuffer should not be negative")},"warn rowBuffer negative"),e=0,this.gridOptionsService.set("rowBuffer",0)):e=10,e},t.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.gridOptionsService.getRowHeightAsNumber()},t.prototype.workOutFirstAndLastRowsToRender=function(){var e,n;if(this.paginationProxy.isRowsToRender())if(this.printLayout)e=this.paginationProxy.getPageFirstRow(),n=this.paginationProxy.getPageLastRow();else{var i=this.getRowBufferInPixels(),o=this.ctrlsService.getGridBodyCtrl(),s=this.gridOptionsService.is("suppressRowVirtualisation"),a=!1,d=void 0,f=void 0;do{var g=this.paginationProxy.getPixelOffset(),C=this.paginationProxy.getCurrentPagePixelRange(),E=C.pageFirstPixel,T=C.pageLastPixel,I=this.rowContainerHeightService.getDivStretchOffset(),M=o.getScrollFeature().getVScrollPosition(),k=M.top,W=M.bottom;s?(d=E+I,f=T+I):(d=Math.max(k+g-i,E)+I,f=Math.min(W+g+i,T)+I),this.firstVisibleVPixel=Math.max(k+g,E)+I,a=this.ensureAllRowsInRangeHaveHeightsCalculated(d,f)}while(a);var z=this.paginationProxy.getRowIndexAtPixel(d),J=this.paginationProxy.getRowIndexAtPixel(f),re=this.paginationProxy.getPageFirstRow(),ce=this.paginationProxy.getPageLastRow();z<re&&(z=re),J>ce&&(J=ce),e=z,n=J}else e=0,n=-1;var Re=this.gridOptionsService.isDomLayout("normal"),Xe=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),Ke=Math.max(this.getRowBuffer(),500);Re&&!Xe&&n-e>Ke&&(n=e+Ke),(e!==this.firstRenderedRow||n!==this.lastRenderedRow)&&(this.firstRenderedRow=e,this.lastRenderedRow=n,this.eventService.dispatchEvent({type:V.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:n}))},t.prototype.dispatchFirstDataRenderedEvent=function(){var e=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var n={type:V.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(function(){e.beans.eventService.dispatchEvent(n)})}},t.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(e,n){var i=this.paginationProxy.ensureRowHeightsValid(e,n,-1,-1);return i&&this.updateContainerHeights(),i},t.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},t.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},t.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},t.prototype.doNotUnVirtualiseRow=function(e){var o=e.getRowNode(),s=this.focusService.isRowNodeFocused(o),a=e.isEditing();return!!(s||a||o.detail)&&!!this.paginationProxy.isRowPresent(o)},t.prototype.createRowCon=function(e,n,i){var o=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(o)return o;var s=this.gridOptionsService.is("suppressAnimationFrame");return new Fy(e,this.beans,n,i&&!s&&!this.printLayout,this.printLayout)},t.prototype.getRenderedNodes=function(){var e=this.rowCtrlsByRowIndex;return Object.keys(e).map(function(n){return e[n].getRowNode()})},t.prototype.getRowByPosition=function(e){var n,i=e.rowIndex;switch(e.rowPinned){case"top":n=this.topRowCtrls[i];break;case"bottom":n=this.bottomRowCtrls[i];break;default:(n=this.rowCtrlsByRowIndex[i])||(n=this.getStickyTopRowCtrls().find(function(o){return o.getRowNode().rowIndex===i})||null)}return n},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},t.prototype.isRangeInRenderedViewport=function(e,n){return!(null==e||null==n||n<this.firstRenderedRow||e>this.lastRenderedRow)},mc([F("animationFrameService")],t.prototype,"animationFrameService",void 0),mc([F("paginationProxy")],t.prototype,"paginationProxy",void 0),mc([F("columnModel")],t.prototype,"columnModel",void 0),mc([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),mc([F("rowModel")],t.prototype,"rowModel",void 0),mc([F("focusService")],t.prototype,"focusService",void 0),mc([F("beans")],t.prototype,"beans",void 0),mc([F("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),mc([F("ctrlsService")],t.prototype,"ctrlsService",void 0),mc([rt],t.prototype,"postConstruct",null),mc([Rt("rowRenderer")],t)}(Ye),ree=function(){function r(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}return r.prototype.addRow=function(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},r.prototype.getRow=function(t){if(null==t||null==t.id)return null;var e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=t?null:e):null},r.prototype.removeFromCache=function(t){var e=t.getRowNode().id;delete this.entriesMap[e],As(this.entriesList,t)},r.prototype.getEntries=function(){return this.entriesList},r}(),iee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),xW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},oee=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return iee(t,r),t.prototype.formatValue=function(e,n,i,o,s){void 0===s&&(s=!0);var d,a=null,f=e.getColDef();if(o?d=o:s&&(d=f.valueFormatter),d){var g={value:i,node:n,data:n?n.data:null,colDef:f,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};a="function"==typeof d?d(g):this.expressionService.evaluate(d,g)}else if(f.refData)return f.refData[i]||"";return null==a&&Array.isArray(i)&&(a=i.join(", ")),a},xW([F("expressionService")],t.prototype,"expressionService",void 0),xW([Rt("valueFormatterService")],t)}(Ye),see=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ik=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},aee=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return see(t,r),t.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))},t.prototype.isEmpty=function(e){return al("top"===e?this.pinnedTopRows:this.pinnedBottomRows)},t.prototype.isRowsToRender=function(e){return!this.isEmpty(e)},t.prototype.getRowAtPixel=function(e,n){var i="top"===n?this.pinnedTopRows:this.pinnedBottomRows;if(al(i))return 0;for(var o=0;o<i.length;o++){var s=i[o];if(s.rowTop+s.rowHeight-1>=e)return o}return i.length-1},t.prototype.setPinnedTopRowData=function(e){this.pinnedTopRows=this.createNodesFromData(e,!0),this.eventService.dispatchEvent({type:V.EVENT_PINNED_ROW_DATA_CHANGED})},t.prototype.setPinnedBottomRowData=function(e){this.pinnedBottomRows=this.createNodesFromData(e,!1),this.eventService.dispatchEvent({type:V.EVENT_PINNED_ROW_DATA_CHANGED})},t.prototype.createNodesFromData=function(e,n){var i=this,o=[];if(e){var s=0;e.forEach(function(a,d){var f=new In(i.beans);f.data=a,f.id=(n?In.ID_PREFIX_TOP_PINNED:In.ID_PREFIX_BOTTOM_PINNED)+d,f.rowPinned=n?"top":"bottom",f.setRowTop(s),f.setRowHeight(i.gridOptionsService.getRowHeightForNode(f).height),f.setRowIndex(d),s+=f.rowHeight,o.push(f)})}return o},t.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},t.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},t.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},t.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},t.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},t.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]},t.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]},t.prototype.forEachPinnedTopRow=function(e){al(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)},t.prototype.forEachPinnedBottomRow=function(e){al(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)},t.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},t.prototype.getTotalHeight=function(e){if(!e||0===e.length)return 0;var n=pr(e);return n.rowTop+n.rowHeight},Ik([F("beans")],t.prototype,"beans",void 0),Ik([rt],t.prototype,"init",null),Ik([Rt("pinnedRowModel")],t)}(Ye),Ak=function(){function r(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return r.prototype.setInactive=function(){this.active=!1},r.prototype.isActive=function(){return this.active},r.prototype.depthFirstSearchChangedPath=function(t,e){if(t.children)for(var n=0;n<t.children.length;n++)this.depthFirstSearchChangedPath(t.children[n],e);e(t.rowNode)},r.prototype.depthFirstSearchEverything=function(t,e,n){if(t.childrenAfterGroup)for(var i=0;i<t.childrenAfterGroup.length;i++){var o=t.childrenAfterGroup[i];o.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[i],e,n):n&&e(o)}e(t)},r.prototype.forEachChangedNodeDepthFirst=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)},r.prototype.executeFromRootNode=function(t){t(this.pathRoot.rowNode)},r.prototype.createPathItems=function(t){for(var e=t,n=0;!this.mapToItems[e.id];)this.mapToItems[e.id]={rowNode:e,children:null},n++,e=e.parent;return n},r.prototype.populateColumnsMap=function(t,e){var n=this;if(this.keepingColumns&&e)for(var i=t;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),e.forEach(function(o){return n.nodeIdsToColumns[i.id][o.getId()]=!0}),i=i.parent},r.prototype.linkPathItems=function(t,e){for(var n=t,i=0;i<e;i++){var o=this.mapToItems[n.id],s=this.mapToItems[n.parent.id];s.children||(s.children=[]),s.children.push(o),n=n.parent}},r.prototype.addParentNode=function(t,e){if(t&&!t.isRowPinned()){var n=this.createPathItems(t);this.linkPathItems(t,n),this.populateColumnsMap(t,e)}},r.prototype.canSkip=function(t){return this.active&&!this.mapToItems[t.id]},r.prototype.getValueColumnsForNode=function(t,e){if(!this.keepingColumns)return e;var n=this.nodeIdsToColumns[t.id];return e.filter(function(o){return n[o.getId()]})},r.prototype.getNotValueColumnsForNode=function(t,e){if(!this.keepingColumns)return null;var n=this.nodeIdsToColumns[t.id];return e.filter(function(o){return!n[o.getId()]})},r}(),lee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Pk=function(r){function t(e){var n=r.call(this)||this;return n.state=t.STATE_WAITING_TO_LOAD,n.version=0,n.id=e,n}return lee(t,r),t.prototype.getId=function(){return this.id},t.prototype.load=function(){this.state=t.STATE_LOADING,this.loadFromDatasource()},t.prototype.getVersion=function(){return this.version},t.prototype.setStateWaitingToLoad=function(){this.version++,this.state=t.STATE_WAITING_TO_LOAD},t.prototype.getState=function(){return this.state},t.prototype.pageLoadFailed=function(e){this.isRequestMostRecentAndLive(e)&&(this.state=t.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},t.prototype.success=function(e,n){this.successCommon(e,n)},t.prototype.pageLoaded=function(e,n,i){this.successCommon(e,{rowData:n,rowCount:i})},t.prototype.isRequestMostRecentAndLive=function(e){var n=e===this.version,i=this.isAlive();return n&&i},t.prototype.successCommon=function(e,n){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=t.STATE_LOADED,this.processServerResult(n))},t.prototype.dispatchLoadCompleted=function(e){void 0===e&&(e=!0),this.dispatchEvent({type:t.EVENT_LOAD_COMPLETE,success:e,block:this})},t.EVENT_LOAD_COMPLETE="loadComplete",t.STATE_WAITING_TO_LOAD="needsLoading",t.STATE_LOADING="loading",t.STATE_LOADED="loaded",t.STATE_FAILED="failed",t}(Ye),uee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),NA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},cee=function(r,t){return function(e,n){t(e,n,r)}},dee=function(r){function t(){var n=null!==r&&r.apply(this,arguments)||this;return n.activeBlockLoadsCount=0,n.blocks=[],n.active=!0,n}var e;return uee(t,r),e=t,t.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var n=this.gridOptionsService.getNum("blockLoadDebounceMillis");n&&n>0&&(this.checkBlockToLoadDebounce=tn.debounce(this.performCheckBlocksToLoad.bind(this),n))},t.prototype.setBeans=function(n){this.logger=n.create("RowNodeBlockLoader")},t.prototype.getMaxConcurrentDatasourceRequests=function(){var n=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");return null==n?2:n<=0?void 0:n},t.prototype.addBlock=function(n){this.blocks.push(n),n.addEventListener(Pk.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},t.prototype.removeBlock=function(n){tn.removeFromArray(this.blocks,n)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.active=!1},t.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:e.BLOCK_LOADED_EVENT}),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:e.BLOCK_LOADER_FINISHED_EVENT})},t.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},t.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");var n=this.getAvailableLoadingCount(),i=this.blocks.filter(function(o){return o.getState()===Pk.STATE_WAITING_TO_LOAD}).slice(0,n);this.registerLoads(i.length),i.forEach(function(o){return o.load()}),this.printCacheStatus()}},t.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();var i={};return this.blocks.forEach(function(o){var s=o.getBlockStateJson();i[s.id]=s.state}),i},t.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},t.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},t.prototype.registerLoads=function(n){this.activeBlockLoadsCount+=n},t.prototype.getAvailableLoadingCount=function(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0},t.BLOCK_LOADED_EVENT="blockLoaded",t.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",NA([F("rowModel")],t.prototype,"rowModel",void 0),NA([rt],t.prototype,"postConstruct",null),NA([cee(0,ea("loggerFactory"))],t.prototype,"setBeans",null),e=NA([Rt("rowNodeBlockLoader")],t)}(Ye),hee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Nk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},fee=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return hee(t,r),t.prototype.postConstruct=function(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},t.prototype.ensureRowHeightsValid=function(e,n,i,o){var s=this.rowModel.ensureRowHeightsValid(e,n,this.getPageFirstRow(),this.getPageLastRow());return s&&this.calculatePages(),s},t.prototype.isPaginateChildRows=function(){return!(!this.gridOptionsService.is("groupRemoveSingleChildren")&&!this.gridOptionsService.is("groupRemoveLowestSingleChildren"))||this.gridOptionsService.is("paginateChildRows")},t.prototype.onModelUpdated=function(e){this.calculatePages(),this.eventService.dispatchEvent({type:V.EVENT_PAGINATION_CHANGED,animate:!!e&&e.animate,newData:!!e&&e.newData,newPage:!!e&&e.newPage,keepRenderedRows:!!e&&e.keepRenderedRows})},t.prototype.onPaginationPageSizeChanged=function(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages(),this.eventService.dispatchEvent({type:V.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0})},t.prototype.goToPage=function(e){this.active&&this.currentPage!==e&&"number"==typeof this.currentPage&&(this.currentPage=e,this.onModelUpdated({type:V.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0}))},t.prototype.getPixelOffset=function(){return this.pixelOffset},t.prototype.getRow=function(e){return this.rowModel.getRow(e)},t.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},t.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)},t.prototype.getCurrentPageHeight=function(){return Qt(this.topRowBounds)||Qt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},t.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},t.prototype.isRowPresent=function(e){return!!this.rowModel.isRowPresent(e)&&e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex},t.prototype.isEmpty=function(){return this.rowModel.isEmpty()},t.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},t.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)},t.prototype.forEachNodeOnPage=function(e){for(var n=this.getPageFirstRow(),i=this.getPageLastRow(),o=n;o<=i;o++){var s=this.getRow(o);s&&e(s)}},t.prototype.getType=function(){return this.rowModel.getType()},t.prototype.getRowBounds=function(e){var n=this.rowModel.getRowBounds(e);return n.rowIndex=e,n},t.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},t.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},t.prototype.getRowCount=function(){return this.rowModel.getRowCount()},t.prototype.getPageForIndex=function(e){return Math.floor(e/this.pageSize)},t.prototype.goToPageWithIndex=function(e){if(this.active){var n=this.getPageForIndex(e);this.goToPage(n)}},t.prototype.isRowInPage=function(e){return!this.active||this.getPageForIndex(e.rowIndex)===this.currentPage},t.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},t.prototype.getCurrentPage=function(){return this.currentPage},t.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},t.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},t.prototype.goToFirstPage=function(){this.goToPage(0)},t.prototype.goToLastPage=function(){var e=this.rowModel.getRowCount(),n=Math.floor(e/this.pageSize);this.goToPage(n)},t.prototype.getPageSize=function(){return this.pageSize},t.prototype.getTotalPages=function(){return this.totalPages},t.prototype.setPageSize=function(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},t.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(Qe(this.topRowBounds)?this.topRowBounds.rowTop:0)},t.prototype.setPixelOffset=function(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:V.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},t.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},t.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},t.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(this.pageSize*this.currentPage),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var o=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=o-1}}},t.prototype.getMasterRowCount=function(){return this.masterRowCount},t.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}else this.setZeroRows()},t.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},Nk([F("rowModel")],t.prototype,"rowModel",void 0),Nk([rt],t.prototype,"postConstruct",null),Nk([Rt("paginationProxy")],t)}(Ye),pee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),FW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},gee=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return pee(t,r),t.prototype.processAllCellClasses=function(e,n,i,o){this.processClassRules(e.cellClassRules,n,i,o),this.processStaticCellClasses(e,n,i)},t.prototype.processClassRules=function(e,n,i,o){if(null!=e){for(var s=Object.keys(e),a={},d={},f=function(E){var M,T=s[E],I=e[T];"string"==typeof I?M=g.expressionService.evaluate(I,n):"function"==typeof I&&(M=I(n)),T.split(" ").forEach(function(k){null==k||""==k.trim()||(M?a[k]=!0:d[k]=!0)})},g=this,C=0;C<s.length;C++)f(C);o&&Object.keys(d).forEach(o),Object.keys(a).forEach(i)}},t.prototype.getStaticCellClasses=function(e,n){var o,i=e.cellClass;return i?("string"==typeof(o="function"==typeof i?i(n):i)&&(o=[o]),o||[]):[]},t.prototype.processStaticCellClasses=function(e,n,i){this.getStaticCellClasses(e,n).forEach(function(s){i(s)})},FW([F("expressionService")],t.prototype,"expressionService",void 0),FW([Rt("stylingService")],t)}(Ye),mee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),vee=function(r){function t(e){return r.call(this,e,"ag-toggle-button")||this}return mee(t,r),t.prototype.setValue=function(e,n){return r.prototype.setValue.call(this,e,n),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},t}(N0),yee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),_ee=function(r){function t(e){return r.call(this,e,"ag-text-area",null,"textarea")||this}return yee(t,r),t.prototype.setValue=function(e,n){var i=r.prototype.setValue.call(this,e,n);return this.eInput.value=e,i},t.prototype.setCols=function(e){return this.eInput.cols=e,this},t.prototype.setRows=function(e){return this.eInput.rows=e,this},t}(Zf),Cee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),wee=function(r){function t(e){return r.call(this,e,"ag-range-field","range")||this}return Cee(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this);var e=this.config,n=e.min,i=e.max,o=e.step;null!=n&&this.setMinValue(n),null!=i&&this.setMaxValue(i),this.setStep(o||1)},t.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(n){e.setValue(n.target.value)})},t.prototype.setMinValue=function(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this},t.prototype.setMaxValue=function(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this},t.prototype.setStep=function(e){return this.eInput.setAttribute("step",e.toString()),this},t.prototype.setValue=function(e,n){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());var i=r.prototype.setValue.call(this,e,n);return this.eInput.value=e,i},t}(Zf),See=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),MA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Eee=function(r){function t(e){var n=r.call(this,e,t.TEMPLATE)||this;return n.labelAlignment="top",n}return See(t,r),t.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},t.prototype.onValueChange=function(e){var n=this,i=Mw.EVENT_CHANGED;return this.addManagedListener(this.eText,i,function(){var o=parseFloat(n.eText.getValue());n.eSlider.setValue(o.toString(),!0),e(o||0)}),this.addManagedListener(this.eSlider,i,function(){var o=n.eSlider.getValue();n.eText.setValue(o,!0),e(parseFloat(o))}),this},t.prototype.setSliderWidth=function(e){return this.eSlider.setWidth(e),this},t.prototype.setTextFieldWidth=function(e){return this.eText.setWidth(e),this},t.prototype.setMinValue=function(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this},t.prototype.setMaxValue=function(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this},t.prototype.getValue=function(){return this.eText.getValue()},t.prototype.setValue=function(e){return this.getValue()===e||(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:Mw.EVENT_CHANGED})),this},t.prototype.setStep=function(e){return this.eSlider.setStep(e),this.eText.setStep(e),this},t.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',MA([ut("eLabel")],t.prototype,"eLabel",void 0),MA([ut("eSlider")],t.prototype,"eSlider",void 0),MA([ut("eText")],t.prototype,"eText",void 0),MA([rt],t.prototype,"init",null),t}(j2),bee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zg=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Dee=function(r){function t(e){void 0===e&&(e={});var n=r.call(this,t.getTemplate(e))||this;n.suppressEnabledCheckbox=!0,n.suppressOpenCloseIcons=!1;var o=e.enabled,s=e.items,a=e.suppressEnabledCheckbox,d=e.suppressOpenCloseIcons;return n.title=e.title,n.cssIdentifier=e.cssIdentifier||"default",n.enabled=o??!0,n.items=s||[],n.alignItems=e.alignItems||"center",null!=a&&(n.suppressEnabledCheckbox=a),null!=d&&(n.suppressOpenCloseIcons=d),n}return bee(t,r),t.getTemplate=function(e){var n=e.cssIdentifier||"default";return'<div class="ag-group ag-'+n+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+n+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+n+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+n+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+n+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+n+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+(e.direction||"vertical")+" ag-"+n+'-group-container"></div>\n        </div>'},t.prototype.postConstruct=function(){if(this.items.length){var e=this.items;this.items=[],this.addItems(e)}var n=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(n("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},t.prototype.setupExpandContract=function(){var e=this;this.eGroupClosedIcon.appendChild(du("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(du("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",function(){return e.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(n){switch(n.key){case Fe.ENTER:case Fe.SPACE:n.preventDefault(),e.toggleGroupExpand();break;case Fe.RIGHT:case Fe.LEFT:n.preventDefault(),e.toggleGroupExpand(n.key===Fe.RIGHT)}})},t.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||fc(this.eTitleBar,this.expanded)},t.prototype.refreshChildDisplay=function(){var e=!this.suppressOpenCloseIcons;Wn(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),Wn(this.eGroupOpenedIcon,e&&this.expanded),Wn(this.eGroupClosedIcon,e&&!this.expanded)},t.prototype.isExpanded=function(){return this.expanded},t.prototype.setAlignItems=function(e){return this.alignItems!==e&&this.removeCssClass("ag-group-item-alignment-"+this.alignItems),this.alignItems=e,this.addCssClass("ag-group-item-alignment-"+this.alignItems),this},t.prototype.toggleGroupExpand=function(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),Wn(this.eContainer,!0),this):(this.expanded===(e=e??!this.expanded)||(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),Wn(this.eContainer,e),this.dispatchEvent({type:this.expanded?t.EVENT_EXPANDED:t.EVENT_COLLAPSED})),this)},t.prototype.addItems=function(e){var n=this;e.forEach(function(i){return n.addItem(i)})},t.prototype.addItem=function(e){var n=this.eContainer,i=e instanceof Rn?e.getGui():e;i.classList.add("ag-group-item","ag-"+this.cssIdentifier+"-group-item"),n.appendChild(i),this.items.push(i)},t.prototype.hideItem=function(e,n){Wn(this.items[n],!e)},t.prototype.setTitle=function(e){return this.eTitle.innerText=e,this},t.prototype.addCssClassToTitleBar=function(e){this.eTitleBar.classList.add(e)},t.prototype.setEnabled=function(e,n){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),n||this.cbGroupEnabled.setValue(e),this},t.prototype.isEnabled=function(){return this.enabled},t.prototype.onEnableChange=function(e){var n=this;return this.cbGroupEnabled.onValueChange(function(i){n.setEnabled(i,!0),e(i)}),this},t.prototype.hideEnabledCheckbox=function(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},t.prototype.hideOpenCloseIcons=function(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this},t.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},t.EVENT_EXPANDED="expanded",t.EVENT_COLLAPSED="collapsed",Zg([ut("eTitleBar")],t.prototype,"eTitleBar",void 0),Zg([ut("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),Zg([ut("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),Zg([ut("eToolbar")],t.prototype,"eToolbar",void 0),Zg([ut("cbGroupEnabled")],t.prototype,"cbGroupEnabled",void 0),Zg([ut("eTitle")],t.prototype,"eTitle",void 0),Zg([ut("eContainer")],t.prototype,"eContainer",void 0),Zg([rt],t.prototype,"postConstruct",null),t}(Rn),Tee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),LW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},ky=(()=>(function(r){r.TAB_GUARD="ag-tab-guard",r.TAB_GUARD_TOP="ag-tab-guard-top",r.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"}(ky||(ky={})),ky))(),Ree=function(r){function t(e){var n=r.call(this)||this;n.skipTabGuardFocus=!1;var o=e.eTopGuard,s=e.eBottomGuard,a=e.focusInnerElement,d=e.onFocusIn,f=e.onFocusOut,g=e.shouldStopEventPropagation,C=e.onTabKeyDown,E=e.handleKeyDown,T=e.eFocusableElement;return n.comp=e.comp,n.eTopGuard=o,n.eBottomGuard=s,n.providedFocusInnerElement=a,n.eFocusableElement=T,n.providedFocusIn=d,n.providedFocusOut=f,n.providedShouldStopEventPropagation=g,n.providedOnTabKeyDown=C,n.providedHandleKeyDown=E,n}return Tee(t,r),t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new qg(this.eFocusableElement,{shouldStopEventPropagation:function(){return e.shouldStopEventPropagation()},onTabKeyDown:function(n){return e.onTabKeyDown(n)},handleKeyDown:function(n){return e.handleKeyDown(n)},onFocusIn:function(n){return e.onFocusIn(n)},onFocusOut:function(n){return e.onFocusOut(n)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(n){return e.addManagedListener(n,"focus",e.onFocus.bind(e))})},t.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},t.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},t.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},t.prototype.activateTabGuards=function(){this.comp.setTabIndex(this.getGridTabIndex())},t.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},t.prototype.onFocus=function(e){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var n=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(n):this.focusInnerElement(n)}},t.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},t.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},t.prototype.onTabKeyDown=function(e){var n=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(e);else if(!e.defaultPrevented){var i=this.tabGuardsAreActive();i&&this.deactivateTabGuards();var o=this.getNextFocusableElement(e.shiftKey);i&&setTimeout(function(){return n.activateTabGuards()},0),o&&(o.focus(),e.preventDefault())}},t.prototype.getGridTabIndex=function(){return(this.gridOptionsService.getNum("tabIndex")||0).toString()},t.prototype.focusInnerElement=function(e){void 0===e&&(e=!1);var n=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(n.splice(0,1),n.splice(n.length-1,1)),n.length&&n[e?n.length-1:0].focus()},t.prototype.getNextFocusableElement=function(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)},t.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1);var n=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,n.focus()},LW([F("focusService")],t.prototype,"focusService",void 0),LW([rt],t.prototype,"postConstruct",null),t}(Ye),Oee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Iee=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},xA=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Oee(t,r),t.prototype.initialiseTabGuard=function(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var n=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:function(o){n.forEach(function(s){return null!=o?s.setAttribute("tabIndex",o):s.removeAttribute("tabIndex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new Ree({comp:i,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))},t.prototype.createTabGuard=function(e){var n=document.createElement("div");return n.classList.add(ky.TAB_GUARD,"top"===e?ky.TAB_GUARD_TOP:ky.TAB_GUARD_BOTTOM),Ko(n,"presentation"),n},t.prototype.addTabGuards=function(e,n){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",n)},t.prototype.removeAllChildrenExceptTabGuards=function(){var e=[this.eTopGuard,this.eBottomGuard];ll(this.getFocusableElement()),this.addTabGuards.apply(this,function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Iee(arguments[t]));return r}(e))},t.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1),this.tabGuardCtrl.forceFocusOutOfContainer(e)},t.prototype.appendChild=function(e,n){I0(e)||(e=e.getGui());var i=this.eBottomGuard;i?i.insertAdjacentElement("beforebegin",e):r.prototype.appendChild.call(this,e,n)},t}(Rn),Pee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),FA=function(){return FA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},FA.apply(this,arguments)},kW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Nee=function(r){function t(e){void 0===e&&(e=1);var n=r.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return n.level=e,n.menuItems=[],n}return Pee(t,r),t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(n){return e.onTabKeyDown(n)},handleKeyDown:function(n){return e.handleKeyDown(n)}})},t.prototype.onTabKeyDown=function(e){var n=this.getParentComponent(),i=n&&n.getGui();i&&i.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},t.prototype.handleKeyDown=function(e){switch(e.key){case Fe.UP:case Fe.RIGHT:case Fe.DOWN:case Fe.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case Fe.ESCAPE:var n=this.findTopMenu();n&&this.focusService.focusInto(n.getGui())}},t.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},t.prototype.addMenuItems=function(e){var n=this;e?.forEach(function(i){"separator"===i?n.addSeparator():"string"==typeof i?console.warn("AG Grid: unrecognised menu item "+i):n.addItem(i)})},t.prototype.addItem=function(e){var n=this,i=this.createManagedBean(new K0(FA(FA({},e),{isAnotherSubMenuOpen:function(){return n.menuItems.some(function(o){return o.isSubMenuOpen()})}})));i.setParentComponent(this),l2(i.getGui(),this.level),this.menuItems.push(i),this.appendChild(i.getGui()),this.addManagedListener(i,K0.EVENT_MENU_ITEM_SELECTED,function(o){n.dispatchEvent(o)}),this.addManagedListener(i,K0.EVENT_MENU_ITEM_ACTIVATED,function(o){n.activeMenuItem&&n.activeMenuItem!==o.menuItem&&n.activeMenuItem.deactivate(),n.activeMenuItem=o.menuItem})},t.prototype.activateFirstItem=function(){var e=this.menuItems.filter(function(n){return!n.isDisabled()})[0];e&&e.activate()},t.prototype.addSeparator=function(){this.appendChild(ls('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>'))},t.prototype.findTopMenu=function(){var e=this.getParentComponent();if(!e&&this instanceof t)return this;for(;;){var n=e&&e.getParentComponent&&e.getParentComponent();if(!n||!(n instanceof t||n instanceof K0))break;e=n}return e instanceof t?e:void 0},t.prototype.handleNavKey=function(e){switch(e){case Fe.UP:case Fe.DOWN:var n=this.findNextItem(e===Fe.UP);return void(n&&n!==this.activeMenuItem&&n.activate())}e===(this.gridOptionsService.is("enableRtl")?Fe.RIGHT:Fe.LEFT)?this.closeIfIsChild():this.openChild()},t.prototype.closeIfIsChild=function(e){var n=this.getParentComponent();n&&n instanceof K0&&(e&&e.preventDefault(),n.closeSubMenu(),n.getGui().focus())},t.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},t.prototype.findNextItem=function(e){var n=this.menuItems.filter(function(d){return!d.isDisabled()});if(n.length){if(!this.activeMenuItem)return e?pr(n):n[0];e&&n.reverse();for(var i,o=!1,s=0;s<n.length;s++){var a=n[s];if(o){i=a;break}a===this.activeMenuItem&&(o=!0)}return i||this.activeMenuItem}},t.prototype.destroy=function(){this.clearActiveItem(),r.prototype.destroy.call(this)},kW([F("focusService")],t.prototype,"focusService",void 0),kW([rt],t.prototype,"postConstruct",null),t}(xA),Mee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fee=function(r){function t(e){var n=r.call(this)||this;return n.wrappedComponent=e,n.setTemplateFromElement(e.getGui()),n}return Mee(t,r),t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(n){return e.onTabKeyDown(n)},handleKeyDown:function(n){return e.handleKeyDown(n)}})},t.prototype.handleKeyDown=function(e){e.key===Fe.ESCAPE&&this.closePanel()},t.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},t.prototype.closePanel=function(){var e=this.parentComponent;e.closeSubMenu(),setTimeout(function(){return e.getGui().focus()},0)},function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(xA),Lee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),GW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},K0=function(r){function t(e){var n=r.call(this)||this;return n.params=e,n.isActive=!1,n.subMenuIsOpen=!1,n.setTemplate('<div class="'+n.getClassName()+'" tabindex="-1" role="treeitem"></div>'),n}return Lee(t,r),t.prototype.init=function(){var e=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var n=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),mL(n,!0)):(this.addGuiEventListener("click",function(i){return e.onItemSelected(i)}),this.addGuiEventListener("keydown",function(i){(i.key===Fe.ENTER||i.key===Fe.SPACE)&&(i.preventDefault(),e.onItemSelected(i))}),this.addGuiEventListener("mousedown",function(i){i.stopPropagation(),i.preventDefault()}),this.addGuiEventListener("mouseenter",function(){return e.onMouseEnter()}),this.addGuiEventListener("mouseleave",function(){return e.onMouseLeave()})),this.params.cssClasses&&this.params.cssClasses.forEach(function(i){return e.addCssClass(i)})},t.prototype.isDisabled=function(){return!!this.params.disabled},t.prototype.openSubMenu=function(e){var n=this;if(void 0===e&&(e=!1),this.closeSubMenu(),this.params.subMenu){var o,i=ls('<div class="ag-menu" role="presentation"></div>');if(this.params.subMenu instanceof Array){var s=r2(this.getGui()),a=isNaN(s)?1:s+1,d=this.createBean(new Nee(a));d.setParentComponent(this),d.addMenuItems(this.params.subMenu),i.appendChild(d.getGui()),this.addManagedListener(d,t.EVENT_MENU_ITEM_SELECTED,function(z){return n.dispatchEvent(z)}),d.addGuiEventListener("mouseenter",function(){return n.cancelDeactivate()}),o=function(){return n.destroyBean(d)},e&&setTimeout(function(){return d.activateFirstItem()},0)}else{var f=this.params.subMenu,g=this.createBean(new Fee(f));g.setParentComponent(this);var C=g.getGui(),E="mouseenter",T=function(){return n.cancelDeactivate()};C.addEventListener(E,T),o=function(){return C.removeEventListener(E,T)},i.appendChild(C),f.afterGuiAttached&&setTimeout(function(){return f.afterGuiAttached()},0)}var I=this.getGui(),M=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:I,ePopup:i,shouldSetMaxHeight:this.params.shouldSetMaxHeight}),k=this.localeService.getLocaleTextFunc(),W=this.popupService.addPopup({modal:!0,eChild:i,positionCallback:M,anchorToElement:I,ariaLabel:k("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,fc(I,!0),this.hideSubMenu=function(){W&&W.hideFunc(),n.subMenuIsOpen=!1,fc(I,!1),o()}}},t.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,fc(this.getGui(),!1))},t.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},t.prototype.activate=function(e){var n=this;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout(function(){n.isAlive()&&n.isActive&&n.openSubMenu()},300),this.onItemActivated())},t.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},t.prototype.addIcon=function(){if(this.params.checked||this.params.icon||!this.params.isCompact){var e=ls('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?e.appendChild(no("check",this.gridOptionsService)):this.params.icon&&(I0(this.params.icon)?e.appendChild(this.params.icon):"string"==typeof this.params.icon?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}},t.prototype.addName=function(){if(this.params.name||!this.params.isCompact){var e=ls('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(e)}},t.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new qL(this)))},t.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},t.prototype.addShortcut=function(){if(this.params.shortcut||!this.params.isCompact){var e=ls('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(e)}},t.prototype.addSubMenu=function(){if(this.params.subMenu||!this.params.isCompact){var e=ls('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),n=this.getGui();if(this.params.subMenu){var i=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";fc(n,!1),e.appendChild(no(i,this.gridOptionsService))}n.appendChild(e)}},t.prototype.onItemSelected=function(e){this.params.action?this.params.action():this.openSubMenu(e&&"keydown"===e.type),(!this.params.subMenu||this.params.action)&&this.dispatchEvent({type:t.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e})},t.prototype.onItemActivated=function(){this.dispatchEvent({type:t.EVENT_MENU_ITEM_ACTIVATED,menuItem:this})},t.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},t.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},t.prototype.onMouseEnter=function(){var e=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(function(){return e.activate(!0)},t.ACTIVATION_DELAY):this.activate(!0)},t.prototype.onMouseLeave=function(){var e=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(function(){return e.deactivate()},t.ACTIVATION_DELAY):this.deactivate()},t.prototype.getClassName=function(e){var n=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?n+"-"+e:n},t.EVENT_MENU_ITEM_SELECTED="menuItemSelected",t.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",t.ACTIVATION_DELAY=80,GW([F("popupService")],t.prototype,"popupService",void 0),GW([rt],t.prototype,"init",null),t}(Rn),kee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),q0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},VW=function(r){function t(e){var n=r.call(this,t.getTemplate(e))||this;return n.closable=!0,n.config=e,n}return kee(t,r),t.getTemplate=function(e){var n=e&&e.cssIdentifier||"default";return'<div class="ag-panel ag-'+n+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+n+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+n+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+n+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+n+'-panel-content-wrapper"></div>\n        </div>'},t.prototype.postConstruct=function(){var e=this,n=this.config,i=n.component,o=n.closable,s=n.hideTitleBar,a=n.title,d=n.minWidth,f=void 0===d?250:d,g=n.width,C=n.minHeight,E=void 0===C?250:C,T=n.height,I=n.centered,M=n.popup,k=n.x,W=n.y;this.positionableFeature=new U2(this.getGui(),{minWidth:f,width:g,minHeight:E,height:T,centered:I,x:k,y:W,popup:M,calculateTopBuffer:function(){return e.positionableFeature.getHeight()-e.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var z=this.getGui();i&&this.setBodyComponent(i),s?Wn(this.eTitleBar,!1):(a&&this.setTitle(a),this.setClosable(o??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(J){var re=e.gridOptionsService.getDocument();if(z.contains(J.relatedTarget)||z.contains(re.activeElement)||e.eTitleBarButtons.contains(J.target))J.preventDefault();else{var ce=e.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");ce&&ce.focus()}}),(!M||!this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},t.prototype.renderComponent=function(){var e=this,n=this.getGui();n.focus(),this.close=function(){n.parentElement.removeChild(n),e.destroy()}},t.prototype.getHeight=function(){return this.positionableFeature.getHeight()},t.prototype.setHeight=function(e){this.positionableFeature.setHeight(e)},t.prototype.getWidth=function(){return this.positionableFeature.getWidth()},t.prototype.setWidth=function(e){this.positionableFeature.setWidth(e)},t.prototype.setClosable=function(e){if(e!==this.closable&&(this.closable=e),e){var n=this.closeButtonComp=new Rn(t.CLOSE_BTN_TEMPLATE);this.getContext().createBean(n);var i=n.getGui(),o=no("close",this.gridOptionsService);o.classList.add("ag-panel-title-bar-button-icon"),i.appendChild(o),this.addTitleBarButton(n),n.addManagedListener(i,"click",this.onBtClose.bind(this))}else this.closeButtonComp&&((i=this.closeButtonComp.getGui()).parentElement.removeChild(i),this.closeButtonComp=this.destroyBean(this.closeButtonComp))},t.prototype.setBodyComponent=function(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())},t.prototype.addTitleBarButton=function(e,n){var i=this.eTitleBarButtons,o=i.children,s=o.length;null==n&&(n=s),n=Math.max(0,Math.min(n,s)),e.addCssClass("ag-panel-title-bar-button");var a=e.getGui();0===n?i.insertAdjacentElement("afterbegin",a):n===s?i.insertAdjacentElement("beforeend",a):o[n-1].insertAdjacentElement("afterend",a),e.setParentComponent(this)},t.prototype.getBodyHeight=function(){return D0(this.eContentWrapper)},t.prototype.getBodyWidth=function(){return iA(this.eContentWrapper)},t.prototype.setTitle=function(e){this.eTitle.innerText=e},t.prototype.onBtClose=function(){this.close()},t.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&e.offsetParent&&this.close(),r.prototype.destroy.call(this)},t.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',q0([ut("eContentWrapper")],t.prototype,"eContentWrapper",void 0),q0([ut("eTitleBar")],t.prototype,"eTitleBar",void 0),q0([ut("eTitleBarButtons")],t.prototype,"eTitleBarButtons",void 0),q0([ut("eTitle")],t.prototype,"eTitle",void 0),q0([rt],t.prototype,"postConstruct",null),t}(Rn),Gee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),LA=function(){return LA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},LA.apply(this,arguments)},Hee=function(r){function t(e){var n=r.call(this,LA(LA({},e),{popup:!0}))||this;return n.isMaximizable=!1,n.isMaximized=!1,n.maximizeListeners=[],n.resizeListenerDestroy=null,n.lastPosition={x:0,y:0,width:0,height:0},n}return Gee(t,r),t.prototype.postConstruct=function(){var e=this,n=this.getGui(),i=this.config,o=i.movable,s=i.resizable,a=i.maximizable;this.addCssClass("ag-dialog"),r.prototype.postConstruct.call(this),this.addManagedListener(n,"focusin",function(d){n.contains(d.relatedTarget)||e.popupService.bringPopupToFront(n)}),o&&this.setMovable(o),a&&this.setMaximizable(a),s&&this.setResizable(s)},t.prototype.renderComponent=function(){var e=this.getGui(),n=this.config,i=n.alwaysOnTop,o=n.modal,s=n.title,a=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:o,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:i,ariaLabel:s||a("ariaLabelDialog","Dialog")});d&&(this.close=d.hideFunc)},t.prototype.toggleMaximize=function(){var e=this.positionableFeature.getPosition();if(this.isMaximized){var n=this.lastPosition,i=n.x,o=n.y,a=n.height;this.setWidth(n.width),this.setHeight(a),this.positionableFeature.offsetElement(i,o)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},t.prototype.refreshMaximizeIcon=function(){Wn(this.maximizeIcon,!this.isMaximized),Wn(this.minimizeIcon,this.isMaximized)},t.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(e){return e()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},t.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),r.prototype.destroy.call(this)},t.prototype.setResizable=function(e){this.positionableFeature.setResizable(e)},t.prototype.setMovable=function(e){this.positionableFeature.setMovable(e,this.eTitleBar)},t.prototype.setMaximizable=function(e){var n=this;if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var i=this.eTitleBar;if(i&&e!==this.isMaximizable){var o=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),o.addManagedListener(o.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(o,0),this.maximizeListeners.push(this.addManagedListener(i,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){n.isMaximized=!1,n.refreshMaximizeIcon()})}},t.prototype.buildMaximizeAndMinimizeElements=function(){var e=this.maximizeButtonComp=this.createBean(new Rn('<div class="ag-dialog-button"></span>')),n=e.getGui();return this.maximizeIcon=no("maximize",this.gridOptionsService),n.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=no("minimize",this.gridOptionsService),n.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e},function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([F("popupService")],t.prototype,"popupService",void 0),t}(VW),Bee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Y0=function(){return Y0=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},Y0.apply(this,arguments)},oh=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Uee=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},Z0=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}var e;return Bee(t,r),e=t,t.addKeyboardModeEvents=function(n,i){var o=e.instancesMonitored.get(n);o&&o.length>0?-1===o.indexOf(i)&&o.push(i):(e.instancesMonitored.set(n,[i]),n.addEventListener("keydown",e.toggleKeyboardMode),n.addEventListener("mousedown",e.toggleKeyboardMode))},t.removeKeyboardModeEvents=function(n,i){var o=e.instancesMonitored.get(n),s=[];o&&o.length&&(s=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Uee(arguments[t]));return r}(o).filter(function(a){return a!==i}),e.instancesMonitored.set(n,s)),0===s.length&&(n.removeEventListener("keydown",e.toggleKeyboardMode),n.removeEventListener("mousedown",e.toggleKeyboardMode))},t.toggleKeyboardMode=function(n){var i=e.keyboardModeActive,o="keydown"===n.type;if(!(o&&(n.ctrlKey||n.metaKey||n.altKey)||i&&o||!i&&!o)){e.keyboardModeActive=o;var s=n.target.ownerDocument;if(s){var a=e.instancesMonitored.get(s);a&&a.forEach(function(d){d.dispatchEvent({type:o?V.EVENT_KEYBOARD_FOCUS:V.EVENT_MOUSE_FOCUS})})}}},t.prototype.init=function(){var n=this,i=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,i),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_GROUP_OPENED,i),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,i),this.ctrlsService.whenReady(function(o){n.gridCtrl=o.gridCtrl;var s=n.gridOptionsService.getDocument();e.addKeyboardModeEvents(s,n.gridCtrl),n.addDestroyFunc(function(){return n.unregisterGridCompController(n.gridCtrl)})})},t.prototype.unregisterGridCompController=function(n){var i=this.gridOptionsService.getDocument();e.removeKeyboardModeEvents(i,n)},t.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var n=this.focusedCellPosition.column,i=this.columnModel.getGridColumn(n.getId());n!==i&&this.clearFocusedCell()}},t.prototype.isKeyboardMode=function(){return e.keyboardModeActive},t.prototype.getFocusCellToUseAfterRefresh=function(){var n=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(n.activeElement,Fy.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},t.prototype.getFocusHeaderToUseAfterRefresh=function(){var n=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(n.activeElement,bA.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},t.prototype.isDomDataMissingInHierarchy=function(n,i){for(var o=n;o;){if(this.gridOptionsService.getDomData(o,i))return!1;o=o.parentNode}return!0},t.prototype.getFocusedCell=function(){return this.focusedCellPosition},t.prototype.getFocusEventParams=function(){var n=this.focusedCellPosition,i=n.rowIndex,o=n.rowPinned,a={rowIndex:i,rowPinned:o,column:n.column,isFullWidthCell:!1},d=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:o});return d&&(a.isFullWidthCell=d.isFullWidth()),a},t.prototype.clearFocusedCell=function(){if(null!=this.focusedCellPosition){var n=Y0({type:V.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(n)}},t.prototype.setFocusedCell=function(n){var o=n.rowIndex,s=n.rowPinned,a=n.forceBrowserFocus,d=void 0!==a&&a,f=n.preventScrollOnBrowserFocus,g=void 0!==f&&f,C=this.columnModel.getGridColumn(n.column);if(C){this.focusedCellPosition=C?{rowIndex:o,rowPinned:jg(s),column:C}:null;var E=Y0(Y0({type:V.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:d,preventScrollOnBrowserFocus:g,floating:null});this.eventService.dispatchEvent(E)}else this.focusedCellPosition=null},t.prototype.isCellFocused=function(n){return null!=this.focusedCellPosition&&this.focusedCellPosition.column===n.column&&this.isRowFocused(n.rowIndex,n.rowPinned)},t.prototype.isRowNodeFocused=function(n){return this.isRowFocused(n.rowIndex,n.rowPinned)},t.prototype.isHeaderWrapperFocused=function(n){if(null==this.focusedHeaderPosition)return!1;var i=n.getColumnGroupChild(),o=n.getRowIndex(),s=n.getPinned(),a=this.focusedHeaderPosition,d=a.column;return i===d&&o===a.headerRowIndex&&s==d.getPinned()},t.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},t.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},t.prototype.setFocusedHeader=function(n,i){this.focusedHeaderPosition={headerRowIndex:n,column:i}},t.prototype.focusHeaderPosition=function(n){var i=n.direction,o=n.fromTab,a=n.event,d=n.headerPosition;if(n.allowUserOverride){var C,f=this.getFocusedHeader(),g=this.headerNavigationService.getHeaderRowCount();o?(C=this.gridOptionsService.getCallback("tabToNextHeader"))&&(d=C({backwards:"Before"===i,previousHeaderPosition:f,nextHeaderPosition:d,headerRowCount:g})):(C=this.gridOptionsService.getCallback("navigateToNextHeader"))&&a&&(d=C({key:a.key,previousHeaderPosition:f,nextHeaderPosition:d,headerRowCount:g,event:a}))}return!!d&&(-1===d.headerRowIndex?this.focusGridView(d.column):(this.headerNavigationService.scrollToColumn(d.column,i),this.ctrlsService.getHeaderRowContainerCtrl(d.column.getPinned()).focusHeader(d.headerRowIndex,d.column,a)))},t.prototype.focusFirstHeader=function(){var n=this.columnModel.getAllDisplayedColumns()[0];return!!n&&(n.getParent()&&(n=this.columnModel.getColumnGroupAtLevel(n,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:n}}))},t.prototype.focusLastHeader=function(n){var i=this.headerNavigationService.getHeaderRowCount()-1,o=pr(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:o},event:n})},t.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},t.prototype.isRowFocused=function(n,i){return null!=this.focusedCellPosition&&this.focusedCellPosition.rowIndex===n&&this.focusedCellPosition.rowPinned===jg(i)},t.prototype.findFocusableElements=function(n,i,o){void 0===o&&(o=!1);var a=xL;i&&(a+=", "+i),o&&(a+=', [tabindex="-1"]');var E,d=Array.prototype.slice.apply(n.querySelectorAll(E2)),f=Array.prototype.slice.apply(n.querySelectorAll(a));return f.length?(E=f,d.filter(function(T){return-1===E.indexOf(T)})):d},t.prototype.focusInto=function(n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var s=this.findFocusableElements(n,null,o),a=i?pr(s):s[0];return!!a&&(a.focus(),!0)},t.prototype.findFocusableElementBeforeTabGuard=function(n,i){if(!i)return null;var o=this.findFocusableElements(n),s=o.indexOf(i);if(-1===s)return null;for(var a=-1,d=s-1;d>=0;d--)if(o[d].classList.contains(ky.TAB_GUARD_TOP)){a=d;break}return a<=0?null:o[a-1]},t.prototype.findNextFocusableElement=function(n,i,o){void 0===n&&(n=this.eGridDiv);var s=this.findFocusableElements(n,i?':not([tabindex="-1"])':null),d=this.gridOptionsService.getDocument().activeElement,g=(i?s.findIndex(function(C){return C.contains(d)}):s.indexOf(d))+(o?-1:1);return g<0||g>=s.length?null:s[g]},t.prototype.isTargetUnderManagedComponent=function(n,i){if(!i)return!1;var o=n.querySelectorAll("."+qg.FOCUS_MANAGED_CLASS);if(!o.length)return!1;for(var s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1},t.prototype.findTabbableParent=function(n,i){void 0===i&&(i=5);for(var o=0;n&&null===tA(n)&&++o<=i;)n=n.parentElement;return null===tA(n)?null:n},t.prototype.focusGridView=function(n,i){if(this.gridOptionsService.is("suppressCellFocus"))return i?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var o=i?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!o)return!1;var s=o.rowIndex,a=o.rowPinned,d=this.getFocusedHeader();return!n&&d&&(n=d.column),!(null==s||!n)&&(this.navigationService.ensureCellVisible({rowIndex:s,column:n,rowPinned:a}),this.setFocusedCell({rowIndex:s,column:n,rowPinned:jg(a),forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:s,rowPinned:a,column:n}),!0)},t.prototype.focusNextGridCoreContainer=function(n){return!!this.gridCtrl.focusNextInnerContainer(n)||(!n&&!this.gridCtrl.isDetailGrid()&&this.gridCtrl.forceFocusOutOfContainer(),!1)},t.AG_KEYBOARD_FOCUS="ag-keyboard-focus",t.keyboardModeActive=!1,t.instancesMonitored=new Map,oh([F("eGridDiv")],t.prototype,"eGridDiv",void 0),oh([F("columnModel")],t.prototype,"columnModel",void 0),oh([F("headerNavigationService")],t.prototype,"headerNavigationService",void 0),oh([F("rowRenderer")],t.prototype,"rowRenderer",void 0),oh([F("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),oh([tr("rangeService")],t.prototype,"rangeService",void 0),oh([F("navigationService")],t.prototype,"navigationService",void 0),oh([F("ctrlsService")],t.prototype,"ctrlsService",void 0),oh([rt],t.prototype,"init",null),e=oh([Rt("focusService")],t)}(Ye),Wee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Q0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},$ee=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},Jf=(()=>(function(r){r[r.vertical=0]="vertical",r[r.horizontal=1]="horizontal"}(Jf||(Jf={})),Jf))(),Kee=0,qee=function(r){function t(){var n=null!==r&&r.apply(this,arguments)||this;return n.popupList=[],n}var e;return Wee(t,r),e=t,t.prototype.postConstruct=function(){var n=this;this.ctrlsService.whenReady(function(i){n.gridCtrl=i.gridCtrl,n.addManagedListener(n.gridCtrl,V.EVENT_KEYBOARD_FOCUS,function(){n.popupList.forEach(function(o){return o.element.classList.add(Z0.AG_KEYBOARD_FOCUS)})}),n.addManagedListener(n.gridCtrl,V.EVENT_MOUSE_FOCUS,function(){n.popupList.forEach(function(o){return o.element.classList.remove(Z0.AG_KEYBOARD_FOCUS)})})})},t.prototype.getPopupParent=function(){return this.gridOptionsService.get("popupParent")||this.gridCtrl.getGui()},t.prototype.positionPopupForMenu=function(n){var i=n.eventSource.getBoundingClientRect(),o=this.getParentRect();this.checkClearMaxHeight(n.ePopup,n.shouldSetMaxHeight);var s=this.keepXYWithinBounds(n.ePopup,i.top-o.top,Jf.vertical),a=n.ePopup.clientWidth>0?n.ePopup.clientWidth:200;n.ePopup.style.minWidth=a+"px";var g,f=o.right-o.left-a;function C(){return i.right-o.left-2}function E(){return i.left-o.left-a}this.gridOptionsService.is("enableRtl")?((g=E())<0&&(g=C()),g>f&&(g=0)):((g=C())>f&&(g=E()),g<0&&(g=0)),n.ePopup.style.left=g+"px",n.ePopup.style.top=s+"px",this.checkSetMaxHeight(n.ePopup,s,n.shouldSetMaxHeight)},t.prototype.positionPopupUnderMouseEvent=function(n){var i=this;this.positionPopup({ePopup:n.ePopup,nudgeX:n.nudgeX,nudgeY:n.nudgeY,keepWithinBounds:!0,skipObserver:n.skipObserver,shouldSetMaxHeight:n.shouldSetMaxHeight,updatePosition:function(){return i.calculatePointerAlign(n.mouseEvent)},postProcessCallback:function(){return i.callPostProcessPopup(n.type,n.ePopup,null,n.mouseEvent,n.column,n.rowNode)}})},t.prototype.calculatePointerAlign=function(n){var i=this.getParentRect();return{x:n.clientX-i.left,y:n.clientY-i.top}},t.prototype.positionPopupByComponent=function(n){var i=this,o=n.eventSource.getBoundingClientRect(),s=n.alignSide||"left",a=n.position||"over",d=this.getParentRect();this.positionPopup({ePopup:n.ePopup,nudgeX:n.nudgeX,nudgeY:n.nudgeY,keepWithinBounds:n.keepWithinBounds,shouldSetMaxHeight:n.shouldSetMaxHeight,updatePosition:function(){var g=o.left-d.left;return"right"===s&&(g-=n.ePopup.offsetWidth-o.width),{x:g,y:"over"===a?o.top-d.top:o.top-d.top+o.height}},postProcessCallback:function(){return i.callPostProcessPopup(n.type,n.ePopup,n.eventSource,null,n.column,n.rowNode)}})},t.prototype.callPostProcessPopup=function(n,i,o,s,a,d){var f=this.gridOptionsService.getCallback("postProcessPopup");f&&f({column:a,rowNode:d,ePopup:i,type:n,eventSource:o,mouseEvent:s})},t.prototype.positionPopup=function(n){var i=this,o=n.ePopup,s=n.keepWithinBounds,a=n.nudgeX,d=n.nudgeY,f=n.skipObserver,g=n.shouldSetMaxHeight,C=n.updatePosition,E={width:0,height:0},T=function(M){void 0===M&&(M=!1);var k=C(),W=k.x,z=k.y;M&&o.clientWidth===E.width&&o.clientHeight===E.height||(E.width=o.clientWidth,E.height=o.clientHeight,a&&(W+=a),d&&(z+=d),i.checkClearMaxHeight(o,g),s&&(W=i.keepXYWithinBounds(o,W,Jf.horizontal),z=i.keepXYWithinBounds(o,z,Jf.vertical)),o.style.left=W+"px",o.style.top=z+"px",i.checkSetMaxHeight(o,z,g),n.postProcessCallback&&n.postProcessCallback())};if(T(),!f){var I=this.resizeObserverService.observeResize(o,function(){return T(!0)});setTimeout(function(){return I()},e.WAIT_FOR_POPUP_CONTENT_RESIZE)}},t.prototype.getActivePopups=function(){return this.popupList.map(function(n){return n.element})},t.prototype.getPopupList=function(){return this.popupList},t.prototype.getParentRect=function(){var n=this.gridOptionsService.getDocument(),i=this.getPopupParent();i===n.body?i=n.documentElement:"static"===getComputedStyle(i).position&&(i=i.offsetParent);var o=getComputedStyle(i),s=i.getBoundingClientRect();return{top:s.top+parseFloat(o.borderTopWidth)||0,left:s.left+parseFloat(o.borderLeftWidth)||0,right:s.right+parseFloat(o.borderRightWidth)||0,bottom:s.bottom+parseFloat(o.borderBottomWidth)||0}},t.prototype.keepXYWithinBounds=function(n,i,o){var s=o===Jf.vertical,a=s?"clientHeight":"clientWidth",d=s?"top":"left",f=s?"offsetHeight":"offsetWidth",g=s?"scrollTop":"scrollLeft",C=this.gridOptionsService.getDocument(),E=C.documentElement,T=this.getPopupParent(),I=T.getBoundingClientRect(),M=C.documentElement.getBoundingClientRect(),k=T===C.body,W=n[f],J=k?(s?LL:oA)(E)+E[g]:T[a];k&&(J-=Math.abs(M[d]-I[d]));var re=J-W;return Math.min(Math.max(i,0),Math.abs(re))},t.prototype.keepPopupPositionedRelativeTo=function(n){var i=this,o=this.getPopupParent(),s=o.getBoundingClientRect(),a=n.element.getBoundingClientRect(),d=s.top-a.top,f=s.left-a.left,g=d,C=f,E=n.ePopup.style.top,T=parseInt(E.substring(0,E.length-1),10),I=n.ePopup.style.left,M=parseInt(I.substring(0,I.length-1),10);return new ta(function(k){i.getFrameworkOverrides().setInterval(function(){var W=o.getBoundingClientRect(),z=n.element.getBoundingClientRect();if(0==z.top&&0==z.left&&0==z.height&&0==z.width)n.hidePopup();else{var re=W.top-z.top;if(re!=g){var ce=i.keepXYWithinBounds(n.ePopup,T+d-re,Jf.vertical);n.ePopup.style.top=ce+"px"}g=re;var Re=W.left-z.left;if(Re!=C){var Xe=i.keepXYWithinBounds(n.ePopup,M+f-Re,Jf.horizontal);n.ePopup.style.left=Xe+"px"}C=Re}},200).then(function(W){k(function(){null!=W&&window.clearInterval(W)})})})},t.prototype.addPopup=function(n){var i,o=this,s=n.modal,a=n.eChild,d=n.closeOnEsc,f=n.closedCallback,g=n.click,C=n.alwaysOnTop,E=n.afterGuiAttached,T=n.positionCallback,I=n.anchorToElement,M=n.ariaLabel,k=this.gridOptionsService.getDocument(),W=new ta(function(mn){return mn(function(){})});if(!k)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){},stopAnchoringPromise:W};var z=this.popupList.findIndex(function(mn){return mn.element===a});if(-1!==z){var J=this.popupList[z];return{hideFunc:J.hideFunc,stopAnchoringPromise:J.stopAnchoringPromise}}var re=this.getPopupParent();null==a.style.top&&(a.style.top="0px"),null==a.style.left&&(a.style.left="0px");var ce=document.createElement("div"),Re=this.environment.getTheme().allThemes;Re.length&&(i=ce.classList).add.apply(i,function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat($ee(arguments[t]));return r}(Re)),ce.classList.add("ag-popup"),a.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),a.hasAttribute("role")||Ko(a,"dialog"),Sy(a,M),this.focusService.isKeyboardMode()&&a.classList.add(Z0.AG_KEYBOARD_FOCUS),ce.appendChild(a),re.appendChild(ce),C?this.setAlwaysOnTop(ce,!0):this.bringPopupToFront(ce);var Xe=!1,Ke=function(mn){ce.contains(k.activeElement)&&mn.key===Fe.ESCAPE&&an({keyboardEvent:mn})},At=function(mn){return an({mouseEvent:mn})},Ut=function(mn){return an({touchEvent:mn})},an=function(mn){void 0===mn&&(mn={});var nr=mn.mouseEvent,ki=mn.touchEvent,gr=mn.keyboardEvent;o.isEventFromCurrentPopup({mouseEvent:nr,touchEvent:ki},a)||o.isEventSameChainAsOriginalEvent({originalMouseEvent:g,mouseEvent:nr,touchEvent:ki})||Xe||(Xe=!0,re.removeChild(ce),k.removeEventListener("keydown",Ke),k.removeEventListener("mousedown",At),k.removeEventListener("touchstart",Ut),k.removeEventListener("contextmenu",At),o.eventService.removeEventListener(V.EVENT_DRAG_STARTED,At),f&&f(nr||ki||gr),o.popupList=o.popupList.filter(function(Dn){return Dn.element!==a}),W&&W.then(function(Dn){return Dn&&Dn()}))};return E&&E({hidePopup:an}),window.setTimeout(function(){d&&k.addEventListener("keydown",Ke),s&&(k.addEventListener("mousedown",At),o.eventService.addEventListener(V.EVENT_DRAG_STARTED,At),k.addEventListener("touchstart",Ut),k.addEventListener("contextmenu",At))},0),T&&T(),I&&(W=this.keepPopupPositionedRelativeTo({element:I,ePopup:a,hidePopup:an})),this.popupList.push({element:a,wrapper:ce,hideFunc:an,stopAnchoringPromise:W,instanceId:Kee++,isAnchored:!!I}),{hideFunc:an,stopAnchoringPromise:W}},t.prototype.hasAnchoredPopup=function(){return this.popupList.some(function(n){return n.isAnchored})},t.prototype.isEventFromCurrentPopup=function(n,i){var a=n.mouseEvent||n.touchEvent;if(!a)return!1;var d=this.popupList.findIndex(function(C){return C.element===i});if(-1===d)return!1;for(var f=d;f<this.popupList.length;f++)if(ZI(this.popupList[f].element,a))return!0;return this.isElementWithinCustomPopup(a.target)},t.prototype.isElementWithinCustomPopup=function(n){for(var i=this.gridOptionsService.getDocument();n&&n!==i.body;){if(n.classList.contains("ag-custom-component-popup")||null===n.parentElement)return!0;n=n.parentElement}return!1},t.prototype.isEventSameChainAsOriginalEvent=function(n){var i=n.originalMouseEvent,o=n.mouseEvent,s=n.touchEvent,a=null;if(o?a=o:s&&(a=s.touches[0]),a&&i){var f=o?o.screenY:0,g=Math.abs(i.screenX-(o?o.screenX:0))<5,C=Math.abs(i.screenY-f)<5;if(g&&C)return!0}return!1},t.prototype.getWrapper=function(n){for(;!n.classList.contains("ag-popup")&&n.parentElement;)n=n.parentElement;return n.classList.contains("ag-popup")?n:null},t.prototype.setAlwaysOnTop=function(n,i){var o=this.getWrapper(n);o&&(o.classList.toggle("ag-always-on-top",!!i),i&&this.bringPopupToFront(o))},t.prototype.bringPopupToFront=function(n){var i=this.getPopupParent(),o=Array.prototype.slice.call(i.querySelectorAll(".ag-popup")),s=o.length,a=Array.prototype.slice.call(i.querySelectorAll(".ag-popup.ag-always-on-top")),d=a.length,f=this.getWrapper(n);if(f&&!(s<=1)&&i.contains(n)){var g=o.indexOf(f),C=f.querySelectorAll("div"),E=[];for(C.forEach(function(k){0!==k.scrollTop&&E.push([k,k.scrollTop])}),d?f.classList.contains("ag-always-on-top")?g!==s-1&&pr(a).insertAdjacentElement("afterend",f):g!==s-d-1&&a[0].insertAdjacentElement("beforebegin",f):g!==s-1&&pr(o).insertAdjacentElement("afterend",f);E.length;){var I=E.pop();I[0].scrollTop=I[1]}this.eventService.dispatchEvent({type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper:f})}},t.prototype.checkClearMaxHeight=function(n,i){i&&n.style.removeProperty("max-height")},t.prototype.checkSetMaxHeight=function(n,i,o){o&&"100%"===getComputedStyle(n).maxHeight&&(n.style.maxHeight="calc(100% - "+i+"px)")},t.WAIT_FOR_POPUP_CONTENT_RESIZE=200,Q0([F("focusService")],t.prototype,"focusService",void 0),Q0([F("ctrlsService")],t.prototype,"ctrlsService",void 0),Q0([F("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Q0([rt],t.prototype,"postConstruct",null),e=Q0([Rt("popupService")],t)}(Ye),Yee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Mk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Zee=(function(r){function t(e,n,i){void 0===e&&(e="default"),void 0===n&&(n="listbox");var o=r.call(this,t.getTemplate(e))||this;return o.cssIdentifier=e,o.ariaRole=n,o.listName=i,o.renderedRows=new Map,o.rowHeight=20,o}Yee(t,r),t.prototype.postConstruct=function(){var e=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(n){return e.onFocusIn(n)},onFocusOut:function(n){return e.onFocusOut(n)},focusInnerElement:function(n){return e.focusInnerElement(n)},onTabKeyDown:function(n){return e.onTabKeyDown(n)},handleKeyDown:function(n){return e.handleKeyDown(n)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},t.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},t.prototype.setAriaProperties=function(){var n=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),i=this.eContainer;Ko(i,this.ariaRole),Sy(i,n)},t.prototype.addResizeObserver=function(){var e=this,i=this.resizeObserverService.observeResize(this.getGui(),function(){return e.drawVirtualRows()});this.addDestroyFunc(i)},t.prototype.focusInnerElement=function(e){this.focusRow(e?this.model.getRowCount()-1:0)},t.prototype.onFocusIn=function(e){var n=e.target;return n.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=i2(n)-1),!1},t.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},t.prototype.handleKeyDown=function(e){switch(e.key){case Fe.UP:case Fe.DOWN:this.navigate(e.key===Fe.UP)&&e.preventDefault()}},t.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():this.forceFocusOutOfContainer(e.shiftKey)},t.prototype.navigate=function(e){if(null==this.lastFocusedRowIndex)return!1;var n=this.lastFocusedRowIndex+(e?-1:1);return!(n<0||n>=this.model.getRowCount()||(this.focusRow(n),0))},t.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},t.prototype.focusRow=function(e){var n=this;this.ensureIndexVisible(e),window.setTimeout(function(){if(n.isAlive()){var i=n.renderedRows.get(e);i&&i.eDiv.focus()}},10)},t.prototype.getComponentAt=function(e){var n=this.renderedRows.get(e);return n&&n.rowComponent},t.prototype.forEachRenderedRow=function(e){this.renderedRows.forEach(function(n,i){return e(n.rowComponent,i)})},t.getTemplate=function(e){return'\n            <div class="ag-virtual-list-viewport ag-'+e+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+e+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},t.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},t.prototype.ensureIndexVisible=function(e){var n=this.model.getRowCount();if("number"!=typeof e||e<0||e>=n)console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e);else{var i=e*this.rowHeight,o=i+this.rowHeight,s=this.getGui(),a=s.scrollTop,d=s.offsetHeight,C=a+d<o;a>i?s.scrollTop=i:C&&(s.scrollTop=o-d)}},t.prototype.setComponentCreator=function(e){this.componentCreator=e},t.prototype.setComponentUpdater=function(e){this.componentUpdater=e},t.prototype.getRowHeight=function(){return this.rowHeight},t.prototype.getScrollTop=function(){return this.getGui().scrollTop},t.prototype.setRowHeight=function(e){this.rowHeight=e,this.refresh()},t.prototype.refresh=function(e){var n=this;if(null!=this.model&&this.isAlive()){var i=this.model.getRowCount();this.eContainer.style.height=i*this.rowHeight+"px",xj(function(){return n.eContainer.clientHeight>=i*n.rowHeight},function(){n.isAlive()&&(n.canSoftRefresh(e)?n.drawVirtualRows(!0):(n.clearVirtualRows(),n.drawVirtualRows()))})}},t.prototype.canSoftRefresh=function(e){return!!(e&&this.renderedRows.size&&"function"==typeof this.model.areRowsEqual&&this.componentUpdater)},t.prototype.clearVirtualRows=function(){var e=this;this.renderedRows.forEach(function(n,i){return e.removeRow(i)})},t.prototype.drawVirtualRows=function(e){if(this.isAlive()){var n=this.getGui(),i=n.scrollTop,o=i+n.offsetHeight,s=Math.floor(i/this.rowHeight),a=Math.floor(o/this.rowHeight);this.ensureRowsRendered(s,a,e)}},t.prototype.ensureRowsRendered=function(e,n,i){var o=this;this.renderedRows.forEach(function(a,d){(d<e||d>n)&&d!==o.lastFocusedRowIndex&&o.removeRow(d)}),i&&this.refreshRows();for(var s=e;s<=n;s++)this.renderedRows.has(s)||s<this.model.getRowCount()&&this.insertRow(s)},t.prototype.insertRow=function(e){var n=this,i=this.model.getRow(e),o=document.createElement("div");if(o.classList.add("ag-virtual-list-item","ag-"+this.cssIdentifier+"-virtual-list-item"),Ko(o,"tree"===this.ariaRole?"treeitem":"option"),vL(o,this.model.getRowCount()),yL(o,e+1),o.setAttribute("tabindex","-1"),"function"==typeof this.model.isRowSelected){var s=this.model.isRowSelected(e);Ow(o,!!s),m2(o,s)}o.style.height=this.rowHeight+"px",o.style.top=this.rowHeight*e+"px";var a=this.componentCreator(i,o);a.addGuiEventListener("focusin",function(){return n.lastFocusedRowIndex=e}),o.appendChild(a.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",o):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",o):this.eContainer.appendChild(o),this.renderedRows.set(e,{rowComponent:a,eDiv:o,value:i})},t.prototype.removeRow=function(e){var n=this.renderedRows.get(e);this.eContainer.removeChild(n.eDiv),this.destroyBean(n.rowComponent),this.renderedRows.delete(e)},t.prototype.refreshRows=function(){var e=this,n=this.model.getRowCount();this.renderedRows.forEach(function(i,o){var s,a;if(o>=n)e.removeRow(o);else{var d=e.model.getRow(o);null!==(a=(s=e.model).areRowsEqual)&&void 0!==a&&a.call(s,i.value,d)?e.componentUpdater(d,i.rowComponent):e.removeRow(o)}})},t.prototype.addScrollListener=function(){var e=this;this.addGuiEventListener("scroll",function(){return e.drawVirtualRows()},{passive:!0})},t.prototype.setModel=function(e){this.model=e},t.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),r.prototype.destroy.call(this))},Mk([F("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Mk([ut("eContainer")],t.prototype,"eContainer",void 0),Mk([rt],t.prototype,"postConstruct",null)}(xA),["mouseover","mouseout","mouseenter","mouseleave"]),Qee=["touchstart","touchend","touchmove","touchcancel"],HW=function(){function r(){this.isOutsideAngular=function(t){return lu(Zee,t)}}return r.prototype.setTimeout=function(t,e){window.setTimeout(t,e)},r.prototype.setInterval=function(t,e){return new ta(function(n){n(window.setInterval(t,e))})},r.prototype.addEventListener=function(t,e,n,i){var o=lu(Qee,e);t.addEventListener(e,n,{capture:!!i,passive:o})},r.prototype.dispatchEvent=function(t,e,n){e()},r.prototype.frameworkComponent=function(t){return null},r.prototype.isFrameworkComponent=function(t){return!1},r}(),Jee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Gw=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Xee=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},tte=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Jee(t,r),t.prototype.getNextCellToFocus=function(e,n,i){return void 0===i&&(i=!1),i?this.getNextCellToFocusWithCtrlPressed(e,n):this.getNextCellToFocusWithoutCtrlPressed(e,n)},t.prototype.getNextCellToFocusWithCtrlPressed=function(e,n){var a,d,i=e===Fe.UP,s=e===Fe.LEFT;if(i||e===Fe.DOWN)d=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),a=n.column;else{var f=this.columnModel.getAllDisplayedColumns(),g=this.gridOptionsService.is("enableRtl");d=n.rowIndex,a=s!==g?f[0]:pr(f)}return{rowIndex:d,rowPinned:null,column:a}},t.prototype.getNextCellToFocusWithoutCtrlPressed=function(e,n){for(var i=n,o=!1;!o;){switch(e){case Fe.UP:i=this.getCellAbove(i);break;case Fe.DOWN:i=this.getCellBelow(i);break;case Fe.RIGHT:i=this.gridOptionsService.is("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case Fe.LEFT:i=this.gridOptionsService.is("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+e)}o=!i||this.isCellGoodToFocusOn(i)}return i},t.prototype.isCellGoodToFocusOn=function(e){var i,n=e.column;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex)}return!!i&&!n.isSuppressNavigable(i)},t.prototype.getCellToLeft=function(e){if(!e)return null;var n=this.columnModel.getDisplayedColBefore(e.column);return n?{rowIndex:e.rowIndex,column:n,rowPinned:e.rowPinned}:null},t.prototype.getCellToRight=function(e){if(!e)return null;var n=this.columnModel.getDisplayedColAfter(e.column);return n?{rowIndex:e.rowIndex,column:n,rowPinned:e.rowPinned}:null},t.prototype.getRowBelow=function(e){var n=e.rowIndex,i=e.rowPinned;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var o=this.rowModel.getRow(e.rowIndex);return this.getNextStickyPosition(o)||{rowIndex:n+1,rowPinned:i}},t.prototype.getNextStickyPosition=function(e,n){if(this.gridOptionsService.is("groupRowsSticky")&&e&&e.sticky){var i=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Xee(arguments[t]));return r}(this.rowRenderer.getStickyTopRowCtrls()).sort(function(d,f){return d.getRowNode().rowIndex-f.getRowNode().rowIndex}),o=n?-1:1,s=i.findIndex(function(d){return d.getRowNode().rowIndex===e.rowIndex}),a=i[s+o];if(a)return{rowIndex:a.getRowNode().rowIndex,rowPinned:null}}},t.prototype.getCellBelow=function(e){if(!e)return null;var n=this.getRowBelow(e);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null},t.prototype.isLastRowInContainer=function(e){var n=e.rowPinned,i=e.rowIndex;return"top"===n?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:"bottom"===n?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i},t.prototype.getRowAbove=function(e){var n=e.rowIndex,i=e.rowPinned;if(i?0===n:n===this.paginationProxy.getPageFirstRow())return"top"===i?null:i&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var s=this.rowModel.getRow(e.rowIndex);return this.getNextStickyPosition(s,!0)||{rowIndex:n-1,rowPinned:i}},t.prototype.getCellAbove=function(e){if(!e)return null;var n=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null},t.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},t.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}},t.prototype.getNextTabbedCell=function(e,n){return n?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)},t.prototype.getNextTabbedCellForwards=function(e){var n=this.columnModel.getAllDisplayedColumns(),i=e.rowIndex,o=e.rowPinned,s=this.columnModel.getDisplayedColAfter(e.column);if(!s){s=n[0];var a=this.getRowBelow(e);if(Qt(a)||!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;i=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:i,column:s,rowPinned:o}},t.prototype.getNextTabbedCellBackwards=function(e){var n=this.columnModel.getAllDisplayedColumns(),i=e.rowIndex,o=e.rowPinned,s=this.columnModel.getDisplayedColBefore(e.column);if(!s){s=pr(n);var a=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Qt(a)||!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;i=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:i,column:s,rowPinned:o}},Gw([F("columnModel")],t.prototype,"columnModel",void 0),Gw([F("rowModel")],t.prototype,"rowModel",void 0),Gw([F("rowRenderer")],t.prototype,"rowRenderer",void 0),Gw([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Gw([F("paginationProxy")],t.prototype,"paginationProxy",void 0),Gw([Rt("cellNavigationService")],t)}(Ye),nte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),J0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},rte=function(r,t){return function(e,n){t(e,n,r)}},ite=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.consuming=!1,e}return nte(t,r),t.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")},t.prototype.init=function(){this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},t.prototype.fireEvent=function(e){if(!this.consuming){var n=this.gridOptionsService.get("alignedGrids");n&&n.forEach(function(i){if(i.api){var o=i.api.__getAlignedGridService();e(o)}})}},t.prototype.onEvent=function(e){this.consuming=!0,e(),this.consuming=!1},t.prototype.fireColumnEvent=function(e){this.fireEvent(function(n){n.onColumnEvent(e)})},t.prototype.fireScrollEvent=function(e){"horizontal"===e.direction&&this.fireEvent(function(n){n.onScrollEvent(e)})},t.prototype.onScrollEvent=function(e){var n=this;this.onEvent(function(){n.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left)})},t.prototype.getMasterColumns=function(e){var n=[];return e.columns?e.columns.forEach(function(i){n.push(i)}):e.column&&n.push(e.column),n},t.prototype.getColumnIds=function(e){var n=[];return e.columns?e.columns.forEach(function(i){n.push(i.getColId())}):e.column&&n.push(e.column.getColId()),n},t.prototype.onColumnEvent=function(e){var n=this;this.onEvent(function(){switch(e.type){case V.EVENT_COLUMN_MOVED:case V.EVENT_COLUMN_VISIBLE:case V.EVENT_COLUMN_PINNED:case V.EVENT_COLUMN_RESIZED:n.processColumnEvent(e);break;case V.EVENT_COLUMN_GROUP_OPENED:n.processGroupOpenedEvent(e);break;case V.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},t.prototype.processGroupOpenedEvent=function(e){var n=e.columnGroup,i=null;if(n){var o=n.getGroupId();i=this.columnModel.getProvidedColumnGroup(o)}n&&!i||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+n.isExpanded()),this.columnModel.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged"))},t.prototype.processColumnEvent=function(e){var i,n=this,o=e.column,s=null;if(o&&(s=this.columnModel.getPrimaryColumn(o.getColId())),!o||s){var a=this.getMasterColumns(e);switch(e.type){case V.EVENT_COLUMN_MOVED:var d=e,g=e.columnApi.getColumnState().map(function(z){return{colId:z.colId}});this.columnModel.applyColumnState({state:g,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" toIndex = "+d.toIndex);break;case V.EVENT_COLUMN_VISIBLE:var C=e;g=e.columnApi.getColumnState().map(function(re){return{colId:re.colId,hide:re.hide}}),this.columnModel.applyColumnState({state:g},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" visible = "+C.visible);break;case V.EVENT_COLUMN_PINNED:var E=e;g=e.columnApi.getColumnState().map(function(re){return{colId:re.colId,pinned:re.pinned}}),this.columnModel.applyColumnState({state:g},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" pinned = "+E.pinned);break;case V.EVENT_COLUMN_RESIZED:var T=e,I={};a.forEach(function(z){n.logger.log("onColumnEvent-> processing "+e.type+" actualWidth = "+z.getActualWidth()),I[z.getId()]={key:z.getColId(),newWidth:z.getActualWidth()}}),null===(i=T.flexColumns)||void 0===i||i.forEach(function(z){I[z.getId()]&&delete I[z.getId()]}),this.columnModel.setColumnWidths(Object.values(I),!1,T.finished,"alignedGridChanged")}var k=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),W=this.gridOptionsService.get("alignedGrids");W&&W.forEach(function(z){z.api&&z.api.setAlwaysShowVerticalScroll(k)})}},J0([F("columnModel")],t.prototype,"columnModel",void 0),J0([F("ctrlsService")],t.prototype,"ctrlsService",void 0),J0([rte(0,ea("loggerFactory"))],t.prototype,"setBeans",null),J0([rt],t.prototype,"init",null),J0([Rt("alignedGridsService")],t)}(Ye),ote=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),kA=function(){return kA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},kA.apply(this,arguments)},X0=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},ste=function(r,t){return function(e,n){t(e,n,r)}},lte=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ote(t,r),t.prototype.setBeans=function(e){this.logger=e.create("selectionService"),this.reset()},t.prototype.init=function(){var e=this;this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedPropertyListener("groupSelectsChildren",function(n){return e.groupSelectsChildren=n.currentValue}),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",function(n){return e.rowSelection=n.currentValue}),this.addManagedListener(this.eventService,V.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},t.prototype.isMultiselect=function(){return"multiple"===this.rowSelection},t.prototype.setNodeSelected=function(e){var n,i=e.newValue,o=e.clearSelection,s=e.suppressFinishActions,a=e.rangeSelect,d=e.node,f=e.source,g=void 0===f?"api":f,C=this.groupSelectsChildren&&!0===e.groupSelectsFiltered;if(void 0===d.id)return console.warn("AG Grid: cannot select node until id for node is known"),0;if(d.rowPinned)return console.warn("AG Grid: cannot select pinned rows"),0;if(d.footer)return this.setNodeSelected(kA(kA({},e),{node:d.sibling}));var E=this.getLastSelectedNode();if(a&&E&&E!==d&&this.isMultiselect()){var I=this.selectRange(d,E,e.newValue,g);return this.setLastSelectedNode(d),I}var k=0;return C&&d.group||d.selectThisNode(i,e.event,g)&&k++,this.groupSelectsChildren&&!(null===(n=d.childrenAfterGroup)||void 0===n)&&n.length&&(k+=this.selectChildren(d,i,C,g)),s||(i&&(o||!this.isMultiselect())&&(k+=this.clearOtherNodes(d,g)),k>0&&(this.updateGroupsFromChildrenSelections(g),this.eventService.dispatchEvent({type:V.EVENT_SELECTION_CHANGED,source:g})),i&&this.setLastSelectedNode(d)),k},t.prototype.selectRange=function(e,n,i,o){var s=this;void 0===i&&(i=!0);var a=this.rowModel.getNodesInRangeForSelection(e,n),d=0;return a.forEach(function(g){g.group&&s.groupSelectsChildren||!1===i&&e===g||g.selectThisNode(i,void 0,o)&&d++}),this.updateGroupsFromChildrenSelections(o),this.eventService.dispatchEvent({type:V.EVENT_SELECTION_CHANGED,source:o}),d},t.prototype.selectChildren=function(e,n,i,o){var s=i?e.childrenAfterAggFilter:e.childrenAfterGroup;if(tn.missing(s))return 0;for(var a=0,d=0;d<s.length;d++)a+=s[d].setSelectedParams({newValue:n,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:o});return a},t.prototype.setLastSelectedNode=function(e){this.lastSelectedNode=e},t.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},t.prototype.getSelectedNodes=function(){var e=[];return Wr(this.selectedNodes,function(n,i){i&&e.push(i)}),e},t.prototype.getSelectedRows=function(){var e=[];return Wr(this.selectedNodes,function(n,i){i&&i.data&&e.push(i.data)}),e},t.prototype.getSelectionCount=function(){return Object.values(this.selectedNodes).length},t.prototype.filterFromSelection=function(e){var n={};Object.entries(this.selectedNodes).forEach(function(i){var o=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o}(i,2),s=o[0],a=o[1];a&&e(a)&&(n[s]=a)}),this.selectedNodes=n},t.prototype.updateGroupsFromChildrenSelections=function(e,n){if(!this.groupSelectsChildren||"clientSide"!==this.rowModel.getType())return!1;var o=this.rowModel.getRootNode();n||(n=new Ak(!0,o)).setInactive();var s=!1;return n.forEachChangedNodeDepthFirst(function(a){if(a!==o){var d=a.calculateSelectedFromChildren();s=a.selectThisNode(null!==d&&d,void 0,e)||s}}),s},t.prototype.clearOtherNodes=function(e,n){var i=this,o={},s=0;return Wr(this.selectedNodes,function(a,d){d&&d.id!==e.id&&(s+=i.selectedNodes[d.id].setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),i.groupSelectsChildren&&d.parent&&(o[d.parent.id]=d.parent))}),Wr(o,function(a,d){var f=d.calculateSelectedFromChildren();d.selectThisNode(null!==f&&f,void 0,n)}),s},t.prototype.onRowSelected=function(e){var n=e.node;this.groupSelectsChildren&&n.group||(this.selectedNodes[n.id]=n.isSelected()?n:void 0)},t.prototype.syncInRowNode=function(e,n){this.syncInOldRowNode(e,n),this.syncInNewRowNode(e)},t.prototype.syncInOldRowNode=function(e,n){Qe(n)&&e.id!==n.id&&n&&this.selectedNodes[n.id]==e&&(this.selectedNodes[n.id]=n)},t.prototype.syncInNewRowNode=function(e){Qe(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)},t.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},t.prototype.getBestCostNodeSelection=function(){if("clientSide"===this.rowModel.getType()){var n=this.rowModel.getTopLevelNodes();if(null!==n){var i=[];return function o(s){for(var a=0,d=s.length;a<d;a++){var f=s[a];f.isSelected()?i.push(f):f.group&&f.children&&o(f.children)}}(n),i}}},t.prototype.isEmpty=function(){var e=0;return Wr(this.selectedNodes,function(n,i){i&&e++}),0===e},t.prototype.deselectAllRowNodes=function(e){var n=function(f){return f.selectThisNode(!1,void 0,o)},i="clientSide"===this.rowModel.getType(),o=e.source,s=e.justFiltered,a=e.justCurrentPage;if(a||s){if(!i)return void console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(s,a).forEach(n)}else Wr(this.selectedNodes,function(f,g){g&&n(g)}),this.reset();i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(o),this.eventService.dispatchEvent({type:V.EVENT_SELECTION_CHANGED,source:o})},t.prototype.getSelectAllState=function(e,n){var i=this,o=0,s=0;return this.getNodesToSelect(e,n).forEach(function(d){i.groupSelectsChildren&&d.group||(d.isSelected()?o++:d.selectable&&s++)}),(0!==o||0!==s)&&(o>0&&s>0?null:o>0)},t.prototype.getNodesToSelect=function(e,n){var i=this;if(void 0===e&&(e=!1),void 0===n&&(n=!1),"clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var o=[];if(n)return this.paginationProxy.forEachNodeOnPage(function(a){if(a.group)if(a.expanded)i.groupSelectsChildren||o.push(a);else{var d=function(f){var g;o.push(f),null!==(g=f.childrenAfterFilter)&&void 0!==g&&g.length&&f.childrenAfterFilter.forEach(d)};d(a)}else o.push(a)}),o;var s=this.rowModel;return e?(s.forEachNodeAfterFilter(function(a){o.push(a)}),o):(s.forEachNode(function(a){o.push(a)}),o)},t.prototype.selectAllRowNodes=function(e){if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var n=e.source;this.getNodesToSelect(e.justFiltered,e.justCurrentPage).forEach(function(d){return d.selectThisNode(!0,void 0,n)}),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n),this.eventService.dispatchEvent({type:V.EVENT_SELECTION_CHANGED,source:n})},t.prototype.getServerSideSelectionState=function(){return null},t.prototype.setServerSideSelectionState=function(e){},X0([F("rowModel")],t.prototype,"rowModel",void 0),X0([F("paginationProxy")],t.prototype,"paginationProxy",void 0),X0([ste(0,ea("loggerFactory"))],t.prototype,"setBeans",null),X0([rt],t.prototype,"init",null),X0([Rt("selectionService")],t)}(Ye),xk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},ute=function(){function r(){}return r.prototype.sizeColumnsToFit=function(t){typeof t>"u"&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(t,"api")},r.prototype.setColumnGroupOpened=function(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")},r.prototype.getColumnGroup=function(t,e){return this.columnModel.getColumnGroup(t,e)},r.prototype.getProvidedColumnGroup=function(t){return this.columnModel.getProvidedColumnGroup(t)},r.prototype.getDisplayNameForColumn=function(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""},r.prototype.getDisplayNameForColumnGroup=function(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""},r.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},r.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},r.prototype.applyColumnState=function(t){return this.columnModel.applyColumnState(t,"api")},r.prototype.getColumnState=function(){return this.columnModel.getColumnState()},r.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},r.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},r.prototype.setColumnGroupState=function(t){this.columnModel.setColumnGroupState(t,"api")},r.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},r.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},r.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},r.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},r.prototype.getDisplayedColAfter=function(t){return this.columnModel.getDisplayedColAfter(t)},r.prototype.getDisplayedColBefore=function(t){return this.columnModel.getDisplayedColBefore(t)},r.prototype.setColumnVisible=function(t,e){this.columnModel.setColumnVisible(t,e,"api")},r.prototype.setColumnsVisible=function(t,e){this.columnModel.setColumnsVisible(t,e,"api")},r.prototype.setColumnPinned=function(t,e){this.columnModel.setColumnPinned(t,e,"api")},r.prototype.setColumnsPinned=function(t,e){this.columnModel.setColumnsPinned(t,e,"api")},r.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},r.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},r.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},r.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},r.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},r.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},r.prototype.moveColumn=function(t,e){this.columnModel.moveColumn(t,e,"api")},r.prototype.moveColumnByIndex=function(t,e){this.columnModel.moveColumnByIndex(t,e,"api")},r.prototype.moveColumns=function(t,e){this.columnModel.moveColumns(t,e,"api")},r.prototype.moveRowGroupColumn=function(t,e){this.columnModel.moveRowGroupColumn(t,e)},r.prototype.setColumnAggFunc=function(t,e){this.columnModel.setColumnAggFunc(t,e)},r.prototype.setColumnWidth=function(t,e,n,i){void 0===n&&(n=!0),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,n,i)},r.prototype.setColumnWidths=function(t,e,n){void 0===e&&(e=!0),this.columnModel.setColumnWidths(t,!1,e,n)},r.prototype.setPivotMode=function(t){this.columnModel.setPivotMode(t)},r.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},r.prototype.getPivotResultColumn=function(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)},r.prototype.setValueColumns=function(t){this.columnModel.setValueColumns(t,"api")},r.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},r.prototype.removeValueColumn=function(t){this.columnModel.removeValueColumn(t,"api")},r.prototype.removeValueColumns=function(t){this.columnModel.removeValueColumns(t,"api")},r.prototype.addValueColumn=function(t){this.columnModel.addValueColumn(t,"api")},r.prototype.addValueColumns=function(t){this.columnModel.addValueColumns(t,"api")},r.prototype.setRowGroupColumns=function(t){this.columnModel.setRowGroupColumns(t,"api")},r.prototype.removeRowGroupColumn=function(t){this.columnModel.removeRowGroupColumn(t,"api")},r.prototype.removeRowGroupColumns=function(t){this.columnModel.removeRowGroupColumns(t,"api")},r.prototype.addRowGroupColumn=function(t){this.columnModel.addRowGroupColumn(t,"api")},r.prototype.addRowGroupColumns=function(t){this.columnModel.addRowGroupColumns(t,"api")},r.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},r.prototype.setPivotColumns=function(t){this.columnModel.setPivotColumns(t,"api")},r.prototype.removePivotColumn=function(t){this.columnModel.removePivotColumn(t,"api")},r.prototype.removePivotColumns=function(t){this.columnModel.removePivotColumns(t,"api")},r.prototype.addPivotColumn=function(t){this.columnModel.addPivotColumn(t,"api")},r.prototype.addPivotColumns=function(t){this.columnModel.addPivotColumns(t,"api")},r.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},r.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},r.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},r.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},r.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},r.prototype.autoSizeColumn=function(t,e){return this.columnModel.autoSizeColumn(t,e,"api")},r.prototype.autoSizeColumns=function(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e})},r.prototype.autoSizeAllColumns=function(t){this.columnModel.autoSizeAllColumns(t,"api")},r.prototype.setPivotResultColumns=function(t){this.columnModel.setSecondaryColumns(t,"api")},r.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},r.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(tn.removeAllReferences.bind(window,this,"Column API"),100)},r.prototype.getAllColumns=function(){return $o("28.0","getAllColumns","getColumns"),this.getColumns()},r.prototype.getOriginalColumnGroup=function(t){return $o("27.0","getOriginalColumnGroup","getProvidedColumnGroup"),this.columnModel.getProvidedColumnGroup(t)},r.prototype.getPrimaryColumns=function(){return $o("28.0","getPrimaryColumns","getColumns"),this.getColumns()},r.prototype.getSecondaryColumns=function(){return $o("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()},r.prototype.setSecondaryColumns=function(t){$o("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(t)},r.prototype.getSecondaryPivotColumn=function(t,e){return $o("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(t,e)},xk([F("columnModel")],r.prototype,"columnModel",void 0),xk([as],r.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),xk([Rt("columnApi")],r)}(),cte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),eD=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},dte=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.initialised=!1,e}return cte(t,r),t.prototype.init=function(){var e=this;this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(V.EVENT_CELL_VALUE_CHANGED,function(n){return e.callColumnCellValueChangedHandler(n)},this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",function(n){return e.isTreeData=n.currentValue})},t.prototype.getValue=function(e,n,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),this.initialised||this.init(),n){var g,s=e.getColDef(),a=s.field,d=e.getColId(),f=n.data,C=n.groupData&&void 0!==n.groupData[d],E=!o&&n.aggData&&void 0!==n.aggData[d];if(i&&s.filterValueGetter?g=this.executeFilterValueGetter(s.filterValueGetter,f,e,n):this.isTreeData&&E?g=n.aggData[d]:this.isTreeData&&s.valueGetter?g=this.executeValueGetter(s.valueGetter,f,e,n):this.isTreeData&&a&&f?g=WI(f,a,e.isFieldContainsDots()):C?g=n.groupData[d]:E?g=n.aggData[d]:s.valueGetter?g=this.executeValueGetter(s.valueGetter,f,e,n):a&&f&&(g=WI(f,a,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof g&&0===g.indexOf("=")){var T=g.substring(1);g=this.executeValueGetter(T,f,e,n)}if(null==g){var I=this.getOpenedGroup(n,e);if(null!=I)return I}return g}},t.prototype.getOpenedGroup=function(e,n){if(this.gridOptionsService.is("showOpenedGroup")&&n.getColDef().showRowGroup)for(var o=n.getColDef().showRowGroup,s=e.parent;null!=s;){if(s.rowGroupColumn&&(!0===o||o===s.rowGroupColumn.getColId()))return s.key;s=s.parent}},t.prototype.setValue=function(e,n,i,o){var s=this.columnModel.getPrimaryColumn(n);if(!e||!s)return!1;Qt(e.data)&&(e.data={});var a=s.getColDef(),d=a.field,f=a.valueSetter;if(Qt(d)&&Qt(f))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;var C,g={node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return g.newValue=i,void 0===(C=Qe(f)?"function"==typeof f?f(g):this.expressionService.evaluate(f,g):this.setValueUsingField(e.data,d,i,s.isFieldContainsDots()))&&(C=!0),!!C&&(e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),g.newValue=this.getValue(s,e),this.eventService.dispatchEvent({type:V.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:g.column,api:g.api,columnApi:g.columnApi,colDef:g.colDef,context:g.context,data:e.data,node:e,oldValue:g.oldValue,newValue:g.newValue,value:g.newValue,source:o}),!0)},t.prototype.callColumnCellValueChangedHandler=function(e){var n=e.colDef.onCellValueChanged;"function"==typeof n&&n({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})},t.prototype.setValueUsingField=function(e,n,i,o){if(!n)return!1;var s=!1;if(o)for(var a=n.split("."),d=e;a.length>0&&d;){var f=a.shift();0===a.length?(s=d[f]==i)||(d[f]=i):d=d[f]}else(s=e[n]==i)||(e[n]=i);return!s},t.prototype.executeFilterValueGetter=function(e,n,i,o){var s={data:n,node:o,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,o)};return"function"==typeof e?e(s):this.expressionService.evaluate(e,s)},t.prototype.executeValueGetter=function(e,n,i,o){var s=i.getColId(),a=this.valueCache.getValue(o,s);if(void 0!==a)return a;var f,d={data:n,node:o,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,o)};return f="function"==typeof e?e(d):this.expressionService.evaluate(e,d),this.valueCache.setValue(o,s,f),f},t.prototype.getValueCallback=function(e,n){var i=this.columnModel.getPrimaryColumn(n);return i?this.getValue(i,e):null},t.prototype.getKeyForNode=function(e,n){var i=this.getValue(e,n),o=e.getColDef().keyCreator,s=i;return o&&(s=o({value:i,colDef:e.getColDef(),column:e,node:n,data:n.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context})),"string"==typeof s||null==s||"[object Object]"===(s=String(s))&&Yn(function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]"),s},eD([F("expressionService")],t.prototype,"expressionService",void 0),eD([F("columnModel")],t.prototype,"columnModel",void 0),eD([F("valueCache")],t.prototype,"valueCache",void 0),eD([rt],t.prototype,"init",null),eD([Rt("valueService")],t)}(Ye),hte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),BW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},fte=function(r,t){return function(e,n){t(e,n,r)}},pte=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return hte(t,r),t.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},t.prototype.evaluate=function(e,n){if("string"==typeof e)return this.evaluateExpression(e,n);console.error("AG Grid: value should be either a string or a function",e)},t.prototype.evaluateExpression=function(e,n){try{return this.createExpressionFunction(e)(n.value,n.context,n.oldValue,n.newValue,n.value,n.node,n.data,n.colDef,n.rowIndex,n.api,n.columnApi,n.getValue,n.column,n.columnGroup)}catch(s){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",n),console.log("Exception = "+s),null}},t.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var n=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",n);return this.expressionToFunctionCache[e]=i,i},t.prototype.createFunctionBody=function(e){return e.indexOf("return")>=0?e:"return "+e+";"},BW([fte(0,ea("loggerFactory"))],t.prototype,"setBeans",null),BW([Rt("expressionService")],t)}(Ye),gte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),vte=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return gte(t,r),t.prototype.getTemplate=function(e,n){var i=this.templateCache[e];if(i)return i;var o=this.waitingCallbacks[e],s=this;if(!o){this.waitingCallbacks[e]=o=[];var a=new XMLHttpRequest;a.onload=function(){s.handleHttpResult(this,e)},a.open("GET",e),a.send()}return n&&o.push(n),null},t.prototype.handleHttpResult=function(e,n){if(200===e.status&&null!==e.response){this.templateCache[n]=e.response||e.responseText;for(var i=this.waitingCallbacks[n],o=0;o<i.length;o++)(0,i[o])()}else console.warn("AG Grid: Unable to get template error "+e.status+" - "+n)},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("templateService")],t),t}(Ye),yte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),UW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},_te=function(r,t){return function(e,n){t(e,n,r)}},Cte=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return yte(t,r),t.prototype.setBeans=function(e){this.logging=e.is("debug")},t.prototype.create=function(e){return new Fk(e,this.isLogging.bind(this))},t.prototype.isLogging=function(){return this.logging},UW([_te(0,ea("gridOptionsService"))],t.prototype,"setBeans",null),UW([Rt("loggerFactory")],t)}(Ye),Fk=function(){function r(t,e){this.name=t,this.isLoggingFunc=e}return r.prototype.isLogging=function(){return this.isLoggingFunc()},r.prototype.log=function(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)},r}(),wte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vw=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Ste=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return wte(t,r),t.prototype.setComp=function(e,n,i){var o=this;this.view=e,this.eGridHostDiv=n,this.eGui=i,this.dragAndDropService.addDropTarget({getContainer:function(){return o.eGui},isInterestedIn:function(a){return a===Ps.HeaderCell||a===Ps.ToolPanel},getIconName:function(){return us.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(n),this.createManagedBean(new dk(this.view)),this.addRtlSupport(),this.addManagedListener(this,V.EVENT_KEYBOARD_FOCUS,function(){o.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,V.EVENT_MOUSE_FOCUS,function(){o.view.addOrRemoveKeyboardFocusClass(!1)});var s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return s()}),this.ctrlsService.registerGridCtrl(this)},t.prototype.isDetailGrid=function(){var e;return(null===(e=this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id"))||void 0===e?void 0:e.startsWith("detail"))||!1},t.prototype.showDropZones=function(){return on.isRegistered(Ot.RowGroupingModule)},t.prototype.showSideBar=function(){return on.isRegistered(Ot.SideBarModule)},t.prototype.showStatusBar=function(){return on.isRegistered(Ot.StatusBarModule)},t.prototype.showWatermark=function(){return on.isRegistered(Ot.EnterpriseCoreModule)},t.prototype.onGridSizeChanged=function(){this.eventService.dispatchEvent({type:V.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})},t.prototype.addRtlSupport=function(){var e=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)},t.prototype.destroyGridUi=function(){this.view.destroyGridUi()},t.prototype.getGui=function(){return this.eGui},t.prototype.setResizeCursor=function(e){this.view.setCursor(e?"ew-resize":null)},t.prototype.disableUserSelect=function(e){this.view.setUserSelect(e?"none":null)},t.prototype.focusNextInnerContainer=function(e){var n=this.gridOptionsService.getDocument(),i=this.view.getFocusableContainers(),s=i.findIndex(function(a){return a.contains(n.activeElement)})+(e?-1:1);return!(s<=0||s>=i.length)&&this.focusService.focusInto(i[s])},t.prototype.focusInnerElement=function(e){var n=this.view.getFocusableContainers();if(e){if(n.length>1)return this.focusService.focusInto(pr(n),!0);var i=pr(this.columnModel.getAllDisplayedColumns());if(this.focusService.focusGridView(i,!0))return!0}return this.focusService.focusFirstHeader()},t.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1),this.view.forceFocusOutOfContainer(e)},Vw([F("focusService")],t.prototype,"focusService",void 0),Vw([F("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Vw([F("columnModel")],t.prototype,"columnModel",void 0),Vw([F("ctrlsService")],t.prototype,"ctrlsService",void 0),Vw([F("mouseEventService")],t.prototype,"mouseEventService",void 0),Vw([F("dragAndDropService")],t.prototype,"dragAndDropService",void 0),t}(Ye),Ete=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),tD=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},bte=function(r){function t(e){var n=r.call(this)||this;return n.eGridDiv=e,n}return Ete(t,r),t.prototype.postConstruct=function(){var e=this;this.logger=this.loggerFactory.create("GridComp");var n={destroyGridUi:function(){return e.destroyBean(e)},setRtlClass:function(o){return e.addCssClass(o)},addOrRemoveKeyboardFocusClass:function(o){return e.addOrRemoveCssClass(Z0.AG_KEYBOARD_FOCUS,o)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(o){e.getGui().style.userSelect=o??"",e.getGui().style.webkitUserSelect=o??""},setCursor:function(o){e.getGui().style.cursor=o??""}};this.ctrl=this.createManagedBean(new Ste);var i=this.createTemplate();this.setTemplate(i),this.ctrl.setComp(n,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(o){return e.ctrl.focusInnerElement(o)}})},t.prototype.insertGridIntoDom=function(){var e=this,n=this.getGui();this.eGridDiv.appendChild(n),this.addDestroyFunc(function(){e.eGridDiv.removeChild(n),e.logger.log("Grid removed from DOM")})},t.prototype.updateLayoutClasses=function(e,n){var i=this.eRootWrapperBody.classList;i.toggle(ro.AUTO_HEIGHT,n.autoHeight),i.toggle(ro.NORMAL,n.normal),i.toggle(ro.PRINT,n.print),this.addOrRemoveCssClass(ro.AUTO_HEIGHT,n.autoHeight),this.addOrRemoveCssClass(ro.NORMAL,n.normal),this.addOrRemoveCssClass(ro.PRINT,n.print)},t.prototype.createTemplate=function(){return'<div class="ag-root-wrapper" role="presentation">\n                '+(this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"")+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+(this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"")+"\n                </div>\n                "+(this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"")+"\n                <ag-pagination></ag-pagination>\n                "+(this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"")+"\n            </div>"},t.prototype.getFocusableElement=function(){return this.eRootWrapperBody},t.prototype.getFocusableContainers=function(){var e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(function(n){return Pw(n)})},tD([F("loggerFactory")],t.prototype,"loggerFactory",void 0),tD([ut("gridBody")],t.prototype,"gridBodyComp",void 0),tD([ut("sideBar")],t.prototype,"sideBarComp",void 0),tD([ut("rootWrapperBody")],t.prototype,"eRootWrapperBody",void 0),tD([rt],t.prototype,"postConstruct",null),t}(xA),Dte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),jW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},GA=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},nD=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(GA(arguments[t]));return r},Tte=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}var e;return Dte(t,r),e=t,t.prototype.progressSort=function(n,i,o){var s=this.getNextSortDirection(n);this.setSortForColumn(n,s,i,o)},t.prototype.setSortForColumn=function(n,i,o,s){"asc"!==i&&"desc"!==i&&(i=null);var d=[n];if(this.gridOptionsService.isColumnsSortingCoupledToGroup()&&n.getColDef().showRowGroup){n.getColDef().field||(d=[]);var g=this.columnModel.getSourceColumnsForGroupColumn(n)?.filter(function(E){return E.getColDef().sortable});g&&(d=nD(d,g))}d.forEach(function(E){return E.setSort(i,s)}),(o||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort")||this.clearSortBarTheseColumns(d,s),this.updateSortIndex(n),this.dispatchSortChangedEvents(s)},t.prototype.updateSortIndex=function(n){var i=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=this.columnModel.getGroupDisplayColumnForGroup(n.getId()),s=i&&o||n,a=this.getColumnsWithSortingOrdered(!0);this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(g){return g.setSortIndex(null)});var d=a.filter(function(g){return g!==s});(s.getSort()?nD(d,[s]):d).forEach(function(g,C){return g.setSortIndex(C)})},t.prototype.onSortChanged=function(n){this.dispatchSortChangedEvents(n)},t.prototype.isSortActive=function(){var i=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(o){return!!o.getSort()});return i&&i.length>0},t.prototype.dispatchSortChangedEvents=function(n){this.eventService.dispatchEvent({type:V.EVENT_SORT_CHANGED,source:n})},t.prototype.clearSortBarTheseColumns=function(n,i){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(o){n.includes(o)||o.setSort(void 0,i)})},t.prototype.getNextSortDirection=function(n){var i;if(i=n.getColDef().sortingOrder?n.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?this.gridOptionsService.get("sortingOrder"):e.DEFAULT_SORTING_ORDER,!Array.isArray(i)||i.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's "+i),null;var o=n.getColDef().field?n.getSort():this.getDisplaySortForColumn(n),s=i[0];if("mixed"!==o){var a=i.indexOf(o);s=a<0||a==i.length-1?i[0]:i[a+1]}return e.DEFAULT_SORTING_ORDER.indexOf(s)<0?(console.warn("AG Grid: invalid sort type "+s),null):s},t.prototype.getIndexedSortMap=function(n){var i=this;void 0===n&&(n=!1);var o=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(g){return!!g.getSort()});!n&&this.columnModel.isPivotMode()&&(o=o.filter(function(g){return!!g.getAggFunc()||!g.isPrimary()||i.columnModel.getGroupDisplayColumnForGroup(g.getId())}));var s=this.columnModel.getRowGroupColumns().filter(function(g){return!!g.getSort()}),a=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!s.length;a&&(o=nD(new Set(o.map(function(g){var C;return null!==(C=i.columnModel.getGroupDisplayColumnForGroup(g.getId()))&&void 0!==C?C:g}))));var d={};o.forEach(function(g,C){return d[g.getId()]=C}),o.sort(function(g,C){var E=g.getSortIndex(),T=C.getSortIndex();return null!=E&&null!=T?E-T:null==E&&null==T?d[g.getId()]>d[C.getId()]?1:-1:null==T?-1:1});var f=new Map;return o.forEach(function(g,C){return f.set(g,C)}),a&&s.forEach(function(g){var C=i.columnModel.getGroupDisplayColumnForGroup(g.getId());f.set(g,f.get(C))}),f},t.prototype.getColumnsWithSortingOrdered=function(n){return void 0===n&&(n=!1),nD(this.getIndexedSortMap(n).entries()).sort(function(i,o){return GA(i,2)[1]-GA(o,2)[1]}).map(function(i){return GA(i,1)[0]})},t.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered(!0).map(function(n){return{sort:n.getSort(),colId:n.getId()}})},t.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().map(function(n){return{sort:n.getSort(),column:n}})},t.prototype.canColumnDisplayMixedSort=function(n){var i=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=!!n.getColDef().showRowGroup;return i&&o},t.prototype.getDisplaySortForColumn=function(n){var i=this.columnModel.getSourceColumnsForGroupColumn(n);if(!this.canColumnDisplayMixedSort(n)||!i?.length)return n.getSort();var s=n.getColDef().field?nD([n],i):i,a=s[0].getSort();return s.every(function(f){return f.getSort()==a})?a:"mixed"},t.prototype.getDisplaySortIndexForColumn=function(n){return this.getIndexedSortMap().get(n)},t.DEFAULT_SORTING_ORDER=["asc","desc",null],jW([F("columnModel")],t.prototype,"columnModel",void 0),e=jW([Rt("sortController")],t)}(Ye),Rte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ite=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Rte(t,r),t.prototype.setMouseOver=function(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:V.EVENT_COLUMN_HOVER_CHANGED})},t.prototype.clearMouseOver=function(){this.selectedColumns=null,this.eventService.dispatchEvent({type:V.EVENT_COLUMN_HOVER_CHANGED})},t.prototype.isHovered=function(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("columnHoverService")],t),t}(Ye),Ate=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Pte=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.animationThreadCount=0,e}return Ate(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(n){return e.gridBodyCtrl=n.gridBodyCtrl})},t.prototype.isActive=function(){return this.active},t.prototype.start=function(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},t.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},t.prototype.executeNextVMTurn=function(e){this.active?this.executeNextFuncs.push(e):e()},t.prototype.executeLaterVMTurn=function(e){this.active?this.executeLaterFuncs.push(e):e()},t.prototype.ensureAnimationCssClassPresent=function(){var e=this;this.animationThreadCount++;var n=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){e.animationThreadCount===n&&e.gridBodyCtrl.setColumnMovingCss(!1)})},t.prototype.flush=function(){var e=this.executeNextFuncs;this.executeNextFuncs=[];var n=this.executeLaterFuncs;this.executeLaterFuncs=[],(0!==e.length||0!==n.length)&&(window.setTimeout(function(){return e.forEach(function(i){return i()})},0),window.setTimeout(function(){return n.forEach(function(i){return i()})},300))},Lk([F("ctrlsService")],t.prototype,"ctrlsService",void 0),Lk([rt],t.prototype,"postConstruct",null),Lk([Rt("columnAnimationService")],t)}(Ye),Nte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),kk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Mte=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Nte(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(n){e.centerRowContainerCon=n.centerRowContainerCtrl,e.addManagedListener(e.eventService,V.EVENT_BODY_HEIGHT_CHANGED,e.onBodyHeightChanged.bind(e)),e.addManagedListener(e.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,e.onScrollVisibilityChanged.bind(e)),e.checkPageSize()})},t.prototype.notActive=function(){return!this.gridOptionsService.is("paginationAutoPageSize")},t.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},t.prototype.onBodyHeightChanged=function(){this.checkPageSize()},t.prototype.checkPageSize=function(){if(!this.notActive()){var e=this.gridOptionsService.getRowHeightAsNumber(),n=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(n>0){var i=Math.floor(n/e);this.gridOptionsService.set("paginationPageSize",i)}}},kk([F("ctrlsService")],t.prototype,"ctrlsService",void 0),kk([rt],t.prototype,"postConstruct",null),kk([Rt("paginationAutoPageSizeService")],t)}(Ye),xte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),WW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Fte=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.cacheVersion=0,e}return xte(t,r),t.prototype.init=function(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")},t.prototype.onDataChanged=function(){this.neverExpires||this.expire()},t.prototype.expire=function(){this.cacheVersion++},t.prototype.setValue=function(e,n,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[n]=i)},t.prototype.getValue=function(e,n){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[n]},WW([rt],t.prototype,"init",null),WW([Rt("valueCache")],t)}(Ye),Lte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),VA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Gte=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Lte(t,r),t.prototype.init=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,V.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},t.prototype.onCellValueChanged=function(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)},t.prototype.doChangeDetection=function(e,n){if(!this.gridOptionsService.is("suppressChangeDetection")){if(this.clientSideRowModel&&!e.isRowPinned()){var i=this.gridOptionsService.is("aggregateOnlyChangedColumns"),o=new Ak(i,this.clientSideRowModel.getRootNode());o.addParentNode(e.parent,[n]),this.clientSideRowModel.doAggregate(o)}this.rowRenderer.refreshCells()}},VA([F("rowModel")],t.prototype,"rowModel",void 0),VA([F("rowRenderer")],t.prototype,"rowRenderer",void 0),VA([rt],t.prototype,"init",null),VA([Rt("changeDetectionService")],t)}(Ye),Vte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),$W=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Hte=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Vte(t,r),t.prototype.adaptFunction=function(e,n){var i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(n):null},t.prototype.adaptCellRendererFunction=function(e){return function(){function i(){}return i.prototype.refresh=function(o){return!1},i.prototype.getGui=function(){return this.eGui},i.prototype.init=function(o){var s=e(o),a=typeof s;this.eGui="string"!==a&&"number"!==a&&"boolean"!==a?null!=s?s:ls("<span></span>"):ls("<span>"+s+"</span>")},i}()},t.prototype.doesImplementIComponent=function(e){return!!e&&e.prototype&&"getGui"in e.prototype},$W([F("componentMetadataProvider")],t.prototype,"componentMetadataProvider",void 0),$W([Rt("agComponentUtils")],t)}(Ye),Bte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Gk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Ute=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Bte(t,r),t.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},t.prototype.retrieve=function(e){return this.componentMetaData[e]},Gk([F("agComponentUtils")],t.prototype,"agComponentUtils",void 0),Gk([rt],t.prototype,"postConstruct",null),Gk([Rt("componentMetadataProvider")],t)}(Ye),jte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Wte=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},qte={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240}},KW={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Yte=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.calculatedSizes={},e}return jte(t,r),t.prototype.postConstruct=function(){var n,e=this,i=null!==(n=this.getTheme().el)&&void 0!==n?n:this.eGridDiv;this.mutationObserver=new MutationObserver(function(){e.calculatedSizes={},e.fireGridStylesChangedEvent()}),this.mutationObserver.observe(i||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},t.prototype.fireGridStylesChangedEvent=function(){this.eventService.dispatchEvent({type:V.EVENT_GRID_STYLES_CHANGED})},t.prototype.getSassVariable=function(e){var n=this.getTheme(),i=n.themeFamily,o=n.el;if(i&&0===i.indexOf("ag-theme"))return this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[i]||(this.calculatedSizes[i]={}),this.calculatedSizes[i][e]??(this.calculatedSizes[i][e]=this.calculateValueForSassProperty(e,i,o),this.calculatedSizes[i][e])},t.prototype.calculateValueForSassProperty=function(e,n,i){var o,s="ag-theme-"+(n.match("material")?"material":n.match("balham")?"balham":n.match("alpine")?"alpine":"custom"),a=qte[s][e],d=this.gridOptionsService.getDocument();if(i||(i=this.eGridDiv),!KW[e])return a;var f=KW[e],g=d.createElement("div"),C=Array.from(i.classList);(o=g.classList).add.apply(o,function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Wte(arguments[t]));return r}([n],C)),g.style.position="absolute";var E=f.reduce(function(M,k){var W=d.createElement("div");return W.style.position="static",W.classList.add(k),M.appendChild(W),W},g),T=0;if(d.body){d.body.appendChild(g);var I=-1!==e.toLowerCase().indexOf("height")?"height":"width";T=parseInt(window.getComputedStyle(E)[I],10),d.body.removeChild(g)}return T||a},t.prototype.isThemeDark=function(){var e=this.getTheme().theme;return!!e&&e.indexOf("dark")>=0},t.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},t.prototype.getTheme=function(){for(var e=/\bag-(material|(?:theme-([\w\-]*)))\b/g,n=this.eGridDiv,i=null,o=[];n;){if(i=e.exec(n.className)){var s=n.className.match(e);s&&(o=s);break}n=n.parentElement||void 0}if(!i)return{allThemes:o};var a=i[0];return{theme:a,el:n,themeFamily:a.replace(/-dark$/,""),allThemes:o}},t.prototype.getFromTheme=function(e,n){var i;return null!==(i=this.getSassVariable(n))&&void 0!==i?i:e},t.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},t.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},t.prototype.setRowHeightVariable=function(e){var i=e+"px";this.eGridDiv.style.getPropertyValue("--ag-line-height").trim()!=i&&this.eGridDiv.style.setProperty("--ag-line-height",i)},t.prototype.getMinColWidth=function(){var e=this.getFromTheme(null,"headerCellMinWidth");return Qe(e)?Math.max(e,10):10},t.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),r.prototype.destroy.call(this)},Vk([F("eGridDiv")],t.prototype,"eGridDiv",void 0),Vk([rt],t.prototype,"postConstruct",null),Vk([Rt("environment")],t)}(Ye),Zte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),HA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Qte=function(r,t){return function(e,n){t(e,n,r)}},Jte=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return Zte(t,r),t.prototype.agWire=function(e){this.logger=e.create("RowContainerHeightService")},t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,V.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=v2(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},t.prototype.isStretching=function(){return this.stretching},t.prototype.getDivStretchOffset=function(){return this.divStretchOffset},t.prototype.updateOffset=function(){if(this.stretching){var n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(n!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=n,this.uiBodyHeight=i,this.calculateOffset())}},t.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY,n=e*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+n+" ("+this.pixelsToShave+" * "+e+")"),this.setDivStretchOffset(n)},t.prototype.setUiContainerHeight=function(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:V.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},t.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},t.prototype.setDivStretchOffset=function(e){var n="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==n&&(this.divStretchOffset=n,this.eventService.dispatchEvent({type:V.EVENT_HEIGHT_SCALE_CHANGED}))},t.prototype.setModelHeight=function(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},t.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},t.prototype.getRealPixelPosition=function(e){return e-this.divStretchOffset},t.prototype.getUiBodyHeight=function(){var n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return n.bottom-n.top},t.prototype.getScrollPositionForPixel=function(e){if(this.pixelsToShave<=0)return e;var n=this.modelHeight-this.getUiBodyHeight();return this.maxScrollY*(e/n)},HA([F("ctrlsService")],t.prototype,"ctrlsService",void 0),HA([Qte(0,ea("loggerFactory"))],t.prototype,"agWire",null),HA([rt],t.prototype,"postConstruct",null),HA([Rt("rowContainerHeightService")],t)}(Ye),Xte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),qW=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},ene=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Xte(t,r),t.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")},t.prototype.updateSelectableAfterGrouping=function(e){this.isRowSelectableFunc&&this.recurseDown(e.childrenAfterGroup,function(i){return i.childrenAfterGroup})},t.prototype.recurseDown=function(e,n){var i=this;e&&e.forEach(function(o){var s;o.group&&(o.hasChildren()&&i.recurseDown(n(o),n),s=i.groupSelectsChildren?Qe((n(o)||[]).find(function(d){return!0===d.selectable})):!!i.isRowSelectableFunc&&i.isRowSelectableFunc(o),o.setRowSelectable(s))})},qW([rt],t.prototype,"init",null),qW([Rt("selectableService")],t)}(Ye),tne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),gu=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},nne=function(r){function t(){var e=r.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e.areListenersSetup=!1,e}return tne(t,r),t.prototype.postConstruct=function(){var e=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",no(e?"last":"first",this.gridOptionsService)),this.btPrevious.insertAdjacentElement("afterbegin",no(e?"next":"previous",this.gridOptionsService)),this.btNext.insertAdjacentElement("afterbegin",no(e?"previous":"next",this.gridOptionsService)),this.btLast.insertAdjacentElement("afterbegin",no(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()},t.prototype.onPaginationChanged=function(){var n=this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(n),n&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())},t.prototype.setupListeners=function(){var e=this;this.areListenersSetup||(this.addManagedListener(this.eventService,V.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(n){var i=n.el,o=n.fn;e.addManagedListener(i,"click",o),e.addManagedListener(i,"keydown",function(s){(s.key===Fe.ENTER||s.key===Fe.SPACE)&&(s.preventDefault(),o())})}),this.areListenersSetup=!0)},t.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},t.prototype.setCurrentPageLabel=function(){var e=this.paginationProxy.getTotalPages()>0,n=this.paginationProxy.getCurrentPage();this.lbCurrent.innerHTML=this.formatNumber(e?n+1:0)},t.prototype.formatNumber=function(e){var n=this.gridOptionsService.getCallback("paginationNumberFormatter");if(n)return n({value:e});var o=this.localeService.getLocaleTextFunc();return PL(e,o("thousandSeparator",","),o("decimalSeparator","."))},t.prototype.getTemplate=function(){var e=this.localeService.getLocaleTextFunc(),n=e("page","Page"),i=e("to","to"),o=e("of","of"),s=e("firstPage","First Page"),a=e("previousPage","Previous Page"),d=e("nextPage","Next Page"),f=e("lastPage","Last Page"),g=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+g+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+g+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+g+'-to">'+i+'</span>\n                    <span id="ag-'+g+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+g+'-of">'+o+'</span>\n                    <span id="ag-'+g+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="'+s+'"></div>\n                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="'+a+'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+g+'-start-page">'+n+'</span>\n                        <span id="ag-'+g+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+g+'-of-page">'+o+'</span>\n                        <span id="ag-'+g+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="'+d+'"></div>\n                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="'+f+'"></div>\n                </span>\n            </div>'},t.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},t.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},t.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},t.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage(),n=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var o=this.isZeroPagesToDisplay();this.nextButtonDisabled=n&&e===i-1||o,this.lastButtonDisabled=!n||o||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},t.prototype.toggleButtonDisabled=function(e,n){mL(e,n),e.classList.toggle("ag-disabled",n),n?e.removeAttribute("tabindex"):e.setAttribute("tabindex","0")},t.prototype.updateRowLabels=function(){var s,a,e=this.paginationProxy.getCurrentPage(),n=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;this.isZeroPagesToDisplay()?s=a=0:(a=(s=n*e+1)+n-1,i&&a>o&&(a=o)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(s),this.lbLastRowOnPage.innerHTML=this.rowNodeBlockLoader.isLoading()?"?":this.formatNumber(a)},t.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages();return e&&0===n},t.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages(),i=e?this.paginationProxy.getMasterRowCount():null;if(1===i){var o=this.paginationProxy.getRow(0);if(o&&o.group&&!o.groupData&&!o.aggData)return void this.setTotalLabelsToZero()}if(e)this.lbTotal.innerHTML=this.formatNumber(n),this.lbRecordCount.innerHTML=this.formatNumber(i);else{var a=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=a,this.lbRecordCount.innerHTML=a}},t.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},gu([F("paginationProxy")],t.prototype,"paginationProxy",void 0),gu([F("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),gu([ut("btFirst")],t.prototype,"btFirst",void 0),gu([ut("btPrevious")],t.prototype,"btPrevious",void 0),gu([ut("btNext")],t.prototype,"btNext",void 0),gu([ut("btLast")],t.prototype,"btLast",void 0),gu([ut("lbRecordCount")],t.prototype,"lbRecordCount",void 0),gu([ut("lbFirstRowOnPage")],t.prototype,"lbFirstRowOnPage",void 0),gu([ut("lbLastRowOnPage")],t.prototype,"lbLastRowOnPage",void 0),gu([ut("lbCurrent")],t.prototype,"lbCurrent",void 0),gu([ut("lbTotal")],t.prototype,"lbTotal",void 0),gu([rt],t.prototype,"postConstruct",null),t}(Rn),rne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Hw=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Gy=(()=>(function(r){r[r.Loading=0]="Loading",r[r.NoRows=1]="NoRows"}(Gy||(Gy={})),Gy))(),ine=function(r){function t(){var e=r.call(this,t.TEMPLATE)||this;return e.inProgress=!1,e.destroyRequested=!1,e.manuallyDisplayed=!1,e}return rne(t,r),t.prototype.updateLayoutClasses=function(e,n){var i=this.eOverlayWrapper.classList;i.toggle(ro.AUTO_HEIGHT,n.autoHeight),i.toggle(ro.NORMAL,n.normal),i.toggle(ro.PRINT,n.print)},t.prototype.postConstruct=function(){this.createManagedBean(new dk(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,V.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},t.prototype.setWrapperTypeClass=function(e){var n=this.eOverlayWrapper.classList;n.toggle("ag-overlay-loading-wrapper",e===Gy.Loading),n.toggle("ag-overlay-no-rows-wrapper",e===Gy.NoRows)},t.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.is("suppressLoadingOverlay")){var i=this.userComponentFactory.getLoadingOverlayCompDetails({}).newAgStackInstance();this.showOverlay(i,Gy.Loading)}},t.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.is("suppressNoRowsOverlay")){var i=this.userComponentFactory.getNoRowsOverlayCompDetails({}).newAgStackInstance();this.showOverlay(i,Gy.NoRows)}},t.prototype.showOverlay=function(e,n){var i=this;this.inProgress||(this.setWrapperTypeClass(n),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(function(o){i.inProgress=!1,i.eOverlayWrapper.appendChild(o.getGui()),i.activeOverlay=o,i.destroyRequested&&(i.destroyRequested=!1,i.destroyActiveOverlay())}),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))},t.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),ll(this.eOverlayWrapper))},t.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},t.prototype.destroy=function(){this.destroyActiveOverlay(),r.prototype.destroy.call(this)},t.prototype.showOrHideOverlay=function(){var e=this.paginationProxy.isEmpty(),n=this.gridOptionsService.is("suppressNoRowsOverlay");e&&!n?this.showNoRowsOverlay():this.hideOverlay()},t.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},t.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()},t.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',Hw([F("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Hw([F("paginationProxy")],t.prototype,"paginationProxy",void 0),Hw([F("gridApi")],t.prototype,"gridApi",void 0),Hw([F("columnModel")],t.prototype,"columnModel",void 0),Hw([ut("eOverlayWrapper")],t.prototype,"eOverlayWrapper",void 0),Hw([rt],t.prototype,"postConstruct",null),t}(Rn),one=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),BA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},sne=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return one(t,r),t.prototype.getFirstRow=function(){var n,e=0;return this.pinnedRowModel.getPinnedTopRowCount()?n="top":this.rowModel.getRowCount()?(n=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(n="bottom"),void 0===n?null:{rowIndex:e,rowPinned:n}},t.prototype.getLastRow=function(){var e,n=null,i=this.pinnedRowModel.getPinnedBottomRowCount(),o=this.pinnedRowModel.getPinnedTopRowCount();return i?(n="bottom",e=i-1):this.rowModel.getRowCount()?(n=null,e=this.paginationProxy.getPageLastRow()):o&&(n="top",e=o-1),void 0===e?null:{rowIndex:e,rowPinned:n}},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},t.prototype.sameRow=function(e,n){return!e&&!n||!(e&&!n||!e&&n)&&e.rowIndex===n.rowIndex&&e.rowPinned==n.rowPinned},t.prototype.before=function(e,n){switch(e.rowPinned){case"top":if("top"!==n.rowPinned)return!0;break;case"bottom":if("bottom"!==n.rowPinned)return!1;break;default:if(Qe(n.rowPinned))return"top"!==n.rowPinned}return e.rowIndex<n.rowIndex},t.prototype.rowMax=function(e){var i,n=this;return e.forEach(function(o){(void 0===i||n.before(i,o))&&(i=o)}),i},t.prototype.rowMin=function(e){var i,n=this;return e.forEach(function(o){(void 0===i||n.before(o,i))&&(i=o)}),i},BA([F("rowModel")],t.prototype,"rowModel",void 0),BA([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),BA([F("paginationProxy")],t.prototype,"paginationProxy",void 0),BA([Rt("rowPositionUtils")],t)}(Ye),ane=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),une=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ane(t,r),t.prototype.createId=function(e){return this.createIdFromValues({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned})},t.prototype.createIdFromValues=function(e){return e.rowIndex+"."+(e.rowPinned??"null")+"."+e.column.getId()},t.prototype.equals=function(e,n){return e.column===n.column&&e.rowPinned===n.rowPinned&&e.rowIndex===n.rowIndex},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("cellPositionUtils")],t),t}(Ye),cne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),rD=function r(t){this.cellValueChanges=t},jk=function(r){function t(e,n,i,o){var s=r.call(this,e)||this;return s.initialRange=n,s.finalRange=i,s.ranges=o,s}return cne(t,r),t}(rD),YW=function(){function r(t){this.actionStack=[],this.maxStackSize=t||r.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return r.prototype.pop=function(){return this.actionStack.pop()},r.prototype.push=function(t){t.cellValueChanges&&t.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))},r.prototype.clear=function(){this.actionStack=[]},r.prototype.getCurrentStackSize=function(){return this.actionStack.length},r.DEFAULT_STACK_SIZE=10,r}(),dne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),UA=function(){return UA=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},UA.apply(this,arguments)},sh=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},hne=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},pne=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isRangeInAction=!1,e.onCellValueChanged=function(n){var i={column:n.column,rowIndex:n.rowIndex,rowPinned:n.rowPinned},o=null!==e.activeCellEdit&&e.cellPositionUtils.equals(e.activeCellEdit,i),s=null!==e.activeRowEdit&&e.rowPositionUtils.sameRow(e.activeRowEdit,i);if(o||s||e.isPasting||e.isRangeInAction){var C=n.oldValue,E=n.value,T={rowPinned:n.rowPinned,rowIndex:n.rowIndex,columnId:n.column.getColId(),newValue:E,oldValue:C};e.cellValueChanges.push(T)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return dne(t,r),t.prototype.init=function(){var e=this;if(this.gridOptionsService.is("undoRedoCellEditing")){var n=this.gridOptionsService.getNum("undoRedoCellEditingLimit");n<=0||(this.undoStack=new YW(n),this.redoStack=new YW(n),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,V.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,function(i){i.keepUndoRedoStack||e.clearStacks()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl()}))}},t.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},t.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},t.prototype.undo=function(e){this.eventService.dispatchEvent({type:V.EVENT_UNDO_STARTED,source:e});var i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:V.EVENT_UNDO_ENDED,source:e,operationPerformed:i})},t.prototype.redo=function(e){this.eventService.dispatchEvent({type:V.EVENT_REDO_STARTED,source:e});var i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:V.EVENT_REDO_ENDED,source:e,operationPerformed:i})},t.prototype.undoRedo=function(e,n,i,o,s){if(!e)return!1;var a=e.pop();return!(!a||!a.cellValueChanges||(this.processAction(a,function(d){return d[o]},s),a instanceof jk?this.processRange(a.ranges||[a[i]]):this.processCell(a.cellValueChanges),n.push(a),0))},t.prototype.processAction=function(e,n,i){var o=this;e.cellValueChanges.forEach(function(s){var f=s.columnId,C=o.getRowNode({rowIndex:s.rowIndex,rowPinned:s.rowPinned});C.displayed&&C.setDataValue(f,n(s),i)})},t.prototype.processRange=function(e){var i,n=this;this.rangeService.removeAllCellRanges(!0),e.forEach(function(o,s){if(o){var a=o.startRow,d=o.endRow;s===e.length-1&&(i={rowPinned:a.rowPinned,rowIndex:a.rowIndex,columnId:o.startColumn.getColId()},n.setLastFocusedCell(i)),n.rangeService.addCellRange({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:d.rowIndex,rowEndPinned:d.rowPinned,columnStart:o.startColumn,columns:o.columns})}})},t.prototype.processCell=function(e){var n=e[0],a=this.getRowNode({rowIndex:n.rowIndex,rowPinned:n.rowPinned});this.setLastFocusedCell({rowPinned:n.rowPinned,rowIndex:a.rowIndex,columnId:n.columnId},!!this.rangeService)},t.prototype.setLastFocusedCell=function(e,n){var i=e.rowIndex,o=e.columnId,s=e.rowPinned,a=this.gridBodyCtrl.getScrollFeature(),d=this.columnModel.getGridColumn(o);if(d){a.ensureIndexVisible(i),a.ensureColumnVisible(d);var f={rowIndex:i,column:d,rowPinned:s};this.focusService.setFocusedCell(UA(UA({},f),{forceBrowserFocus:!0})),n&&this.rangeService.setRangeToCell(f)}},t.prototype.addRowEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_ROW_EDITING_STARTED,function(n){e.activeRowEdit={rowIndex:n.rowIndex,rowPinned:n.rowPinned}}),this.addManagedListener(this.eventService,V.EVENT_ROW_EDITING_STOPPED,function(){var n=new rD(e.cellValueChanges);e.pushActionsToUndoStack(n),e.activeRowEdit=null})},t.prototype.addCellEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_CELL_EDITING_STARTED,function(n){e.activeCellEdit={column:n.column,rowIndex:n.rowIndex,rowPinned:n.rowPinned}}),this.addManagedListener(this.eventService,V.EVENT_CELL_EDITING_STOPPED,function(n){if(e.activeCellEdit=null,n.valueChanged&&!e.activeRowEdit&&!e.isPasting&&!e.isRangeInAction){var o=new rD(e.cellValueChanges);e.pushActionsToUndoStack(o)}})},t.prototype.addPasteListeners=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_PASTE_START,function(){e.isPasting=!0}),this.addManagedListener(this.eventService,V.EVENT_PASTE_END,function(){var n=new rD(e.cellValueChanges);e.pushActionsToUndoStack(n),e.isPasting=!1})},t.prototype.addFillListeners=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_FILL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,V.EVENT_FILL_END,function(n){var i=new jk(e.cellValueChanges,n.initialRange,n.finalRange);e.pushActionsToUndoStack(i),e.isRangeInAction=!1})},t.prototype.addCellKeyListeners=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,V.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,function(){var n;n=e.rangeService&&e.gridOptionsService.isEnableRangeSelection()?new jk(e.cellValueChanges,void 0,void 0,function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(hne(arguments[t]));return r}(e.rangeService.getCellRanges())):new rD(e.cellValueChanges),e.pushActionsToUndoStack(n),e.isRangeInAction=!1})},t.prototype.pushActionsToUndoStack=function(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},sh([F("focusService")],t.prototype,"focusService",void 0),sh([F("ctrlsService")],t.prototype,"ctrlsService",void 0),sh([F("rowModel")],t.prototype,"rowModel",void 0),sh([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),sh([F("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),sh([F("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),sh([F("columnModel")],t.prototype,"columnModel",void 0),sh([tr("rangeService")],t.prototype,"rangeService",void 0),sh([rt],t.prototype,"init",null),sh([Rt("undoRedoService")],t)}(Ye),gne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},mne=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return gne(t,r),t.prototype.findHeader=function(e,n){var i;if(i=e.column instanceof Aa?this.columnModel["getDisplayedGroup"+n](e.column):this.columnModel["getDisplayedCol"+n](e.column)){var a=e.headerRowIndex;if(this.getHeaderRowType(a)===Yo.COLUMN_GROUP){var f=i;if(f.isPadding()&&this.isAnyChildSpanningHeaderHeight(f)){var g=this.getColumnVisibleChild(f,a,n),C=g.nextFocusColumn;C&&(i=C,a=g.nextRow)}}return{column:i,headerRowIndex:a}}},t.prototype.isAnyChildSpanningHeaderHeight=function(e){return!!e&&e.getLeafColumns().some(function(n){return n.isSpanHeaderHeight()})},t.prototype.getColumnVisibleParent=function(e,n){var i=this.getHeaderRowType(n),s=i===Yo.COLUMN,a=i===Yo.FLOATING_FILTER?e:e.getParent(),d=n-1;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;a&&a.isPadding();)a=a.getParent(),d--;d<0&&(a=e,d=n)}return{nextFocusColumn:a,nextRow:d}},t.prototype.getColumnVisibleChild=function(e,n,i){void 0===i&&(i="After");var s=e,a=n+1;if(this.getHeaderRowType(n)===Yo.COLUMN_GROUP){var d=e.getLeafColumns(),f="After"===i?d[0]:pr(d);if(this.isAnyChildSpanningHeaderHeight(f.getParent())){s=f;for(var g=f.getParent();g&&g!==e;)g=g.getParent(),a++}else s=e.getDisplayedChildren()[0]}return{nextFocusColumn:s,nextRow:a}},t.prototype.getHeaderRowType=function(e){var n=this.ctrlsService.getHeaderRowContainerCtrl();if(n)return n.getRowType(e)},t.prototype.findColAtEdgeForHeaderRow=function(e,n){var i=this.columnModel.getAllDisplayedColumns(),o=i["start"===n?0:i.length-1];if(o){var a=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()).getRowType(e);return a==Yo.COLUMN_GROUP?{headerRowIndex:e,column:this.columnModel.getColumnGroupAtLevel(o,e)}:{headerRowIndex:null==a?-1:e,column:o}}},Wk([F("columnModel")],t.prototype,"columnModel",void 0),Wk([F("ctrlsService")],t.prototype,"ctrlsService",void 0),Wk([Rt("headerPositionUtils")],t)}(Ye),yne=function(){function r(){}return r.prototype.buildColumnDefs=function(t,e,n){var i=this,o=[],s={};return t.forEach(function(a){for(var f=!0,g=i.createDefFromColumn(a,e,n),C=a.getOriginalParent();C;){var E=null;if(C.isPadding())C=C.getOriginalParent();else{var T=s[C.getGroupId()];if(T){T.children.push(g),f=!1;break}(E=i.createDefFromGroup(C))&&(E.children=[g],s[E.groupId]=E,g=E,C=C.getOriginalParent())}}f&&o.push(g)}),o},r.prototype.createDefFromGroup=function(t){var e=jI(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e},r.prototype.createDefFromColumn=function(t,e,n){var i=jI(t.getColDef());return i.colId=t.getColId(),i.width=t.getActualWidth(),i.rowGroup=t.isRowGroupActive(),i.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,i.pivot=t.isPivotActive(),i.pivotIndex=t.isPivotActive()?n.indexOf(t):null,i.aggFunc=t.isValueActive()?t.getAggFunc():null,i.hide=!t.isVisible()||void 0,i.pinned=t.isPinned()?t.getPinned():null,i.sort=t.getSort()?t.getSort():null,i.sortIndex=null!=t.getSortIndex()?t.getSortIndex():null,i},r=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("columnDefFactory")],r),r}(),$k=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},_ne=function(){function r(){}return r.prototype.getInitialRowClasses=function(t){var e=[];return Qe(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),oL(e,this.processClassesFromGridOptions(t.rowNode)),oL(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&("left"===t.pinned&&e.push("ag-cell-last-left-pinned"),"right"===t.pinned&&e.push("ag-cell-first-right-pinned")),e},r.prototype.processClassesFromGridOptions=function(t){var e=[],n=function(d){"string"==typeof d?e.push(d):Array.isArray(d)&&d.forEach(function(f){return e.push(f)})},i=this.gridOptionsService.get("rowClass");if(i){if("function"==typeof i)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];n(i)}var o=this.gridOptionsService.getCallback("getRowClass");return o&&n(o({data:t.data,node:t,rowIndex:t.rowIndex})),e},r.prototype.preProcessRowClassRules=function(t){var e=[];return this.processRowClassRules(t,function(n){e.push(n)},function(n){}),e},r.prototype.processRowClassRules=function(t,e,n){var i={data:t.data,node:t,rowIndex:t.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),i,e,n)},r.prototype.calculateRowLevel=function(t){return t.group?t.level:t.parent?t.parent.level+1:0},$k([F("stylingService")],r.prototype,"stylingService",void 0),$k([F("gridOptionsService")],r.prototype,"gridOptionsService",void 0),$k([Rt("rowCssClassCalculator")],r)}(),Cne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),jA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},wne=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Cne(t,r),t.prototype.init=function(){var e=this;this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",function(n){return e.isAccentedSort=n.currentValue}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return e.primaryColumnsSortGroups=e.gridOptionsService.isColumnsSortingCoupledToGroup()})},t.prototype.doFullSort=function(e,n){var o=e.map(function(s,a){return{currentPos:a,rowNode:s}});return o.sort(this.compareRowNodes.bind(this,n)),o.map(function(s){return s.rowNode})},t.prototype.compareRowNodes=function(e,n,i){for(var o=n.rowNode,s=i.rowNode,a=0,d=e.length;a<d;a++){var T,f=e[a],g="desc"===f.sort,C=this.getValue(o,f.column),E=this.getValue(s,f.column),I=this.getComparator(f,o);if(T=I?I(C,E,o,s,g):tn.defaultComparator(C,E,this.isAccentedSort),!isNaN(T)&&0!==T)return"asc"===f.sort?T:-1*T}return n.currentPos-i.currentPos},t.prototype.getComparator=function(e,n){var i=e.column,o=i.getColDef().comparator;if(null!=o)return o;if(i.getColDef().showRowGroup){var s=!n.group&&i.getColDef().field;if(s){var a=this.columnModel.getPrimaryColumn(s);if(a)return a.getColDef().comparator}}},t.prototype.getValue=function(e,n){var i,o;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(n,e,!1,!1);if(e.rowGroupColumn===n){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){if(n.getColDef().keyCreator)return e.key;var f=null===(i=e.allLeafChildren)||void 0===i?void 0:i[0];return f?this.valueService.getValue(n,f,!1,!1):void 0}var g=this.columnModel.getGroupDisplayColumnForGroup(n.getId());return g?null===(o=e.groupData)||void 0===o?void 0:o[g.getId()]:void 0}return e.group&&n.getColDef().showRowGroup?void 0:this.valueService.getValue(n,e,!1,!1)},jA([F("valueService")],t.prototype,"valueService",void 0),jA([F("columnModel")],t.prototype,"columnModel",void 0),jA([rt],t.prototype,"init",null),jA([Rt("rowNodeSorter")],t)}(Ye),Sne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),bne=function(r){function t(){var n=null!==r&&r.apply(this,arguments)||this;return n.ready=!1,n.readyCallbacks=[],n}var e;return Sne(t,r),e=t,t.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.stickyTopCenterRowContainerCtrl&&null!=this.stickyTopLeftRowContainerCtrl&&null!=this.stickyTopRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollComp&&null!=this.fakeVScrollComp&&null!=this.gridHeaderCtrl,this.ready){var n=this.createReadyParams();this.readyCallbacks.forEach(function(i){return i(n)}),this.readyCallbacks.length=0}},t.prototype.whenReady=function(n){this.ready?n(this.createReadyParams()):this.readyCallbacks.push(n)},t.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},t.prototype.registerFakeHScrollComp=function(n){this.fakeHScrollComp=n,this.checkReady()},t.prototype.registerFakeVScrollComp=function(n){this.fakeVScrollComp=n,this.checkReady()},t.prototype.registerGridHeaderCtrl=function(n){this.gridHeaderCtrl=n,this.checkReady()},t.prototype.registerCenterRowContainerCtrl=function(n){this.centerRowContainerCtrl=n,this.checkReady()},t.prototype.registerLeftRowContainerCtrl=function(n){this.leftRowContainerCtrl=n,this.checkReady()},t.prototype.registerRightRowContainerCtrl=function(n){this.rightRowContainerCtrl=n,this.checkReady()},t.prototype.registerTopCenterRowContainerCtrl=function(n){this.topCenterRowContainerCtrl=n,this.checkReady()},t.prototype.registerTopLeftRowContainerCon=function(n){this.topLeftRowContainerCtrl=n,this.checkReady()},t.prototype.registerTopRightRowContainerCtrl=function(n){this.topRightRowContainerCtrl=n,this.checkReady()},t.prototype.registerStickyTopCenterRowContainerCtrl=function(n){this.stickyTopCenterRowContainerCtrl=n,this.checkReady()},t.prototype.registerStickyTopLeftRowContainerCon=function(n){this.stickyTopLeftRowContainerCtrl=n,this.checkReady()},t.prototype.registerStickyTopRightRowContainerCtrl=function(n){this.stickyTopRightRowContainerCtrl=n,this.checkReady()},t.prototype.registerBottomCenterRowContainerCtrl=function(n){this.bottomCenterRowContainerCtrl=n,this.checkReady()},t.prototype.registerBottomLeftRowContainerCtrl=function(n){this.bottomLeftRowContainerCtrl=n,this.checkReady()},t.prototype.registerBottomRightRowContainerCtrl=function(n){this.bottomRightRowContainerCtrl=n,this.checkReady()},t.prototype.registerHeaderContainer=function(n,i){switch(i){case"left":this.leftHeaderRowContainerCtrl=n;break;case"right":this.rightHeaderRowContainerCtrl=n;break;default:this.centerHeaderRowContainerCtrl=n}this.checkReady()},t.prototype.registerGridBodyCtrl=function(n){this.gridBodyCtrl=n,this.checkReady()},t.prototype.registerGridCtrl=function(n){this.gridCtrl=n,this.checkReady()},t.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},t.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},t.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},t.prototype.getGridCtrl=function(){return this.gridCtrl},t.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},t.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},t.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},t.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},t.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},t.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},t.prototype.getHeaderRowContainerCtrl=function(n){switch(n){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},t.NAME="ctrlsService",t=e=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt(e.NAME)],t),t}(Ye),Dne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rne=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.registry={},e}return Dne(t,r),t.prototype.register=function(e){this.registry[e.controllerName]=e.controllerClass},t.prototype.getInstance=function(e){var n=this.registry[e];if(null!=n)return new n},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("ctrlsFactory")],t),t}(Ye),One=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),WA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},ZW=function(r){function t(e,n){var i=r.call(this,e)||this;return i.direction=n,i.hideTimeout=null,i}return One(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",AL()||zg())},t.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=E0(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},t.prototype.addActiveListenerToggles=function(){var e=this,o=this.getGui();["mouseenter","mousedown","touchstart"].forEach(function(s){return e.addManagedListener(o,s,function(){return e.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),["mouseleave","touchend"].forEach(function(s){return e.addManagedListener(o,s,function(){return e.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},t.prototype.onScrollVisibilityChanged=function(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.setScrollVisible()},t.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL,function(n){n.direction===e.direction&&(null!==e.hideTimeout&&(window.clearTimeout(e.hideTimeout),e.hideTimeout=null),e.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL_END,function(){e.hideTimeout=window.setTimeout(function(){e.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),e.hideTimeout=null},400)})},t.prototype.getViewport=function(){return this.eViewport},t.prototype.getContainer=function(){return this.eContainer},WA([ut("eViewport")],t.prototype,"eViewport",void 0),WA([ut("eContainer")],t.prototype,"eContainer",void 0),WA([F("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),WA([F("ctrlsService")],t.prototype,"ctrlsService",void 0),t}(Rn),Ine=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),iD=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Ane=function(r){function t(){return r.call(this,t.TEMPLATE,"horizontal")||this}return Ine(t,r),t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this);var n=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,n),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,n),this.addManagedListener(this.eventService,V.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",n),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new gk(function(i){return e.eContainer.style.width=i+"px"}))},t.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),r.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},t.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},t.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=e+"px"}},t.prototype.onScrollVisibilityChanged=function(){r.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},t.prototype.setFakeHScrollSpacerWidths=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),n=this.columnModel.getDisplayedColumnsRightWidth(),i=!this.enableRtl&&e,o=this.gridOptionsService.getScrollbarWidth();i&&(n+=o),cu(this.eRightSpacer,n),this.eRightSpacer.classList.toggle("ag-scroller-corner",n<=o);var s=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(s+=o),cu(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=o)},t.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isHorizontalScrollShowing(),n=this.invisibleScrollbar,i=this.gridOptionsService.is("suppressHorizontalScroll"),o=e&&this.gridOptionsService.getScrollbarWidth()||0,a=i?0:0===o&&n?16:o;this.addOrRemoveCssClass("ag-scrollbar-invisible",n),Dy(this.getGui(),a),Dy(this.eViewport,a),Dy(this.eContainer,a),this.setDisplayed(e,{skipAriaHidden:!0})},t.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',iD([ut("eLeftSpacer")],t.prototype,"eLeftSpacer",void 0),iD([ut("eRightSpacer")],t.prototype,"eRightSpacer",void 0),iD([F("columnModel")],t.prototype,"columnModel",void 0),iD([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),iD([rt],t.prototype,"postConstruct",null),t}(ZW),Pne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),zk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Nne=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Pne(t,r),t.prototype.postConstruct=function(){var e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)},t.prototype.checkContainerWidths=function(){var e=this.gridOptionsService.isDomLayout("print"),n=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=e?0:this.columnModel.getDisplayedColumnsRightWidth();n!=this.leftWidth&&(this.leftWidth=n,this.eventService.dispatchEvent({type:V.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:V.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},t.prototype.getPinnedRightWidth=function(){return this.rightWidth},t.prototype.getPinnedLeftWidth=function(){return this.leftWidth},zk([F("columnModel")],t.prototype,"columnModel",void 0),zk([rt],t.prototype,"postConstruct",null),zk([Rt("pinnedWidthService")],t)}(Ye),Mne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),$A=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},xne=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.events=[],e}return Mne(t,r),t.prototype.postConstruct=function(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},t.prototype.dispatchExpanded=function(e){var n=this;null!=this.clientSideRowModel?(this.events.push(e),null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(function(){n.clientSideRowModel&&n.clientSideRowModel.onRowGroupOpened(),n.events.forEach(function(o){return n.eventService.dispatchEvent(o)}),n.events=[]})),this.dispatchExpandedDebounced()):this.eventService.dispatchEvent(e)},$A([F("animationFrameService")],t.prototype,"animationFrameService",void 0),$A([F("rowModel")],t.prototype,"rowModel",void 0),$A([rt],t.prototype,"postConstruct",null),$A([Rt("rowNodeEventThrottle")],t)}(Ye),Kk=function(){return Kk=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},Kk.apply(this,arguments)},Qg=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},QW=function(r,t){return function(e,n){t(e,n,r)}},Fne=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o};function JW(r){return!0===r||"true"===r}var Gne=function(){function r(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Wg}return Object.defineProperty(r.prototype,"context",{get:function(){return this.gridOptions.context},enumerable:!1,configurable:!0}),r.prototype.agWire=function(t,e){this.gridOptions.api=t,this.gridOptions.columnApi=e,this.api=t,this.columnApi=e},r.prototype.init=function(){this.gridOptionLookup=new Set(function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Fne(arguments[t]));return r}(Rw.ALL_PROPERTIES,Rw.EVENT_CALLBACKS));var t=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandler.bind(this),t),this.getScrollbarWidth()},r.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},r.prototype.is=function(t){return JW(this.gridOptions[t])},r.prototype.get=function(t){return this.gridOptions[t]},r.prototype.getNum=function(t){return function kne(r){return"number"==typeof r?r:"string"==typeof r?parseInt(r,10):void 0}(this.gridOptions[t])},r.prototype.getCallback=function(t){return this.mergeGridCommonParams(this.gridOptions[t])},r.prototype.exists=function(t){return Qe(this.gridOptions[t])},r.prototype.mergeGridCommonParams=function(t){var e=this;return t?function(i){var o=i;return o.api=e.api,o.columnApi=e.columnApi,o.context=e.context,t(o)}:t},r.prototype.set=function(t,e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i={}),this.gridOptionLookup.has(t)){var o=this.gridOptions[t];if(n||o!==e){this.gridOptions[t]=e;var s=Kk({type:t,currentValue:e,previousValue:o},i);this.propertyEventService.dispatchEvent(s)}}},r.prototype.addEventListener=function(t,e){this.propertyEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.propertyEventService.removeEventListener(t,e)},r.prototype.globalEventHandler=function(t,e){if(!this.destroyed){var n=Rw.getCallbackForEvent(t);"function"==typeof this.gridOptions[n]&&this.gridOptions[n](e)}},r.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var e="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:C2();null!=e&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:V.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},r.prototype.isRowModelType=function(t){return this.gridOptions.rowModelType===t||"clientSide"===t&&Qt(this.gridOptions.rowModelType)},r.prototype.isDomLayout=function(t){var e;return(null!==(e=this.gridOptions.domLayout)&&void 0!==e?e:"normal")===t},r.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},r.prototype.useAsyncEvents=function(){return!this.is("suppressAsyncEvents")},r.prototype.isGetRowHeightFunction=function(){return"function"==typeof this.gridOptions.getRowHeight},r.prototype.getRowHeightForNode=function(t,e,n){if(void 0===e&&(e=!1),null==n&&(n=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(e)return{height:n,estimated:!0};var i={node:t,data:t.data},o=this.getCallback("getRowHeight")(i);if(this.isNumeric(o))return 0===o&&Yn(function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")},"invalidRowHeight"),{height:Math.max(1,o),estimated:!1}}return t.detail&&this.is("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:n,estimated:!1}},r.prototype.getMasterDetailRowHeight=function(){return this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}},r.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||Qt(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var t=this.gridOptions.rowHeight;return t&&this.isNumeric(t)?(this.environment.setRowHeightVariable(t),t):(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},r.prototype.isNumeric=function(t){return!isNaN(t)&&"number"==typeof t&&isFinite(t)},r.prototype.getDomDataKey=function(){return this.domDataKey},r.prototype.getDomData=function(t,e){var n=t[this.getDomDataKey()];return n?n[e]:void 0},r.prototype.setDomData=function(t,e,n){var i=this.getDomDataKey(),o=t[i];Qt(o)&&(t[i]=o={}),o[e]=n},r.prototype.getDocument=function(){var t=null;return this.gridOptions.getDocument&&Qe(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&Qe(t)?t:document},r.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},r.prototype.getRowIdFunc=function(){var t=this.getCallback("getRowId");if(t)return t;var e=this.gridOptions.getRowNodeId;return e?function(n){return e(n.data)}:void 0},r.prototype.getAsyncTransactionWaitMillis=function(){return Qe(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},r.prototype.isAnimateRows=function(){return!this.is("ensureDomOrder")&&this.is("animateRows")},r.prototype.isTreeData=function(){return this.is("treeData")&&on.assertRegistered(Ot.RowGroupingModule,"Tree Data")},r.prototype.isMasterDetail=function(){return this.is("masterDetail")&&on.assertRegistered(Ot.MasterDetailModule,"masterDetail")},r.prototype.isEnableRangeSelection=function(){return this.is("enableRangeSelection")&&on.isRegistered(Ot.RangeSelectionModule)},r.prototype.isColumnsSortingCoupledToGroup=function(){var t=this.gridOptions.autoGroupColumnDef;return this.isRowModelType("clientSide")&&!t?.comparator},r.prototype.getGroupAggFiltering=function(){var t=this.gridOptions.groupAggFiltering;return"function"==typeof t?this.getCallback("groupAggFiltering"):JW(t)?function(){return!0}:void 0},r.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?hL("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")},r.prototype.isGroupUseEntireRow=function(t){return!t&&!!this.gridOptions.groupDisplayType&&hL("groupRows",this.gridOptions.groupDisplayType)},Qg([F("gridOptions")],r.prototype,"gridOptions",void 0),Qg([F("eventService")],r.prototype,"eventService",void 0),Qg([F("environment")],r.prototype,"environment",void 0),Qg([F("eGridDiv")],r.prototype,"eGridDiv",void 0),Qg([QW(0,ea("gridApi")),QW(1,ea("columnApi"))],r.prototype,"agWire",null),Qg([rt],r.prototype,"init",null),Qg([as],r.prototype,"destroy",null),Qg([Rt("gridOptionsService")],r)}(),Vne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bne=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Vne(t,r),t.prototype.getLocaleTextFunc=function(){var e=this.gridOptionsService.getCallback("getLocaleText");if(e)return function(o,s,a){return e({key:o,defaultValue:s,variableValues:a})};var n=this.gridOptionsService.get("localeTextFunc");if(n)return n;var i=this.gridOptionsService.get("localeText");return function(o,s,a){var d=i&&i[o];if(d&&a&&a.length)for(var f=0;!(f>=a.length)&&-1!==d.indexOf("${variable}");)d=d.replace("${variable}",a[f++]);return d??s}},t=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}([Rt("localeService")],t),t}(Ye),Une=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wne=function(r){function t(){return r.call(this,t.TEMPLATE,"vertical")||this}return Une(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.createManagedBean(new bW(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this)},t.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),n=this.invisibleScrollbar,i=e&&this.gridOptionsService.getScrollbarWidth()||0,o=0===i&&n?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",n),cu(this.getGui(),o),cu(this.eViewport,o),cu(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})},t.TEMPLATE='<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>\n            </div>\n        </div>',function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);i>3&&o&&Object.defineProperty(t,e,o)}([rt],t.prototype,"postConstruct",null),t}(ZW),$ne=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},XW=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat($ne(arguments[t]));return r},zne=function(){function r(t,e,n){e?(this.gridOptions=e,(new Kne).create(t,e,function(i){var o=new bte(t);i.createBean(o)},void 0,n)):console.error("AG Grid: no gridOptions provided to the grid")}return r.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},r}(),Kne=function(){function r(){}return r.prototype.create=function(t,e,n,i,o){var s=this,a=!!e.debug,d=this.getRegisteredModules(o),f=this.createBeansList(e.rowModelType,d),g=this.createProvidedBeans(t,e,o);if(f){var C={providedBeanInstances:g,beanClasses:f,debug:a},E=new Fk("AG Grid",function(){return e.debug}),T=new Fk("Context",function(){return C.debug}),I=new k5(C,T),M=I.getBean("beans");this.registerModuleUserComponents(M,d),this.registerStackComponents(M,d),this.registerControllers(M,d),n(I),M.ctrlsService.whenReady(function(){s.setColumnsAndData(M),s.dispatchGridReadyEvent(M);var k=on.isRegistered(Ot.EnterpriseCoreModule);E.log("initialised successfully, enterprise = "+k)}),i&&i(I)}},r.prototype.registerControllers=function(t,e){e.forEach(function(n){n.controllers&&n.controllers.forEach(function(i){return t.ctrlsFactory.register(i)})})},r.prototype.registerStackComponents=function(t,e){var n=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(n)},r.prototype.getRegisteredModules=function(t){var e=t?t.modules:null,n=on.getRegisteredModules(),i=[],o={};function s(a,d){(function f(g){o[g.moduleName]||(o[g.moduleName]=!0,i.push(g),on.register(g,a))})(d),d.dependantModules&&d.dependantModules.forEach(s.bind(null,a))}return e&&e.forEach(s.bind(null,!0)),n&&n.forEach(s.bind(null,!on.isPackageBased())),i},r.prototype.registerModuleUserComponents=function(t,e){this.extractModuleEntity(e,function(i){return i.userComponents?i.userComponents:[]}).forEach(function(i){t.userComponentRegistry.registerDefaultComponent(i.componentName,i.componentClass)})},r.prototype.createProvidedBeans=function(t,e,n){var i=n?n.frameworkOverrides:null;Qt(i)&&(i=new HW);var o={gridOptions:e,eGridDiv:t,globalEventListener:n?n.globalEventListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(o,n.providedBeanInstances),o},r.prototype.createAgStackComponentsList=function(t){var e=[{componentName:"AgCheckbox",componentClass:N0},{componentName:"AgRadioButton",componentClass:z2},{componentName:"AgToggleButton",componentClass:vee},{componentName:"AgInputTextField",componentClass:xw},{componentName:"AgInputTextArea",componentClass:_ee},{componentName:"AgInputNumberField",componentClass:rk},{componentName:"AgInputRange",componentClass:wee},{componentName:"AgSelect",componentClass:cA},{componentName:"AgSlider",componentClass:Eee},{componentName:"AgGridBody",componentClass:DJ},{componentName:"AgHeaderRoot",componentClass:xX},{componentName:"AgSortIndicator",componentClass:sk},{componentName:"AgPagination",componentClass:nne},{componentName:"AgOverlayWrapper",componentClass:ine},{componentName:"AgGroupComponent",componentClass:Dee},{componentName:"AgPanel",componentClass:VW},{componentName:"AgDialog",componentClass:Hee},{componentName:"AgRowContainer",componentClass:BJ},{componentName:"AgFakeHorizontalScroll",componentClass:Ane},{componentName:"AgFakeVerticalScroll",componentClass:Wne}],n=this.extractModuleEntity(t,function(i){return i.agStackComponents?i.agStackComponents:[]});return e.concat(n)},r.prototype.createBeansList=function(t,e){void 0===t&&(t="clientSide");var n=e.filter(function(d){return!d.rowModel||d.rowModel===t}),i={clientSide:Ot.ClientSideRowModelModule,infinite:Ot.InfiniteRowModelModule,serverSide:Ot.ServerSideRowModelModule,viewport:Ot.ViewportRowModelModule};if(i[t]){if(on.assertRegistered(i[t],"rowModelType = '"+t+"'")){var o=[CW,sne,une,mne,Mte,nQ,L9,Hte,Ute,UX,X9,Jte,LX,Bne,oZ,aee,tQ,RZ,Wg,Gne,qee,lte,iQ,wZ,IX,fee,nee,pte,X5,vte,ite,PJ,Fte,dte,Cte,bZ,zX,GX,us,ute,Z0,IJ,Yte,tte,oee,gee,RJ,Tte,Ite,Pte,ene,uZ,Gte,WX,pne,AZ,yne,_ne,dee,wne,bne,Nne,xne,Rne],s=this.extractModuleEntity(n,function(d){return d.beans?d.beans:[]});o.push.apply(o,XW(s));var a=[];return o.forEach(function(d){a.indexOf(d)<0&&a.push(d)}),a}}else console.error("AG Grid: could not find row model for rowModelType = "+t)},r.prototype.extractModuleEntity=function(t,e){return[].concat.apply([],XW(t.map(e)))},r.prototype.setColumnsAndData=function(t){var e=t.gridOptionsService.get("columnDefs");t.columnModel.setColumnDefs(e||[],"gridInitializing"),t.rowModel.start()},r.prototype.dispatchGridReadyEvent=function(t){t.eventService.dispatchEvent({type:V.EVENT_GRID_READY})},r}(),qne=function(){function r(){}return r.prototype.wrap=function(t,e,n,i){var o=this;void 0===n&&(n=[]);var s=this.createWrapper(t,i);return e.forEach(function(a){o.createMethod(s,a,!0)}),n.forEach(function(a){o.createMethod(s,a,!1)}),s},r.prototype.unwrap=function(t){return t},r.prototype.createMethod=function(t,e,n){t.addMethod(e,this.createMethodProxy(t,e,n))},r.prototype.createMethodProxy=function(t,e,n){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(n&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},r}(),Bw=typeof global>"u"?{}:global;Bw.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement,Bw.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement,Bw.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement,Bw.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement,Bw.Node=typeof Node>"u"?{}:Node,Bw.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Yne=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},e3=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Yne(arguments[t]));return r},Zne=function(){function r(t,e,n,i,o,s){this.nextId=0,this.allNodesMap={},this.rootNode=t,this.gridOptionsService=e,this.eventService=n,this.columnModel=i,this.beans=s,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=r.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return r.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingTreeData=this.gridOptionsService.isTreeData(),this.doingMasterDetail=this.gridOptionsService.isMasterDetail()},r.prototype.getCopyOfNodesMap=function(){return tn.cloneObject(this.allNodesMap)},r.prototype.getRowNode=function(t){return this.allNodesMap[t]},r.prototype.setRowData=function(t){var e=this;if("string"!=typeof t){var n=this.rootNode,i=this.rootNode.sibling;n.childrenAfterFilter=null,n.childrenAfterGroup=null,n.childrenAfterAggFilter=null,n.childrenAfterSort=null,n.childrenMapped=null,n.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?n.allLeafChildren=t.map(function(o){return e.createNode(o,e.rootNode,r.TOP_LEVEL)}):(n.allLeafChildren=[],n.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=n.childrenAfterFilter,i.childrenAfterGroup=n.childrenAfterGroup,i.childrenAfterAggFilter=n.childrenAfterAggFilter,i.childrenAfterSort=n.childrenAfterSort,i.childrenMapped=n.childrenMapped,i.allLeafChildren=n.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},r.prototype.updateRowData=function(t,e){var n={remove:[],update:[],add:[]},i=[];return this.executeRemove(t,n,i),this.executeUpdate(t,n,i),this.executeAdd(t,n),this.updateSelection(i,"rowDataChanged"),e&&tn.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),n},r.prototype.updateSelection=function(t,e){var n=t.length>0;n&&t.forEach(function(o){o.setSelected(!1,!1,!0,e)}),this.selectionService.updateGroupsFromChildrenSelections(e),n&&this.eventService.dispatchEvent({type:V.EVENT_SELECTION_CHANGED,source:e})},r.prototype.executeAdd=function(t,e){var i,n=this,o=t.add,s=t.addIndex;if(!tn.missingOrEmpty(o)){var a=o.map(function(I){return n.createNode(I,n.rootNode,r.TOP_LEVEL)});if("number"==typeof s&&s>=0){var d=this.rootNode.allLeafChildren,f=d.length,g=s;if(this.doingTreeData&&s>0&&f>0)for(var C=0;C<f;C++)if((null===(i=d[C])||void 0===i?void 0:i.rowIndex)==s-1){g=C+1;break}var E=d.slice(0,g),T=d.slice(g,d.length);this.rootNode.allLeafChildren=e3(E,a,T)}else this.rootNode.allLeafChildren=e3(this.rootNode.allLeafChildren,a);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),e.add=a}},r.prototype.executeRemove=function(t,e,n){var i=this,o=t.remove;if(!tn.missingOrEmpty(o)){var s={};o.forEach(function(a){var d=i.lookupRowNode(a);d&&(d.isSelected()&&n.push(d),d.clearRowTopAndRowIndex(),s[d.id]=!0,delete i.allNodesMap[d.id],e.remove.push(d))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(a){return!s[a.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},r.prototype.executeUpdate=function(t,e,n){var i=this,o=t.update;tn.missingOrEmpty(o)||o.forEach(function(s){var a=i.lookupRowNode(s);a&&(a.updateData(s),!a.selectable&&a.isSelected()&&n.push(a),i.setMasterForRow(a,s,r.TOP_LEVEL,!1),e.update.push(a))})},r.prototype.lookupRowNode=function(t){var n,e=this.gridOptionsService.getRowIdFunc();if(e){var i=e({data:t,level:0});if(!(n=this.allNodesMap[i]))return console.error("AG Grid: could not find row id="+i+", data item was not found for this id"),null}else if(!(n=this.rootNode.allLeafChildren.find(function(o){return o.data===t})))return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return n||null},r.prototype.createNode=function(t,e,n){var i=new In(this.beans);return i.group=!1,this.setMasterForRow(i,t,n,!0),e&&!this.suppressParentsInRowNodes&&(i.parent=e),i.level=n,i.setDataAndId(t,this.nextId.toString()),this.allNodesMap[i.id]&&console.warn("AG Grid: duplicate node id '"+i.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[i.id]=i,this.nextId++,i},r.prototype.setMasterForRow=function(t,e,n,i){if(this.doingTreeData)t.setMaster(!1),i&&(t.expanded=!1);else if(t.setMaster(!!this.doingMasterDetail&&(!this.isRowMasterFunc||this.isRowMasterFunc(e))),i){var o=this.columnModel.getRowGroupColumns();t.expanded=!!t.master&&this.isExpanded(n+(o?o.length:0))}},r.prototype.isExpanded=function(t){var e=this.gridOptionsService.getNum("groupDefaultExpanded");return-1===e||t<e},r.TOP_LEVEL=0,r.ROOT_NODE_ID="ROOT_NODE_ID",r}(),Qne=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Na=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Jne=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o},zA=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Jne(arguments[t]));return r},vc=(()=>(function(r){r[r.Normal=0]="Normal",r[r.AfterFilter=1]="AfterFilter",r[r.AfterFilterAndSort=2]="AfterFilterAndSort",r[r.PivotNodes=3]="PivotNodes"}(vc||(vc={})),vc))(),Xne=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=tn.debounce(e.onRowHeightChanged.bind(e),100),e.rowsToDisplay=[],e}return Qne(t,r),t.prototype.init=function(){var e=this.refreshModel.bind(this,{step:Jn.EVERYTHING}),n=!this.gridOptionsService.is("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:Jn.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:n});this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:Jn.PIVOT})),this.addManagedListener(this.eventService,V.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,this.resetRowHeights.bind(this));var o=this.refreshModel.bind(this,{step:Jn.MAP,keepRenderedRows:!0,animate:n});this.addManagedPropertyListener("groupRemoveSingleChildren",o),this.addManagedPropertyListener("groupRemoveLowestSingleChildren",o),this.rootNode=new In(this.beans),this.nodeManager=new Zne(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)},t.prototype.start=function(){var e=this.gridOptionsService.get("rowData");e&&this.setRowData(e)},t.prototype.ensureRowHeightsValid=function(e,n,i,o){var s,a=!1;do{s=!1;for(var d=this.getRowIndexAtPixel(e),f=this.getRowIndexAtPixel(n),g=Math.max(d,i),C=Math.min(f,o),E=g;E<=C;E++){var T=this.getRow(E);if(T.rowHeightEstimated){var I=this.gridOptionsService.getRowHeightForNode(T);T.setRowHeight(I.height),s=!0,a=!0}}s&&this.setRowTopAndRowIndex()}while(s);return a},t.prototype.setRowTopAndRowIndex=function(){for(var e=this.environment.getDefaultRowHeight(),n=0,i=new Set,o=this.gridOptionsService.isDomLayout("normal"),s=0;s<this.rowsToDisplay.length;s++){var a=this.rowsToDisplay[s];if(null!=a.id&&i.add(a.id),null==a.rowHeight){var d=this.gridOptionsService.getRowHeightForNode(a,o,e);a.setRowHeight(d.height,d.estimated)}a.setRowTop(n),a.setRowIndex(s),n+=a.rowHeight}return i},t.prototype.clearRowTopAndRowIndex=function(e,n){var i=e.isActive(),o=function(a){a&&null!=a.id&&!n.has(a.id)&&a.clearRowTopAndRowIndex()},s=function(a){o(a),o(a.detailNode),o(a.sibling),a.hasChildren()&&a.childrenAfterGroup&&(i&&-1!=a.level&&!a.expanded||a.childrenAfterGroup.forEach(s))};s(this.rootNode)},t.prototype.ensureRowsAtPixel=function(e,n,i){var o=this;void 0===i&&(i=0);var s=this.getRowIndexAtPixel(n),a=this.getRow(s),d=!this.gridOptionsService.is("suppressAnimationFrame");return a!==e[0]&&(e.forEach(function(f){tn.removeFromArray(o.rootNode.allLeafChildren,f)}),e.forEach(function(f,g){tn.insertIntoArray(o.rootNode.allLeafChildren,f,Math.max(s+i,0)+g)}),this.refreshModel({step:Jn.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:d}),!0)},t.prototype.highlightRowAtPixel=function(e,n){var i=null!=n?this.getRowIndexAtPixel(n):null,o=null!=i?this.getRow(i):null;if(o&&e&&o!==e&&null!=n){var s=this.getHighlightPosition(n,o);this.lastHighlightedRow&&this.lastHighlightedRow!==o&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),o.setHighlighted(s),this.lastHighlightedRow=o}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},t.prototype.getHighlightPosition=function(e,n){if(!n){var i=this.getRowIndexAtPixel(e);if(!(n=this.getRow(i||0)))return rh.Below}return e-n.rowTop<n.rowHeight/2?rh.Above:rh.Below},t.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},t.prototype.getTopLevelRowCount=function(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;var n=this.rootNode.childrenAfterAggFilter;return n?n.length:0},t.prototype.getTopLevelRowDisplayedIndex=function(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;var i=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.is("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex},t.prototype.getRowBounds=function(e){if(tn.missing(this.rowsToDisplay))return null;var n=this.rowsToDisplay[e];return n?{rowTop:n.rowTop,rowHeight:n.rowHeight}:null},t.prototype.onRowGroupOpened=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Jn.MAP,keepRenderedRows:!0,animate:e})},t.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var n=this.gridOptionsService.isAnimateRows(),i=0===e.columns.length||e.columns.some(function(s){return s.isPrimary()});this.refreshModel({step:i?Jn.FILTER:Jn.FILTER_AGGREGATES,keepRenderedRows:!0,animate:n})}},t.prototype.onSortChanged=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Jn.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},t.prototype.getType=function(){return"clientSide"},t.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:Jn.PIVOT}):this.refreshModel({step:Jn.AGGREGATE})},t.prototype.createChangePath=function(e){var n=tn.missingOrEmpty(e),i=new Ak(!1,this.rootNode);return(n||this.gridOptionsService.isTreeData())&&i.setInactive(),i},t.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction")||null==e.rowNodeTransactions)return!1;var n=e.rowNodeTransactions.filter(function(o){return null!=o.add&&o.add.length>0||null!=o.remove&&o.remove.length>0});return null==n||0==n.length},t.prototype.buildRefreshModelParams=function(e){var n=Jn.EVERYTHING,i={everything:Jn.EVERYTHING,group:Jn.EVERYTHING,filter:Jn.FILTER,map:Jn.MAP,aggregate:Jn.AGGREGATE,sort:Jn.SORT,pivot:Jn.PIVOT};if(tn.exists(e)&&(n=i[e]),!tn.missing(n))return{step:n,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gridOptionsService.is("suppressAnimationFrame")};console.error("AG Grid: invalid step "+e+", available steps are "+Object.keys(i).join(", "))},t.prototype.refreshModel=function(e){var n="object"==typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(n&&!this.isSuppressModelUpdateAfterUpdateTransaction(n)){var i=this.createChangePath(n.rowNodeTransactions);switch(n.step){case Jn.EVERYTHING:this.doRowGrouping(n.groupState,n.rowNodeTransactions,n.rowNodeOrder,i,!!n.afterColumnsChanged);case Jn.FILTER:this.doFilter(i);case Jn.PIVOT:this.doPivot(i);case Jn.AGGREGATE:this.doAggregate(i);case Jn.FILTER_AGGREGATES:this.doFilterAggregates(i);case Jn.SORT:this.doSort(n.rowNodeTransactions,i);case Jn.MAP:this.doRowsToDisplay()}var o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,o),this.eventService.dispatchEvent({type:V.EVENT_MODEL_UPDATED,animate:n.animate,keepRenderedRows:n.keepRenderedRows,newData:n.newData,newPage:!1,keepUndoRedoStack:n.keepUndoRedoStack})}},t.prototype.isEmpty=function(){var e=tn.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return tn.missing(this.rootNode)||e||!this.columnModel.isReady()},t.prototype.isRowsToRender=function(){return tn.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},t.prototype.getNodesInRangeForSelection=function(e,n){var s,i=!n,o=!1,a=[],d=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(function(f){var g=i&&!o;if(i||(f===n||f===e)&&(i=!0),!f.group||!d){var E=i&&!o,T=f.isParentOfNode(s);(E||T)&&a.push(f)}g&&(f===n||f===e)&&(o=!0,s=f===n?n:e)}),a},t.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},t.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},t.prototype.getRootNode=function(){return this.rootNode},t.prototype.getRow=function(e){return this.rowsToDisplay[e]},t.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},t.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;var n=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(tn.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;for(var s=-1,a=-1;;){var d=Math.floor((n+i)/2),f=this.rowsToDisplay[d];if(this.isRowInPixel(f,e))return d;if(f.rowTop<e?n=d+1:f.rowTop>e&&(i=d-1),s===n&&a===i)return d;s=n,a=i}},t.prototype.isRowInPixel=function(e,n){return e.rowTop<=n&&e.rowTop+e.rowHeight>n},t.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(n,i){return e(n,i)})},t.prototype.forEachNode=function(e,n){void 0===n&&(n=!1),this.recursivelyWalkNodesAndCallback({nodes:zA(this.rootNode.childrenAfterGroup||[]),callback:e,recursionType:vc.Normal,index:0,includeFooterNodes:n})},t.prototype.forEachNodeAfterFilter=function(e,n){void 0===n&&(n=!1),this.recursivelyWalkNodesAndCallback({nodes:zA(this.rootNode.childrenAfterAggFilter||[]),callback:e,recursionType:vc.AfterFilter,index:0,includeFooterNodes:n})},t.prototype.forEachNodeAfterFilterAndSort=function(e,n){void 0===n&&(n=!1),this.recursivelyWalkNodesAndCallback({nodes:zA(this.rootNode.childrenAfterSort||[]),callback:e,recursionType:vc.AfterFilterAndSort,index:0,includeFooterNodes:n})},t.prototype.forEachPivotNode=function(e,n){void 0===n&&(n=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:vc.PivotNodes,index:0,includeFooterNodes:n})},t.prototype.recursivelyWalkNodesAndCallback=function(e){var n,i=e.nodes,o=e.callback,s=e.recursionType,a=e.includeFooterNodes,d=e.index,f=i[0];a&&null!==(n=f?.parent)&&void 0!==n&&n.sibling&&i.push(f.parent.sibling);for(var g=0;g<i.length;g++){var C=i[g];if(o(C,d++),C.hasChildren()&&!C.footer){var E=null;switch(s){case vc.Normal:E=C.childrenAfterGroup;break;case vc.AfterFilter:E=C.childrenAfterAggFilter;break;case vc.AfterFilterAndSort:E=C.childrenAfterSort;break;case vc.PivotNodes:E=C.leafGroup?null:C.childrenAfterSort}E&&(d=this.recursivelyWalkNodesAndCallback({nodes:zA(E),callback:o,recursionType:s,index:d,includeFooterNodes:a}))}}return d},t.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doFilterAggregates=function(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},t.prototype.expandOrCollapseAll=function(e){var n=this.gridOptionsService.isTreeData(),i=this.columnModel.isPivotActive(),o=function(d){d&&d.forEach(function(f){var g=function(){f.expanded=e,o(f.childrenAfterGroup)};n?tn.exists(f.childrenAfterGroup)&&g():i?!f.leafGroup&&g():f.group&&g()})};this.rootNode&&o(this.rootNode.childrenAfterGroup),this.refreshModel({step:Jn.MAP}),this.eventService.dispatchEvent({type:V.EVENT_EXPAND_COLLAPSE_ALL,source:e?"expandAll":"collapseAll"})},t.prototype.doSort=function(e,n){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:n})},t.prototype.doRowGrouping=function(e,n,i,o,s){this.groupStage?(n?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:n,rowNodeOrder:i,changedPath:o}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:o,afterColumnsChanged:s}),this.restoreGroupState(e)),this.gridOptionsService.is("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",o)&&this.eventService.dispatchEvent({type:V.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"})):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren())},t.prototype.restoreGroupState=function(e){e&&tn.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(n,i){"boolean"==typeof e[i]&&(n.expanded=e[i])})},t.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;var e={};return tn.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(n,i){return e[i]=n.expanded}),e},t.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},t.prototype.getRowNode=function(e){if("string"==typeof e&&0==e.indexOf(In.ID_PREFIX_ROW_GROUP)){var i=void 0;return this.forEachNode(function(o){o.id===e&&(i=o)}),i}return this.nodeManager.getRowNode(e)},t.prototype.setRowData=function(e){var n=this.getGroupState();this.nodeManager.setRowData(e),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated"),this.eventService.dispatchEvent({type:V.EVENT_ROW_DATA_UPDATED}),this.refreshModel({step:Jn.EVERYTHING,groupState:n,newData:!0})},t.prototype.batchUpdateRowData=function(e,n){var i=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var o=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){i.executeBatchUpdateRowData()},o)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:n})},t.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},t.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var n=[],i=[],o=!1;this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(a){var d=e.nodeManager.updateRowData(a.rowDataTransaction,void 0);i.push(d),a.callback&&n.push(a.callback.bind(null,d)),"number"==typeof a.rowDataTransaction.addIndex&&(o=!0)}),this.commonUpdateRowData(i,void 0,o),n.length>0&&window.setTimeout(function(){n.forEach(function(a){return a()})},0),i.length>0&&this.eventService.dispatchEvent({type:V.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:i}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},t.prototype.updateRowData=function(e,n){this.valueCache.onDataChanged();var i=this.nodeManager.updateRowData(e,n);return this.commonUpdateRowData([i],n,"number"==typeof e.addIndex),i},t.prototype.createRowNodeOrder=function(){if(!this.gridOptionsService.is("suppressMaintainUnsortedOrder")){var n={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var i=0;i<this.rootNode.allLeafChildren.length;i++)n[this.rootNode.allLeafChildren[i].id]=i;return n}},t.prototype.commonUpdateRowData=function(e,n,i){var o=!this.gridOptionsService.is("suppressAnimationFrame");i&&(n=this.createRowNodeOrder()),this.refreshModel({step:Jn.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:n,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),this.filterManager.onNewRowsLoaded("rowDataUpdated"),this.eventService.dispatchEvent({type:V.EVENT_ROW_DATA_UPDATED})},t.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},t.prototype.onRowHeightChanged=function(){this.refreshModel({step:Jn.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},t.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},t.prototype.resetRowHeights=function(){var e=!1;this.forEachNode(function(n){n.setRowHeight(n.rowHeight,!0);var i=n.detailNode;i&&i.setRowHeight(i.rowHeight,!0),e=!0}),this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),e&&this.onRowHeightChanged()},Na([F("columnModel")],t.prototype,"columnModel",void 0),Na([F("selectionService")],t.prototype,"selectionService",void 0),Na([F("filterManager")],t.prototype,"filterManager",void 0),Na([F("valueCache")],t.prototype,"valueCache",void 0),Na([F("beans")],t.prototype,"beans",void 0),Na([F("filterStage")],t.prototype,"filterStage",void 0),Na([F("sortStage")],t.prototype,"sortStage",void 0),Na([F("flattenStage")],t.prototype,"flattenStage",void 0),Na([tr("groupStage")],t.prototype,"groupStage",void 0),Na([tr("aggregationStage")],t.prototype,"aggregationStage",void 0),Na([tr("pivotStage")],t.prototype,"pivotStage",void 0),Na([tr("filterAggregatesStage")],t.prototype,"filterAggregatesStage",void 0),Na([rt],t.prototype,"init",null),Na([Rt("rowModel")],t)}(Ye),ere=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),t3=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},tre=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ere(t,r),t.prototype.execute=function(e){this.filterService.filter(e.changedPath)},t3([F("filterService")],t.prototype,"filterService",void 0),t3([Rt("filterStage")],t)}(Ye),nre=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),KA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},rre=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nre(t,r),t.prototype.execute=function(e){var n=this,i=this.sortController.getSortOptions(),o=tn.exists(i)&&i.length>0,s=o&&tn.exists(e.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),a=i.some(function(d){return!!n.columnModel.getGroupDisplayColumnForGroup(d.column.getId())});this.sortService.sort(i,o,s,e.rowNodeTransactions,e.changedPath,a)},KA([F("sortService")],t.prototype,"sortService",void 0),KA([F("sortController")],t.prototype,"sortController",void 0),KA([F("columnModel")],t.prototype,"columnModel",void 0),KA([Rt("sortStage")],t)}(Ye),ire=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),qk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},ore=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ire(t,r),t.prototype.execute=function(e){var n=e.rowNode,i=[],o={value:0},s=this.columnModel.isPivotMode(),a=s&&n.leafGroup;return this.recursivelyAddToRowsToDisplay(a?[n]:n.childrenAfterSort,i,o,s,0),!a&&i.length>0&&this.gridOptionsService.is("groupIncludeTotalFooter")&&(n.createFooter(),this.addRowNodeToRowsToDisplay(n.sibling,i,o,0)),i},t.prototype.recursivelyAddToRowsToDisplay=function(e,n,i,o,s){if(!tn.missingOrEmpty(e))for(var a=this.gridOptionsService.is("groupHideOpenParents"),d=this.gridOptionsService.is("groupRemoveSingleChildren"),f=!d&&this.gridOptionsService.is("groupRemoveLowestSingleChildren"),g=0;g<e.length;g++){var C=e[g],E=C.hasChildren(),I=d&&E&&1===C.childrenAfterGroup.length,M=f&&E&&C.leafGroup&&1===C.childrenAfterGroup.length;if(!(o&&!E||a&&C.expanded&&!C.master&&(!o||!C.leafGroup)||I||M)&&this.addRowNodeToRowsToDisplay(C,n,i,s),!o||!C.leafGroup)if(E){var J=I||M;(C.expanded||J)&&(this.recursivelyAddToRowsToDisplay(C.childrenAfterSort,n,i,o,J?s:s+1),this.gridOptionsService.is("groupIncludeFooter")&&this.addRowNodeToRowsToDisplay(C.sibling,n,i,s))}else if(C.master&&C.expanded){var ce=this.createDetailNode(C);this.addRowNodeToRowsToDisplay(ce,n,i,s)}}},t.prototype.addRowNodeToRowsToDisplay=function(e,n,i,o){var s=this.gridOptionsService.isGroupMultiAutoColumn();n.push(e),e.setUiLevel(s?0:o)},t.prototype.createDetailNode=function(e){if(tn.exists(e.detailNode))return e.detailNode;var n=new In(this.beans);return n.detail=!0,n.selectable=!1,n.parent=e,tn.exists(e.id)&&(n.id="detail_"+e.id),n.data=e.data,n.level=e.level+1,e.detailNode=n,n},qk([F("columnModel")],t.prototype,"columnModel",void 0),qk([F("beans")],t.prototype,"beans",void 0),qk([Rt("flattenStage")],t)}(Ye),sre=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),qA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},are=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sre(t,r),t.prototype.init=function(){this.postSortFunc=this.getPostSortFunc()},t.prototype.sort=function(e,n,i,o,s,a){var d=this,f=this.gridOptionsService.is("groupMaintainOrder"),g=this.columnModel.getAllGridColumns().some(function(I){return I.isRowGroupActive()}),C={};i&&o&&(C=this.calculateDirtyNodes(o));var E=this.columnModel.isPivotMode();s&&s.forEachChangedNodeDepthFirst(function(I){d.pullDownGroupDataForHideOpenParents(I.childrenAfterAggFilter,!0);var M=E&&I.leafGroup;if(f&&g&&!I.leafGroup&&!a){var W=I.childrenAfterAggFilter.slice(0);if(I.childrenAfterSort){var z={};I.childrenAfterSort.forEach(function(re,ce){z[re.id]=ce}),W.sort(function(re,ce){var Re,Xe;return(null!==(Re=z[re.id])&&void 0!==Re?Re:0)-(null!==(Xe=z[ce.id])&&void 0!==Xe?Xe:0)})}I.childrenAfterSort=W}else I.childrenAfterSort=!n||M?I.childrenAfterAggFilter.slice(0):i?d.doDeltaSort(I,C,s,e):d.rowNodeSorter.doFullSort(I.childrenAfterAggFilter,e);I.sibling&&(I.sibling.childrenAfterSort=I.childrenAfterSort),d.updateChildIndexes(I),d.postSortFunc&&d.postSortFunc({nodes:I.childrenAfterSort})}),this.updateGroupDataForHideOpenParents(s)},t.prototype.getPostSortFunc=function(){var e=this.gridOptionsService.getCallback("postSortRows");if(e)return e;var n=this.gridOptionsService.get("postSort");return n?function(i){return n(i.nodes)}:void 0},t.prototype.calculateDirtyNodes=function(e){var n={},i=function(o){o&&o.forEach(function(s){return n[s.id]=!0})};return e&&e.forEach(function(o){i(o.add),i(o.update),i(o.remove)}),n},t.prototype.doDeltaSort=function(e,n,i,o){var s=this,a=e.childrenAfterAggFilter,d=e.childrenAfterSort;if(!d)return this.rowNodeSorter.doFullSort(a,o);var f={},g=[];a.forEach(function(I){n[I.id]||!i.canSkip(I)?g.push(I):f[I.id]=!0});var C=d.filter(function(I){return f[I.id]}),E=function(I,M){return{currentPos:M,rowNode:I}},T=g.map(E).sort(function(I,M){return s.rowNodeSorter.compareRowNodes(o,I,M)});return this.mergeSortedArrays(o,T,C.map(E)).map(function(I){return I.rowNode})},t.prototype.mergeSortedArrays=function(e,n,i){for(var o=[],s=0,a=0;s<n.length&&a<i.length;){var d=this.rowNodeSorter.compareRowNodes(e,n[s],i[a]);o.push(d<0?n[s++]:i[a++])}for(;s<n.length;)o.push(n[s++]);for(;a<i.length;)o.push(i[a++]);return o},t.prototype.updateChildIndexes=function(e){if(!tn.missing(e.childrenAfterSort))for(var n=e.childrenAfterSort,i=0;i<n.length;i++){var o=n[i],a=i===e.childrenAfterSort.length-1;o.setFirstChild(0===i),o.setLastChild(a),o.setChildIndex(i)}},t.prototype.updateGroupDataForHideOpenParents=function(e){var n=this;if(this.gridOptionsService.is("groupHideOpenParents")){if(this.gridOptionsService.isTreeData())return tn.doOnce(function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")},"sortService.hideOpenParentsWithTreeData"),!1;var o=function(s){n.pullDownGroupDataForHideOpenParents(s.childrenAfterSort,!1),s.childrenAfterSort.forEach(function(a){a.hasChildren()&&o(a)})};e&&e.executeFromRootNode(function(s){return o(s)})}},t.prototype.pullDownGroupDataForHideOpenParents=function(e,n){var i=this;!this.gridOptionsService.is("groupHideOpenParents")||tn.missing(e)||e.forEach(function(o){i.columnModel.getGroupDisplayColumns().forEach(function(a){var d=a.getColDef().showRowGroup;if("string"==typeof d){var g=i.columnModel.getPrimaryColumn(d);if(g!==o.rowGroupColumn)if(n)o.setGroupValue(a.getId(),void 0);else{var E=o.getFirstChildOfFirstChild(g);E&&o.setGroupValue(a.getId(),E.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")})})},qA([F("columnModel")],t.prototype,"columnModel",void 0),qA([F("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),qA([rt],t.prototype,"init",null),qA([Rt("sortService")],t)}(Ye),lre=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),n3=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},ure=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return lre(t,r),t.prototype.filter=function(e){var n=this.filterManager.isColumnFilterPresent()||this.filterManager.isQuickFilterPresent()||this.filterManager.isExternalFilterPresent();this.filterNodes(n,e)},t.prototype.filterNodes=function(e,n){var i=this,o=function(f,g){f.childrenAfterFilter=f.hasChildren()&&e&&!g?f.childrenAfterGroup.filter(function(C){var E=C.childrenAfterFilter&&C.childrenAfterFilter.length>0,T=C.data&&i.filterManager.doesRowPassFilter({rowNode:C});return E||T}):f.childrenAfterGroup,f.sibling&&(f.sibling.childrenAfterFilter=f.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var s=function(f,g){if(f.childrenAfterGroup)for(var C=0;C<f.childrenAfterGroup.length;C++){var E=f.childrenAfterGroup[C],T=g||i.filterManager.doesRowPassFilter({rowNode:E});E.childrenAfterGroup?s(f.childrenAfterGroup[C],T):o(E,T)}o(f,g)};n.executeFromRootNode(function(f){return s(f,!1)})}else n.forEachChangedNodeDepthFirst(function(f){return o(f,!1)},!0)},t.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.isTreeData()&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")},n3([F("filterManager")],t.prototype,"filterManager",void 0),n3([Rt("filterService")],t)}(Ye),cre=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),YA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},hre=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return cre(t,r),t.prototype.postConstruct=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},t.prototype.isActive=function(){var e=this.gridOptionsService.exists("getRowId"),n=this.gridOptionsService.is("immutableData");return!this.gridOptionsService.is("resetRowDataOnUpdate")&&(e||n)},t.prototype.setRowData=function(e){var n=this.createTransactionForRowData(e);if(n){var i=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var i,s,n=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o}(n,2),a=this.clientSideRowModel.updateRowData(i[0],i[1]);a&&this.rowRenderer.refreshFullWidthRows(a.update)}},t.prototype.createTransactionForRowData=function(e){if(tn.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var n=this.gridOptionsService.getRowIdFunc();if(null!=n){var i={remove:[],update:[],add:[]},o=this.clientSideRowModel.getCopyOfNodesMap(),a=this.gridOptionsService.is("suppressMaintainUnsortedOrder")?void 0:{};return tn.exists(e)&&e.forEach(function(d,f){var g=n({data:d,level:0}),C=o[g];a&&(a[g]=f),C?(C.data!==d&&i.update.push(d),o[g]=void 0):i.add.push(d)}),tn.iterateObject(o,function(d,f){f&&i.remove.push(f.data)}),[i,a]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},YA([F("rowModel")],t.prototype,"rowModel",void 0),YA([F("rowRenderer")],t.prototype,"rowRenderer",void 0),YA([rt],t.prototype,"postConstruct",null),YA([Rt("immutableService")],t)}(Ye),pre={version:"29.2.0",moduleName:Ot.ClientSideRowModelModule,rowModel:"clientSide",beans:[Xne,tre,rre,ore,are,ure,hre]},gre=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yk=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},r3=function(r){function t(e,n,i){var o=r.call(this,e)||this;return o.parentCache=n,o.params=i,o.startRow=e*i.blockSize,o.endRow=o.startRow+i.blockSize,o}return gre(t,r),t.prototype.postConstruct=function(){this.createRowNodes()},t.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},t.prototype.setDataAndId=function(e,n,i){!e.id&&e.alreadyRendered&&(e.alreadyRendered=!1),tn.exists(n)?e.setDataAndId(n,i.toString()):e.setDataAndId(void 0,void 0)},t.prototype.loadFromDatasource=function(){var e=this,n=this.createLoadParams();tn.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout(function(){e.params.datasource.getRows(n)},0)},t.prototype.processServerFail=function(){},t.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context}},t.prototype.forEachNode=function(e,n,i){var o=this;this.rowNodes.forEach(function(s,a){o.startRow+a<i&&e(s,n.next())})},t.prototype.getLastAccessed=function(){return this.lastAccessed},t.prototype.getRow=function(e,n){return void 0===n&&(n=!1),n||(this.lastAccessed=this.params.lastAccessedSequence.next()),this.rowNodes[e-this.startRow]},t.prototype.getStartRow=function(){return this.startRow},t.prototype.getEndRow=function(){return this.endRow},t.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.params.blockSize;e++){var n=this.startRow+e,i=new In(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(n),i.setRowTop(this.params.rowHeight*n),this.rowNodes.push(i)}},t.prototype.processServerResult=function(e){var n=this;this.rowNodes.forEach(function(o,s){n.setDataAndId(o,e.rowData?e.rowData[s]:void 0,n.startRow+s)}),this.parentCache.pageLoaded(this,null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0)},t.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(e){e.clearRowTopAndRowIndex()})},Yk([F("beans")],t.prototype,"beans",void 0),Yk([rt],t.prototype,"postConstruct",null),Yk([as],t.prototype,"destroyRowNodes",null),t}(Pk),mre=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ZA=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},vre=function(r,t){return function(e,n){t(e,n,r)}},yre=function(r){function t(e){var n=r.call(this)||this;return n.lastRowIndexKnown=!1,n.blocks={},n.blockCount=0,n.rowCount=e.initialRowCount,n.params=e,n}return mre(t,r),t.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},t.prototype.getRow=function(e,n){void 0===n&&(n=!1);var i=Math.floor(e/this.params.blockSize),o=this.blocks[i];if(!o){if(n)return;o=this.createBlock(i)}return o.getRow(e)},t.prototype.createBlock=function(e){var n=this.createBean(new r3(e,this,this.params));return this.blocks[n.getId()]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),this.params.rowNodeBlockLoader.addBlock(n),n},t.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(function(n){return n.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad())},t.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(n){return e.destroyBlock(n)})},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},t.prototype.pageLoaded=function(e,n){this.isAlive()&&(this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+n),this.checkRowCount(e,n),this.onCacheUpdated())},t.prototype.purgeBlocksIfNeeded=function(e){var n=this,i=this.getBlocksInOrder().filter(function(f){return f!=e});i.sort(function(f,g){return g.getLastAccessed()-f.getLastAccessed()});var s=this.params.maxBlocksInCache>0,a=s?this.params.maxBlocksInCache-1:null,d=t.MAX_EMPTY_BLOCKS_TO_KEEP-1;i.forEach(function(f,g){if(f.getState()===r3.STATE_WAITING_TO_LOAD&&g>=d||s&&g>=a){if(n.isBlockCurrentlyDisplayed(f)||n.isBlockFocused(f))return;n.removeBlockFromCache(f)}})},t.prototype.isBlockFocused=function(e){var n=this.focusService.getFocusCellToUseAfterRefresh();if(!n||null!=n.rowPinned)return!1;var i=e.getStartRow(),o=e.getEndRow();return n.rowIndex>=i&&n.rowIndex<o},t.prototype.isBlockCurrentlyDisplayed=function(e){var n=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(n,i)},t.prototype.removeBlockFromCache=function(e){e&&this.destroyBlock(e)},t.prototype.checkRowCount=function(e,n){if("number"==typeof n&&n>=0)this.rowCount=n,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var o=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}},t.prototype.setRowCount=function(e,n){this.rowCount=e,tn.exists(n)&&(this.lastRowIndexKnown=n),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},t.prototype.forEachNodeDeep=function(e){var n=this,i=new Nw;this.getBlocksInOrder().forEach(function(o){return o.forEachNode(e,i,n.rowCount)})},t.prototype.getBlocksInOrder=function(){return tn.getAllValuesInObject(this.blocks).sort(function(i,o){return i.getId()-o.getId()})},t.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)},t.prototype.onCacheUpdated=function(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:V.EVENT_STORE_UPDATED}))},t.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,n=[];this.getBlocksInOrder().forEach(function(i){i.getId()*e.params.blockSize>=e.rowCount&&n.push(i)}),n.length>0&&n.forEach(function(i){return e.destroyBlock(i)})},t.prototype.purgeCache=function(){var e=this;this.getBlocksInOrder().forEach(function(n){return e.removeBlockFromCache(n)}),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},t.prototype.getRowNodesInRange=function(e,n){var i=this,o=[],s=-1,a=!1,d=new Nw;tn.missing(e)&&(a=!0);var f=!1;return this.getBlocksInOrder().forEach(function(C){if(!f){if(a&&s+1!==C.getId())return void(f=!0);s=C.getId(),C.forEachNode(function(E){var T=E===e||E===n;(a||T)&&o.push(E),T&&(a=!a)},d,i.rowCount)}}),f||a?[]:o},t.MAX_EMPTY_BLOCKS_TO_KEEP=2,ZA([F("rowRenderer")],t.prototype,"rowRenderer",void 0),ZA([F("focusService")],t.prototype,"focusService",void 0),ZA([vre(0,ea("loggerFactory"))],t.prototype,"setBeans",null),ZA([as],t.prototype,"destroyAllBlocks",null),t}(Ye),_re=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Jg=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Cre=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return _re(t,r),t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.ensureRowHeightsValid=function(e,n,i,o){return!1},t.prototype.init=function(){var e=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return e.destroyCache()}),this.verifyProps())},t.prototype.verifyProps=function(){(this.gridOptionsService.exists("initialGroupOrderComparator")||this.gridOptionsService.exists("defaultGroupOrderComparator"))&&tn.doOnce(function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")},"IRM.InitialGroupOrderComparator")},t.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},t.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,V.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,V.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},t.prototype.onFilterChanged=function(){this.reset()},t.prototype.onSortChanged=function(){this.reset()},t.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},t.prototype.isSortModelDifferent=function(){return!tn.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},t.prototype.getType=function(){return"infinite"},t.prototype.setDatasource=function(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()},t.prototype.isEmpty=function(){return!this.infiniteCache},t.prototype.isRowsToRender=function(){return!!this.infiniteCache},t.prototype.getNodesInRangeForSelection=function(e,n){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,n):[]},t.prototype.reset=function(){if(this.datasource){null!=this.gridOptionsService.getRowIdFunc()||this.selectionService.reset(),this.resetCache();var i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}},t.prototype.createModelUpdatedEvent=function(){return{type:V.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},t.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsService.getNum("infiniteInitialRowCount"),1),maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheOverflowSize"),1),blockSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheBlockSize"),100),lastAccessedSequence:new Nw},this.infiniteCache=this.createBean(new yre(this.cacheParams))},t.prototype.defaultIfInvalid=function(e,n){return e>0?e:n},t.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},t.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},t.prototype.getRow=function(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)},t.prototype.getRowNode=function(e){var n;return this.forEachNode(function(i){i.id===e&&(n=i)}),n},t.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.getRowIndexAtPixel=function(e){if(0!==this.rowHeight){var n=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return n>i?i:n}return 0},t.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},t.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},t.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},t.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},t.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},t.prototype.setRowCount=function(e,n){this.infiniteCache&&this.infiniteCache.setRowCount(e,n)},Jg([F("filterManager")],t.prototype,"filterManager",void 0),Jg([F("sortController")],t.prototype,"sortController",void 0),Jg([F("selectionService")],t.prototype,"selectionService",void 0),Jg([F("rowRenderer")],t.prototype,"rowRenderer",void 0),Jg([F("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Jg([rt],t.prototype,"init",null),Jg([as],t.prototype,"destroyDatasource",null),Jg([Rt("rowModel")],t)}(Ye),Sre={version:"29.2.0",moduleName:Ot.InfiniteRowModelModule,rowModel:"infinite",beans:[Cre]},Ere=function(){function r(){}return r.prototype.setBeans=function(t){this.beans=t},r.prototype.getFileName=function(t){var e=this.getDefaultFileExtension();return(null==t||!t.length)&&(t=this.getDefaultFileName()),-1===t.indexOf(".")?t+"."+e:t},r.prototype.getData=function(t){var e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)},r}(),bre=function(){function r(t){this.groupColumns=[];var n=t.valueService,i=t.gridOptionsService,o=t.processCellCallback,s=t.processHeaderCallback,a=t.processGroupHeaderCallback,d=t.processRowGroupCallback;this.columnModel=t.columnModel,this.valueService=n,this.gridOptionsService=i,this.processCellCallback=o,this.processHeaderCallback=s,this.processGroupHeaderCallback=a,this.processRowGroupCallback=d}return r.prototype.prepare=function(t){this.groupColumns=t.filter(function(e){return!!e.getColDef().showRowGroup})},r.prototype.extractHeaderValue=function(t){return this.getHeaderName(this.processHeaderCallback,t)??""},r.prototype.extractRowCellValue=function(t,e,n,i,o){var a=!this.gridOptionsService.is("groupHideOpenParents")&&this.shouldRenderGroupSummaryCell(o,t,e)?this.createValueForGroupNode(o):this.valueService.getValue(t,o);return this.processCell({accumulatedRowIndex:n,rowNode:o,column:t,value:a,processCellCallback:this.processCellCallback,type:i})??""},r.prototype.shouldRenderGroupSummaryCell=function(t,e,n){var i;if(!t||!t.group)return!1;if(-1!==this.groupColumns.indexOf(e)){if(null!==(i=t.groupData)&&void 0!==i&&i[e.getId()])return!0;if(t.footer&&-1===t.level){var a=e.getColDef();return null==a||!0===a.showRowGroup||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var f=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return 0===n&&f},r.prototype.getHeaderName=function(t,e){return t?t({column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},r.prototype.createValueForGroupNode=function(t){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context});var e=t.footer,n=[t.key];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;t.parent;)n.push((t=t.parent).key);var i=n.reverse().join(" -> ");return e?"Total "+i:i},r.prototype.processCell=function(t){var o=t.value,s=t.processCellCallback;return s?s({accumulatedRowIndex:t.accumulatedRowIndex,column:t.column,node:t.rowNode,value:o,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,type:t.type}):o??""},r}(),Dre=function(){function r(){}return r.download=function(t,e){var n=document.defaultView||window;if(n){var i=document.createElement("a"),o=n.URL.createObjectURL(e);i.setAttribute("href",o),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(function(){n.URL.revokeObjectURL(o)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},r}(),Tre=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rre=function(r){function t(e){var n=r.call(this,e)||this;n.isFirstLine=!0,n.result="";var o=e.columnSeparator;return n.suppressQuotes=e.suppressQuotes,n.columnSeparator=o,n}return Tre(t,r),t.prototype.addCustomContent=function(e){var n=this;e&&("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(function(i){n.beginNewLine(),i.forEach(function(o,s){0!==s&&(n.result+=n.columnSeparator),n.result+=n.putInQuotes(o.data.value||""),o.mergeAcross&&n.appendEmptyCells(o.mergeAcross)})}))},t.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},t.prototype.onNewHeaderGroupingRowColumn=function(e,n,i,o){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n),this.appendEmptyCells(o)},t.prototype.appendEmptyCells=function(e){for(var n=1;n<=e;n++)this.result+=this.columnSeparator+this.putInQuotes("")},t.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},t.prototype.onNewHeaderRowColumn=function(e,n){0!=n&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},t.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},t.prototype.onNewBodyRowColumn=function(e,n,i){0!=n&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(e,n,n,"csv",i))},t.prototype.putInQuotes=function(e){return this.suppressQuotes?e:null==e?'""':("string"==typeof e?n=e:"function"==typeof e.toString?n=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),n=""),'"'+n.replace(/"/g,'""')+'"');var n},t.prototype.parse=function(){return this.result},t.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},t}(bre),Ore=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Uw=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Ire=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ore(t,r),t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},t.prototype.getMergedParams=function(e){var n=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},n,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var n=this.getMergedParams(e),i=this.getData(n),o=new Blob(["\ufeff",i],{type:"text/plain"});return Dre.download(this.getFileName(n.fileName),o),i},t.prototype.exportDataAsCsv=function(e){return this.export(e)},t.prototype.getDataAsCsv=function(e,n){void 0===n&&(n=!1);var i=n?Object.assign({},e):this.getMergedParams(e);return this.getData(i)},t.prototype.getDefaultFileName=function(){return"export.csv"},t.prototype.getDefaultFileExtension=function(){return"csv"},t.prototype.createSerializingSession=function(e){var n=this;return new Rre({columnModel:n.columnModel,valueService:n.valueService,gridOptionsService:n.gridOptionsService,processCellCallback:e.processCellCallback||void 0,processHeaderCallback:e.processHeaderCallback||void 0,processGroupHeaderCallback:e.processGroupHeaderCallback||void 0,processRowGroupCallback:e.processRowGroupCallback||void 0,suppressQuotes:e.suppressQuotes||!1,columnSeparator:e.columnSeparator||","})},t.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressCsvExport")},Uw([F("columnModel")],t.prototype,"columnModel",void 0),Uw([F("valueService")],t.prototype,"valueService",void 0),Uw([F("gridSerializer")],t.prototype,"gridSerializer",void 0),Uw([F("gridOptionsService")],t.prototype,"gridOptionsService",void 0),Uw([rt],t.prototype,"postConstruct",null),Uw([Rt("csvCreator")],t)}(Ere),Are=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Xg=function(r,t,e,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o},Pre=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Are(t,r),t.prototype.serialize=function(e,n){void 0===n&&(n={});var i=this.getColumnsToExport(n.allColumns,n.columnKeys);return tn.compose(this.prepareSession(i),this.prependContent(n),this.exportColumnGroups(n,i),this.exportHeaders(n,i),this.processPinnedTopRows(n,i),this.processRows(n,i),this.processPinnedBottomRows(n,i),this.appendContent(n))(e).parse()},t.prototype.processRow=function(e,n,i,o){var s=n.shouldRowBeSkipped||function(){return!1},a=this.gridOptionsService.context,d=this.gridOptionsService.api,f=this.gridOptionsService.columnApi,g=this.gridOptionsService.is("groupRemoveSingleChildren"),C=this.gridOptionsService.is("groupRemoveLowestSingleChildren"),T=null!=n.rowPositions||!!n.onlySelected,I=this.gridOptionsService.is("groupHideOpenParents")&&!T,M=this.columnModel.isPivotMode()?o.leafGroup:!o.group,z=1===o.allChildrenCount&&(g||C&&o.leafGroup);if((n.skipGroups||n.skipRowGroups)&&n.skipGroups&&tn.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups"),!(!M&&(n.skipRowGroups||z||I)||n.onlySelected&&!o.isSelected()||n.skipPinnedTop&&"top"===o.rowPinned||n.skipPinnedBottom&&"bottom"===o.rowPinned)&&(-1!==o.level||o.leafGroup||o.footer)&&!s({node:o,api:d,columnApi:f,context:a})){var ce=e.onNewBodyRow();if(i.forEach(function(Xe,Ke){ce.onColumn(Xe,Ke,o)}),n.getCustomContentBelowRow){var Re=n.getCustomContentBelowRow({node:o,api:d,columnApi:f,context:a});Re&&e.addCustomContent(Re)}}},t.prototype.appendContent=function(e){return function(n){var i=e.customFooter||e.appendContent;return i&&(e.customFooter&&tn.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),n.addCustomContent(i)),n}},t.prototype.prependContent=function(e){return function(n){var i=e.customHeader||e.prependContent;return i&&(e.customHeader&&tn.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),n.addCustomContent(i)),n}},t.prototype.prepareSession=function(e){return function(n){return n.prepare(e),n}},t.prototype.exportColumnGroups=function(e,n){var i=this;return function(o){if(e.skipColumnGroupHeaders)e.columnGroups&&tn.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var s=new Qj,a=i.displayedGroupCreator.createDisplayedGroups(n,i.columnModel.getGridBalancedTree(),s,null);i.recursivelyAddHeaderGroups(a,o,e.processGroupHeaderCallback)}return o}},t.prototype.exportHeaders=function(e,n){return function(i){if(e.skipHeader||e.skipColumnHeaders)e.skipHeader&&tn.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");else{var o=i.onNewHeaderRow();n.forEach(function(s,a){o.onColumn(s,a,void 0)})}return i}},t.prototype.processPinnedTopRows=function(e,n){var i=this;return function(o){var s=i.processRow.bind(i,o,e,n);return e.rowPositions?e.rowPositions.filter(function(a){return"top"===a.rowPinned}).sort(function(a,d){return a.rowIndex-d.rowIndex}).map(function(a){return i.pinnedRowModel.getPinnedTopRow(a.rowIndex)}).forEach(s):i.pinnedRowModel.forEachPinnedTopRow(s),o}},t.prototype.processRows=function(e,n){var i=this;return function(o){var s=i.rowModel,a=s.getType(),d="clientSide"===a,f="serverSide"===a,g=!d&&e.onlySelected,C=i.processRow.bind(i,o,e,n),E=e.exportedRows,T=void 0===E?"filteredAndSorted":E;if(e.rowPositions)e.rowPositions.filter(function(M){return null==M.rowPinned}).sort(function(M,k){return M.rowIndex-k.rowIndex}).map(function(M){return s.getRow(M.rowIndex)}).forEach(C);else if(i.columnModel.isPivotMode())d?s.forEachPivotNode(C,!0):s.forEachNode(C);else if(e.onlySelectedAllPages||g){var I=i.selectionService.getSelectedNodes();i.replicateSortedOrder(I),I.forEach(C)}else"all"===T?s.forEachNode(C):d?s.forEachNodeAfterFilterAndSort(C,!0):f?s.forEachNodeAfterFilterAndSort(C):s.forEachNode(C);return o}},t.prototype.replicateSortedOrder=function(e){var n=this,i=this.sortController.getSortOptions(),o=function(s,a){var d,f,g,C;return null!=s.rowIndex&&null!=a.rowIndex?s.rowIndex-a.rowIndex:s.level===a.level?(null===(d=s.parent)||void 0===d?void 0:d.id)===(null===(f=a.parent)||void 0===f?void 0:f.id)?n.rowNodeSorter.compareRowNodes(i,{rowNode:s,currentPos:null!==(g=s.rowIndex)&&void 0!==g?g:-1},{rowNode:a,currentPos:null!==(C=a.rowIndex)&&void 0!==C?C:-1}):o(s.parent,a.parent):s.level>a.level?o(s.parent,a):o(s,a.parent)};e.sort(o)},t.prototype.processPinnedBottomRows=function(e,n){var i=this;return function(o){var s=i.processRow.bind(i,o,e,n);return e.rowPositions?e.rowPositions.filter(function(a){return"bottom"===a.rowPinned}).sort(function(a,d){return a.rowIndex-d.rowIndex}).map(function(a){return i.pinnedRowModel.getPinnedBottomRow(a.rowIndex)}).forEach(s):i.pinnedRowModel.forEachPinnedBottomRow(s),o}},t.prototype.getColumnsToExport=function(e,n){void 0===e&&(e=!1);var i=this.columnModel.isPivotMode();return n&&n.length?this.columnModel.getGridColumns(n):e&&!i?(this.gridOptionsService.isTreeData()?this.columnModel.getGridColumns([C0]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},t.prototype.recursivelyAddHeaderGroups=function(e,n,i){var o=[];e.forEach(function(s){s.getChildren&&s.getChildren().forEach(function(d){return o.push(d)})}),e.length>0&&e[0]instanceof Aa&&this.doAddHeaderHeader(n,e,i),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,n,i)},t.prototype.doAddHeaderHeader=function(e,n,i){var o=this,s=e.onNewHeaderGroupingRow(),a=0;n.forEach(function(d){var g,f=d;g=i?i({columnGroup:f,api:o.gridOptionsService.api,columnApi:o.gridOptionsService.columnApi,context:o.gridOptionsService.context}):o.columnModel.getDisplayNameForColumnGroup(f,"header");var C=f.getLeafColumns().reduce(function(E,T,I,M){var k=tn.last(E);return"open"===T.getColumnGroupShow()?(!k||null!=k[1])&&E.push(k=[I]):k&&null==k[1]&&(k[1]=I-1),I===M.length-1&&k&&null==k[1]&&(k[1]=I),E},[]);s.onColumn(f,g||"",a++,f.getLeafColumns().length-1,C)})},Xg([F("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),Xg([F("columnModel")],t.prototype,"columnModel",void 0),Xg([F("rowModel")],t.prototype,"rowModel",void 0),Xg([F("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Xg([F("selectionService")],t.prototype,"selectionService",void 0),Xg([F("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),Xg([F("sortController")],t.prototype,"sortController",void 0),Xg([Rt("gridSerializer")],t)}(Ye),Mre={version:"29.2.0",moduleName:Ot.CsvExportModule,beans:[Ire,Pre]},Fre=(function(){function r(){}r.createHeader=function(t){void 0===t&&(t={});var i=["version"];return t.version||(t.version="1.0"),t.encoding&&i.push("encoding"),t.standalone&&i.push("standalone"),"<?xml "+i.map(function(s){return s+'="'+t[s]+'"'}).join(" ")+" ?>"},r.createXml=function(t,e){var n=this,i="";t.properties&&(t.properties.prefixedAttributes&&t.properties.prefixedAttributes.forEach(function(s){Object.keys(s.map).forEach(function(a){i+=n.returnAttributeIfPopulated(s.prefix+a,s.map[a],e)})}),t.properties.rawMap&&Object.keys(t.properties.rawMap).forEach(function(s){i+=n.returnAttributeIfPopulated(s,t.properties.rawMap[s],e)}));var o="<"+t.name+i;return t.children||null!=t.textNode?null!=t.textNode?o+">"+t.textNode+"</"+t.name+">\r\n":(o+=">\r\n",t.children&&t.children.forEach(function(s){o+=n.createXml(s,e)}),o+"</"+t.name+">\r\n"):o+"/>\r\n"},r.returnAttributeIfPopulated=function(t,e,n){if(!e&&""!==e&&0!==e)return"";var i=e;return"boolean"==typeof e&&n&&(i=n(e))," "+t+'="'+i+'"'}}(),new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]));!function(){function r(){}r.addFolders=function(t){t.forEach(this.addFolder.bind(this))},r.addFolder=function(t){this.folders.push({path:t,created:new Date,isBase64:!1})},r.addFile=function(t,e,n){void 0===n&&(n=!1),this.files.push({path:t,created:new Date,content:e,isBase64:n})},r.getContent=function(t){void 0===t&&(t="application/zip");var e=this.buildFileStream(),n=this.buildUint8Array(e);return this.clearStream(),new Blob([n],{type:t})},r.clearStream=function(){this.folders=[],this.files=[]},r.buildFileStream=function(t){var e,n;void 0===t&&(t="");var i=this.folders.concat(this.files),o=i.length,s="",a=0,d=0;try{for(var f=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),g=f.next();!g.done;g=f.next()){var E=this.getHeader(g.value,a),T=E.fileHeader,I=E.folderHeader,M=E.content;a+=T.length+M.length,d+=I.length,t+=T+M,s+=I}}catch(W){e={error:W}}finally{try{g&&!g.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return t+s+this.buildFolderEnd(o,d,a)},r.getHeader=function(t,e){var n=t.content,i=t.path,o=t.created,s=t.isBase64,d=tn.decToHex,f=(0,tn.utf8_encode)(i),g=f!==i,C=this.convertTime(o),E=this.convertDate(o),T="";if(g){var I=d(1,1)+d(this.getFromCrc32Table(f),4)+f;T="up"+d(I.length,2)+I}var M=n?this.getConvertedContent(n,s):{size:0,content:""},k=M.size,W=M.content,z="\n\0"+(g?"\0\b":"\0\0")+"\0\0"+d(C,2)+d(E,2)+d(k?this.getFromCrc32Table(W):0,4)+d(k,4)+d(k,4)+d(f.length,2)+d(T.length,2);return{fileHeader:"PK\x03\x04"+z+f+T,folderHeader:"PK\x01\x02\x14\0"+z+"\0\0\0\0\0\0"+(n?"\0\0\0\0":"\x10\0\0\0")+d(e,4)+f+T,content:W||""}},r.getConvertedContent=function(t,e){return void 0===e&&(e=!1),e&&(t=t.split(";base64,")[1]),{size:(t=e?atob(t):t).length,content:t}},r.buildFolderEnd=function(t,e,n){var i=tn.decToHex;return"PK\x05\x06\0\0\0\0"+i(t,2)+i(t,2)+i(e,4)+i(n,4)+"\0\0"},r.buildUint8Array=function(t){for(var e=new Uint8Array(t.length),n=0;n<e.length;n++)e[n]=t.charCodeAt(n);return e},r.getFromCrc32Table=function(t){if(!t.length)return 0;for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);var o=-1;for(i=0;i<e;i++)o=o>>>8^Fre[255&(o^n[i])];return-1^o},r.convertTime=function(t){var e=t.getHours();return e<<=6,e|=t.getMinutes(),(e<<=5)|t.getSeconds()/2},r.convertDate=function(t){var e=t.getFullYear()-1980;return e<<=4,e|=t.getMonth()+1,(e<<=5)|t.getDate()},r.folders=[],r.files=[]}(),on.registerModules([pre,Sre,Mre]);let o3=(()=>{class r extends HW{constructor(e){super(),this._ngZone=e}setEmitterUsedCallback(e){this.isEmitterUsed=e}setTimeout(e,n){this._ngZone?this._ngZone.runOutsideAngular(()=>{window.setTimeout(()=>{e()},n)}):window.setTimeout(()=>{e()},n)}setInterval(e,n){return new ta(i=>{this._ngZone?this._ngZone.runOutsideAngular(()=>{i(window.setInterval(()=>{e()},n))}):i(window.setInterval(()=>{e()},n))})}addEventListener(e,n,i,o){this.isOutsideAngular(n)&&this._ngZone?this._ngZone.runOutsideAngular(()=>{e.addEventListener(n,i,o)}):e.addEventListener(n,i,o)}dispatchEvent(e,n,i=!1){this.isOutsideAngular(e)?this._ngZone?this._ngZone.runOutsideAngular(n):n():(this.isEmitterUsed(e)||i)&&(!c.R0b.isInAngularZone()&&this._ngZone?this._ngZone.run(n):n())}isFrameworkComponent(e){if(!e)return!1;const n=e.prototype;return n&&"agInit"in n}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(c.R0b))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),s3=(()=>{class r extends qne{setViewContainerRef(e){this.viewContainerRef=e}setComponentFactoryResolver(e){this.componentFactoryResolver=e}createWrapper(e){let n=this,o=new class i extends kre{init(a){super.init(a),this._componentRef.changeDetectorRef.detectChanges()}createComponent(){return n.createComponent(e)}hasMethod(a){return null!=o.getFrameworkComponentInstance()[a]}callMethod(a,d){const f=this.getFrameworkComponentInstance();return o.getFrameworkComponentInstance()[a].apply(f,d)}addMethod(a,d){o[a]=d}};return o}createComponent(e){let n=this.componentFactoryResolver.resolveComponentFactory(e);return this.viewContainerRef.createComponent(n)}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=c.n5z(r)))(n||r)}}(),r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();class kre{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}destroy(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}}let Gre=(()=>{class r{constructor(e,n,i,o,s){this.viewContainerRef=n,this.angularFrameworkOverrides=i,this.frameworkComponentWrapper=o,this.componentFactoryResolver=s,this._initialised=!1,this._destroyed=!1,this._fullyReady=ta.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.components=void 0,this.frameworkComponents=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeHiddenColumnsFromQuickFilter=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.enableChartToolPanelsButton=void 0,this.suppressChartToolPanelsButton=void 0,this.chartToolPanelsDef=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererFramework=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererFramework=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentFramework=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentFramework=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDelay=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererFramework=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererFramework=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.groupRowsSticky=void 0,this.rememberGroupStateWhenNewData=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.immutableData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.serverSideStoreType=void 0,this.suppressServerSideInfiniteScroll=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSideSortingAlwaysResets=void 0,this.serverSideFilteringAlwaysResets=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellSelection=void 0,this.suppressCellFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.localeTextFunc=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.groupRowAggNodes=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.defaultGroupOrderComparator=void 0,this.processSecondaryColDef=void 0,this.processSecondaryColGroupDef=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.getServerSideStoreParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowNodeId=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSort=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthCell=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new c.vpe,this.toolPanelSizeChanged=new c.vpe,this.pasteStart=new c.vpe,this.pasteEnd=new c.vpe,this.columnVisible=new c.vpe,this.columnPinned=new c.vpe,this.columnResized=new c.vpe,this.columnMoved=new c.vpe,this.columnValueChanged=new c.vpe,this.columnPivotModeChanged=new c.vpe,this.columnPivotChanged=new c.vpe,this.columnGroupOpened=new c.vpe,this.newColumnsLoaded=new c.vpe,this.gridColumnsChanged=new c.vpe,this.displayedColumnsChanged=new c.vpe,this.virtualColumnsChanged=new c.vpe,this.columnEverythingChanged=new c.vpe,this.componentStateChanged=new c.vpe,this.cellValueChanged=new c.vpe,this.cellEditRequest=new c.vpe,this.rowValueChanged=new c.vpe,this.cellEditingStarted=new c.vpe,this.cellEditingStopped=new c.vpe,this.rowEditingStarted=new c.vpe,this.rowEditingStopped=new c.vpe,this.undoStarted=new c.vpe,this.undoEnded=new c.vpe,this.redoStarted=new c.vpe,this.redoEnded=new c.vpe,this.filterOpened=new c.vpe,this.filterChanged=new c.vpe,this.filterModified=new c.vpe,this.chartCreated=new c.vpe,this.chartRangeSelectionChanged=new c.vpe,this.chartOptionsChanged=new c.vpe,this.chartDestroyed=new c.vpe,this.cellKeyDown=new c.vpe,this.cellKeyPress=new c.vpe,this.gridReady=new c.vpe,this.firstDataRendered=new c.vpe,this.gridSizeChanged=new c.vpe,this.modelUpdated=new c.vpe,this.virtualRowRemoved=new c.vpe,this.viewportChanged=new c.vpe,this.bodyScroll=new c.vpe,this.bodyScrollEnd=new c.vpe,this.dragStarted=new c.vpe,this.dragStopped=new c.vpe,this.paginationChanged=new c.vpe,this.rowDragEnter=new c.vpe,this.rowDragMove=new c.vpe,this.rowDragLeave=new c.vpe,this.rowDragEnd=new c.vpe,this.columnRowGroupChanged=new c.vpe,this.rowGroupOpened=new c.vpe,this.expandOrCollapseAll=new c.vpe,this.pinnedRowDataChanged=new c.vpe,this.rowDataChanged=new c.vpe,this.rowDataUpdated=new c.vpe,this.asyncTransactionsFlushed=new c.vpe,this.cellClicked=new c.vpe,this.cellDoubleClicked=new c.vpe,this.cellFocused=new c.vpe,this.cellMouseOver=new c.vpe,this.cellMouseOut=new c.vpe,this.cellMouseDown=new c.vpe,this.rowClicked=new c.vpe,this.rowDoubleClicked=new c.vpe,this.rowSelected=new c.vpe,this.selectionChanged=new c.vpe,this.cellContextMenu=new c.vpe,this.rangeSelectionChanged=new c.vpe,this.sortChanged=new c.vpe,this.columnRowGroupChangeRequest=new c.vpe,this.columnPivotChangeRequest=new c.vpe,this.columnValueChangeRequest=new c.vpe,this.columnAggFuncChangeRequest=new c.vpe,this._nativeElement=e.nativeElement}ngAfterViewInit(){this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef),this.frameworkComponentWrapper.setComponentFactoryResolver(this.componentFactoryResolver),this.angularFrameworkOverrides.setEmitterUsedCallback(this.isEmitterUsed.bind(this)),this.gridOptions=Rw.copyAttributesToGridOptions(this.gridOptions,this),this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]},new zne(this._nativeElement,this.gridOptions,this.gridParams),this.gridOptions.api&&(this.api=this.gridOptions.api),this.gridOptions.columnApi&&(this.columnApi=this.gridOptions.columnApi),this._initialised=!0,this._fullyReady.resolveNow(null,e=>e)}ngOnChanges(e){this._initialised&&Rw.processOnChange(e,this.api)}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api&&this.api.destroy())}isEmitterUsed(e){const n=this[e],i=!!n&&n.observers&&n.observers.length>0,o=`on${e.charAt(0).toUpperCase()}${e.substring(1)}`;return i||!!this.gridOptions&&!!this.gridOptions[o]}globalEventListener(e,n){if(this._destroyed)return;const i=this[e];i&&this.isEmitterUsed(e)&&("gridReady"===e?this._fullyReady.then(o=>{i.emit(n)}):i.emit(n))}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.SBq),c.Y36(c.s_b),c.Y36(o3),c.Y36(s3),c.Y36(c._Vd))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",components:"components",frameworkComponents:"frameworkComponents",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeHiddenColumnsFromQuickFilter:"excludeHiddenColumnsFromQuickFilter",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",enableChartToolPanelsButton:"enableChartToolPanelsButton",suppressChartToolPanelsButton:"suppressChartToolPanelsButton",chartToolPanelsDef:"chartToolPanelsDef",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererFramework:"loadingCellRendererFramework",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererFramework:"detailCellRendererFramework",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentFramework:"loadingOverlayComponentFramework",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentFramework:"noRowsOverlayComponentFramework",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDelay:"cellFlashDelay",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererFramework:"fullWidthCellRendererFramework",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererFramework:"groupRowRendererFramework",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",groupRowsSticky:"groupRowsSticky",rememberGroupStateWhenNewData:"rememberGroupStateWhenNewData",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",immutableData:"immutableData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",serverSideStoreType:"serverSideStoreType",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSideSortingAlwaysResets:"serverSideSortingAlwaysResets",serverSideFilteringAlwaysResets:"serverSideFilteringAlwaysResets",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellSelection:"suppressCellSelection",suppressCellFocus:"suppressCellFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",localeTextFunc:"localeTextFunc",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",groupRowAggNodes:"groupRowAggNodes",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",defaultGroupOrderComparator:"defaultGroupOrderComparator",processSecondaryColDef:"processSecondaryColDef",processSecondaryColGroupDef:"processSecondaryColGroupDef",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",getServerSideStoreParams:"getServerSideStoreParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowNodeId:"getRowNodeId",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSort:"postSort",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthCell:"isFullWidthCell",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",cellKeyPress:"cellKeyPress",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},features:[c._Bn([o3,s3]),c.TTD],decls:0,vars:0,template:function(e,n){},encapsulation:2}),r})(),Vre=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})();function Hre(r,t){1&r&&(c.TgZ(0,"div")(1,"span",18),c._uU(2,"Name is Already exists"),c.qZA()())}function Bre(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"div")(1,"h4"),c._uU(2,"Add New Subscription Record"),c.qZA(),c.TgZ(3,"form",6,7),c.NdJ("ngSubmit",function(){c.CHM(e);const i=c.MAs(4),o=c.oxw();return c.KtG(o.onSubmit(i))}),c.TgZ(5,"div",8)(6,"label"),c._uU(7,"Subscription Name"),c.qZA(),c.TgZ(8,"input",9,10),c.NdJ("ngModelChange",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.book.name=i)}),c.qZA(),c.YNc(10,Hre,3,0,"div",3),c.qZA(),c.TgZ(11,"div",8)(12,"label",11),c._uU(13,"Date"),c.qZA(),c.TgZ(14,"input",12,10),c.NdJ("ngModelChange",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.book.date=i)}),c.qZA()(),c.TgZ(16,"div",8)(17,"label",13),c._uU(18,"Select a Start-time:"),c.qZA(),c.TgZ(19,"input",14,10),c.NdJ("ngModelChange",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.book.stime=i)}),c.qZA()(),c.TgZ(21,"div",8)(22,"label",13),c._uU(23,"Select a End-time:"),c.qZA(),c.TgZ(24,"input",15,10),c.NdJ("ngModelChange",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.book.etime=i)}),c.qZA()(),c.TgZ(26,"div",16)(27,"button",17),c._uU(28," Subscription"),c.qZA()()()()}if(2&r){const e=c.MAs(4),n=c.oxw();c.xp6(8),c.Q6J("ngModel",n.book.name),c.xp6(2),c.Q6J("ngIf",n.isnameExist),c.xp6(4),c.Q6J("ngModel",n.book.date),c.xp6(5),c.Q6J("ngModel",n.book.stime),c.xp6(5),c.Q6J("ngModel",n.book.etime),c.xp6(3),c.Q6J("disabled",!e.valid)("disabled",e.invalid)}}function Ure(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"div")(1,"h4"),c._uU(2,"Edit Subscription Record"),c.qZA(),c.TgZ(3,"form",6,7),c.NdJ("ngSubmit",function(){c.CHM(e);const i=c.MAs(4),o=c.oxw();return c.KtG(o.onSubmitEditData(i))}),c.TgZ(5,"div",8)(6,"label"),c._uU(7,"Subscription Name"),c.qZA(),c.TgZ(8,"input",9,10),c.NdJ("ngModelChange",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.gName=i)}),c.qZA()(),c.TgZ(10,"div",8)(11,"label",11),c._uU(12,"Date"),c.qZA(),c.TgZ(13,"input",12,10),c.NdJ("ngModelChange",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.gDate=i)}),c.qZA()(),c.TgZ(15,"div",8)(16,"label",13),c._uU(17,"Select a Start-time:"),c.qZA(),c.TgZ(18,"input",14,10),c.NdJ("ngModelChange",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.gStime=i)}),c.qZA()(),c.TgZ(20,"div",8)(21,"label",13),c._uU(22,"Select a End-time:"),c.qZA(),c.TgZ(23,"input",15,10),c.NdJ("ngModelChange",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.gEtime=i)}),c.qZA()(),c.TgZ(25,"div",16)(26,"button",17),c._uU(27," Subscription Update"),c.qZA()()()()}if(2&r){const e=c.MAs(4),n=c.oxw();c.xp6(8),c.Q6J("ngModel",n.gName),c.xp6(5),c.Q6J("ngModel",n.gDate),c.xp6(5),c.Q6J("ngModel",n.gStime),c.xp6(5),c.Q6J("ngModel",n.gEtime),c.xp6(3),c.Q6J("disabled",!e.valid)("disabled",e.invalid)}}const jre=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:(()=>{class r{constructor(e,n){this.s1=e,this.afs=n,this.book={id:"",name:"",date:"",stime:"",etime:""},this.isAddclicked=!0,this.isEditclicked=!1,this.isnameExist=!1,this.rowDataClicked1=[],this.rowDataClicked2=[],this.rowData=[],this.columnDefs=[{headerName:"Name",field:"name",sortable:!0,filter:!0,resizable:!0,minWidth:150,flex:1},{headerName:"Date",field:"date",sortable:!0,filter:!0,resizable:!0,minWidth:100,flex:1},{headerName:"Start-Time",field:"stime",sortable:!0,filter:!0,resizable:!0,minWidth:100,flex:1},{headerName:"End-Time",field:"etime",sortable:!0,filter:!0,resizable:!0,minWidth:100,flex:1},{headerName:"Edit",cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.onBtnEdit.bind(this),label:"Edit"},sortable:!0,filter:!0,resizable:!0,minWidth:90,flex:1},{headerName:"Delete",cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.onBtnDelete.bind(this),label:"Delete"},sortable:!0,filter:!0,resizable:!0,minWidth:110,flex:1}],this.frameworkComponents={buttonRenderer:$p}}ngOnInit(){this.s1.getbooks().subscribe(e=>{this.books=e,this.rowData=e})}onSubmit(e){e.value.stime<e.value.etime?this.afs.collection("bookingMaster",n=>n.where("name","==",e.value.name)).snapshotChanges().subscribe(n=>{0==n.length?(this.s1.addbook(e.value),e.reset(),this.isnameExist=!1):this.isnameExist=!0}):alert("select valid time")}onSubmitEditData(e){e.value.stime<e.value.etime?1==confirm("Are you sure to Edit this record ?")&&(this.s1.updatebook(e.value,this.bookid),e.reset(),this.isAddclicked=!0,this.isEditclicked=!1):alert("select valid time")}onBtnEdit(e){this.bookid=e.rowData.id,this.isAddclicked=!1,this.isEditclicked=!0,this.s1.getbooksDatabyID(e.rowData).ref.get().then(n=>{this.gName=n.data()?.name,this.gDate=n.data()?.date,this.gStime=n.data()?.stime,this.gEtime=n.data()?.etime}).catch(function(n){alert(n.message)})}onBtnDelete(e){this.rowDataClicked2=e.rowData,1==confirm("Are you sure to delete this record ?")&&this.s1.deleteBook(e.rowData)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(yY),c.Y36(AF))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-home"]],decls:14,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-md-4"],[4,"ngIf"],[1,"col-md-7"],[1,"ag-theme-alpine",2,"width","800px","height","400px",3,"rowData","columnDefs","frameworkComponents"],[3,"ngSubmit"],["bookForm","ngForm"],[1,"form-group"],["id","sname","name","name","placeholder","Subscription Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","birthday"],["type","date","id","cdate","name","date","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","appt"],["type","time","id","stime","name","stime","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","time","id","etime","name","etime","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","float-right"],["type","submit",1,"btn","btn-success",3,"disabled"],[2,"color","red"]],template:function(e,n){1&e&&(c._UZ(0,"br")(1,"br"),c.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"div"),c.YNc(6,Bre,29,7,"div",3),c.YNc(7,Ure,28,6,"div",3),c.qZA()(),c.TgZ(8,"div",4),c._UZ(9,"ag-grid-angular",5),c.qZA()()(),c._UZ(10,"br")(11,"br")(12,"br")(13,"br")),2&e&&(c.xp6(6),c.Q6J("ngIf",n.isAddclicked),c.xp6(1),c.Q6J("ngIf",n.isEditclicked),c.xp6(2),c.Q6J("rowData",n.rowData)("columnDefs",n.columnDefs)("frameworkComponents",n.frameworkComponents))},dependencies:[Yr,sj,AI,$U,zU,UI,WF,BI,Gre]}),r})()},{path:"**",component:(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-no-page"]],decls:2,vars:0,template:function(e,n){1&e&&(c.TgZ(0,"p"),c._uU(1,"no-page works!"),c.qZA())}}),r})()}];let Wre=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[MT.forRoot(jre),MT]}),r})(),$re=(()=>{class r{constructor(){this.title="CRUDApp1"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){1&e&&c._UZ(0,"router-outlet")},dependencies:[dd]}),r})();var zre=U(1144);const Kre=["addListener","removeListener"],qre=["addEventListener","removeEventListener"],Yre=["on","off"];function ds(r,t,e,n){if((0,Bo.m)(e)&&(n=e,e=void 0),n)return ds(r,t,e).pipe(x(n));const[i,o]=function Jre(r){return(0,Bo.m)(r.addEventListener)&&(0,Bo.m)(r.removeEventListener)}(r)?qre.map(s=>a=>r[s](t,a,e)):function Zre(r){return(0,Bo.m)(r.addListener)&&(0,Bo.m)(r.removeListener)}(r)?Kre.map(a3(r,t)):function Qre(r){return(0,Bo.m)(r.on)&&(0,Bo.m)(r.off)}(r)?Yre.map(a3(r,t)):[];if(!i&&(0,zre.z)(r))return(0,$i.z)(s=>ds(s,t,e))((0,dr.Xf)(r));if(!i)throw new TypeError("Invalid event target");return new br.y(s=>{const a=(...d)=>s.next(1<d.length?d:d[0]);return i(a),()=>o(a)})}function a3(r,t){return e=>n=>r[e](t,n)}var Xre=U(3532);function Zk(r=0,t,e=s0.P){let n=-1;return null!=t&&((0,Xre.K)(t)?e=t:n=t),new br.y(i=>{let o=function eie(r){return r instanceof Date&&!isNaN(r)}(r)?+r-e.now():r;o<0&&(o=0);let s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=n?this.schedule(void 0,n):i.complete())},o)})}const{isArray:tie}=Array;function l3(r){return 1===r.length&&tie(r[0])?r[0]:r}var JA=U(5032);const c3=new br.y(JA.Z);function XA(...r){const t=(0,Ho.jO)(r),e=l3(r);return e.length?new br.y(n=>{let i=e.map(()=>[]),o=e.map(()=>!1);n.add(()=>{i=o=null});for(let s=0;!n.closed&&s<e.length;s++)(0,dr.Xf)(e[s]).subscribe((0,X.x)(n,a=>{if(i[s].push(a),i.every(d=>d.length)){const d=i.map(f=>f.shift());n.next(t?t(...d):d),i.some((f,g)=>!f.length&&o[g])&&n.complete()}},()=>{o[s]=!0,!i[s].length&&n.complete()}));return()=>{i=o=null}}):Lr.E}function Fi(r){return(0,Ir.e)((t,e)=>{(0,dr.Xf)(r).subscribe((0,X.x)(e,()=>e.complete(),JA.Z)),!e.closed&&t.subscribe(e)})}function eP(...r){const t=(0,Ho.jO)(r);return(0,Ir.e)((e,n)=>{const i=r.length,o=new Array(i);let s=r.map(()=>!1),a=!1;for(let d=0;d<i;d++)(0,dr.Xf)(r[d]).subscribe((0,X.x)(n,f=>{o[d]=f,!a&&!s[d]&&(s[d]=!0,(a=s.every(Xo.y))&&(s=null))},JA.Z));e.subscribe((0,X.x)(n,d=>{if(a){const f=[d,...o];n.next(t?t(...f):f)}}))})}function coe(r,t){}function doe(r,t){if(1&r&&(c.TgZ(0,"button",3),c._uU(1),c.YNc(2,coe,0,0,"ng-template",4),c.qZA()),2&r){const e=t.$implicit;c.Q6J("ngbPanelToggle",e),c.xp6(1),c.hij(" ",e.title," "),c.xp6(1),c.Q6J("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function hoe(r,t){}function foe(r,t){}function poe(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"div",8),c.NdJ("ngbRef",function(i){c.CHM(e);const o=c.oxw().$implicit;return c.KtG(o.panelDiv=i)}),c.TgZ(1,"div",9),c.YNc(2,foe,0,0,"ng-template",4),c.qZA()()}if(2&r){const e=c.oxw().$implicit;c.s9C("id",e.id),c.uIk("aria-labelledby",e.id+"-header"),c.xp6(2),c.Q6J("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)}}Math,Math,Math;const goe=function(r,t){return{$implicit:r,opened:t}};function moe(r,t){if(1&r&&(c.TgZ(0,"div")(1,"div",5),c.YNc(2,hoe,0,0,"ng-template",6),c.qZA(),c.YNc(3,poe,3,3,"div",7),c.qZA()),2&r){const e=t.$implicit,n=c.oxw(),i=c.MAs(1);c.Tol("accordion-item "+(e.cardClass||"")),c.xp6(1),c.Tol("accordion-header "+(e.type?"bg-"+e.type:n.type?"bg-"+n.type:"")),c.MGl("id","",e.id,"-header"),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==e.headerTpl?null:e.headerTpl.templateRef)||i)("ngTemplateOutletContext",c.WLB(8,goe,e,e.isOpen)),c.xp6(1),c.Q6J("ngIf",!n.destroyOnHide||e.isOpen||e.transitionRunning)}}const voe=["ngbAccordionBody",""];function yoe(r,t){}function _oe(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",1),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.close())}),c.qZA()}}const oP=["*"];function Coe(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){const o=c.CHM(e).$implicit,s=c.oxw();return s.focus(),c.KtG(s.select(o.id,s.NgbSlideEventSource.INDICATOR))}),c.qZA()}if(2&r){const e=t.$implicit,n=c.oxw();c.ekj("active",e.id===n.activeId),c.uIk("aria-labelledby","slide-"+e.id)("aria-controls","slide-"+e.id)("aria-selected",e.id===n.activeId)}}function woe(r,t){}function Soe(r,t){if(1&r&&(c.TgZ(0,"div",7)(1,"span",8),c.SDv(2,9),c.qZA(),c.YNc(3,woe,0,0,"ng-template",10),c.qZA()),2&r){const e=t.$implicit,n=t.index,i=t.count;c.Q6J("id","slide-"+e.id),c.xp6(2),c.pQV(n+1)(i),c.QtT(2),c.xp6(1),c.Q6J("ngTemplateOutlet",e.tplRef)}}function Eoe(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.arrowLeft())}),c._UZ(1,"span",12),c.TgZ(2,"span",8),c.SDv(3,13),c.qZA()()}}function boe(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",14),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.arrowRight())}),c._UZ(1,"span",15),c.TgZ(2,"span",8),c.SDv(3,16),c.qZA()()}}const Doe=["ngbDatepickerDayView",""],Toe=["month"],Roe=["year"];function Ooe(r,t){if(1&r&&(c.TgZ(0,"option",5),c._uU(1),c.qZA()),2&r){const e=t.$implicit,n=c.oxw();c.Q6J("value",e),c.uIk("aria-label",n.i18n.getMonthFullName(e,n.date.year)),c.xp6(1),c.Oqu(n.i18n.getMonthShortName(e,n.date.year))}}function Ioe(r,t){if(1&r&&(c.TgZ(0,"option",5),c._uU(1),c.qZA()),2&r){const e=t.$implicit,n=c.oxw();c.Q6J("value",e),c.xp6(1),c.Oqu(n.i18n.getYearNumerals(e))}}function Aoe(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"ngb-datepicker-navigation-select",7),c.NdJ("select",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.select.emit(i))}),c.qZA()}if(2&r){const e=c.oxw();c.Q6J("date",e.date)("disabled",e.disabled)("months",e.selectBoxes.months)("years",e.selectBoxes.years)}}function Poe(r,t){1&r&&c._UZ(0,"div",0)}function Noe(r,t){1&r&&c._UZ(0,"div",0)}function Moe(r,t){if(1&r&&(c.YNc(0,Poe,1,0,"div",9),c.TgZ(1,"div",10),c._uU(2),c.qZA(),c.YNc(3,Noe,1,0,"div",9)),2&r){const e=t.$implicit,n=t.index,i=c.oxw(2);c.Q6J("ngIf",n>0),c.xp6(2),c.hij(" ",i.i18n.getMonthLabel(e.firstDate)," "),c.xp6(1),c.Q6J("ngIf",n!==i.months.length-1)}}function xoe(r,t){if(1&r&&c.YNc(0,Moe,4,3,"ng-template",8),2&r){const e=c.oxw();c.Q6J("ngForOf",e.months)}}function Foe(r,t){if(1&r&&(c.TgZ(0,"div",5),c._uU(1),c.qZA()),2&r){const e=c.oxw(2);c.xp6(1),c.Oqu(e.i18n.getWeekLabel())}}function Loe(r,t){if(1&r&&(c.TgZ(0,"div",6),c._uU(1),c.qZA()),2&r){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}function koe(r,t){if(1&r&&(c.TgZ(0,"div",2),c.YNc(1,Foe,2,1,"div",3),c.YNc(2,Loe,2,1,"div",4),c.qZA()),2&r){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.datepicker.showWeekNumbers),c.xp6(1),c.Q6J("ngForOf",e.viewModel.weekdays)}}function Goe(r,t){if(1&r&&(c.TgZ(0,"div",11),c._uU(1),c.qZA()),2&r){const e=c.oxw(2).$implicit,n=c.oxw();c.xp6(1),c.Oqu(n.i18n.getWeekNumerals(e.number))}}function Voe(r,t){}function Hoe(r,t){if(1&r&&c.YNc(0,Voe,0,0,"ng-template",14),2&r){const e=c.oxw().$implicit,n=c.oxw(3);c.Q6J("ngTemplateOutlet",n.datepicker.dayTemplate)("ngTemplateOutletContext",e.context)}}function Boe(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"div",12),c.NdJ("click",function(i){const s=c.CHM(e).$implicit;return c.oxw(3).doSelect(s),c.KtG(i.preventDefault())}),c.YNc(1,Hoe,1,2,"ng-template",13),c.qZA()}if(2&r){const e=t.$implicit;c.ekj("disabled",e.context.disabled)("hidden",e.hidden)("ngb-dp-today",e.context.today),c.Q6J("tabindex",e.tabindex),c.uIk("aria-label",e.ariaLabel),c.xp6(1),c.Q6J("ngIf",!e.hidden)}}function Uoe(r,t){if(1&r&&(c.TgZ(0,"div",8),c.YNc(1,Goe,2,1,"div",9),c.YNc(2,Boe,2,9,"div",10),c.qZA()),2&r){const e=c.oxw().$implicit,n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.datepicker.showWeekNumbers),c.xp6(1),c.Q6J("ngForOf",e.days)}}function joe(r,t){1&r&&c.YNc(0,Uoe,3,2,"div",7),2&r&&c.Q6J("ngIf",!t.$implicit.collapsed)}const Woe=["defaultDayTemplate"],$oe=["content"];function zoe(r,t){if(1&r&&c._UZ(0,"div",7),2&r){const n=t.currentMonth,i=t.selected,o=t.disabled,s=t.focused;c.Q6J("date",t.date)("currentMonth",n)("selected",i)("disabled",o)("focused",s)}}function Koe(r,t){if(1&r&&(c.TgZ(0,"div",12),c._uU(1),c.qZA()),2&r){const e=c.oxw().$implicit,n=c.oxw(2);c.xp6(1),c.hij(" ",n.i18n.getMonthLabel(e.firstDate)," ")}}function qoe(r,t){if(1&r&&(c.TgZ(0,"div",9),c.YNc(1,Koe,2,1,"div",10),c._UZ(2,"ngb-datepicker-month",11),c.qZA()),2&r){const e=t.$implicit,n=c.oxw(2);c.xp6(1),c.Q6J("ngIf","none"===n.navigation||n.displayMonths>1&&"select"===n.navigation),c.xp6(1),c.Q6J("month",e.firstDate)}}function Yoe(r,t){if(1&r&&c.YNc(0,qoe,3,2,"div",8),2&r){const e=c.oxw();c.Q6J("ngForOf",e.model.months)}}function Zoe(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"ngb-datepicker-navigation",13),c.NdJ("navigate",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.onNavigateEvent(i))})("select",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.onNavigateDateSelect(i))}),c.qZA()}if(2&r){const e=c.oxw();c.Q6J("date",e.model.firstDate)("months",e.model.months)("disabled",e.model.disabled)("showSelect","select"===e.model.navigation)("prevDisabled",e.model.prevDisabled)("nextDisabled",e.model.nextDisabled)("selectBoxes",e.model.selectBoxes)}}function Qoe(r,t){}function Joe(r,t){}const Xoe=["dialog"],ese=["ngbNavOutlet",""];function tse(r,t){}const nse=function(r){return{$implicit:r}};function rse(r,t){if(1&r&&(c.TgZ(0,"div",2),c.YNc(1,tse,0,0,"ng-template",3),c.qZA()),2&r){const e=c.oxw().$implicit,n=c.oxw();c.Q6J("item",e)("nav",n.nav)("role",n.paneRole),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",c.VKq(5,nse,e.active||n.isPanelTransitioning(e)))}}function ise(r,t){if(1&r&&c.YNc(0,rse,2,7,"div",1),2&r){const e=t.$implicit,n=c.oxw();c.Q6J("ngIf",e.isPanelInDom()||n.isPanelTransitioning(e))}}function ose(r,t){1&r&&(c.TgZ(0,"span",9),c.SDv(1,10),c.qZA())}function sse(r,t){1&r&&(c.TgZ(0,"span",9),c.SDv(1,11),c.qZA())}function ase(r,t){1&r&&(c.TgZ(0,"span",9),c.SDv(1,12),c.qZA())}function lse(r,t){1&r&&(c.TgZ(0,"span",9),c.SDv(1,13),c.qZA())}function use(r,t){1&r&&c._uU(0,"...")}function cse(r,t){1&r&&(c.TgZ(0,"span",15),c._uU(1,"(current)"),c.qZA())}function dse(r,t){if(1&r&&(c._uU(0),c.YNc(1,cse,2,0,"span",14)),2&r){const e=t.$implicit,n=t.currentPage;c.hij(" ",e," "),c.xp6(1),c.Q6J("ngIf",e===n)}}function hse(r,t){}const fse=function(r){return{disabled:!0,currentPage:r}};function pse(r,t){if(1&r&&(c.TgZ(0,"a",20),c.YNc(1,hse,0,0,"ng-template",8),c.qZA()),2&r){const e=c.oxw(2).$implicit,n=c.oxw(),i=c.MAs(9);c.xp6(1),c.Q6J("ngTemplateOutlet",(null==n.tplEllipsis?null:n.tplEllipsis.templateRef)||i)("ngTemplateOutletContext",c.VKq(2,fse,e))}}function gse(r,t){}const mse=function(r,t,e){return{disabled:r,$implicit:t,currentPage:e}};function vse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"a",21),c.NdJ("click",function(i){c.CHM(e);const o=c.oxw().$implicit;return c.oxw(2).selectPage(o),c.KtG(i.preventDefault())}),c.YNc(1,gse,0,0,"ng-template",8),c.qZA()}if(2&r){const e=c.oxw().$implicit,n=c.oxw(),i=n.disabled,o=n.$implicit,s=c.oxw(),a=c.MAs(11);c.uIk("tabindex",i?"-1":null)("aria-disabled",i?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==s.tplNumber?null:s.tplNumber.templateRef)||a)("ngTemplateOutletContext",c.kEZ(4,mse,i,e,o))}}function yse(r,t){if(1&r&&(c.TgZ(0,"li",17),c.YNc(1,pse,2,4,"a",18),c.YNc(2,vse,2,8,"a",19),c.qZA()),2&r){const e=t.$implicit,n=c.oxw(),i=n.$implicit,o=n.disabled,s=c.oxw();c.ekj("active",e===i)("disabled",s.isEllipsis(e)||o),c.uIk("aria-current",e===i?"page":null),c.xp6(1),c.Q6J("ngIf",s.isEllipsis(e)),c.xp6(1),c.Q6J("ngIf",!s.isEllipsis(e))}}function _se(r,t){1&r&&c.YNc(0,yse,3,7,"li",16),2&r&&c.Q6J("ngForOf",t.pages)}function Cse(r,t){}const aG=function(r,t){return{disabled:r,currentPage:t}};function wse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"li",17)(1,"a",22),c.NdJ("click",function(i){return c.CHM(e),c.oxw().selectPage(1),c.KtG(i.preventDefault())}),c.YNc(2,Cse,0,0,"ng-template",8),c.qZA()()}if(2&r){const e=c.oxw(),n=c.MAs(1);c.ekj("disabled",e.previousDisabled()),c.xp6(1),c.uIk("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==e.tplFirst?null:e.tplFirst.templateRef)||n)("ngTemplateOutletContext",c.WLB(6,aG,e.previousDisabled(),e.page))}}function Sse(r,t){}const Ese=function(r){return{disabled:r}};function bse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"li",17)(1,"a",23),c.NdJ("click",function(i){c.CHM(e);const o=c.oxw();return o.selectPage(o.page-1),c.KtG(i.preventDefault())}),c.YNc(2,Sse,0,0,"ng-template",8),c.qZA()()}if(2&r){const e=c.oxw(),n=c.MAs(3);c.ekj("disabled",e.previousDisabled()),c.xp6(1),c.uIk("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==e.tplPrevious?null:e.tplPrevious.templateRef)||n)("ngTemplateOutletContext",c.VKq(6,Ese,e.previousDisabled()))}}function Dse(r,t){}function Tse(r,t){}function Rse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"li",17)(1,"a",24),c.NdJ("click",function(i){c.CHM(e);const o=c.oxw();return o.selectPage(o.page+1),c.KtG(i.preventDefault())}),c.YNc(2,Tse,0,0,"ng-template",8),c.qZA()()}if(2&r){const e=c.oxw(),n=c.MAs(5);c.ekj("disabled",e.nextDisabled()),c.xp6(1),c.uIk("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==e.tplNext?null:e.tplNext.templateRef)||n)("ngTemplateOutletContext",c.WLB(6,aG,e.nextDisabled(),e.page))}}function Ose(r,t){}function Ise(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"li",17)(1,"a",25),c.NdJ("click",function(i){c.CHM(e);const o=c.oxw();return o.selectPage(o.pageCount),c.KtG(i.preventDefault())}),c.YNc(2,Ose,0,0,"ng-template",8),c.qZA()()}if(2&r){const e=c.oxw(),n=c.MAs(7);c.ekj("disabled",e.nextDisabled()),c.xp6(1),c.uIk("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==e.tplLast?null:e.tplLast.templateRef)||n)("ngTemplateOutletContext",c.WLB(6,aG,e.nextDisabled(),e.page))}}const Ase=function(r,t,e){return{$implicit:r,pages:t,disabled:e}};function Mse(r,t){if(1&r&&(c.TgZ(0,"span"),c.SDv(1,1),c.ALo(2,"percent"),c.qZA()),2&r){const e=c.oxw();c.xp6(2),c.pQV(c.lcZ(2,1,e.getValue()/e.max)),c.QtT(1)}}function xse(r,t){1&r&&c._uU(0),2&r&&c.Oqu(100===t.fill?"\u2605":"\u2606")}function Fse(r,t){}function Lse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"span",2),c._uU(1),c.qZA(),c.TgZ(2,"span",3),c.NdJ("mouseenter",function(){const o=c.CHM(e).index,s=c.oxw();return c.KtG(s.enter(o+1))})("click",function(){const o=c.CHM(e).index,s=c.oxw();return c.KtG(s.handleClick(o+1))}),c.YNc(3,Fse,0,0,"ng-template",4),c.qZA()}if(2&r){const e=t.index,n=c.oxw(),i=c.MAs(1);c.xp6(1),c.hij("(",e<n.nextRate?"*":" ",")"),c.xp6(1),c.Udp("cursor",n.isInteractive()?"pointer":"default"),c.xp6(1),c.Q6J("ngTemplateOutlet",n.starTemplate||n.starTemplateFromContent||i)("ngTemplateOutletContext",n.contexts[e])}}function kse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.changeHour(i.hourStep))}),c._UZ(1,"span",12),c.TgZ(2,"span",13),c.SDv(3,14),c.qZA()()}if(2&r){const e=c.oxw();c.ekj("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),c.Q6J("disabled",e.disabled)}}function Gse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.changeHour(-i.hourStep))}),c._UZ(1,"span",15),c.TgZ(2,"span",13),c.SDv(3,16),c.qZA()()}if(2&r){const e=c.oxw();c.ekj("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),c.Q6J("disabled",e.disabled)}}function Vse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.changeMinute(i.minuteStep))}),c._UZ(1,"span",12),c.TgZ(2,"span",13),c.SDv(3,17),c.qZA()()}if(2&r){const e=c.oxw();c.ekj("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),c.Q6J("disabled",e.disabled)}}function Hse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.changeMinute(-i.minuteStep))}),c._UZ(1,"span",15),c.TgZ(2,"span",13),c.SDv(3,18),c.qZA()()}if(2&r){const e=c.oxw();c.ekj("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),c.Q6J("disabled",e.disabled)}}function Bse(r,t){1&r&&(c.TgZ(0,"div",5),c._uU(1,":"),c.qZA())}function Use(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(e);const i=c.oxw(2);return c.KtG(i.changeSecond(i.secondStep))}),c._UZ(1,"span",12),c.TgZ(2,"span",13),c.SDv(3,21),c.qZA()()}if(2&r){const e=c.oxw(2);c.ekj("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),c.Q6J("disabled",e.disabled)}}function jse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"button",11),c.NdJ("click",function(){c.CHM(e);const i=c.oxw(2);return c.KtG(i.changeSecond(-i.secondStep))}),c._UZ(1,"span",15),c.TgZ(2,"span",13),c.SDv(3,22),c.qZA()()}if(2&r){const e=c.oxw(2);c.ekj("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),c.Q6J("disabled",e.disabled)}}function Wse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"div",19),c.YNc(1,Use,4,7,"button",3),c.TgZ(2,"input",20),c.NdJ("change",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.updateSecond(i.target.value))})("blur",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.handleBlur())})("input",function(i){c.CHM(e);const o=c.oxw();return c.KtG(o.formatInput(i.target))})("keydown.ArrowUp",function(i){c.CHM(e);const o=c.oxw();return o.changeSecond(o.secondStep),c.KtG(i.preventDefault())})("keydown.ArrowDown",function(i){c.CHM(e);const o=c.oxw();return o.changeSecond(-o.secondStep),c.KtG(i.preventDefault())}),c.qZA(),c.YNc(3,jse,4,7,"button",3),c.qZA()}if(2&r){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.spinners),c.xp6(1),c.ekj("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),c.Q6J("value",e.formatMinSec(null==e.model?null:e.model.second))("readOnly",e.readonlyInputs)("disabled",e.disabled),c.xp6(1),c.Q6J("ngIf",e.spinners)}}function $se(r,t){1&r&&c._UZ(0,"div",5)}function zse(r,t){if(1&r&&(c.ynx(0),c.SDv(1,27),c.BQk()),2&r){const e=c.oxw(2);c.xp6(1),c.pQV(e.i18n.getAfternoonPeriod()),c.QtT(1)}}function Kse(r,t){if(1&r&&c.SDv(0,28),2&r){const e=c.oxw(2);c.pQV(e.i18n.getMorningPeriod()),c.QtT(0)}}function qse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"div",23)(1,"button",24),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.toggleMeridian())}),c.YNc(2,zse,2,1,"ng-container",25),c.YNc(3,Kse,1,1,"ng-template",null,26,c.W1O),c.qZA()()}if(2&r){const e=c.MAs(4),n=c.oxw();c.xp6(1),c.ekj("btn-sm",n.isSmallSize)("btn-lg",n.isLargeSize)("disabled",n.disabled),c.Q6J("disabled",n.disabled),c.xp6(1),c.Q6J("ngIf",n.model&&n.model.hour>=12)("ngIfElse",e)}}function Yse(r,t){if(1&r&&(c.TgZ(0,"strong",3),c._uU(1),c.qZA()),2&r){const e=c.oxw();c.xp6(1),c.Oqu(e.header)}}function Zse(r,t){}function Qse(r,t){if(1&r){const e=c.EpF();c.TgZ(0,"div",4),c.YNc(1,Zse,0,0,"ng-template",5),c.TgZ(2,"button",6),c.NdJ("click",function(){c.CHM(e);const i=c.oxw();return c.KtG(i.hide())}),c.qZA()()}if(2&r){const e=c.oxw(),n=c.MAs(1);c.xp6(1),c.Q6J("ngTemplateOutlet",e.contentHeaderTpl||n)}}function Jse(r,t){if(1&r&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&r){const e=c.oxw().$implicit,n=c.oxw();c.Tol(n.highlightClass),c.xp6(1),c.Oqu(e)}}function Xse(r,t){if(1&r&&c._uU(0),2&r){const e=c.oxw().$implicit;c.Oqu(e)}}function eae(r,t){if(1&r&&(c.YNc(0,Jse,2,3,"span",1),c.YNc(1,Xse,1,1,"ng-template",null,2,c.W1O)),2&r){const e=t.odd,n=c.MAs(2);c.Q6J("ngIf",e)("ngIfElse",n)}}function hs(r){return parseInt(`${r}`,10)}function O3(r){return null!=r?`${r}`:""}function sP(r,t,e=0){return Math.max(Math.min(r,t),e)}function Kw(r){return"string"==typeof r}function Li(r){return!isNaN(hs(r))}function Di(r){return"number"==typeof r&&isFinite(r)&&Math.floor(r)===r}function By(r){return null!=r}function qw(r){return Li(r)?`0${r}`.slice(-2):""}function A3(r,t){return r&&r.className&&r.className.split&&r.className.split(/\s+/).indexOf(t)>=0}function Yw(r){return(r||document.body).getBoundingClientRect()}function P3(r){return r.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const N3={animation:!0,transitionTimerDelayMs:5},aae=()=>{},{transitionTimerDelayMs:lae}=N3,dD=new Map,Io=(r,t,e,n)=>{let i=n.context||{};const o=dD.get(t);if(o)switch(n.runningTransition){case"continue":return Lr.E;case"stop":r.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),dD.delete(t)}const s=e(t,n.animation,i)||aae;if(!n.animation||"none"===window.getComputedStyle(t).transitionProperty)return r.run(()=>s()),Tt(void 0).pipe(function oae(r){return t=>new br.y(e=>t.subscribe({next:s=>r.run(()=>e.next(s)),error:s=>r.run(()=>e.error(s)),complete:()=>r.run(()=>e.complete())}))}(r));const a=new Un.x,d=new Un.x,f=a.pipe(function rie(...r){return t=>Zt(t,Tt(...r))}(!0));dD.set(t,{transition$:a,complete:()=>{d.next(),d.complete()},context:i});const g=function sae(r){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(r);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return r.runOutsideAngular(()=>{const C=ds(t,"transitionend").pipe(Fi(f),kr(({target:T})=>T===t));(function u3(...r){return 1===(r=l3(r)).length?(0,dr.Xf)(r[0]):new br.y(function nie(r){return t=>{let e=[];for(let n=0;e&&!t.closed&&n<r.length;n++)e.push((0,dr.Xf)(r[n]).subscribe((0,X.x)(t,i=>{if(e){for(let o=0;o<e.length;o++)o!==n&&e[o].unsubscribe();e=null}t.next(i)})))}}(r))})(Zk(g+lae).pipe(Fi(f)),C,d).pipe(Fi(f)).subscribe(()=>{dD.delete(t),r.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()},lG=(r,t,e)=>{let{direction:n,maxSize:i,dimension:o}=e;const{classList:s}=r;function a(){s.add("collapse"),"show"===n?s.add("show"):s.remove("show")}if(t)return i||(i=function cae(r,t){if(typeof navigator>"u")return"0px";const{classList:e}=r,n=e.contains("show");n||e.add("show"),r.style[t]="";const i=r.getBoundingClientRect()[t]+"px";return n||e.remove("show"),i}(r,o),e.maxSize=i,r.style[o]="show"!==n?i:"0px",s.remove("collapse"),s.remove("collapsing"),s.remove("show"),Yw(r),s.add("collapsing")),r.style[o]="show"===n?i:"0px",()=>{a(),s.remove("collapsing"),r.style[o]=""};a()};let Uy=(()=>{class r{constructor(){this.animation=N3.animation}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),M3=(()=>{class r{constructor(e){this._ngbConfig=e,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Uy))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),dae=0,uG=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),r})(),x3=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),r})(),F3=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),r})(),cG=(()=>{class r{constructor(){this.disabled=!1,this.id="ngb-panel-"+dae++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new c.vpe,this.hidden=new c.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=c.lG2({type:r,selectors:[["ngb-panel"]],contentQueries:function(e,n,i){if(1&e&&(c.Suo(i,x3,4),c.Suo(i,uG,4),c.Suo(i,F3,4)),2&e){let o;c.iGM(o=c.CRH())&&(n.titleTpls=o),c.iGM(o=c.CRH())&&(n.headerTpls=o),c.iGM(o=c.CRH())&&(n.contentTpls=o)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),r})(),hae=(()=>{class r{constructor(e){this._El=e,this.ngbRef=new c.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.SBq))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),r})(),L3=(()=>{class r{constructor(e,n){this.accordion=e,this.panel=n}set ngbPanelToggle(e){e&&(this.panel=e)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36((0,c.Gpc)(()=>dG)),c.Y36(cG,9))},r.\u0275dir=c.lG2({type:r,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(e,n){1&e&&c.NdJ("click",function(){return n.accordion.toggle(n.panel.id)}),2&e&&(c.Ikx("disabled",n.panel.disabled),c.uIk("aria-expanded",n.panel.isOpen)("aria-controls",n.panel.id),c.ekj("collapsed",!n.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),r})(),dG=(()=>{class r{constructor(e,n,i){this._ngZone=n,this._changeDetector=i,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new c.vpe,this.shown=new c.vpe,this.hidden=new c.vpe,this.animation=e.animation,this.type=e.type,this.closeOtherPanels=e.closeOthers}isExpanded(e){return this.activeIds.indexOf(e)>-1}expand(e){this._changeOpenState(this._findPanelById(e),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(e=>this._changeOpenState(e,!0))}collapse(e){this._changeOpenState(this._findPanelById(e),!1)}collapseAll(){this.panels.forEach(e=>{this._changeOpenState(e,!1)})}toggle(e){const n=this._findPanelById(e);n&&this._changeOpenState(n,!n.isOpen)}ngAfterContentChecked(){Kw(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(e=>{e.isOpen=!e.disabled&&this.activeIds.indexOf(e.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(Jr(1)).subscribe(()=>{this.panels.forEach(e=>{const n=e.panelDiv;n?e.initClassDone||(e.initClassDone=!0,Io(this._ngZone,n,lG,{animation:!1,runningTransition:"continue",context:{direction:e.isOpen?"show":"hide",dimension:"height"}})):e.initClassDone=!1})})}_changeOpenState(e,n){if(null!=e&&!e.disabled&&e.isOpen!==n){let i=!1;this.panelChange.emit({panelId:e.id,nextState:n,preventDefault:()=>{i=!0}}),i||(e.isOpen=n,e.transitionRunning=!0,n&&this.closeOtherPanels&&this._closeOthers(e.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(e,n=!0){this.panels.forEach(i=>{i.id!==e&&i.isOpen&&(i.isOpen=!1,i.transitionRunning=n)})}_findPanelById(e){return this.panels.find(n=>n.id===e)||null}_updateActiveIds(){this.activeIds=this.panels.filter(e=>e.isOpen&&!e.disabled).map(e=>e.id)}_runTransitions(e){this._changeDetector.detectChanges(),this.panels.forEach(n=>{n.transitionRunning&&Io(this._ngZone,n.panelDiv,lG,{animation:e,runningTransition:"stop",context:{direction:n.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{n.transitionRunning=!1;const{id:o}=n;n.isOpen?(n.shown.emit(),this.shown.emit(o)):(n.hidden.emit(),this.hidden.emit(o))})})}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(M3),c.Y36(c.R0b),c.Y36(c.sBO))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-accordion"]],contentQueries:function(e,n,i){if(1&e&&c.Suo(i,cG,4),2&e){let o;c.iGM(o=c.CRH())&&(n.panels=o)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(e,n){2&e&&c.uIk("aria-multiselectable",!n.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[c.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(e,n){1&e&&(c.YNc(0,doe,3,3,"ng-template",0,1,c.W1O),c.YNc(2,moe,4,11,"ng-template",2)),2&e&&(c.xp6(2),c.Q6J("ngForOf",n.panels))},dependencies:[$n,Tr,L3,hae,uG,Yr],encapsulation:2}),r})(),fae=(()=>{class r{constructor(e){this._ngbConfig=e,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Uy))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),k3=(()=>{class r{constructor(e,n,i){this._element=e,this._zone=i,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new c.vpe,this.shown=new c.vpe,this.hidden=new c.vpe,this.animation=n.animation,this.horizontal=n.horizontal}set collapsed(e){this._isCollapsed!==e&&(this._isCollapsed=e,this._afterInit&&this._runTransitionWithEvents(e,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(e=this._isCollapsed){this.collapsed=!e,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(e,n){return Io(this._zone,this._element.nativeElement,lG,{animation:n,runningTransition:"stop",context:{direction:e?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(e,n){this._runTransition(e,n).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.SBq),c.Y36(fae),c.Y36(c.R0b))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(e,n){2&e&&c.ekj("collapse-horizontal",n.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),r})(),pae=0,G3=(()=>{class r{constructor(e){this._item=e}template(){return!1===this._item.destroyOnHide||this._item.animatingBodyCollapse?this._bodyTpl:null}}return r.\u0275fac=function(e){return new(e||r)(c.Y36((0,c.Gpc)(()=>jy)))},r.\u0275cmp=c.Xpm({type:r,selectors:[["","ngbAccordionBody",""]],contentQueries:function(e,n,i){if(1&e&&c.Suo(i,c.Rgc,7),2&e){let o;c.iGM(o=c.CRH())&&(n._bodyTpl=o.first)}},hostVars:2,hostBindings:function(e,n){2&e&&c.ekj("accordion-body",!0)},standalone:!0,features:[c.jDz],attrs:voe,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(e,n){1&e&&c.YNc(0,yoe,0,0,"ng-template",0),2&e&&c.Q6J("ngTemplateOutlet",n.template())},dependencies:[Tr],encapsulation:2}),r})(),V3=(()=>{class r{constructor(e,n){this.item=e,this.ngbCollapse=n}}return r.\u0275fac=function(e){return new(e||r)(c.Y36((0,c.Gpc)(()=>jy)),c.Y36(k3))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(e,n){2&e&&(c.Ikx("id",n.item.collapseId),c.uIk("aria-labelledby",n.item.toggleId),c.ekj("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[c.zW0([k3])]}),r})(),jy=(()=>{class r{constructor(e,n){this._accordion=e,this._cd=n,this._subscriptions=[],this._collapsed=!0,this._id="ngb-accordion-item-"+pae++,this.animatingBodyCollapse=!1,this.destroyOnHide=this._accordion.destroyOnHide,this.disabled=!1,this.shown=new c.vpe,this.hidden=new c.vpe}set id(e){Kw(e)&&""!==e&&(this._id=e)}set collapsed(e){this.collapsed!==e&&(this._collapsed=e,this._cd.markForCheck(),this._collapsed||(this.animatingBodyCollapse=!0,this._cd.detectChanges()),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=e)}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}ngAfterContentInit(){const{ngbCollapse:e}=this._collapse;e.animation=!1,e.collapsed=this.collapsed,e.animation=this._accordion.animation,this._subscriptions.push(e.hidden.subscribe(()=>{this.animatingBodyCollapse=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),e.shown.subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)}))}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}toggle(){this.collapsed=!this.collapsed}}return r.\u0275fac=function(e){return new(e||r)(c.Y36((0,c.Gpc)(()=>hG)),c.Y36(c.sBO))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngbAccordionItem",""]],contentQueries:function(e,n,i){if(1&e&&c.Suo(i,V3,7),2&e){let o;c.iGM(o=c.CRH())&&(n._collapse=o.first)}},hostVars:3,hostBindings:function(e,n){2&e&&(c.Ikx("id",n.id),c.ekj("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0}),r})(),hG=(()=>{class r{constructor(e){this.destroyOnHide=!0,this.shown=new c.vpe,this.hidden=new c.vpe,this.animation=e.animation,this.closeOthers=e.closeOthers}toggle(e){const n=this._getItem(e);if(n){const i=n.collapsed;this._items.forEach(o=>{o===n?o.toggle():this.closeOthers&&i&&(o.collapsed=!0)})}}expand(e){const n=this._getItem(e);n&&this._items.forEach(i=>{i===n?n.collapsed=!1:this.closeOthers&&(i.collapsed=!0)})}expandAll(){this.closeOthers?this._items.find(e=>!e.collapsed)||(this._items.get(0).collapsed=!1):this._items.forEach(e=>{e.collapsed=!1})}collapse(e){const n=this._getItem(e);n&&(n.collapsed=!0)}collapseAll(){this._items.forEach(e=>e.collapsed=!0)}isExpanded(e){const n=this._getItem(e);return!!n&&!n.collapsed}_getItem(e){return this._items.find(n=>n.id===e)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(M3))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngbAccordion",""]],contentQueries:function(e,n,i){if(1&e&&c.Suo(i,jy,4),2&e){let o;c.iGM(o=c.CRH())&&(n._items=o)}},hostVars:2,hostBindings:function(e,n){2&e&&c.ekj("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0}),r})(),B3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[dG,G3]}),r})();const vae=({classList:r})=>{r.remove("show")};let yae=(()=>{class r{constructor(e){this._ngbConfig=e,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Uy))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),_ae=(()=>{class r{constructor(e,n,i,o){this._renderer=n,this._element=i,this._zone=o,this.closed=new c.vpe,this.dismissible=e.dismissible,this.type=e.type,this.animation=e.animation}close(){const e=Io(this._zone,this._element.nativeElement,vae,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>this.closed.emit()),e}ngOnChanges(e){const n=e.type;n&&!n.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${n.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${n.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(yae),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(c.R0b))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(e,n){2&e&&c.ekj("fade",n.animation)("alert-dismissible",n.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[c.TTD,c.jDz],ngContentSelectors:oP,decls:2,vars:1,consts:function(){let t;return t=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",t,3,"click",4,"ngIf"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(e,n){1&e&&(c.F$t(),c.Hsn(0),c.YNc(1,_oe,1,0,"button",0)),2&e&&(c.xp6(1),c.Q6J("ngIf",n.dismissible))},dependencies:[Yr],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),r})(),U3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[_ae]}),r})();var tm=(()=>(function(r){r.START="start",r.END="end"}(tm||(tm={})),tm))();const j3=({classList:r})=>r.contains("carousel-item-start")||r.contains("carousel-item-end"),hD=r=>{r.remove("carousel-item-start"),r.remove("carousel-item-end")},aP=r=>{hD(r),r.remove("carousel-item-prev"),r.remove("carousel-item-next")},Cae=(r,t,{direction:e})=>{const{classList:n}=r;return t?(j3(r)?hD(n):(n.add("carousel-item-"+(e===tm.START?"next":"prev")),Yw(r),n.add("carousel-item-"+e)),()=>{aP(n),n.add("active")}):(hD(n),aP(n),void n.add("active"))},wae=(r,t,{direction:e})=>{const{classList:n}=r;return t?(j3(r)?hD(n):n.add("carousel-item-"+e),()=>{aP(n),n.remove("active")}):(hD(n),aP(n),void n.remove("active"))};let Sae=(()=>{class r{constructor(e){this._ngbConfig=e,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Uy))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Eae=0,bae=(()=>{class r{constructor(e){this.tplRef=e,this.id="ngb-slide-"+Eae++,this.slid=new c.vpe}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),r})(),Dae=(()=>{class r{constructor(e,n,i,o,s){this._platformId=n,this._ngZone=i,this._cd=o,this._container=s,this.NgbSlideEventSource=Wy,this._destroy$=new Un.x,this._interval$=new Or(0),this._mouseHover$=new Or(!1),this._focused$=new Or(!1),this._pauseOnHover$=new Or(!1),this._pauseOnFocus$=new Or(!1),this._pause$=new Or(!1),this._wrap$=new Or(!1),this.slide=new c.vpe,this.slid=new c.vpe,this._transitionIds=null,this.animation=e.animation,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.pauseOnFocus=e.pauseOnFocus,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(e){this._pauseOnFocus$.next(e)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(e){this._mouseHover$.next(e)}get mouseHover(){return this._mouseHover$.value}set focused(e){this._focused$.next(e)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Wy.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Wy.ARROW_RIGHT)}ngAfterContentInit(){(function ap(r){return r===Sh})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=ze([this.slide.pipe((0,Pt.U)(n=>n.current),Zc(this.activeId)),this._wrap$,this.slides.changes.pipe(Zc(null))]).pipe((0,Pt.U)(([n,i])=>{const o=this.slides.toArray(),s=this._getSlideIdxById(n);return i?o.length>1:s<o.length-1}),a0());ze([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,e]).pipe((0,Pt.U)(([n,i,o,s,a,d,f])=>n||i&&o||s&&a||!f?0:d),a0(),Ur(n=>n>0?Zk(n,n):c3),Fi(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Wy.TIMER)))}),this.slides.changes.pipe(Fi(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(e=>(r=>{dD.get(r)?.complete()})(this._getSlideElement(e))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(Jr(1)).subscribe(()=>{for(const{id:e}of this.slides){const n=this._getSlideElement(e);e===this.activeId?n.classList.add("active"):n.classList.remove("active")}})})}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const e=this._getSlideElement(this.activeId);e&&e.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(e,n){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),n)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),tm.END,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),tm.START,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(e,n,i){const o=this._transitionIds;if(o&&(o[0]!==e||o[1]!==this.activeId))return;let s=this._getSlideById(e);if(s&&s.id!==this.activeId){this._transitionIds=[this.activeId,e],this.slide.emit({prev:this.activeId,current:s.id,direction:n,paused:this._pause$.value,source:i});const a={animation:this.animation,runningTransition:"stop",context:{direction:n}},d=[],f=this._getSlideById(this.activeId);if(f){const T=Io(this._ngZone,this._getSlideElement(f.id),wae,a);T.subscribe(()=>{f.slid.emit({isShown:!1,direction:n,source:i})}),d.push(T)}const g=this.activeId;this.activeId=s.id;const C=this._getSlideById(this.activeId),E=Io(this._ngZone,this._getSlideElement(s.id),Cae,a);E.subscribe(()=>{C?.slid.emit({isShown:!0,direction:n,source:i})}),d.push(E),XA(...d).pipe(Jr(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:g,current:s.id,direction:n,paused:this._pause$.value,source:i})})}this._cd.markForCheck()}_getSlideEventDirection(e,n){return this._getSlideIdxById(e)>this._getSlideIdxById(n)?tm.END:tm.START}_getSlideById(e){return this.slides.find(n=>n.id===e)||null}_getSlideIdxById(e){const n=this._getSlideById(e);return null!=n?this.slides.toArray().indexOf(n):-1}_getNextSlide(e){const n=this.slides.toArray(),i=this._getSlideIdxById(e);return i===n.length-1?this.wrap?n[0].id:n[n.length-1].id:n[i+1].id}_getPrevSlide(e){const n=this.slides.toArray(),i=this._getSlideIdxById(e);return 0===i?this.wrap?n[n.length-1].id:n[0].id:n[i-1].id}_getSlideElement(e){return this._container.nativeElement.querySelector(`#slide-${e}`)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(Sae),c.Y36(c.Lbi),c.Y36(c.R0b),c.Y36(c.sBO),c.Y36(c.SBq))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-carousel"]],contentQueries:function(e,n,i){if(1&e&&c.Suo(i,bae,4),2&e){let o;c.iGM(o=c.CRH())&&(n.slides=o)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(e,n){1&e&&c.NdJ("keydown.arrowLeft",function(){return n.keyboard&&n.arrowLeft()})("keydown.arrowRight",function(){return n.keyboard&&n.arrowRight()})("mouseenter",function(){return n.mouseHover=!0})("mouseleave",function(){return n.mouseHover=!1})("focusin",function(){return n.focused=!0})("focusout",function(){return n.focused=!1}),2&e&&(c.uIk("aria-activedescendant","slide-"+n.activeId),c.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[c.jDz],decls:6,vars:6,consts:function(){let t,e,n;return t=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,e=$localize`:@@ngb.carousel.previous:Previous`,n=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],t,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],e,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],n]},template:function(e,n){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Coe,1,5,"button",1),c.qZA(),c.TgZ(2,"div",2),c.YNc(3,Soe,4,4,"div",3),c.qZA(),c.YNc(4,Eoe,4,0,"button",4),c.YNc(5,boe,4,0,"button",5)),2&e&&(c.ekj("visually-hidden",!n.showNavigationIndicators),c.xp6(1),c.Q6J("ngForOf",n.slides),c.xp6(2),c.Q6J("ngForOf",n.slides),c.xp6(1),c.Q6J("ngIf",n.showNavigationArrows),c.xp6(1),c.Q6J("ngIf",n.showNavigationArrows))},dependencies:[$n,Tr,Yr],encapsulation:2,changeDetection:0}),r})();var Wy=(()=>(function(r){r.TIMER="timer",r.ARROW_LEFT="arrowLeft",r.ARROW_RIGHT="arrowRight",r.INDICATOR="indicator"}(Wy||(Wy={})),Wy))();let W3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[Dae]}),r})(),$3=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})();class Ao{constructor(t,e,n){this.year=Di(t)?t:null,this.month=Di(e)?e:null,this.day=Di(n)?n:null}static from(t){return t instanceof Ao?t:t?new Ao(t.year,t.month,t.day):null}equals(t){return null!=t&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day<t.day:this.month<t.month:this.year<t.year)}after(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day>t.day:this.month>t.month:this.year>t.year)}}function Zw(r,t){return!function Tae(r,t){return!r&&!t||!!r&&!!t&&r.equals(t)}(r,t)}function z3(r,t){return!(!r&&!t||r&&t&&r.year===t.year&&r.month===t.month)}function lP(r,t,e){return r&&t&&r.before(t)?t:r&&e&&r.after(e)?e:r||null}function fG(r,t){const{minDate:e,maxDate:n,disabled:i,markDisabled:o}=t;return!(null==r||i||o&&o(r,{year:r.year,month:r.month})||e&&r.before(e)||n&&r.after(n))}function K3(r){return new Ao(r.getFullYear(),r.getMonth()+1,r.getDate())}function uP(r){const t=new Date(r.year,r.month-1,r.day,12);return isNaN(t.getTime())||t.setFullYear(r.year),t}let cP=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return function Fae(){return new Lae}()},providedIn:"root"}),r})(),Lae=(()=>{class r extends cP{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(e,n="d",i=1){let o=uP(e),s=!0,a=o.getMonth();switch(n){case"y":o.setFullYear(o.getFullYear()+i);break;case"m":a+=i,o.setMonth(a),a%=12,a<0&&(a+=12);break;case"d":o.setDate(o.getDate()+i),s=!1;break;default:return e}return s&&o.getMonth()!==a&&o.setDate(0),K3(o)}getPrev(e,n="d",i=1){return this.getNext(e,n,-i)}getWeekday(e){let i=uP(e).getDay();return 0===i?7:i}getWeekNumber(e,n){7===n&&(n=0);const s=uP(e[(11-n)%7]);s.setDate(s.getDate()+4-(s.getDay()||7));const a=s.getTime();return s.setMonth(0),s.setDate(1),Math.floor(Math.round((a-s.getTime())/864e5)/7)+1}getToday(){return K3(new Date)}isValid(e){if(!(e&&Di(e.year)&&Di(e.month)&&Di(e.day)&&0!==e.year))return!1;const n=uP(e);return!isNaN(n.getTime())&&n.getFullYear()===e.year&&n.getMonth()+1===e.month&&n.getDate()===e.day}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=c.n5z(r)))(n||r)}}(),r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),$y=(()=>{class r{getMonthLabel(e){return`${this.getMonthFullName(e.month,e.year)} ${this.getYearNumerals(e.year)}`}getDayNumerals(e){return`${e.day}`}getWeekNumerals(e){return`${e}`}getYearNumerals(e){return`${e}`}getWeekLabel(){return""}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(e){let n=null;return n=e?new e:function kae(r){return new Gae(r)}(c.LFG(c.soG)),n},providedIn:"root"}),r})(),Gae=(()=>{class r extends $y{constructor(e){super(),this._locale=e,this._monthsShort=et(e,tt.Standalone,dt.Abbreviated),this._monthsFull=et(e,tt.Standalone,dt.Wide)}getWeekdayLabel(e,n){const i=je(this._locale,tt.Standalone,void 0===n?dt.Short:n);return i.map((s,a)=>i[(a+1)%7])[e-1]||""}getMonthShortName(e){return this._monthsShort[e-1]||""}getMonthFullName(e){return this._monthsFull[e-1]||""}getDayAriaLabel(e){return Po(new Date(e.year,e.month-1,e.day),"fullDate",this._locale)}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(c.soG))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),pG=(()=>{class r{constructor(e,n){this._calendar=e,this._i18n=n,this._VALIDATORS={dayTemplateData:i=>{if(this._state.dayTemplateData!==i)return{dayTemplateData:i}},displayMonths:i=>{if(Di(i=hs(i))&&i>0&&this._state.displayMonths!==i)return{displayMonths:i}},disabled:i=>{if(this._state.disabled!==i)return{disabled:i}},firstDayOfWeek:i=>{if(Di(i=hs(i))&&i>=0&&this._state.firstDayOfWeek!==i)return{firstDayOfWeek:i}},focusVisible:i=>{if(this._state.focusVisible!==i&&!this._state.disabled)return{focusVisible:i}},markDisabled:i=>{if(this._state.markDisabled!==i)return{markDisabled:i}},maxDate:i=>{const o=this.toValidDate(i,null);if(Zw(this._state.maxDate,o))return{maxDate:o}},minDate:i=>{const o=this.toValidDate(i,null);if(Zw(this._state.minDate,o))return{minDate:o}},navigation:i=>{if(this._state.navigation!==i)return{navigation:i}},outsideDays:i=>{if(this._state.outsideDays!==i)return{outsideDays:i}},weekdays:i=>{const o=!0===i||!1===i?dt.Short:i,s=!0!==i&&!1!==i||i;if(this._state.weekdayWidth!==o||this._state.weekdaysVisible!==s)return{weekdayWidth:o,weekdaysVisible:s}}},this._model$=new Un.x,this._dateSelect$=new Un.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:dt.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(kr(e=>e.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(kr(e=>null!==e))}set(e){let n=Object.keys(e).map(i=>this._VALIDATORS[i](e[i])).reduce((i,o)=>({...i,...o}),{});Object.keys(n).length>0&&this._nextState(n)}focus(e){const n=this.toValidDate(e,null);null!=n&&!this._state.disabled&&Zw(this._state.focusDate,n)&&this._nextState({focusDate:e})}focusSelect(){fG(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(e){const n=this.toValidDate(e,this._calendar.getToday());null!=n&&!this._state.disabled&&(!this._state.firstDate||z3(this._state.firstDate,n))&&this._nextState({firstDate:n})}select(e,n={}){const i=this.toValidDate(e,null);null!=i&&!this._state.disabled&&(Zw(this._state.selectedDate,i)&&this._nextState({selectedDate:i}),n.emitEvent&&fG(i,this._state)&&this._dateSelect$.next(i))}toValidDate(e,n){const i=Ao.from(e);return void 0===n&&(n=this._calendar.getToday()),this._calendar.isValid(i)?i:n}getMonth(e){for(let n of this._state.months)if(e.month===n.number&&e.year===n.year)return n;throw new Error(`month ${e.month} of year ${e.year} not found`)}_nextState(e){const n=this._updateState(e);this._patchContexts(n),this._state=n,this._model$.next(this._state)}_patchContexts(e){const{months:n,displayMonths:i,selectedDate:o,focusDate:s,focusVisible:a,disabled:d,outsideDays:f}=e;e.months.forEach(g=>{g.weeks.forEach(C=>{C.days.forEach(E=>{s&&(E.context.focused=s.equals(E.date)&&a),E.tabindex=!d&&s&&E.date.equals(s)&&s.month===g.number?0:-1,!0===d&&(E.context.disabled=!0),void 0!==o&&(E.context.selected=null!==o&&o.equals(E.date)),g.number!==E.date.month&&(E.hidden="hidden"===f||"collapsed"===f||i>1&&E.date.after(n[0].firstDate)&&E.date.before(n[i-1].lastDate))})})})}_updateState(e){const n=Object.assign({},this._state,e);let i=n.firstDate;if(("minDate"in e||"maxDate"in e)&&(function Rae(r,t){if(t&&r&&t.before(r))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${r}`)}(n.minDate,n.maxDate),n.focusDate=lP(n.focusDate,n.minDate,n.maxDate),n.firstDate=lP(n.firstDate,n.minDate,n.maxDate),i=n.focusDate),"disabled"in e&&(n.focusVisible=!1),"selectedDate"in e&&0===this._state.months.length&&(i=n.selectedDate),"focusVisible"in e||"focusDate"in e&&(n.focusDate=lP(n.focusDate,n.minDate,n.maxDate),i=n.focusDate,0!==n.months.length&&n.focusDate&&!n.focusDate.before(n.firstDate)&&!n.focusDate.after(n.lastDate)))return n;if("firstDate"in e&&(n.firstDate=lP(n.firstDate,n.minDate,n.maxDate),i=n.firstDate),i){const s=function Nae(r,t,e,n,i){const{displayMonths:o,months:s}=e,a=s.splice(0,s.length);return Array.from({length:o},(f,g)=>{const C=Object.assign(r.getNext(t,"m",g),{day:1});if(s[g]=null,!i){const E=a.findIndex(T=>T.firstDate.equals(C));-1!==E&&(s[g]=a.splice(E,1)[0])}return C}).forEach((f,g)=>{null===s[g]&&(s[g]=function Mae(r,t,e,n,i={}){const{dayTemplateData:o,minDate:s,maxDate:a,firstDayOfWeek:d,markDisabled:f,outsideDays:g,weekdayWidth:C,weekdaysVisible:E}=e,T=r.getToday();i.firstDate=null,i.lastDate=null,i.number=t.month,i.year=t.year,i.weeks=i.weeks||[],i.weekdays=i.weekdays||[],t=function xae(r,t,e){const n=r.getDaysPerWeek(),i=new Ao(t.year,t.month,1),o=r.getWeekday(i)%n;return r.getPrev(i,"d",(n+o-e)%n)}(r,t,d),E||(i.weekdays.length=0);for(let I=0;I<r.getWeeksPerMonth();I++){let M=i.weeks[I];M||(M=i.weeks[I]={number:0,days:[],collapsed:!0});const k=M.days;for(let W=0;W<r.getDaysPerWeek();W++){0===I&&E&&(i.weekdays[W]=n.getWeekdayLabel(r.getWeekday(t),C));const z=new Ao(t.year,t.month,t.day),J=r.getNext(z),re=n.getDayAriaLabel(z);let ce=!!(s&&z.before(s)||a&&z.after(a));!ce&&f&&(ce=f(z,{month:i.number,year:i.year}));let Re=z.equals(T),Xe=o?o(z,{month:i.number,year:i.year}):void 0;null===i.firstDate&&z.month===i.number&&(i.firstDate=z),z.month===i.number&&J.month!==i.number&&(i.lastDate=z);let Ke=k[W];Ke||(Ke=k[W]={}),Ke.date=z,Ke.context=Object.assign(Ke.context||{},{$implicit:z,date:z,data:Xe,currentMonth:i.number,currentYear:i.year,disabled:ce,focused:!1,selected:!1,today:Re}),Ke.tabindex=-1,Ke.ariaLabel=re,Ke.hidden=!1,t=J}M.number=r.getWeekNumber(k.map(W=>W.date),d),M.collapsed="collapsed"===g&&k[0].date.month!==i.number&&k[k.length-1].date.month!==i.number}return i}(r,f,e,n,a.shift()||{}))}),s}(this._calendar,i,n,this._i18n,"dayTemplateData"in e||"firstDayOfWeek"in e||"markDisabled"in e||"minDate"in e||"maxDate"in e||"disabled"in e||"outsideDays"in e||"weekdaysVisible"in e);n.months=s,n.firstDate=s[0].firstDate,n.lastDate=s[s.length-1].lastDate,"selectedDate"in e&&!fG(n.selectedDate,n)&&(n.selectedDate=null),"firstDate"in e&&(!n.focusDate||n.focusDate.before(n.firstDate)||n.focusDate.after(n.lastDate))&&(n.focusDate=i);const a=!this._state.firstDate||this._state.firstDate.year!==n.firstDate.year,d=!this._state.firstDate||this._state.firstDate.month!==n.firstDate.month;"select"===n.navigation?(("minDate"in e||"maxDate"in e||0===n.selectBoxes.years.length||a)&&(n.selectBoxes.years=function Iae(r,t,e){if(!r)return[];const n=t?Math.max(t.year,r.year-500):r.year-10,o=(e?Math.min(e.year,r.year+500):r.year+10)-n+1,s=Array(o);for(let a=0;a<o;a++)s[a]=n+a;return s}(n.firstDate,n.minDate,n.maxDate)),("minDate"in e||"maxDate"in e||0===n.selectBoxes.months.length||a)&&(n.selectBoxes.months=function Oae(r,t,e,n){if(!t)return[];let i=r.getMonths(t.year);if(e&&t.year===e.year){const o=i.findIndex(s=>s===e.month);i=i.slice(o)}if(n&&t.year===n.year){const o=i.findIndex(s=>s===n.month);i=i.slice(0,o+1)}return i}(this._calendar,n.firstDate,n.minDate,n.maxDate))):n.selectBoxes={years:[],months:[]},("arrows"===n.navigation||"select"===n.navigation)&&(d||a||"minDate"in e||"maxDate"in e||"disabled"in e)&&(n.prevDisabled=n.disabled||function Pae(r,t,e){const n=Object.assign(r.getPrev(t,"m"),{day:1});return null!=e&&(n.year===e.year&&n.month<e.month||n.year<e.year&&1===e.month)}(this._calendar,n.firstDate,n.minDate),n.nextDisabled=n.disabled||function Aae(r,t,e){const n=Object.assign(r.getNext(t,"m"),{day:1});return null!=e&&n.after(e)}(this._calendar,n.lastDate,n.maxDate))}return n}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(cP),c.LFG($y))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var Qw=(()=>(function(r){r[r.PREV=0]="PREV",r[r.NEXT=1]="NEXT"}(Qw||(Qw={})),Qw))();let Vae=(()=>{class r{constructor(e){this.i18n=e}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36($y))},r.\u0275cmp=c.Xpm({type:r,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(e,n){2&e&&c.ekj("bg-primary",n.selected)("text-white",n.selected)("text-muted",n.isMuted())("outside",n.isMuted())("active",n.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[c.jDz],attrs:Doe,decls:1,vars:1,template:function(e,n){1&e&&c._uU(0),2&e&&c.Oqu(n.i18n.getDayNumerals(n.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),r})(),Hae=(()=>{class r{constructor(e,n){this.i18n=e,this._renderer=n,this.select=new c.vpe,this._month=-1,this._year=-1}changeMonth(e){this.select.emit(new Ao(this.date.year,hs(e),1))}changeYear(e){this.select.emit(new Ao(hs(e),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return r.\u0275fac=function(e){return new(e||r)(c.Y36($y),c.Y36(c.Qsj))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(e,n){if(1&e&&(c.Gf(Toe,7,c.SBq),c.Gf(Roe,7,c.SBq)),2&e){let i;c.iGM(i=c.CRH())&&(n.monthSelect=i.first),c.iGM(i=c.CRH())&&(n.yearSelect=i.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[c.jDz],decls:6,vars:4,consts:function(){let t,e,n,i;return t=$localize`:@@ngb.datepicker.select-month:Select month`,e=$localize`:@@ngb.datepicker.select-month:Select month`,n=$localize`:@@ngb.datepicker.select-year:Select year`,i=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",t,"title",e,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",n,"title",i,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(e,n){1&e&&(c.TgZ(0,"select",0,1),c.NdJ("change",function(o){return n.changeMonth(o.target.value)}),c.YNc(2,Ooe,2,3,"option",2),c.qZA(),c.TgZ(3,"select",3,4),c.NdJ("change",function(o){return n.changeYear(o.target.value)}),c.YNc(5,Ioe,2,2,"option",2),c.qZA()),2&e&&(c.Q6J("disabled",n.disabled),c.xp6(2),c.Q6J("ngForOf",n.months),c.xp6(1),c.Q6J("disabled",n.disabled),c.xp6(2),c.Q6J("ngForOf",n.years))},dependencies:[$n],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),r})(),Bae=(()=>{class r{constructor(e){this.i18n=e,this.navigation=Qw,this.months=[],this.navigate=new c.vpe,this.select=new c.vpe}onClickPrev(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36($y))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[c.jDz],decls:8,vars:4,consts:function(){let t,e,n,i;return t=$localize`:@@ngb.datepicker.previous-month:Previous month`,e=$localize`:@@ngb.datepicker.previous-month:Previous month`,n=$localize`:@@ngb.datepicker.next-month:Next month`,i=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",t,"title",e,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",n,"title",i,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(e,n){1&e&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",function(o){return n.onClickPrev(o)}),c._UZ(2,"span",2),c.qZA()(),c.YNc(3,Aoe,1,4,"ngb-datepicker-navigation-select",3),c.YNc(4,xoe,1,1,null,4),c.TgZ(5,"div",5)(6,"button",6),c.NdJ("click",function(o){return n.onClickNext(o)}),c._UZ(7,"span",2),c.qZA()()),2&e&&(c.xp6(1),c.Q6J("disabled",n.prevDisabled),c.xp6(2),c.Q6J("ngIf",n.showSelect),c.xp6(1),c.Q6J("ngIf",!n.showSelect),c.xp6(2),c.Q6J("disabled",n.nextDisabled))},dependencies:[Yr,$n,Hae],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),r})();var Qn=(()=>(function(r){r[r.Tab=9]="Tab",r[r.Enter=13]="Enter",r[r.Escape=27]="Escape",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.ArrowLeft=37]="ArrowLeft",r[r.ArrowUp=38]="ArrowUp",r[r.ArrowRight=39]="ArrowRight",r[r.ArrowDown=40]="ArrowDown"}(Qn||(Qn={})),Qn))();let Uae=(()=>{class r{processKey(e,n){const{state:i,calendar:o}=n;switch(e.which){case Qn.PageUp:n.focusDate(o.getPrev(i.focusedDate,e.shiftKey?"y":"m",1));break;case Qn.PageDown:n.focusDate(o.getNext(i.focusedDate,e.shiftKey?"y":"m",1));break;case Qn.End:n.focusDate(e.shiftKey?i.maxDate:i.lastDate);break;case Qn.Home:n.focusDate(e.shiftKey?i.minDate:i.firstDate);break;case Qn.ArrowLeft:n.focusDate(o.getPrev(i.focusedDate,"d",1));break;case Qn.ArrowUp:n.focusDate(o.getPrev(i.focusedDate,"d",o.getDaysPerWeek()));break;case Qn.ArrowRight:n.focusDate(o.getNext(i.focusedDate,"d",1));break;case Qn.ArrowDown:n.focusDate(o.getNext(i.focusedDate,"d",o.getDaysPerWeek()));break;case Qn.Enter:case Qn.Space:n.focusSelect();break;default:return}e.preventDefault(),e.stopPropagation()}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),gG=(()=>{class r{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=dt.Short}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),mG=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return function jae(){return new Wae}()},providedIn:"root"}),r})(),Wae=(()=>{class r extends mG{fromModel(e){return e&&Di(e.year)&&Di(e.month)&&Di(e.day)?{year:e.year,month:e.month,day:e.day}:null}toModel(e){return e&&Di(e.year)&&Di(e.month)&&Di(e.day)?{year:e.year,month:e.month,day:e.day}:null}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=c.n5z(r)))(n||r)}}(),r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),q3=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),r})(),vG=(()=>{class r{constructor(e,n,i,o){this.i18n=e,this.datepicker=n,this._keyboardService=i,this._service=o}set month(e){this.viewModel=this._service.getMonth(e)}onKeyDown(e){this._keyboardService.processKey(e,this.datepicker)}doSelect(e){!e.context.disabled&&!e.hidden&&this.datepicker.onDateSelect(e.date)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36($y),c.Y36((0,c.Gpc)(()=>dP)),c.Y36(Uae),c.Y36(pG))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(e,n){1&e&&c.NdJ("keydown",function(o){return n.onKeyDown(o)})},inputs:{month:"month"},standalone:!0,features:[c.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(c.YNc(0,koe,3,2,"div",0),c.YNc(1,joe,1,1,"ng-template",1)),2&e&&(c.Q6J("ngIf",n.viewModel.weekdays.length>0),c.xp6(1),c.Q6J("ngForOf",n.viewModel.weeks))},dependencies:[Yr,$n,Tr],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),r})(),dP=(()=>{class r{constructor(e,n,i,o,s,a,d,f){this._service=e,this._calendar=n,this.i18n=i,this._elementRef=a,this._ngbDateAdapter=d,this._ngZone=f,this._controlValue=null,this._destroyed$=new Un.x,this._publicState={},this.navigate=new c.vpe,this.dateSelect=new c.vpe,this.onChange=g=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(g=>this[g]=o[g]),e.dateSelect$.pipe(Fi(this._destroyed$)).subscribe(g=>{this.dateSelect.emit(g)}),e.model$.pipe(Fi(this._destroyed$)).subscribe(g=>{const C=g.firstDate,E=this.model?this.model.firstDate:null;this._publicState={maxDate:g.maxDate,minDate:g.minDate,firstDate:g.firstDate,lastDate:g.lastDate,focusedDate:g.focusDate,months:g.months.map(W=>W.firstDate)};let T=!1;if(!C.equals(E)&&(this.navigate.emit({current:E?{year:E.year,month:E.month}:null,next:{year:C.year,month:C.month},preventDefault:()=>T=!0}),T&&null!==E))return void this._service.open(E);const I=g.selectedDate,M=g.focusDate,k=this.model?this.model.focusDate:null;this.model=g,Zw(I,this._controlValue)&&(this._controlValue=I,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(I))),Zw(M,k)&&k&&g.focusVisible&&this.focus(),s.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(e){this._service.focus(Ao.from(e))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Jr(1)).subscribe(()=>{const e=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})}navigateTo(e){this._service.open(Ao.from(e?e.day?e:{...e,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=ds(this._contentEl.nativeElement,"focusin"),n=ds(this._contentEl.nativeElement,"focusout"),{nativeElement:i}=this._elementRef;(0,yI.T)(e,n).pipe(kr(({target:o,relatedTarget:s})=>!(A3(o,"ngb-dp-day")&&A3(s,"ngb-dp-day")&&i.contains(o)&&i.contains(s))),Fi(this._destroyed$)).subscribe(({type:o})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===o})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const e={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(n=>e[n]=this[n]),this._service.set(e),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(e){const n={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(i=>i in e).forEach(i=>n[i]=this[i]),this._service.set(n),"startDate"in e){const{currentValue:i,previousValue:o}=e.startDate;z3(o,i)&&this.navigateTo(this.startDate)}}onDateSelect(e){this._service.focus(e),this._service.select(e,{emitEvent:!0})}onNavigateDateSelect(e){this._service.open(e)}onNavigateEvent(e){switch(e){case Qw.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Qw.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._service.set({disabled:e})}writeValue(e){this._controlValue=Ao.from(this._ngbDateAdapter.fromModel(e)),this._service.select(this._controlValue)}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(pG),c.Y36(cP),c.Y36($y),c.Y36(gG),c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(mG),c.Y36(c.R0b))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-datepicker"]],contentQueries:function(e,n,i){if(1&e&&c.Suo(i,q3,7),2&e){let o;c.iGM(o=c.CRH())&&(n.contentTemplate=o.first)}},viewQuery:function(e,n){if(1&e&&(c.Gf(Woe,7),c.Gf($oe,7)),2&e){let i;c.iGM(i=c.CRH())&&(n._defaultDayTemplate=i.first),c.iGM(i=c.CRH())&&(n._contentEl=i.first)}},hostVars:2,hostBindings:function(e,n){2&e&&c.ekj("disabled",n.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[c._Bn([{provide:Oa,useExisting:(0,c.Gpc)(()=>r),multi:!0},pG]),c.TTD,c.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(e,n){if(1&e&&(c.YNc(0,zoe,1,5,"ng-template",null,0,c.W1O),c.YNc(2,Yoe,1,1,"ng-template",null,1,c.W1O),c.TgZ(4,"div",2),c.YNc(5,Zoe,1,7,"ngb-datepicker-navigation",3),c.qZA(),c.TgZ(6,"div",4,5),c.YNc(8,Qoe,0,0,"ng-template",6),c.qZA(),c.YNc(9,Joe,0,0,"ng-template",6)),2&e){const i=c.MAs(3);c.xp6(5),c.Q6J("ngIf","none"!==n.navigation),c.xp6(1),c.ekj("ngb-dp-months",!n.contentTemplate),c.xp6(2),c.Q6J("ngTemplateOutlet",(null==n.contentTemplate?null:n.contentTemplate.templateRef)||i),c.xp6(1),c.Q6J("ngTemplateOutlet",n.footerTemplate)}},dependencies:[Yr,$n,Tr,Vae,vG,Bae],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),r})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Q3=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function J3(r){const t=Array.from(r.querySelectorAll(Q3)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let d$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[dP,vG]}),r})(),g$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})();class qy{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}let gle=(()=>{class r{constructor(e,n){this._el=e,this._zone=n}ngOnInit(){this._zone.onStable.asObservable().pipe(Jr(1)).subscribe(()=>{Io(this._zone,this._el.nativeElement,(e,n)=>{n&&Yw(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Io(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.SBq),c.Y36(c.R0b))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,n){2&e&&(c.Tol("modal-backdrop"+(n.backdropClass?" "+n.backdropClass:"")),c.ekj("show",!n.animation)("fade",n.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[c.jDz],decls:0,vars:0,template:function(e,n){},encapsulation:2}),r})();class m${close(t){}dismiss(t){}}class mle{constructor(t,e,n,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=i,this._closed=new Un.x,this._dismissed=new Un.x,this._hidden=new Un.x,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Fi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Fi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function I3(r){return r&&r.then}(e)?!1!==e&&this._dismiss(t):e.then(n=>{!1!==n&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Tt(void 0);t.subscribe(()=>{const{nativeElement:n}=this._windowCmptRef.location;n.parentNode.removeChild(n),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:n}=this._backdropCmptRef.location;n.parentNode.removeChild(n),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),XA(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var gD=(()=>(function(r){r[r.BACKDROP_CLICK=0]="BACKDROP_CLICK",r[r.ESC=1]="ESC"}(gD||(gD={})),gD))();let vle=(()=>{class r{constructor(e,n,i){this._document=e,this._elRef=n,this._zone=i,this._closed$=new Un.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new c.vpe,this.shown=new Un.x,this.hidden=new Un.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Kw(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Jr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,n={animation:this.animation,runningTransition:"stop"},s=XA(Io(this._zone,e,()=>e.classList.remove("show"),n),Io(this._zone,this._dialogEl.nativeElement,()=>{},n));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const e={animation:this.animation,runningTransition:"continue"};XA(Io(this._zone,this._elRef.nativeElement,(o,s)=>{s&&Yw(o),o.classList.add("show")},e),Io(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{ds(e,"keydown").pipe(Fi(this._closed$),kr(i=>i.which===Qn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(gD.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let n=!1;ds(this._dialogEl.nativeElement,"mousedown").pipe(Fi(this._closed$),(0,zi.b)(()=>n=!1),Ur(()=>ds(e,"mouseup").pipe(Fi(this._closed$),Jr(1))),kr(({target:i})=>e===i)).subscribe(()=>{n=!0}),ds(e,"click").pipe(Fi(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!n&&this._zone.run(()=>this.dismiss(gD.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const n=e.querySelector("[ngbAutofocus]"),i=J3(e)[0];(n||i||e).focus()}}_restoreFocus(){const e=this._document.body,n=this._elWithFocus;let i;i=n&&n.focus&&e.contains(n)?n:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Io(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(he),c.Y36(c.SBq),c.Y36(c.R0b))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-modal-window"]],viewQuery:function(e,n){if(1&e&&c.Gf(Xoe,7),2&e){let i;c.iGM(i=c.CRH())&&(n._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,n){2&e&&(c.uIk("aria-modal",!0)("aria-labelledby",n.ariaLabelledBy)("aria-describedby",n.ariaDescribedBy),c.Tol("modal d-block"+(n.windowClass?" "+n.windowClass:"")),c.ekj("fade",n.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[c.jDz],ngContentSelectors:oP,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,n){1&e&&(c.F$t(),c.TgZ(0,"div",0,1)(2,"div",2),c.Hsn(3),c.qZA()()),2&e&&c.Tol("modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":"")+n.fullscreenClass+(n.scrollable?" modal-dialog-scrollable":"")+(n.modalDialogClass?" "+n.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),r})(),yle=(()=>{class r{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,i=n.style,{overflow:o,paddingRight:s}=i;if(e>0){const a=parseFloat(window.getComputedStyle(n).paddingRight);i.paddingRight=`${a+e}px`}return i.overflow="hidden",()=>{e>0&&(i.paddingRight=s),i.overflow=o}}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(he))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),_le=(()=>{class r{constructor(e,n,i,o,s,a,d){this._applicationRef=e,this._injector=n,this._environmentInjector=i,this._document=o,this._scrollBar=s,this._rendererFactory=a,this._ngZone=d,this._activeWindowCmptHasChanged=new Un.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new c.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const f=this._windowCmpts[this._windowCmpts.length-1];((r,t,e,n=!1)=>{r.runOutsideAngular(()=>{const i=ds(t,"focusin").pipe(Fi(e),(0,Pt.U)(o=>o.target));ds(t,"keydown").pipe(Fi(e),kr(o=>o.which===Qn.Tab),eP(i)).subscribe(([o,s])=>{const[a,d]=J3(t);(s===a||s===t)&&o.shiftKey&&(d.focus(),o.preventDefault()),s===d&&!o.shiftKey&&(a.focus(),o.preventDefault())}),n&&ds(t,"click").pipe(Fi(e),eP(i),(0,Pt.U)(o=>o[1])).subscribe(o=>o.focus())})})(this._ngZone,f.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(f.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,n,i){const o=i.container instanceof HTMLElement?i.container:By(i.container)?this._document.querySelector(i.container):this._document.body,s=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new m$,d=(e=i.injector||e).get(c.lqb,null)||this._environmentInjector,f=this._getContentRef(e,d,n,a,i);let g=!1!==i.backdrop?this._attachBackdrop(o):void 0,C=this._attachWindowComponent(o,f.nodes),E=new mle(C,f,g,i.beforeDismiss);return this._registerModalRef(E),this._registerWindowCmpt(C),E.hidden.pipe(Jr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=T=>{E.close(T)},a.dismiss=T=>{E.dismiss(T)},this._applyWindowOptions(C.instance,i),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),g&&g.instance&&(this._applyBackdropOptions(g.instance,i),g.changeDetectorRef.detectChanges()),C.changeDetectorRef.detectChanges(),E}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(n=>n.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let n=(0,c.LMc)(gle,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(e,n){let i=(0,c.LMc)(vle,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:n});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_applyWindowOptions(e,n){this._windowAttributes.forEach(i=>{By(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){this._backdropAttributes.forEach(i=>{By(n[i])&&(e[i]=n[i])})}_getContentRef(e,n,i,o,s){return i?i instanceof c.Rgc?this._createFromTemplateRef(i,o):Kw(i)?this._createFromString(i):this._createFromComponent(e,n,i,o,s):new qy([])}_createFromTemplateRef(e,n){const o=e.createEmbeddedView({$implicit:n,close(s){n.close(s)},dismiss(s){n.dismiss(s)}});return this._applicationRef.attachView(o),new qy([o.rootNodes],o)}_createFromString(e){const n=this._document.createTextNode(`${e}`);return new qy([[n]])}_createFromComponent(e,n,i,o,s){const a=c.zs3.create({providers:[{provide:m$,useValue:o}],parent:e}),d=(0,c.LMc)(i,{environmentInjector:n,elementInjector:a}),f=d.location.nativeElement;return s.scrollable&&f.classList.add("component-host-scrollable"),this._applicationRef.attachView(d.hostView),new qy([[f]],d.hostView,d)}_setAriaHidden(e){const n=e.parentElement;n&&e!==this._document.body&&(Array.from(n.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,n)=>{e?n.setAttribute("aria-hidden",e):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const n=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(n,n)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const n=this._windowCmpts.indexOf(e);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(c.z2F),c.LFG(c.zs3),c.LFG(c.lqb),c.LFG(he),c.LFG(yle),c.LFG(c.FYo),c.LFG(c.R0b))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Cle=(()=>{class r{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Uy))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),wle=(()=>{class r{constructor(e,n,i){this._injector=e,this._modalStack=n,this._config=i}open(e,n={}){const i={...this._config,animation:this._config.animation,...n};return this._modalStack.open(this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(c.zs3),c.LFG(_le),c.LFG(Cle))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),v$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[wle]}),r})();const Rle=({classList:r})=>(r.remove("show"),()=>r.remove("active")),Ole=(r,t)=>{t&&Yw(r),r.classList.add("show")};let wG=(()=>{class r{constructor(e){this.elRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.SBq))},r.\u0275dir=c.lG2({type:r,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(e,n){2&e&&(c.Ikx("id",n.item.panelDomId),c.uIk("role",n.role?n.role:n.nav.roles?"tabpanel":void 0)("aria-labelledby",n.item.domId),c.ekj("fade",n.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),r})(),C$=(()=>{class r{constructor(e,n){this._cd=e,this._ngZone=n,this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(Fi(this.nav.destroy$),Zc(this._activePane?.item||null),a0(),function sie(r){return kr((t,e)=>r<=e)}(1)).subscribe(e=>{const n={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Io(this._ngZone,this._activePane.elRef.nativeElement,Rle,n).subscribe(()=>{const i=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Io(this._ngZone,this._activePane.elRef.nativeElement,Ole,n).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),i&&(i.hidden.emit(),this.nav.hidden.emit(i.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(e){return this._panes&&this._panes.find(n=>n.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.sBO),c.Y36(c.R0b))},r.\u0275cmp=c.Xpm({type:r,selectors:[["","ngbNavOutlet",""]],viewQuery:function(e,n){if(1&e&&c.Gf(wG,5),2&e){let i;c.iGM(i=c.CRH())&&(n._panes=i)}},hostVars:2,hostBindings:function(e,n){2&e&&c.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[c.jDz],attrs:ese,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&c.YNc(0,ise,1,1,"ng-template",0),2&e&&c.Q6J("ngForOf",n.nav.items)},dependencies:[wG,$n,Yr,Tr],encapsulation:2,changeDetection:0}),r})(),w$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[C$]}),r})(),Ile=(()=>{class r{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),S$=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),r})(),E$=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),r})(),b$=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),r})(),D$=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),r})(),T$=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),r})(),R$=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),r})(),O$=(()=>{class r{constructor(e){this.templateRef=e}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(c.Rgc))},r.\u0275dir=c.lG2({type:r,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),r})(),I$=(()=>{class r{constructor(e){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new c.vpe(!0),this.disabled=e.disabled,this.boundaryLinks=e.boundaryLinks,this.directionLinks=e.directionLinks,this.ellipses=e.ellipses,this.maxSize=e.maxSize,this.pageSize=e.pageSize,this.rotate=e.rotate,this.size=e.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(e){this._updatePages(e)}ngOnChanges(e){this._updatePages(this.page)}isEllipsis(e){return-1===e}_applyEllipses(e,n){this.ellipses&&(e>0&&(e>2?this.pages.unshift(-1):2===e&&this.pages.unshift(2),this.pages.unshift(1)),n<this.pageCount&&(n<this.pageCount-2?this.pages.push(-1):n===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let e=0,n=this.pageCount,i=Math.floor(this.maxSize/2);return this.page<=i?n=this.maxSize:this.pageCount-this.page<i?e=this.pageCount-this.maxSize:(e=this.page-i-1,n=this.page+(this.maxSize%2==0?i-1:i)),[e,n]}_applyPagination(){let n=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[n,n+this.maxSize]}_setPageInRange(e){const n=this.page;this.page=sP(e,this.pageCount,1),this.page!==n&&Li(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(e){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Li(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let n=1;n<=this.pageCount;n++)this.pages.push(n);if(this._setPageInRange(e),this.maxSize>0&&this.pageCount>this.maxSize){let n=0,i=this.pageCount;[n,i]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(n,i),this._applyEllipses(n,i)}}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(Ile))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-pagination"]],contentQueries:function(e,n,i){if(1&e&&(c.Suo(i,S$,5),c.Suo(i,E$,5),c.Suo(i,b$,5),c.Suo(i,D$,5),c.Suo(i,T$,5),c.Suo(i,R$,5),c.Suo(i,O$,5)),2&e){let o;c.iGM(o=c.CRH())&&(n.tplEllipsis=o.first),c.iGM(o=c.CRH())&&(n.tplFirst=o.first),c.iGM(o=c.CRH())&&(n.tplLast=o.first),c.iGM(o=c.CRH())&&(n.tplNext=o.first),c.iGM(o=c.CRH())&&(n.tplNumber=o.first),c.iGM(o=c.CRH())&&(n.tplPrevious=o.first),c.iGM(o=c.CRH())&&(n.tplPages=o.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[c.TTD,c.jDz],decls:20,vars:12,consts:function(){let t,e,n,i,o,s,a,d;return t=$localize`:@@ngb.pagination.first:««`,e=$localize`:@@ngb.pagination.previous:«`,n=$localize`:@@ngb.pagination.next:»`,i=$localize`:@@ngb.pagination.last:»»`,o=$localize`:@@ngb.pagination.first-aria:First`,s=$localize`:@@ngb.pagination.previous-aria:Previous`,a=$localize`:@@ngb.pagination.next-aria:Next`,d=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],t,e,n,i,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",o,"href","",1,"page-link",3,"click"],["aria-label",s,"href","",1,"page-link",3,"click"],["aria-label",a,"href","",1,"page-link",3,"click"],["aria-label",d,"href","",1,"page-link",3,"click"]]},template:function(e,n){if(1&e&&(c.YNc(0,ose,2,0,"ng-template",null,0,c.W1O),c.YNc(2,sse,2,0,"ng-template",null,1,c.W1O),c.YNc(4,ase,2,0,"ng-template",null,2,c.W1O),c.YNc(6,lse,2,0,"ng-template",null,3,c.W1O),c.YNc(8,use,1,0,"ng-template",null,4,c.W1O),c.YNc(10,dse,2,2,"ng-template",null,5,c.W1O),c.YNc(12,_se,1,1,"ng-template",null,6,c.W1O),c.TgZ(14,"ul"),c.YNc(15,wse,3,9,"li",7),c.YNc(16,bse,3,8,"li",7),c.YNc(17,Dse,0,0,"ng-template",8),c.YNc(18,Rse,3,9,"li",7),c.YNc(19,Ise,3,9,"li",7),c.qZA()),2&e){const i=c.MAs(13);c.xp6(14),c.Tol("pagination"+(n.size?" pagination-"+n.size:"")),c.xp6(1),c.Q6J("ngIf",n.boundaryLinks),c.xp6(1),c.Q6J("ngIf",n.directionLinks),c.xp6(1),c.Q6J("ngTemplateOutlet",(null==n.tplPages?null:n.tplPages.templateRef)||i)("ngTemplateOutletContext",c.kEZ(8,Ase,n.page,n.pages,n.disabled)),c.xp6(1),c.Q6J("ngIf",n.directionLinks),c.xp6(1),c.Q6J("ngIf",n.boundaryLinks)}},dependencies:[Yr,$n,Tr],encapsulation:2,changeDetection:0}),r})(),A$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[I$]}),r})(),N$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})(),Fle=(()=>{class r{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Lle=(()=>{class r{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.ariaLabel=e.ariaLabel,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Li(e)||e<=0?100:e}get max(){return this._max}getValue(){return sP(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(Fle))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(e,n){2&e&&(c.uIk("aria-valuenow",n.getValue())("aria-valuemax",n.max)("aria-label",n.ariaLabel),c.Udp("height",n.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[c.jDz],ngContentSelectors:oP,decls:3,vars:11,consts:function(){let t;return t=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],t]},template:function(e,n){1&e&&(c.F$t(),c.TgZ(0,"div"),c.YNc(1,Mse,3,3,"span",0),c.Hsn(2),c.qZA()),2&e&&(c.MT6("progress-bar",n.type?n.textType?" bg-"+n.type:" text-bg-"+n.type:"","",n.textType?" text-"+n.textType:"",""),c.Udp("width",n.getPercentValue(),"%"),c.ekj("progress-bar-animated",n.animated)("progress-bar-striped",n.striped),c.xp6(1),c.Q6J("ngIf",n.showValue))},dependencies:[Yr,sp],encapsulation:2,changeDetection:0}),r})(),M$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[Lle]}),r})(),kle=(()=>{class r{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Gle=(()=>{class r{constructor(e,n){this._changeDetectorRef=n,this.contexts=[],this.disabled=!1,this.hover=new c.vpe,this.leave=new c.vpe,this.rateChange=new c.vpe(!0),this.onChange=i=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly,this.tabindex=e.tabindex}ariaValueText(e,n){return`${e} out of ${n}`}isInteractive(){return!this.readonly&&!this.disabled}enter(e){this.isInteractive()&&this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.isInteractive()&&this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case Qn.ArrowDown:case Qn.ArrowLeft:this.update(this.rate-1);break;case Qn.ArrowUp:case Qn.ArrowRight:this.update(this.rate+1);break;case Qn.Home:this.update(0);break;case Qn.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate),e.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,n=!0){const i=sP(e,this.max,0);this.isInteractive()&&this.rate!==i&&(this.rate=i,this.rateChange.emit(this.rate)),n&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_updateState(e){this.nextRate=e,this.contexts.forEach((n,i)=>n.fill=Math.round(100*sP(e-i,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(e,n)=>({fill:0,index:n}))}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(kle),c.Y36(c.sBO))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-rating"]],contentQueries:function(e,n,i){if(1&e&&c.Suo(i,c.Rgc,5),2&e){let o;c.iGM(o=c.CRH())&&(n.starTemplateFromContent=o.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,n){1&e&&c.NdJ("blur",function(){return n.handleBlur()})("keydown",function(o){return n.handleKeyDown(o)})("mouseleave",function(){return n.reset()}),2&e&&(c.Ikx("tabindex",n.disabled?-1:n.tabindex),c.uIk("aria-valuemax",n.max)("aria-valuenow",n.nextRate)("aria-valuetext",n.ariaValueText(n.nextRate,n.max))("aria-disabled",!!n.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[c._Bn([{provide:Oa,useExisting:(0,c.Gpc)(()=>r),multi:!0}]),c.TTD,c.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(c.YNc(0,xse,1,1,"ng-template",null,0,c.W1O),c.YNc(2,Lse,4,5,"ng-template",1)),2&e&&(c.xp6(2),c.Q6J("ngForOf",n.contexts))},dependencies:[$n,Tr],encapsulation:2,changeDetection:0}),r})(),x$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[Gle]}),r})();class F${constructor(t,e,n){this.hour=hs(t),this.minute=hs(e),this.second=hs(n)}changeHour(t=1){this.updateHour((isNaN(this.hour)?0:this.hour)+t)}updateHour(t){this.hour=Li(t)?(t<0?24+t:t)%24:NaN}changeMinute(t=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+t)}updateMinute(t){Li(t)?(this.minute=t%60<0?60+t%60:t%60,this.changeHour(Math.floor(t/60))):this.minute=NaN}changeSecond(t=1){this.updateSecond((isNaN(this.second)?0:this.second)+t)}updateSecond(t){Li(t)?(this.second=t<0?60+t%60:t%60,this.changeMinute(Math.floor(t/60))):this.second=NaN}isValid(t=!0){return Li(this.hour)&&Li(this.minute)&&(!t||Li(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let Vle=(()=>{class r{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),L$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(){return function Hle(){return new Ble}()},providedIn:"root"}),r})(),Ble=(()=>{class r extends L${fromModel(e){return e&&Di(e.hour)&&Di(e.minute)?{hour:e.hour,minute:e.minute,second:Di(e.second)?e.second:null}:null}toModel(e){return e&&Di(e.hour)&&Di(e.minute)?{hour:e.hour,minute:e.minute,second:Di(e.second)?e.second:null}:null}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=c.n5z(r)))(n||r)}}(),r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),k$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=c.Yz7({token:r,factory:function(e){let n=null;return n=e?new e:function Ule(r){return new jle(r)}(c.LFG(c.soG)),n},providedIn:"root"}),r})(),jle=(()=>{class r extends k${constructor(e){super(),this._periods=Ae(e,tt.Standalone,dt.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(c.soG))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();const Wle=/[^0-9]/g;let $le=(()=>{class r{constructor(e,n,i,o){this._config=e,this._ngbTimeAdapter=n,this._cd=i,this.i18n=o,this.onChange=s=>{},this.onTouched=()=>{},this.meridian=e.meridian,this.spinners=e.spinners,this.seconds=e.seconds,this.hourStep=e.hourStep,this.minuteStep=e.minuteStep,this.secondStep=e.secondStep,this.disabled=e.disabled,this.readonlyInputs=e.readonlyInputs,this.size=e.size}set hourStep(e){this._hourStep=Di(e)?e:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(e){this._minuteStep=Di(e)?e:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(e){this._secondStep=Di(e)?e:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(e){const n=this._ngbTimeAdapter.fromModel(e);this.model=n?new F$(n.hour,n.minute,n.second):new F$,!this.seconds&&(!n||!Li(n.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}changeHour(e){this.model?.changeHour(e),this.propagateModelChange()}changeMinute(e){this.model?.changeMinute(e),this.propagateModelChange()}changeSecond(e){this.model?.changeSecond(e),this.propagateModelChange()}updateHour(e){const n=!!this.model&&this.model.hour>=12,i=hs(e);this.model?.updateHour(this.meridian&&(n&&i<12||!n&&12===i)?i+12:i),this.propagateModelChange()}updateMinute(e){this.model?.updateMinute(hs(e)),this.propagateModelChange()}updateSecond(e){this.model?.updateSecond(hs(e)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(e){e.value=e.value.replace(Wle,"")}formatHour(e){return Li(e)?qw(this.meridian?e%12==0?12:e%12:e%24):qw(NaN)}formatMinSec(e){return qw(Li(e)?e:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(e){e.seconds&&!this.seconds&&this.model&&!Li(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(e=!0){e&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return r.\u0275fac=function(e){return new(e||r)(c.Y36(Vle),c.Y36(L$),c.Y36(c.sBO),c.Y36(k$))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[c._Bn([{provide:Oa,useExisting:(0,c.Gpc)(()=>r),multi:!0}]),c.TTD,c.jDz],decls:16,vars:25,consts:function(){let t,e,n,i,o,s,a,d,f,g,C,E,T,I;return t=$localize`:@@ngb.timepicker.HH:HH`,e=$localize`:@@ngb.timepicker.hours:Hours`,n=$localize`:@@ngb.timepicker.MM:MM`,i=$localize`:@@ngb.timepicker.minutes:Minutes`,o=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,s=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,a=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,d=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,f=$localize`:@@ngb.timepicker.SS:SS`,g=$localize`:@@ngb.timepicker.seconds:Seconds`,C=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,E=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,T=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,I=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",t,"aria-label",e,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",n,"aria-label",i,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],o,[1,"chevron","ngb-tp-chevron","bottom"],s,a,d,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",f,"aria-label",g,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],C,E,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],T,I]},template:function(e,n){1&e&&(c.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),c.YNc(3,kse,4,7,"button",3),c.TgZ(4,"input",4),c.NdJ("change",function(o){return n.updateHour(o.target.value)})("blur",function(){return n.handleBlur()})("input",function(o){return n.formatInput(o.target)})("keydown.ArrowUp",function(o){return n.changeHour(n.hourStep),o.preventDefault()})("keydown.ArrowDown",function(o){return n.changeHour(-n.hourStep),o.preventDefault()}),c.qZA(),c.YNc(5,Gse,4,7,"button",3),c.qZA(),c.TgZ(6,"div",5),c._uU(7,":"),c.qZA(),c.TgZ(8,"div",6),c.YNc(9,Vse,4,7,"button",3),c.TgZ(10,"input",7),c.NdJ("change",function(o){return n.updateMinute(o.target.value)})("blur",function(){return n.handleBlur()})("input",function(o){return n.formatInput(o.target)})("keydown.ArrowUp",function(o){return n.changeMinute(n.minuteStep),o.preventDefault()})("keydown.ArrowDown",function(o){return n.changeMinute(-n.minuteStep),o.preventDefault()}),c.qZA(),c.YNc(11,Hse,4,7,"button",3),c.qZA(),c.YNc(12,Bse,2,0,"div",8),c.YNc(13,Wse,4,9,"div",9),c.YNc(14,$se,1,0,"div",8),c.YNc(15,qse,5,9,"div",10),c.qZA()()),2&e&&(c.ekj("disabled",n.disabled),c.Q6J("disabled",n.disabled),c.xp6(3),c.Q6J("ngIf",n.spinners),c.xp6(1),c.ekj("form-control-sm",n.isSmallSize)("form-control-lg",n.isLargeSize),c.Q6J("value",n.formatHour(null==n.model?null:n.model.hour))("readOnly",n.readonlyInputs)("disabled",n.disabled),c.xp6(1),c.Q6J("ngIf",n.spinners),c.xp6(4),c.Q6J("ngIf",n.spinners),c.xp6(1),c.ekj("form-control-sm",n.isSmallSize)("form-control-lg",n.isLargeSize),c.Q6J("value",n.formatMinSec(null==n.model?null:n.model.minute))("readOnly",n.readonlyInputs)("disabled",n.disabled),c.xp6(1),c.Q6J("ngIf",n.spinners),c.xp6(1),c.Q6J("ngIf",n.seconds),c.xp6(1),c.Q6J("ngIf",n.seconds),c.xp6(1),c.Q6J("ngIf",n.meridian),c.xp6(1),c.Q6J("ngIf",n.meridian))},dependencies:[Yr],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),r})(),G$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[$le]}),r})();const zle=(r,t)=>{const{classList:e}=r;if(t)return e.add("fade"),Yw(r),e.add("show","showing"),()=>{e.remove("showing")};e.add("show")},Kle=({classList:r})=>(r.add("showing"),()=>{r.remove("show","showing")});let qle=(()=>{class r{constructor(e){this._ngbConfig=e,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Uy))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Yle=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=c.lG2({type:r,selectors:[["","ngbToastHeader",""]],standalone:!0}),r})(),Zle=(()=>{class r{constructor(e,n,i,o){this.ariaLive=e,this._zone=i,this._element=o,this.contentHeaderTpl=null,this.shown=new c.vpe,this.hidden=new c.vpe,null==this.ariaLive&&(this.ariaLive=n.ariaLive),this.delay=n.delay,this.autohide=n.autohide,this.animation=n.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(Jr(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(e){"autohide"in e&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const e=Io(this._zone,this._element.nativeElement,Kle,{animation:this.animation,runningTransition:"stop"});return e.subscribe(()=>{this.hidden.emit()}),e}show(){const e=Io(this._zone,this._element.nativeElement,zle,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>{this.shown.emit()}),e}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return r.\u0275fac=function(e){return new(e||r)(c.$8M("aria-live"),c.Y36(qle),c.Y36(c.R0b),c.Y36(c.SBq))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-toast"]],contentQueries:function(e,n,i){if(1&e&&c.Suo(i,Yle,7,c.Rgc),2&e){let o;c.iGM(o=c.CRH())&&(n.contentHeaderTpl=o.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(e,n){2&e&&(c.uIk("aria-live",n.ariaLive),c.ekj("fade",n.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[c.TTD,c.jDz],ngContentSelectors:oP,decls:5,vars:1,consts:function(){let t;return t=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(e,n){1&e&&(c.F$t(),c.YNc(0,Yse,2,1,"ng-template",null,0,c.W1O),c.YNc(2,Qse,3,1,"ng-template",1),c.TgZ(3,"div",2),c.Hsn(4),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngIf",n.contentHeaderTpl||n.header))},dependencies:[Yr,Tr],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),r})(),V$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[Zle]}),r})(),H$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})(),Qle=(()=>{class r{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(e){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const n=O3(this.result),i=Array.isArray(this.term)?this.term:[this.term],o=f=>this.accentSensitive?f:P3(f),s=i.map(f=>function rae(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(o(O3(f)))).filter(f=>f),a=this.accentSensitive?n:P3(n),d=s.length?a.split(new RegExp(`(${s.join("|")})`,"gmi")):[n];if(this.accentSensitive)this.parts=d;else{let f=0;this.parts=d.map(g=>n.substring(f,f+=g.length))}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[c.TTD,c.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(e,n){1&e&&c.YNc(0,eae,3,2,"ng-template",0),2&e&&c.Q6J("ngForOf",n.parts)},dependencies:[Yr,$n],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),r})();new c.OlP("live announcer delay",{providedIn:"root",factory:function Jle(){return 100}});let B$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[Qle]}),r})(),U$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})();const Xle=[B3,U3,W3,$3,d$,g$,v$,w$,U$,A$,N$,M$,x$,G$,V$,H$,B$];let eue=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[Xle,B3,U3,W3,$3,d$,g$,v$,w$,U$,A$,N$,M$,x$,G$,V$,H$,B$]}),r})();const j$="firebasestorage.googleapis.com",W$="storageBucket";class Ti extends H.ZR{constructor(t,e,n=0){super(SG(t),`Firebase Storage: ${e} (${SG(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ti.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return SG(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var $r=(()=>(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}($r||($r={})),$r))();function SG(r){return"storage/"+r}function EG(){return new Ti($r.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function $$(){return new Ti($r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function z$(){return new Ti($r.CANCELED,"User canceled the upload/download.")}function K$(){return new Ti($r.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eS(r){return new Ti($r.INVALID_ARGUMENT,r)}function q$(){return new Ti($r.APP_DELETED,"The Firebase app was deleted.")}function Y$(r){return new Ti($r.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vD(r,t){return new Ti($r.INVALID_FORMAT,"String does not match format '"+r+"': "+t)}function yD(r){throw new Ti($r.INTERNAL_ERROR,"Internal error: "+r)}class Ns{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=Ns.makeFromUrl(t,e)}catch{return new Ns(t,"")}if(""===n.path)return n;throw function due(r){return new Ti($r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}(t)}static makeFromUrl(t,e){let n=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function f(re){re.path_=decodeURIComponent(re.path)}const C=e.replace(/[.]/g,"\\."),J=[{regex:a,indices:{bucket:1,path:3},postModify:function o(re){"/"===re.path.charAt(re.path.length-1)&&(re.path_=re.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${C}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:f},{regex:new RegExp(`^https?://${e===j$?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:f}];for(let re=0;re<J.length;re++){const ce=J[re],Re=ce.regex.exec(t);if(Re){let Ke=Re[ce.indices.path];Ke||(Ke=""),n=new Ns(Re[ce.indices.bucket],Ke),ce.postModify(n);break}}if(null==n)throw function cue(r){return new Ti($r.INVALID_URL,"Invalid URL '"+r+"'.")}(t);return n}}class mue{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function _P(r){return"string"==typeof r||r instanceof String}function Z$(r){return bG()&&r instanceof Blob}function bG(){return typeof Blob<"u"&&!(0,H.UG)()}function DG(r,t,e,n){if(n<t)throw eS(`Invalid value for '${r}'. Expected ${t} or greater.`);if(n>e)throw eS(`Invalid value for '${r}'. Expected ${e} or less.`)}function ep(r,t,e){let n=t;return null==e&&(n=`https://${t}`),`${e}://${n}/v0${r}`}function Q$(r){const t=encodeURIComponent;let e="?";for(const n in r)r.hasOwnProperty(n)&&(e=e+(t(n)+"=")+t(r[n])+"&");return e=e.slice(0,-1),e}var nm=(()=>(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"}(nm||(nm={})),nm))();function J$(r,t){const e=r>=500&&r<600,i=-1!==[408,429].indexOf(r),o=-1!==t.indexOf(r);return e||i||o}class Sue{constructor(t,e,n,i,o,s,a,d,f,g,C,E=!0){this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=C,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,I)=>{this.resolve_=T,this.reject_=I,this.start_()})}start_(){const e=(n,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(a,a.getResponse());!function _ue(r){return void 0!==r}(d)?o():o(d)}catch(d){s(d)}else if(null!==a){const d=EG();d.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,d):d)}else s(i.canceled?this.appDelete_?q$():z$():$$())};this.canceled_?e(0,new CP(!1,null,!0)):this.backoffId_=function vue(r,t,e){let n=1,i=null,o=null,s=!1,a=0;function d(){return 2===a}let f=!1;function g(...k){f||(f=!0,t.apply(null,k))}function C(k){i=setTimeout(()=>{i=null,r(T,d())},k)}function E(){o&&clearTimeout(o)}function T(k,...W){if(f)return void E();if(k)return E(),void g.call(null,k,...W);if(d()||s)return E(),void g.call(null,k,...W);let J;n<64&&(n*=2),1===a?(a=2,J=0):J=1e3*(n+Math.random()),C(J)}let I=!1;function M(k){I||(I=!0,E(),!f&&(null!==i?(k||(a=2),clearTimeout(i),C(0)):k||(a=1)))}return C(0),o=setTimeout(()=>{s=!0,M(!0)},e),M}((n,i)=>{if(i)return void n(!1,new CP(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===nm.NO_ERROR,d=o.getStatus();if(!a||J$(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===nm.ABORT;return void n(!1,new CP(!1,null,g))}const f=-1!==this.successCodes_.indexOf(d);n(!0,new CP(f,o))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function yue(r){r(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class CP{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function Iue(...r){const t=function Oue(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let n=0;n<r.length;n++)e.append(r[n]);return e.getBlob()}if(bG())return new Blob(r);throw new Ti($r.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const gl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class TG{constructor(t,e){this.data=t,this.contentType=e||null}}function RG(r,t){switch(r){case gl.RAW:return new TG(X$(t));case gl.BASE64:case gl.BASE64URL:return new TG(ez(r,t));case gl.DATA_URL:return new TG(function Mue(r){const t=new tz(r);return t.base64?ez(gl.BASE64,t.rest):function Nue(r){let t;try{t=decodeURIComponent(r)}catch{throw vD(gl.DATA_URL,"Malformed data URL.")}return X$(t)}(t.rest)}(t),function xue(r){return new tz(r).contentType}(t))}throw EG()}function X$(r){const t=[];for(let e=0;e<r.length;e++){let n=r.charCodeAt(e);n<=127?t.push(n):n<=2047?t.push(192|n>>6,128|63&n):55296==(64512&n)?e<r.length-1&&56320==(64512&r.charCodeAt(e+1))?(n=65536|(1023&n)<<10|1023&r.charCodeAt(++e),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)):t.push(239,191,189):56320==(64512&n)?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(t)}function ez(r,t){switch(r){case gl.BASE64:{const i=-1!==t.indexOf("-"),o=-1!==t.indexOf("_");if(i||o)throw vD(r,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gl.BASE64URL:{const i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw vD(r,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function Pue(r){if(typeof atob>"u")throw function gue(r){return new Ti($r.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(r)}(t)}catch(i){throw i.message.includes("polyfill")?i:vD(r,"Invalid character found")}const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}class tz{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw vD(gl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;null!=n&&(this.base64=function Fue(r,t){return r.length>=t.length&&r.substring(r.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}class uh{constructor(t,e){let n=0,i="";Z$(t)?(this.data_=t,n=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(Z$(this.data_)){const i=function Aue(r,t,e){return r.webkitSlice?r.webkitSlice(t,e):r.mozSlice?r.mozSlice(t,e):r.slice?r.slice(t,e):null}(this.data_,t,e);return null===i?null:new uh(i)}{const n=new Uint8Array(this.data_.buffer,t,e-t);return new uh(n,!0)}}static getBlob(...t){if(bG()){const e=t.map(n=>n instanceof uh?n.data_:n);return new uh(Iue.apply(null,e))}{const e=t.map(s=>_P(s)?RG(gl.RAW,s).data:s.data_);let n=0;e.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let o=0;return e.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new uh(i,!0)}}uploadData(){return this.data_}}function OG(r){let t;try{t=JSON.parse(r)}catch{return null}return function wue(r){return"object"==typeof r&&!Array.isArray(r)}(t)?t:null}function nz(r){const t=r.lastIndexOf("/",r.length-2);return-1===t?r:r.slice(t+1)}function Gue(r,t){return t}class ra{constructor(t,e,n,i){this.server=t,this.local=e||t,this.writable=!!n,this.xform=i||Gue}}let wP=null;function _D(){if(wP)return wP;const r=[];r.push(new ra("bucket")),r.push(new ra("generation")),r.push(new ra("metageneration")),r.push(new ra("name","fullPath",!0));const e=new ra("name");e.xform=function t(o,s){return function Vue(r){return!_P(r)||r.length<2?r:nz(r)}(s)},r.push(e);const i=new ra("size");return i.xform=function n(o,s){return void 0!==s?Number(s):s},r.push(i),r.push(new ra("timeCreated")),r.push(new ra("updated")),r.push(new ra("md5Hash",null,!0)),r.push(new ra("cacheControl",null,!0)),r.push(new ra("contentDisposition",null,!0)),r.push(new ra("contentEncoding",null,!0)),r.push(new ra("contentLanguage",null,!0)),r.push(new ra("contentType",null,!0)),r.push(new ra("metadata","customMetadata",!0)),wP=r,wP}function rz(r,t,e){const n=OG(t);return null===n?null:function Bue(r,t,e){const n={type:"file"},i=e.length;for(let o=0;o<i;o++){const s=e[o];n[s.local]=s.xform(n,t[s.server])}return function Hue(r,t){Object.defineProperty(r,"ref",{get:function e(){const o=new Ns(r.bucket,r.fullPath);return t._makeStorageReference(o)}})}(n,r),n}(r,n,e)}function IG(r,t){const e={},n=t.length;for(let i=0;i<n;i++){const o=t[i];o.writable&&(e[o.server]=r[o.local])}return JSON.stringify(e)}const iz="prefixes",oz="items";class ch{constructor(t,e,n,i){this.url=t,this.method=e,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function dh(r){if(!r)throw EG()}function SP(r,t){return function e(n,i){const o=rz(r,i,t);return dh(null!==o),o}}function tS(r){return function t(e,n){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function lue(){return new Ti($r.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function aue(){return new Ti($r.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function sue(r){return new Ti($r.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===e.getStatus()?function uue(r){return new Ti($r.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}(r.path):n,i.status=e.getStatus(),i.serverResponse=n.serverResponse,i}}function CD(r){const t=tS(r);return function e(n,i){let o=t(n,i);return 404===n.getStatus()&&(o=function oue(r){return new Ti($r.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}(r.path)),o.serverResponse=i.serverResponse,o}}function sz(r,t,e){const i=ep(t.fullServerUrl(),r.host,r._protocol),s=r.maxOperationRetryTime,a=new ch(i,"GET",SP(r,e),s);return a.errorHandler=CD(t),a}function Kue(r,t,e,n,i){const o={};o.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(o.delimiter=e),n&&(o.pageToken=n),i&&(o.maxResults=i);const a=ep(t.bucketOnlyServerUrl(),r.host,r._protocol),f=r.maxOperationRetryTime,g=new ch(a,"GET",function $ue(r,t){return function e(n,i){const o=function Wue(r,t,e){const n=OG(e);return null===n?null:function jue(r,t,e){const n={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[iz])for(const i of e[iz]){const o=i.replace(/\/$/,""),s=r._makeStorageReference(new Ns(t,o));n.prefixes.push(s)}if(e[oz])for(const i of e[oz]){const o=r._makeStorageReference(new Ns(t,i.name));n.items.push(o)}return n}(r,t,n)}(r,t,i);return dh(null!==o),o}}(r,t.bucket),f);return g.urlParams=o,g.errorHandler=tS(t),g}function lz(r,t,e){const n=Object.assign({},e);return n.fullPath=r.path,n.size=t.size(),n.contentType||(n.contentType=function Que(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}(null,t)),n}class EP{constructor(t,e,n,i){this.current=t,this.total=e,this.finalized=!!n,this.metadata=i||null}}function AG(r,t){let e=null;try{e=r.getResponseHeader("X-Goog-Upload-Status")}catch{dh(!1)}return dh(!!e&&-1!==(t||["active"]).indexOf(e)),e}const tce={STATE_CHANGED:"state_changed"},ia={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function PG(r){switch(r){case"running":case"pausing":case"canceling":return ia.RUNNING;case"paused":return ia.PAUSED;case"success":return ia.SUCCESS;case"canceled":return ia.CANCELED;default:return ia.ERROR}}class nce{constructor(t,e,n){if(function Cue(r){return"function"==typeof r}(t)||null!=e||null!=n)this.next=t,this.error=e??void 0,this.complete=n??void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function nS(r){return(...t)=>{Promise.resolve().then(()=>r(...t))}}let dz=null;class rce{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nm.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nm.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nm.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,n,i){if(this.sent_)throw yD("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yD("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yD("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yD("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yD("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class ice extends rce{initXhr(){this.xhr_.responseType="text"}}function wc(){return dz?dz():new ice}class hz{constructor(t,e,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=_D(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals($r.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(J$(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=$$()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals($r.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,n])=>{switch(this._state){case"running":t(e,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const n=function Jue(r,t,e,n,i){const o=t.bucketOnlyServerUrl(),s=lz(t,n,i),a={name:s.fullPath},d=ep(o,r.host,r._protocol),g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},C=IG(s,e),I=new ch(d,"POST",function T(M){let k;AG(M);try{k=M.getResponseHeader("X-Goog-Upload-URL")}catch{dh(!1)}return dh(_P(k)),k},r.maxUploadRetryTime);return I.urlParams=a,I.headers=g,I.body=C,I.errorHandler=tS(t),I}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,wc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,n)=>{const i=function Xue(r,t,e,n){const d=new ch(e,"POST",function o(f){const g=AG(f,["active","final"]);let C=null;try{C=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{dh(!1)}C||dh(!1);const E=Number(C);return dh(!isNaN(E)),new EP(E,n.size(),"final"===g)},r.maxUploadRetryTime);return d.headers={"X-Goog-Upload-Command":"query"},d.errorHandler=tS(t),d}(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(i,wc,e,n);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new EP(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=function ece(r,t,e,n,i,o,s,a){const d=new EP(0,0);if(s?(d.current=s.current,d.total=s.total):(d.current=0,d.total=n.size()),n.size()!==d.total)throw function fue(){return new Ti($r.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const f=d.total-d.current;let g=f;i>0&&(g=Math.min(g,i));const C=d.current;let T="";T=0===g?"finalize":f===g?"upload, finalize":"upload";const I={"X-Goog-Upload-Command":T,"X-Goog-Upload-Offset":`${d.current}`},M=n.slice(C,C+g);if(null===M)throw K$();const J=new ch(e,"POST",function k(re,ce){const Re=AG(re,["active","final"]),Xe=d.current+g,Ke=n.size();let At;return At="final"===Re?SP(t,o)(re,ce):null,new EP(Xe,Ke,"final"===Re,At)},t.maxUploadRetryTime);return J.headers=I,J.body=M.uploadData(),J.progressCallback=a||null,J.errorHandler=tS(r),J}(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(d){return this._error=d,void this._transition("error")}const a=this._ref.storage._makeRequest(s,wc,i,o,!1);this._request=a,a.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const n=sz(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,wc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const n=function uz(r,t,e,n,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},d=function a(){let J="";for(let re=0;re<2;re++)J+=Math.random().toString().slice(2);return J}();s["Content-Type"]="multipart/related; boundary="+d;const f=lz(t,n,i),g=IG(f,e),T=uh.getBlob("--"+d+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+g+"\r\n--"+d+"\r\nContent-Type: "+f.contentType+"\r\n\r\n",n,"\r\n--"+d+"--");if(null===T)throw K$();const I={name:f.fullPath},M=ep(o,r.host,r._protocol),W=r.maxUploadRetryTime,z=new ch(M,"POST",SP(r,e),W);return z.urlParams=I,z.headers=s,z.body=T.uploadData(),z.errorHandler=tS(t),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,wc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=z$(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=PG(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,n,i){const o=new nce(e||void 0,n||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(PG(this._state)){case ia.SUCCESS:nS(this._resolve.bind(null,this.snapshot))();break;case ia.CANCELED:case ia.ERROR:nS(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(PG(this._state)){case ia.RUNNING:case ia.PAUSED:t.next&&nS(t.next.bind(t,this.snapshot))();break;case ia.SUCCESS:t.complete&&nS(t.complete.bind(t))();break;default:t.error&&nS(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Yy{constructor(t,e){this._service=t,this._location=e instanceof Ns?e:Ns.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Yy(t,e)}get root(){const t=new Ns(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nz(this._location.path)}get storage(){return this._service}get parent(){const t=function Lue(r){if(0===r.length)return null;const t=r.lastIndexOf("/");return-1===t?"":r.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ns(this._location.bucket,t);return new Yy(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw Y$(t)}}function pz(r,t,e){return NG.apply(this,arguments)}function NG(){return NG=(0,Te.Z)(function*(r,t,e){const i=yield gz(r,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield pz(r,t,i.nextPageToken))}),NG.apply(this,arguments)}function gz(r,t){null!=t&&"number"==typeof t.maxResults&&DG("options.maxResults",1,1e3,t.maxResults);const e=t||{},n=Kue(r.storage,r._location,"/",e.pageToken,e.maxResults);return r.storage.makeRequestWithTokens(n,wc)}function mce(r){r._throwIfRoot("getDownloadURL");const t=function que(r,t,e){const i=ep(t.fullServerUrl(),r.host,r._protocol),s=r.maxOperationRetryTime,a=new ch(i,"GET",function zue(r,t){return function e(n,i){const o=rz(r,i,t);return dh(null!==o),function Uue(r,t,e,n){const i=OG(t);if(null===i||!_P(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(f=>{const C=r.fullPath;return ep("/b/"+s(r.bucket)+"/o/"+s(C),e,n)+Q$({alt:"media",token:f})})[0]}(o,i,r.host,r._protocol)}}(r,e),s);return a.errorHandler=CD(t),a}(r.storage,r._location,_D());return r.storage.makeRequestWithTokens(t,wc).then(e=>{if(null===e)throw function pue(){return new Ti($r.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function mz(r,t){const e=function kue(r,t){const e=t.split("/").filter(n=>n.length>0).join("/");return 0===r.length?e:r+"/"+e}(r._location.path,t),n=new Ns(r._location.bucket,e);return new Yy(r.storage,n)}function vz(r,t){if(r instanceof MG){const e=r;if(null==e._bucket)throw function hue(){return new Ti($r.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+W$+"' property when initializing the app?")}();const n=new Yy(e,e._bucket);return null!=t?vz(n,t):n}return void 0!==t?mz(r,t):r}function Cce(r,t){if(t&&function yce(r){return/^[A-Za-z]+:\/\//.test(r)}(t)){if(r instanceof MG)return function _ce(r,t){return new Yy(r,t)}(r,t);throw eS("To use ref(service, url), the first argument must be a Storage instance.")}return vz(r,t)}function yz(r,t){const e=t?.[W$];return null==e?null:Ns.makeFromBucketSpec(e,r)}class MG{constructor(t,e,n,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=j$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ns.makeFromBucketSpec(i,this._host):yz(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ns.makeFromBucketSpec(this._url,t):yz(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){DG("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){DG("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Te.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const n=yield e.getToken();if(null!==n)return n.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Te.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Yy(this,t)}_makeRequest(t,e,n,i,o=!0){if(this._deleted)return new mue(q$());{const s=function Rue(r,t,e,n,i,o,s=!0){const a=Q$(r.urlParams),d=r.url+a,f=Object.assign({},r.headers);return function Due(r,t){t&&(r["X-Firebase-GMPID"]=t)}(f,t),function Eue(r,t){null!==t&&t.length>0&&(r.Authorization="Firebase "+t)}(f,e),function bue(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(f,o),function Tue(r,t){null!==t&&(r["X-Firebase-AppCheck"]=t)}(f,n),new Sue(d,r.method,f,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,s)}(t,this._appId,n,i,e,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var n=this;return(0,Te.Z)(function*(){const[i,o]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(t,e,i,o).getPromise()})()}}const _z="@firebase/storage";function Sz(r,t){return Cce(r=(0,H.m9)(r),t)}function Ace(r,{instanceIdentifier:t}){const e=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new MG(e,n,i,t,Ki.SDK_VERSION)}!function Pce(){(0,Ki._registerComponent)(new zs.wA("storage",Ace,"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(_z,"0.11.2",""),(0,Ki.registerVersion)(_z,"0.11.2","esm2017")}();class bP{constructor(t,e,n){this._delegate=t,this.task=e,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class bz{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bP(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(n=>{if(t)return t(new bP(n,this,this._ref))},e)}on(t,e,n,i){let o;return e&&(o="function"==typeof e?s=>e(new bP(s,this,this._ref)):{next:e.next?s=>e.next(new bP(s,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,i||void 0)}}class Dz{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new tp(t,this._service))}get items(){return this._delegate.items.map(t=>new tp(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class tp{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function Ice(r,t){return mz(r,t)}(this._delegate,t);return new tp(e,this.storage)}get root(){return new tp(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new tp(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new bz(function Sce(r,t,e){return function dce(r,t,e){return r._throwIfRoot("uploadBytesResumable"),new hz(r,new uh(t),e)}(r=(0,H.m9)(r),t,e)}(this._delegate,t,e),this)}putString(t,e=gl.RAW,n){this._throwIfRoot("putString");const i=RG(e,t),o=Object.assign({},n);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new bz(new hz(this._delegate,new uh(i.data,!0),o),this)}listAll(){return function Tce(r){return function fce(r){const t={prefixes:[],items:[]};return pz(r,t).then(()=>t)}(r=(0,H.m9)(r))}(this._delegate).then(t=>new Dz(t,this.storage))}list(t){return function Dce(r,t){return gz(r=(0,H.m9)(r),t)}(this._delegate,t||void 0).then(e=>new Dz(e,this.storage))}getMetadata(){return function Ece(r){return function pce(r){r._throwIfRoot("getMetadata");const t=sz(r.storage,r._location,_D());return r.storage.makeRequestWithTokens(t,wc)}(r=(0,H.m9)(r))}(this._delegate)}updateMetadata(t){return function bce(r,t){return function gce(r,t){r._throwIfRoot("updateMetadata");const e=function Yue(r,t,e,n){const o=ep(t.fullServerUrl(),r.host,r._protocol),a=IG(e,n),f=r.maxOperationRetryTime,g=new ch(o,"PATCH",SP(r,n),f);return g.headers={"Content-Type":"application/json; charset=utf-8"},g.body=a,g.errorHandler=CD(t),g}(r.storage,r._location,t,_D());return r.storage.makeRequestWithTokens(e,wc)}(r=(0,H.m9)(r),t)}(this._delegate,t)}getDownloadURL(){return function Rce(r){return mce(r=(0,H.m9)(r))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Oce(r){return function vce(r){r._throwIfRoot("deleteObject");const t=function Zue(r,t){const n=ep(t.fullServerUrl(),r.host,r._protocol),a=new ch(n,"DELETE",function s(d,f){},r.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=CD(t),a}(r.storage,r._location);return r.storage.makeRequestWithTokens(t,wc)}(r=(0,H.m9)(r))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw Y$(t)}}class Tz{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(Rz(t))throw eS("ref() expected a child path but got a URL, use refFromURL instead.");return new tp(Sz(this._delegate,t),this)}refFromURL(t){if(!Rz(t))throw eS("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ns.makeFromUrl(t,this._delegate.host)}catch{throw eS("refFromUrl() expected a valid full URL but got an invalid one.")}return new tp(Sz(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,n={}){!function Ez(r,t,e,n={}){!function wce(r,t,e,n={}){r.host=`${t}:${e}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken="string"==typeof i?i:(0,H.Sg)(i,r.app.options.projectId))}(r,t,e,n)}(this._delegate,t,e,n)}}function Rz(r){return/^[A-Za-z]+:\/\//.test(r)}function Fce(r,{instanceIdentifier:t}){const e=r.getProvider("app-compat").getImmediate(),n=r.getProvider("storage").getImmediate({identifier:t});return new Tz(e,n)}function Oz(r){const t=function kce(r){return new br.y(t=>{const e=s=>t.next(s);e(r.snapshot);const o=r.on("state_changed",e);return r.then(s=>{e(s),t.complete()},s=>{e(r.snapshot),(s=>{t.error(s)})(s)}),function(){o()}}).pipe(function tue(r,t=s0.z){return(0,Ir.e)((e,n)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const f=o;o=null,n.next(f)}};function d(){const f=s+r,g=t.now();if(g<f)return i=this.schedule(void 0,f-g),void n.add(i);a()}e.subscribe((0,X.x)(n,f=>{o=f,s=t.now(),i||(i=t.schedule(d,r),n.add(i))},()=>{a(),n.complete()},void 0,()=>{o=i=null}))})}(0))}(r);return{task:r,then:r.then.bind(r),catch:r.catch.bind(r),pause:r.pause.bind(r),cancel:r.cancel.bind(r),resume:r.resume.bind(r),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,Pt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function DP(r){return{getDownloadURL:()=>Tt(void 0).pipe(ir.fc,Ur(()=>r.getDownloadURL()),ir.iC),getMetadata:()=>Tt(void 0).pipe(ir.fc,Ur(()=>r.getMetadata()),ir.iC),delete:()=>(0,yn.D)(r.delete()),child:t=>DP(r.child(t)),updateMetadata:t=>(0,yn.D)(r.updateMetadata(t)),put:(t,e)=>Oz(r.put(t,e)),putString:(t,e,n)=>Oz(r.putString(t,e,n)),list:t=>(0,yn.D)(r.list(t)),listAll:()=>(0,yn.D)(r.listAll())}}!function Lce(r){const t={TaskState:ia,TaskEvent:tce,StringFormat:gl,Storage:Tz,Reference:tp};r.INTERNAL.registerComponent(new zs.wA("storage-compat",Fce,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),r.registerVersion("@firebase/storage-compat","0.3.2")}(Z1.Z);const Gce=new c.OlP("angularfire2.storageBucket"),Vce=new c.OlP("angularfire2.storage.maxUploadRetryTime"),Hce=new c.OlP("angularfire2.storage.maxOperationRetryTime"),Bce=new c.OlP("angularfire2.storage.use-emulator");let Uce=(()=>{class r{constructor(e,n,i,o,s,a,d,f,g,C){const E=(0,Oo.on)(e,s,n);this.storage=(0,Oo.cc)(`${E.name}.storage.${i}`,"AngularFireStorage",E.name,()=>{const T=s.runOutsideAngular(()=>E.storage(i||void 0)),I=g;return I&&T.useEmulator(...I),d&&T.setMaxUploadRetryTime(d),f&&T.setMaxOperationRetryTime(f),T},[d,f])}ref(e){return DP(this.storage.ref(e))}refFromURL(e){return DP(this.storage.refFromURL(e))}upload(e,n,i){return DP(this.storage.ref(e)).put(n,i)}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Oo.Dh),c.LFG(Oo.xv,8),c.LFG(Gce,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ir.HU),c.LFG(Vce,8),c.LFG(Hce,8),c.LFG(Bce,8),c.LFG(f0,8))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),jce=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})(),Wce=(()=>{class r{constructor(){RI.Z.registerVersion("angularfire",ir.q4.full,"gcs-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[Uce],imports:[jce]}),r})();const Iz="@firebase/database";let xG="";function Pz(r){xG=r}class zce{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,H.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,H.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Kce{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,H.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Nz=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const t=window[r];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new zce(t)}}catch{}return new Kce},Zy=Nz("localStorage"),FG=Nz("sessionStorage"),rS=new Ds.Yd("@firebase/database"),Mz=function(){let r=1;return function(){return r++}}(),xz=function(r){const t=(0,H.dS)(r),e=new H.gQ;e.update(t);const n=e.digest();return H.US.encodeByteArray(n)},wD=function(...r){let t="";for(let e=0;e<r.length;e++){const n=r[e];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?t+=wD.apply(null,n):t+="object"==typeof n?(0,H.Wl)(n):n,t+=" "}return t};let Qy=null,Fz=!0;const Lz=function(r,t){(0,H.hu)(!t||!0===r||!1===r,"Can't turn on custom loggers persistently."),!0===r?(rS.logLevel=Ds.in.VERBOSE,Qy=rS.log.bind(rS),t&&FG.set("logging_enabled",!0)):"function"==typeof r?Qy=r:(Qy=null,FG.remove("logging_enabled"))},Zo=function(...r){if(!0===Fz&&(Fz=!1,null===Qy&&!0===FG.get("logging_enabled")&&Lz(!0)),Qy){const t=wD.apply(null,r);Qy(t)}},SD=function(r){return function(...t){Zo(r,...t)}},LG=function(...r){const t="FIREBASE INTERNAL ERROR: "+wD(...r);rS.error(t)},hh=function(...r){const t=`FIREBASE FATAL ERROR: ${wD(...r)}`;throw rS.error(t),new Error(t)},Ms=function(...r){const t="FIREBASE WARNING: "+wD(...r);rS.warn(t)},TP=function(r){return"number"==typeof r&&(r!=r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},rm="[MIN_NAME]",np="[MAX_NAME]",Jy=function(r,t){if(r===t)return 0;if(r===rm||t===np)return-1;if(t===rm||r===np)return 1;{const e=Vz(r),n=Vz(t);return null!==e?null!==n?e-n==0?r.length-t.length:e-n:-1:null!==n?1:r<t?-1:1}},Zce=function(r,t){return r===t?0:r<t?-1:1},ED=function(r,t){if(t&&r in t)return t[r];throw new Error("Missing required key ("+r+") in object: "+(0,H.Wl)(t))},kG=function(r){if("object"!=typeof r||null===r)return(0,H.Wl)(r);const t=[];for(const n in r)t.push(n);t.sort();let e="{";for(let n=0;n<t.length;n++)0!==n&&(e+=","),e+=(0,H.Wl)(t[n]),e+=":",e+=kG(r[t[n]]);return e+="}",e},kz=function(r,t){const e=r.length;if(e<=t)return[r];const n=[];for(let i=0;i<e;i+=t)n.push(r.substring(i,i+t>e?e:i+t));return n};function Qo(r,t){for(const e in r)r.hasOwnProperty(e)&&t(e,r[e])}const Gz=function(r){(0,H.hu)(!TP(r),"Invalid JSON number");const n=1023;let i,o,s,a,d;0===r?(o=0,s=0,i=1/r==-1/0?1:0):(i=r<0,(r=Math.abs(r))>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(r)/Math.LN2),n),o=a+n,s=Math.round(r*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(r/Math.pow(2,-1074))));const f=[];for(d=52;d;d-=1)f.push(s%2?1:0),s=Math.floor(s/2);for(d=11;d;d-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(i?1:0),f.reverse();const g=f.join("");let C="";for(d=0;d<64;d+=8){let E=parseInt(g.substr(d,8),2).toString(16);1===E.length&&(E="0"+E),C+=E}return C.toLowerCase()},ede=new RegExp("^-?(0*)\\d{1,10}$"),Vz=function(r){if(ede.test(r)){const t=Number(r);if(t>=-2147483648&&t<=2147483647)return t}return null},iS=function(r){try{r()}catch(t){setTimeout(()=>{throw Ms("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},rde=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bD=function(r,t){const e=setTimeout(r,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class ide{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(n=>this.appCheck=n)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Ms(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ode{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Zo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ms(t)}}let DD=(()=>{class r{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return r.OWNER="owner",r})();const Wz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Kz="websocket",qz="long_polling";class VG{constructor(t,e,n,i,o=!1,s="",a=!1,d=!1){this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zy.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Zy.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Yz(r,t,e){let n;if((0,H.hu)("string"==typeof t,"typeof type must == string"),(0,H.hu)("object"==typeof e,"typeof params must == object"),t===Kz)n=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else{if(t!==qz)throw new Error("Unknown connection type: "+t);n=(r.secure?"https://":"http://")+r.internalHost+"/.lp?"}(function sde(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams})(r)&&(e.ns=r.namespace);const i=[];return Qo(e,(o,s)=>{i.push(o+"="+s)}),n+i.join("&")}class ade{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,H.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,H.p$)(this.counters_)}}const HG={},BG={};function UG(r){const t=r.toString();return HG[t]||(HG[t]=new ade),HG[t]}class ude{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<n.length;++i)n[i]&&iS(()=>{this.onMessage_(n[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class im{constructor(t,e,n,i,o,s,a){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SD(t),this.stats_=UG(e),this.urlFn=d=>(this.appCheckToken&&(d.ac=this.appCheckToken),Yz(e,qz,d))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ude(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(r){if((0,H.Yr)()||"complete"===document.readyState)r();else{let t=!1;const e=function(){document.body?t||(t=!0,r()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jG((...o)=>{const[s,a,d,f,g]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=d;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const n={start:"t"};n.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(n.cb=this.scriptTagHolder.uniqueCallbackIdentifier),n.v="5",this.transportSessionId&&(n.s=this.transportSessionId),this.lastSessionId&&(n.ls=this.lastSessionId),this.applicationId&&(n.p=this.applicationId),this.appCheckToken&&(n.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Wz.test(location.hostname)&&(n.r="f");const i=this.urlFn(n);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){im.forceAllow_=!0}static forceDisallow(){im.forceDisallow_=!0}static isAvailable(){return!((0,H.Yr)()||!im.forceAllow_&&(im.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,H.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=(0,H.h$)(e),i=kz(n,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,H.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,H.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class jG{constructor(t,e,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Mz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=jG.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Zo("frame writing exception"),a.stack&&Zo(a.stack),Zo(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Zo("No IE domain setting required")}catch{const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const s=this.pendingSegs.shift();n=n+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),n()})}addTag(t,e){(0,H.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const i=n.readyState;(!i||"loaded"===i||"complete"===i)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{Zo("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}let OP=null;typeof MozWebSocket<"u"?OP=MozWebSocket:typeof WebSocket<"u"&&(OP=WebSocket);let oS=(()=>{class r{constructor(e,n,i,o,s,a,d){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SD(this.connId),this.stats_=UG(n),this.connURL=r.connectionURL_(n,a,d,o,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,o,s){const a={v:"5"};return!(0,H.Yr)()&&typeof location<"u"&&location.hostname&&Wz.test(location.hostname)&&(a.r="f"),n&&(a.s=n),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),Yz(e,Kz,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zy.set("previous_websocket_failure",!0);try{let i;if((0,H.Yr)()){i={headers:{"User-Agent":`Firebase/5/${xG}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new OP(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){r.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==OP&&!r.forceDisallow_}static previouslyFailed(){return Zy.isInMemoryStorage||!0===Zy.get("previous_websocket_failure")}markConnectionHealthy(){Zy.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=(0,H.cI)(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,H.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=(0,H.Wl)(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=kz(n,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return r.responsesRequiredToBeHealthy=2,r.healthyTimeout=3e4,r})(),n6=(()=>{class r{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[im,oS]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=oS&&oS.isAvailable();let i=n&&!oS.previouslyFailed();if(e.webSocketOnly&&(n||Ms("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[oS];else{const o=this.transports_=[];for(const s of r.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);r.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return r.globalTransportInitialized_=!1,r})();class u6{constructor(t,e,n,i,o,s,a,d,f,g){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=d,this.onKill_=f,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SD("c:"+this.id+":"),this.transportManager_=new n6(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=bD(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=ED("t",t),n=ED("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=ED("t",t),n=ED("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=ED("t",t);if("d"in t){const n=t.d;if("h"===e){const i=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?LG("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):LG("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Ms("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),bD(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bD(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class c6{put(t,e,n,i){}merge(t,e,n,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}class d6{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,H.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const i=this.getInitialEvent(t);i&&e.apply(n,i)}off(t,e,n){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===e&&(!n||n===i[o].context))return void i.splice(o,1)}validateEventType_(t){(0,H.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class IP extends d6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,H.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new IP}getInitialEvent(t){return(0,H.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const h6=32,f6=768;class wr{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let n=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function or(){return new wr("")}function Ln(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function om(r){return r.pieces_.length-r.pieceNum_}function Hr(r){let t=r.pieceNum_;return t<r.pieces_.length&&t++,new wr(r.pieces_,t)}function $G(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function TD(r,t=0){return r.pieces_.slice(r.pieceNum_+t)}function p6(r){if(r.pieceNum_>=r.pieces_.length)return null;const t=[];for(let e=r.pieceNum_;e<r.pieces_.length-1;e++)t.push(r.pieces_[e]);return new wr(t,0)}function vi(r,t){const e=[];for(let n=r.pieceNum_;n<r.pieces_.length;n++)e.push(r.pieces_[n]);if(t instanceof wr)for(let n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{const n=t.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&e.push(n[i])}return new wr(e,0)}function kn(r){return r.pieceNum_>=r.pieces_.length}function oa(r,t){const e=Ln(r),n=Ln(t);if(null===e)return t;if(e===n)return oa(Hr(r),Hr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+r+")")}function Pde(r,t){const e=TD(r,0),n=TD(t,0);for(let i=0;i<e.length&&i<n.length;i++){const o=Jy(e[i],n[i]);if(0!==o)return o}return e.length===n.length?0:e.length<n.length?-1:1}function zG(r,t){if(om(r)!==om(t))return!1;for(let e=r.pieceNum_,n=t.pieceNum_;e<=r.pieces_.length;e++,n++)if(r.pieces_[e]!==t.pieces_[n])return!1;return!0}function vu(r,t){let e=r.pieceNum_,n=t.pieceNum_;if(om(r)>om(t))return!1;for(;e<r.pieces_.length;){if(r.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0}class Nde{constructor(t,e){this.errorPrefix_=e,this.parts_=TD(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,H.ug)(this.parts_[n]);g6(this)}}function g6(r){if(r.byteLength_>f6)throw new Error(r.errorPrefix_+"has a key path longer than "+f6+" bytes ("+r.byteLength_+").");if(r.parts_.length>h6)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+h6+") or object contains a cycle "+Xy(r))}function Xy(r){return 0===r.parts_.length?"":"in property '"+r.parts_.join(".")+"'"}class KG extends d6{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new KG}getInitialEvent(t){return(0,H.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const RD=1e3;let PP,e_=(()=>{class r extends c6{constructor(e,n,i,o,s,a,d,f){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=d,this.authOverride_=f,this.id=r.nextPersistentConnectionId_++,this.log_=SD("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RD,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!(0,H.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");KG.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&IP.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const o=++this.requestNumber_,s={r:o,a:e,b:n};this.log_((0,H.Wl)(s)),(0,H.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const n=new H.BH,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const d=a.d;"ok"===a.s?n.resolve(d):n.reject(d)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),n.promise}listen(e,n,i,o){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),(0,H.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.hu)(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const d={onComplete:o,hashFn:n,query:e,tag:i};this.listens.get(a).set(s,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,d=>{const f=d.d,g=d.s;r.warnOnListenWarnings_(f,n),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",d),"ok"!==g&&this.removeListen_(i,o),e.onComplete&&e.onComplete(g,f))})}static warnOnListenWarnings_(e,n){if(e&&"object"==typeof e&&(0,H.r3)(e,"w")){const i=(0,H.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Ms(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,H.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=(0,H.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===e&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";"ok"===n?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,H.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,n)}sendUnlisten_(e,n,i,o){this.log_("Unlisten on "+e+" for "+n);const s={p:e};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,o){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(e,n,i,o){this.putInternal("p",e,n,i,o)}merge(e,n,i,o){this.putInternal("m",e,n,i,o)}putInternal(e,n,i,o,s){this.initConnection_();const a={p:n,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,H.Wl)(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),"d"===e?this.onDataUpdate_(n.p,n.d,!1,n.t):"m"===e?this.onDataUpdate_(n.p,n.d,!0,n.t):"c"===e?this.onListenRevoked_(n.p,n.q):"ac"===e?this.onAuthRevoked_(n.s,n.d):"apc"===e?this.onAppCheckRevoked_(n.s,n.d):"sd"===e?this.onSecurityDebugPacket_(n):LG("Unrecognized action received from server: "+(0,H.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,H.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RD,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=RD,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=RD),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Te.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const n=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),s=e.id+":"+r.nextConnectionId_++,a=e.lastSessionId;let d=!1,f=null;const g=function(){f?f.close():(d=!0,o())};e.realtime_={close:g,sendRequest:function(T){(0,H.hu)(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(T)}};const E=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[T,I]=yield Promise.all([e.authTokenProvider_.getToken(E),e.appCheckTokenProvider_.getToken(E)]);d?Zo("getToken() completed but was canceled"):(Zo("getToken() completed. Creating connection."),e.authToken_=T&&T.accessToken,e.appCheckToken_=I&&I.token,f=new u6(s,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,n,i,o,M=>{Ms(M+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(T){e.log_("Failed to get token: "+T),d||(e.repoInfo_.nodeAdmin&&Ms(T),g())}}})()}interrupt(e){Zo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Zo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,H.xb)(this.interruptReasons_)&&(this.reconnectDelay_=RD,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;i=n?n.map(s=>kG(s)).join("$"):"default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const i=new wr(e).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(n),s.delete(n),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,n){Zo("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Zo("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";(0,H.Yr)()&&(n=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+n+"."+xG.replace(/\./g,"-")]=1,(0,H.uI)()?e["framework.cordova"]=1:(0,H.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=IP.getInstance().currentlyOnline();return(0,H.xb)(this.interruptReasons_)&&e}}return r.nextPersistentConnectionId_=0,r.nextConnectionId_=0,r})();class Vn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Vn(t,e)}}class AP{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new Vn(rm,t),i=new Vn(rm,e);return 0!==this.compare(n,i)}minPost(){return Vn.MIN}}class y6 extends AP{static get __EMPTY_NODE(){return PP}static set __EMPTY_NODE(t){PP=t}compare(t,e){return Jy(t.name,e.name)}isDefinedOn(t){throw(0,H.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Vn.MIN}maxPost(){return new Vn(np,PP)}makePost(t,e){return(0,H.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Vn(t,PP)}toString(){return".key"}}const fh=new y6;class NP{constructor(t,e,n,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,i&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let YG,Sc=(()=>{class r{constructor(e,n,i,o,s){this.key=e,this.value=n,this.color=i??r.RED,this.left=o??Ma.EMPTY_NODE,this.right=s??Ma.EMPTY_NODE}copy(e,n,i,o,s){return new r(e??this.key,n??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const s=i(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,n,i),null):0===s?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ma.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,o;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===n(e,i.key)){if(i.right.isEmpty())return Ma.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return r.RED=!0,r.BLACK=!1,r})();class Ma{constructor(t,e=Ma.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ma(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Sc.BLACK,null,null))}remove(t){return new Ma(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Sc.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,i=null;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new NP(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new NP(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new NP(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new NP(this.root_,null,this.comparator_,!0,t)}}function Hde(r,t){return Jy(r.name,t.name)}function qG(r,t){return Jy(r,t)}Ma.EMPTY_NODE=new class Vde{copy(t,e,n,i,o){return this}insert(t,e,n){return new Sc(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _6=function(r){return"number"==typeof r?"number:"+Gz(r):"string:"+r},C6=function(r){if(r.isLeafNode()){const t=r.val();(0,H.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,H.r3)(t,".sv"),"Priority must be a string or number.")}else(0,H.hu)(r===YG||r.isEmpty(),"priority of unexpected type.");(0,H.hu)(r===YG||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let w6,S6,E6,sS=(()=>{class r{constructor(e,n=r.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,H.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),C6(this.priorityNode_)}static set __childrenNodeConstructor(e){w6=e}static get __childrenNodeConstructor(){return w6}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new r(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return kn(e)?this:".priority"===Ln(e)?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:r.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ln(e);return null===i?n:n.isEmpty()&&".priority"!==i?this:((0,H.hu)(".priority"!==i||1===om(e),".priority must be the last token in a path"),this.updateImmediateChild(i,r.__childrenNodeConstructor.EMPTY_NODE.updateChild(Hr(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+_6(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",e+="number"===n?Gz(this.value_):this.value_,this.lazyHash_=xz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===r.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof r.__childrenNodeConstructor?-1:((0,H.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,o=r.VALUE_TYPE_ORDER.indexOf(n),s=r.VALUE_TYPE_ORDER.indexOf(i);return(0,H.hu)(o>=0,"Unknown leaf type: "+n),(0,H.hu)(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return r.VALUE_TYPE_ORDER=["object","boolean","number","string"],r})();const zr=new class Wde extends AP{compare(t,e){const n=t.node.getPriority(),i=e.node.getPriority(),o=n.compareTo(i);return 0===o?Jy(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Vn.MIN}maxPost(){return new Vn(np,new sS("[PRIORITY-POST]",E6))}makePost(t,e){const n=S6(t);return new Vn(e,new sS("[PRIORITY-POST]",n))}toString(){return".priority"}},$de=Math.log(2);class zde{constructor(t){this.count=parseInt(Math.log(t+1)/$de,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const MP=function(r,t,e,n){r.sort(t);const i=function(d,f){const g=f-d;let C,E;if(0===g)return null;if(1===g)return C=r[d],E=e?e(C):C,new Sc(E,C.node,Sc.BLACK,null,null);{const T=parseInt(g/2,10)+d,I=i(d,T),M=i(T+1,f);return C=r[T],E=e?e(C):C,new Sc(E,C.node,Sc.BLACK,I,M)}},a=function(d){let f=null,g=null,C=r.length;const E=function(I,M){const k=C-I,W=C;C-=I;const z=i(k+1,W),J=r[k],re=e?e(J):J;T(new Sc(re,J.node,M,null,z))},T=function(I){f?(f.left=I,f=I):(g=I,f=I)};for(let I=0;I<d.count;++I){const M=d.nextBitIsOne(),k=Math.pow(2,d.count-(I+1));M?E(k,Sc.BLACK):(E(k,Sc.BLACK),E(k,Sc.RED))}return g}(new zde(r.length));return new Ma(n||t,a)};let ZG;const aS={};class rp{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,H.hu)(aS&&zr,"ChildrenNode.ts has not been loaded"),ZG=ZG||new rp({".priority":aS},{".priority":zr}),ZG}get(t){const e=(0,H.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ma?e:null}hasIndex(t){return(0,H.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,H.hu)(t!==fh,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const o=e.getIterator(Vn.Wrap);let a,s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),n.push(s),s=o.getNext();a=i?MP(n,t.getCompare()):aS;const d=t.toString(),f=Object.assign({},this.indexSet_);f[d]=t;const g=Object.assign({},this.indexes_);return g[d]=a,new rp(g,f)}addToIndexes(t,e){const n=(0,H.UI)(this.indexes_,(i,o)=>{const s=(0,H.DV)(this.indexSet_,o);if((0,H.hu)(s,"Missing index implementation for "+o),i===aS){if(s.isDefinedOn(t.node)){const a=[],d=e.getIterator(Vn.Wrap);let f=d.getNext();for(;f;)f.name!==t.name&&a.push(f),f=d.getNext();return a.push(t),MP(a,s.getCompare())}return aS}{const a=e.get(t.name);let d=i;return a&&(d=d.remove(new Vn(t.name,a))),d.insert(t,t.node)}});return new rp(n,this.indexSet_)}removeFromIndexes(t,e){const n=(0,H.UI)(this.indexes_,i=>{if(i===aS)return i;{const o=e.get(t.name);return o?i.remove(new Vn(t.name,o)):i}});return new rp(n,this.indexSet_)}}let OD,bn=(()=>{class r{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&C6(this.priorityNode_),this.children_.isEmpty()&&(0,H.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return OD||(OD=new r(new Ma(qG),null,rp.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||OD}updatePriority(e){return this.children_.isEmpty()?this:new r(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const n=this.children_.get(e);return null===n?OD:n}}getChild(e){const n=Ln(e);return null===n?this:this.getImmediateChild(n).getChild(Hr(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,n){if((0,H.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);{const i=new Vn(e,n);let o,s;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?OD:this.priorityNode_;return new r(o,a,s)}}updateChild(e,n){const i=Ln(e);if(null===i)return n;{(0,H.hu)(".priority"!==Ln(e)||1===om(e),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Hr(e),n);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,o=0,s=!0;if(this.forEachChild(zr,(a,d)=>{n[a]=d.val(e),i++,s&&r.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!e&&s&&o<2*i){const a=[];for(const d in n)a[d]=n[d];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+_6(this.getPriority().val())+":"),this.forEachChild(zr,(n,i)=>{const o=i.hash();""!==o&&(e+=":"+n+":"+o)}),this.lazyHash_=""===e?"":xz(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new Vn(e,n));return s?s.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Vn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Vn(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Vn.Wrap);let s=o.peek();for(;null!=s&&n.compare(s,e)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Vn.Wrap);let s=o.peek();for(;null!=s&&n.compare(s,e)>0;)o.getNext(),s=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ID?-1:0}withIndex(e){if(e===fh||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new r(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===fh||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority())){if(this.children_.count()===n.children_.count()){const i=this.getIterator(zr),o=n.getIterator(zr);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(e){return e===fh?null:this.indexMap_.get(e.toString())}}return r.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,r})();const ID=new class Kde extends bn{constructor(){super(new Ma(qG),bn.EMPTY_NODE,rp.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return bn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Vn,{MIN:{value:new Vn(rm,bn.EMPTY_NODE)},MAX:{value:new Vn(np,ID)}}),y6.__EMPTY_NODE=bn.EMPTY_NODE,sS.__childrenNodeConstructor=bn,function Bde(r){YG=r}(ID),function jde(r){E6=r}(ID);const qde=!0;function Ri(r,t=null){if(null===r)return bn.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),(0,H.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new sS(r,Ri(t));if(r instanceof Array||!qde){let e=bn.EMPTY_NODE;return Qo(r,(n,i)=>{if((0,H.r3)(r,n)&&"."!==n.substring(0,1)){const o=Ri(i);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(n,o))}}),e.updatePriority(Ri(t))}{const e=[];let n=!1;if(Qo(r,(s,a)=>{if("."!==s.substring(0,1)){const d=Ri(a);d.isEmpty()||(n=n||!d.getPriority().isEmpty(),e.push(new Vn(s,d)))}}),0===e.length)return bn.EMPTY_NODE;const o=MP(e,Hde,s=>s.name,qG);if(n){const s=MP(e,zr.getCompare());return new bn(o,Ri(t),new rp({".priority":s},{".priority":zr}))}return new bn(o,Ri(t),rp.Default)}}!function Ude(r){S6=r}(Ri);class QG extends AP{constructor(t){super(),this.indexPath_=t,(0,H.hu)(!kn(t)&&".priority"!==Ln(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),i=this.extractChild(e.node),o=n.compareTo(i);return 0===o?Jy(t.name,e.name):o}makePost(t,e){const n=Ri(t),i=bn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Vn(e,i)}maxPost(){const t=bn.EMPTY_NODE.updateChild(this.indexPath_,ID);return new Vn(np,t)}toString(){return TD(this.indexPath_,0).join("/")}}const JG=new class Yde extends AP{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?Jy(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Vn.MIN}maxPost(){return Vn.MAX}makePost(t,e){const n=Ri(t);return new Vn(e,n)}toString(){return".value"}};function b6(r){return{type:"value",snapshotNode:r}}function lS(r,t){return{type:"child_added",snapshotNode:t,childName:r}}function AD(r,t){return{type:"child_removed",snapshotNode:t,childName:r}}function PD(r,t,e){return{type:"child_changed",snapshotNode:t,childName:r,oldSnap:e}}class XG{constructor(t){this.index_=t}updateChild(t,e,n,i,o,s){(0,H.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()||(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(AD(e,a)):(0,H.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(lS(e,n)):s.trackChildChange(PD(e,n,a))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(e,n).withIndex(this.index_)}updateFullNode(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(zr,(i,o)=>{e.hasChild(i)||n.trackChildChange(AD(i,o))}),e.isLeafNode()||e.forEachChild(zr,(i,o)=>{if(t.hasChild(i)){const s=t.getImmediateChild(i);s.equals(o)||n.trackChildChange(PD(i,o,s))}else n.trackChildChange(lS(i,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?bn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ND{constructor(t){this.indexedFilter_=new XG(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ND.getStartPost_(t),this.endPost_=ND.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,n=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&n}updateChild(t,e,n,i,o,s){return this.matches(new Vn(e,n))||(n=bn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,o,s)}updateFullNode(t,e,n){e.isLeafNode()&&(e=bn.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(bn.EMPTY_NODE);const o=this;return e.forEachChild(zr,(s,a)=>{o.matches(new Vn(s,a))||(i=i.updateImmediateChild(s,bn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Qde{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=e=>{const n=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new ND(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,n,i,o,s){return this.rangedFilter_.matches(new Vn(e,n))||(n=bn.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,o,s):this.fullLimitUpdateChild_(t,e,n,o,s)}updateFullNode(t,e,n){let i;if(e.isLeafNode()||e.isEmpty())i=bn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;i=bn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),s++}}}else{let o;i=e.withIndex(this.index_),i=i.updatePriority(bn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,bn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,i,o){let s;if(this.reverse_){const C=this.index_.getCompare();s=(E,T)=>C(T,E)}else s=this.index_.getCompare();const a=t;(0,H.hu)(a.numChildren()===this.limit_,"");const d=new Vn(e,n),f=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),g=this.rangedFilter_.matches(d);if(a.hasChild(e)){const C=a.getImmediateChild(e);let E=i.getChildAfterChild(this.index_,f,this.reverse_);for(;null!=E&&(E.name===e||a.hasChild(E.name));)E=i.getChildAfterChild(this.index_,E,this.reverse_);const T=null==E?1:s(E,d);if(g&&!n.isEmpty()&&T>=0)return o?.trackChildChange(PD(e,n,C)),a.updateImmediateChild(e,n);{o?.trackChildChange(AD(e,C));const M=a.updateImmediateChild(e,bn.EMPTY_NODE);return null!=E&&this.rangedFilter_.matches(E)?(o?.trackChildChange(lS(E.name,E.node)),M.updateImmediateChild(E.name,E.node)):M}}return n.isEmpty()?t:g&&s(f,d)>=0?(null!=o&&(o.trackChildChange(AD(f.name,f.node)),o.trackChildChange(lS(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(f.name,bn.EMPTY_NODE)):t}}class xP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rm}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:np}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zr}copy(){const t=new xP;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function eV(r,t,e){const n=r.copy();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n}function tV(r,t,e){const n=r.copy();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n}function FP(r,t){const e=r.copy();return e.index_=t,e}function D6(r){const t={};if(r.isDefault())return t;let e;if(r.index_===zr?e="$priority":r.index_===JG?e="$value":r.index_===fh?e="$key":((0,H.hu)(r.index_ instanceof QG,"Unrecognized index type!"),e=r.index_.toString()),t.orderBy=(0,H.Wl)(e),r.startSet_){const n=r.startAfterSet_?"startAfter":"startAt";t[n]=(0,H.Wl)(r.indexStartValue_),r.startNameSet_&&(t[n]+=","+(0,H.Wl)(r.indexStartName_))}if(r.endSet_){const n=r.endBeforeSet_?"endBefore":"endAt";t[n]=(0,H.Wl)(r.indexEndValue_),r.endNameSet_&&(t[n]+=","+(0,H.Wl)(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?t.limitToFirst=r.limit_:t.limitToLast=r.limit_),t}function T6(r){const t={};if(r.startSet_&&(t.sp=r.indexStartValue_,r.startNameSet_&&(t.sn=r.indexStartName_),t.sin=!r.startAfterSet_),r.endSet_&&(t.ep=r.indexEndValue_,r.endNameSet_&&(t.en=r.indexEndName_),t.ein=!r.endBeforeSet_),r.limitSet_){t.l=r.limit_;let e=r.viewFrom_;""===e&&(e=r.isViewFromLeft()?"l":"r"),t.vf=e}return r.index_!==zr&&(t.i=r.index_.toString()),t}class LP extends c6{constructor(t,e,n,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=SD("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,H.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const s=LP.getListenId_(t,n),a={};this.listens_[s]=a;const d=D6(t._queryParams);this.restRequest_(o+".json",d,(f,g)=>{let C=g;if(404===f&&(C=null,f=null),null===f&&this.onDataUpdate_(o,C,!1,n),(0,H.DV)(this.listens_,s)===a){let E;E=f?401===f?"permission_denied":"rest_error:"+f:"ok",i(E,null)}})}unlisten(t,e){const n=LP.getListenId_(t,e);delete this.listens_[n]}get(t){const e=D6(t._queryParams),n=t._path.toString(),i=new H.BH;return this.restRequest_(n+".json",e,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(n,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(e.auth=i.accessToken),o&&o.token&&(e.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,H.xO)(e);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let d=null;if(a.status>=200&&a.status<300){try{d=(0,H.cI)(a.responseText)}catch{Ms("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,d)}else 401!==a.status&&404!==a.status&&Ms("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}}class rhe{constructor(){this.rootNode_=bn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function kP(){return{value:null,children:new Map}}function uS(r,t,e){if(kn(t))r.value=e,r.children.clear();else if(null!==r.value)r.value=r.value.updateChild(t,e);else{const n=Ln(t);r.children.has(n)||r.children.set(n,kP()),uS(r.children.get(n),t=Hr(t),e)}}function nV(r,t){if(kn(t))return r.value=null,r.children.clear(),!0;if(null!==r.value){if(r.value.isLeafNode())return!1;{const e=r.value;return r.value=null,e.forEachChild(zr,(n,i)=>{uS(r,new wr(n),i)}),nV(r,t)}}if(r.children.size>0){const e=Ln(t);return t=Hr(t),r.children.has(e)&&nV(r.children.get(e),t)&&r.children.delete(e),0===r.children.size}return!0}function rV(r,t,e){null!==r.value?e(t,r.value):function ihe(r,t){r.children.forEach((e,n)=>{t(n,e)})}(r,(n,i)=>{rV(i,new wr(t.toString()+"/"+n),e)})}class ohe{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Qo(this.last_,(n,i)=>{e[n]=e[n]-i}),this.last_=t,e}}class lhe{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ohe(t);const n=1e4+2e4*Math.random();bD(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;Qo(t,(i,o)=>{o>0&&(0,H.r3)(this.statsToReport_,i)&&(e[i]=o,n=!0)}),n&&this.server_.reportStats(e),bD(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var yu=(()=>(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(yu||(yu={})),yu))();function sV(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}class GP{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=yu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(kn(this.path)){if(null!=this.affectedTree.value)return(0,H.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new wr(t));return new GP(or(),e,this.revert)}}return(0,H.hu)(Ln(this.path)===t,"operationForChild called for unrelated child."),new GP(Hr(this.path),this.affectedTree,this.revert)}}class MD{constructor(t,e){this.source=t,this.path=e,this.type=yu.LISTEN_COMPLETE}operationForChild(t){return kn(this.path)?new MD(this.source,or()):new MD(this.source,Hr(this.path))}}class t_{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=yu.OVERWRITE}operationForChild(t){return kn(this.path)?new t_(this.source,or(),this.snap.getImmediateChild(t)):new t_(this.source,Hr(this.path),this.snap)}}class cS{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=yu.MERGE}operationForChild(t){if(kn(this.path)){const e=this.children.subtree(new wr(t));return e.isEmpty()?null:e.value?new t_(this.source,or(),e.value):new cS(this.source,or(),e)}return(0,H.hu)(Ln(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new cS(this.source,Hr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class sm{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(kn(t))return this.isFullyInitialized()&&!this.filtered_;const e=Ln(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class uhe{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function xD(r,t,e,n,i,o){const s=n.filter(a=>a.type===e);s.sort((a,d)=>function hhe(r,t,e){if(null==t.childName||null==e.childName)throw(0,H.g5)("Should only compare child_ events.");const n=new Vn(t.childName,t.snapshotNode),i=new Vn(e.childName,e.snapshotNode);return r.index_.compare(n,i)}(r,a,d)),s.forEach(a=>{const d=function dhe(r,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,r.index_)),t}(r,a,o);i.forEach(f=>{f.respondsTo(a.type)&&t.push(f.createEvent(d,r.query_))})})}function VP(r,t){return{eventCache:r,serverCache:t}}function FD(r,t,e,n){return VP(new sm(t,e,n),r.serverCache)}function O6(r,t,e,n){return VP(r.eventCache,new sm(t,e,n))}function HP(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function n_(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}let aV;class Kr{constructor(t,e=(()=>(aV||(aV=new Ma(Zce)),aV))()){this.value=t,this.children=e}static fromObject(t){let e=new Kr(null);return Qo(t,(n,i)=>{e=e.set(new wr(n),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:or(),value:this.value};if(kn(t))return null;{const n=Ln(t),i=this.children.get(n);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Hr(t),e);return null!=o?{path:vi(new wr(n),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(kn(t))return this;{const e=Ln(t),n=this.children.get(e);return null!==n?n.subtree(Hr(t)):new Kr(null)}}set(t,e){if(kn(t))return new Kr(e,this.children);{const n=Ln(t),o=(this.children.get(n)||new Kr(null)).set(Hr(t),e),s=this.children.insert(n,o);return new Kr(this.value,s)}}remove(t){if(kn(t))return this.children.isEmpty()?new Kr(null):new Kr(null,this.children);{const e=Ln(t),n=this.children.get(e);if(n){const i=n.remove(Hr(t));let o;return o=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&o.isEmpty()?new Kr(null):new Kr(this.value,o)}return this}}get(t){if(kn(t))return this.value;{const e=Ln(t),n=this.children.get(e);return n?n.get(Hr(t)):null}}setTree(t,e){if(kn(t))return e;{const n=Ln(t),o=(this.children.get(n)||new Kr(null)).setTree(Hr(t),e);let s;return s=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),new Kr(this.value,s)}}fold(t){return this.fold_(or(),t)}fold_(t,e){const n={};return this.children.inorderTraversal((i,o)=>{n[i]=o.fold_(vi(t,i),e)}),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,or(),e)}findOnPath_(t,e,n){const i=!!this.value&&n(e,this.value);if(i)return i;if(kn(t))return null;{const o=Ln(t),s=this.children.get(o);return s?s.findOnPath_(Hr(t),vi(e,o),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,or(),e)}foreachOnPath_(t,e,n){if(kn(t))return this;{this.value&&n(e,this.value);const i=Ln(t),o=this.children.get(i);return o?o.foreachOnPath_(Hr(t),vi(e,i),n):new Kr(null)}}foreach(t){this.foreach_(or(),t)}foreach_(t,e){this.children.inorderTraversal((n,i)=>{i.foreach_(vi(t,n),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,n)=>{n.value&&t(e,n.value)})}}class Ec{constructor(t){this.writeTree_=t}static empty(){return new Ec(new Kr(null))}}function LD(r,t,e){if(kn(t))return new Ec(new Kr(e));{const n=r.writeTree_.findRootMostValueAndPath(t);if(null!=n){const i=n.path;let o=n.value;const s=oa(i,t);return o=o.updateChild(s,e),new Ec(r.writeTree_.set(i,o))}{const i=new Kr(e),o=r.writeTree_.setTree(t,i);return new Ec(o)}}}function lV(r,t,e){let n=r;return Qo(e,(i,o)=>{n=LD(n,vi(t,i),o)}),n}function I6(r,t){if(kn(t))return Ec.empty();{const e=r.writeTree_.setTree(t,new Kr(null));return new Ec(e)}}function uV(r,t){return null!=r_(r,t)}function r_(r,t){const e=r.writeTree_.findRootMostValueAndPath(t);return null!=e?r.writeTree_.get(e.path).getChild(oa(e.path,t)):null}function A6(r){const t=[],e=r.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(zr,(n,i)=>{t.push(new Vn(n,i))}):r.writeTree_.children.inorderTraversal((n,i)=>{null!=i.value&&t.push(new Vn(n,i.value))}),t}function am(r,t){if(kn(t))return r;{const e=r_(r,t);return new Ec(null!=e?new Kr(e):r.writeTree_.subtree(t))}}function cV(r){return r.writeTree_.isEmpty()}function dS(r,t){return P6(or(),r.writeTree_,t)}function P6(r,t,e){if(null!=t.value)return e.updateChild(r,t.value);{let n=null;return t.children.inorderTraversal((i,o)=>{".priority"===i?((0,H.hu)(null!==o.value,"Priority writes must always be leaf nodes"),n=o.value):e=P6(vi(r,i),o,e)}),!e.getChild(r).isEmpty()&&null!==n&&(e=e.updateChild(vi(r,".priority"),n)),e}}function BP(r,t){return L6(t,r)}function yhe(r,t){if(r.snap)return vu(r.path,t);for(const e in r.children)if(r.children.hasOwnProperty(e)&&vu(vi(r.path,e),t))return!0;return!1}function Che(r){return r.visible}function N6(r,t,e){let n=Ec.empty();for(let i=0;i<r.length;++i){const o=r[i];if(t(o)){const s=o.path;let a;if(o.snap)vu(e,s)?(a=oa(e,s),n=LD(n,a,o.snap)):vu(s,e)&&(a=oa(s,e),n=LD(n,or(),o.snap.getChild(a)));else{if(!o.children)throw(0,H.g5)("WriteRecord should have .snap or .children");if(vu(e,s))a=oa(e,s),n=lV(n,a,o.children);else if(vu(s,e))if(a=oa(s,e),kn(a))n=lV(n,or(),o.children);else{const d=(0,H.DV)(o.children,Ln(a));if(d){const f=d.getChild(Hr(a));n=LD(n,or(),f)}}}}}return n}function M6(r,t,e,n,i){if(n||i){const o=am(r.visibleWrites,t);return!i&&cV(o)?e:i||null!=e||uV(o,or())?dS(N6(r.allWrites,function(f){return(f.visible||i)&&(!n||!~n.indexOf(f.writeId))&&(vu(f.path,t)||vu(t,f.path))},t),e||bn.EMPTY_NODE):null}{const o=r_(r.visibleWrites,t);if(null!=o)return o;{const s=am(r.visibleWrites,t);return cV(s)?e:null!=e||uV(s,or())?dS(s,e||bn.EMPTY_NODE):null}}}function UP(r,t,e,n){return M6(r.writeTree,r.treePath,t,e,n)}function dV(r,t){return function whe(r,t,e){let n=bn.EMPTY_NODE;const i=r_(r.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(zr,(o,s)=>{n=n.updateImmediateChild(o,s)}),n;if(e){const o=am(r.visibleWrites,t);return e.forEachChild(zr,(s,a)=>{const d=dS(am(o,new wr(s)),a);n=n.updateImmediateChild(s,d)}),A6(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}return A6(am(r.visibleWrites,t)).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}(r.writeTree,r.treePath,t)}function x6(r,t,e,n){return function She(r,t,e,n,i){(0,H.hu)(n||i,"Either existingEventSnap or existingServerSnap must exist");const o=vi(t,e);if(uV(r.visibleWrites,o))return null;{const s=am(r.visibleWrites,o);return cV(s)?i.getChild(e):dS(s,i.getChild(e))}}(r.writeTree,r.treePath,t,e,n)}function jP(r,t){return function bhe(r,t){return r_(r.visibleWrites,t)}(r.writeTree,vi(r.treePath,t))}function hV(r,t,e){return function Ehe(r,t,e,n){const i=vi(t,e),o=r_(r.visibleWrites,i);return null!=o?o:n.isCompleteForChild(e)?dS(am(r.visibleWrites,i),n.getNode().getImmediateChild(e)):null}(r.writeTree,r.treePath,t,e)}function F6(r,t){return L6(vi(r.treePath,t),r.writeTree)}function L6(r,t){return{treePath:r,writeTree:t}}class Ohe{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,n=t.childName;(0,H.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,H.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const o=i.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,PD(n,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,AD(n,i.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,lS(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,H.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,PD(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}const k6=new class Ihe{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}};class fV{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const n=null!=this.optCompleteServerCache_?new sm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hV(this.writes_,t,n)}}getChildAfterChild(t,e,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:n_(this.viewCache_),o=function Rhe(r,t,e,n,i,o){return function Dhe(r,t,e,n,i,o,s){let a;const d=am(r.visibleWrites,t),f=r_(d,or());if(null!=f)a=f;else{if(null==e)return[];a=dS(d,e)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const g=[],C=s.getCompare(),E=o?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s);let T=E.getNext();for(;T&&g.length<i;)0!==C(T,n)&&g.push(T),T=E.getNext();return g}}(r.writeTree,r.treePath,t,e,n,i,o)}(this.writes_,i,e,1,n,t);return 0===o.length?null:o[0]}}function G6(r,t,e,n,i,o){const s=t.eventCache;if(null!=jP(n,e))return t;{let a,d;if(kn(e))if((0,H.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const f=n_(t),C=dV(n,f instanceof bn?f:bn.EMPTY_NODE);a=r.filter.updateFullNode(t.eventCache.getNode(),C,o)}else{const f=UP(n,n_(t));a=r.filter.updateFullNode(t.eventCache.getNode(),f,o)}else{const f=Ln(e);if(".priority"===f){(0,H.hu)(1===om(e),"Can't have a priority with additional path components");const g=s.getNode();d=t.serverCache.getNode();const C=x6(n,e,g,d);a=null!=C?r.filter.updatePriority(g,C):s.getNode()}else{const g=Hr(e);let C;if(s.isCompleteForChild(f)){d=t.serverCache.getNode();const E=x6(n,e,s.getNode(),d);C=null!=E?s.getNode().getImmediateChild(f).updateChild(g,E):s.getNode().getImmediateChild(f)}else C=hV(n,f,t.serverCache);a=null!=C?r.filter.updateChild(s.getNode(),f,C,g,i,o):s.getNode()}}return FD(t,a,s.isFullyInitialized()||kn(e),r.filter.filtersNodes())}}function WP(r,t,e,n,i,o,s,a){const d=t.serverCache;let f;const g=s?r.filter:r.filter.getIndexedFilter();if(kn(e))f=g.updateFullNode(d.getNode(),n,null);else if(g.filtersNodes()&&!d.isFiltered()){const T=d.getNode().updateChild(e,n);f=g.updateFullNode(d.getNode(),T,null)}else{const T=Ln(e);if(!d.isCompleteForPath(e)&&om(e)>1)return t;const I=Hr(e),k=d.getNode().getImmediateChild(T).updateChild(I,n);f=".priority"===T?g.updatePriority(d.getNode(),k):g.updateChild(d.getNode(),T,k,I,k6,null)}const C=O6(t,f,d.isFullyInitialized()||kn(e),g.filtersNodes());return G6(r,C,e,i,new fV(i,C,o),a)}function pV(r,t,e,n,i,o,s){const a=t.eventCache;let d,f;const g=new fV(i,t,o);if(kn(e))f=r.filter.updateFullNode(t.eventCache.getNode(),n,s),d=FD(t,f,!0,r.filter.filtersNodes());else{const C=Ln(e);if(".priority"===C)f=r.filter.updatePriority(t.eventCache.getNode(),n),d=FD(t,f,a.isFullyInitialized(),a.isFiltered());else{const E=Hr(e),T=a.getNode().getImmediateChild(C);let I;if(kn(E))I=n;else{const M=g.getCompleteChild(C);I=null!=M?".priority"===$G(E)&&M.getChild(p6(E)).isEmpty()?M:M.updateChild(E,n):bn.EMPTY_NODE}d=T.equals(I)?t:FD(t,r.filter.updateChild(a.getNode(),C,I,E,g,s),a.isFullyInitialized(),r.filter.filtersNodes())}}return d}function V6(r,t){return r.eventCache.isCompleteForChild(t)}function H6(r,t,e){return e.foreach((n,i)=>{t=t.updateChild(n,i)}),t}function gV(r,t,e,n,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let f,d=t;f=kn(e)?n:new Kr(null).setTree(e,n);const g=t.serverCache.getNode();return f.children.inorderTraversal((C,E)=>{if(g.hasChild(C)){const I=H6(0,t.serverCache.getNode().getImmediateChild(C),E);d=WP(r,d,new wr(C),I,i,o,s,a)}}),f.children.inorderTraversal((C,E)=>{const T=!t.serverCache.isCompleteForChild(C)&&null===E.value;if(!g.hasChild(C)&&!T){const M=H6(0,t.serverCache.getNode().getImmediateChild(C),E);d=WP(r,d,new wr(C),M,i,o,s,a)}}),d}class Ghe{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new XG(n.getIndex()),o=function Jde(r){return r.loadsAllData()?new XG(r.getIndex()):r.hasLimit()?new Qde(r):new ND(r)}(n);this.processor_=function Ahe(r){return{filter:r}}(o);const s=e.serverCache,a=e.eventCache,d=i.updateFullNode(bn.EMPTY_NODE,s.getNode(),null),f=o.updateFullNode(bn.EMPTY_NODE,a.getNode(),null),g=new sm(d,s.isFullyInitialized(),i.filtersNodes()),C=new sm(f,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=VP(C,g),this.eventGenerator_=new uhe(this.query_)}get query(){return this.query_}}function Bhe(r,t){const e=n_(r.viewCache_);return e&&(r.query._queryParams.loadsAllData()||!kn(t)&&!e.getImmediateChild(Ln(t)).isEmpty())?e.getChild(t):null}function B6(r){return 0===r.eventRegistrations_.length}function U6(r,t,e){const n=[];if(e){(0,H.hu)(null==t,"A cancel should cancel all event registrations.");const i=r.query._path;r.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(e,i);s&&n.push(s)})}if(t){let i=[];for(let o=0;o<r.eventRegistrations_.length;++o){const s=r.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(r.eventRegistrations_.slice(o+1));break}}else i.push(s)}r.eventRegistrations_=i}else r.eventRegistrations_=[];return n}function j6(r,t,e,n){t.type===yu.MERGE&&null!==t.source.queryId&&((0,H.hu)(n_(r.viewCache_),"We should always have a full cache before handling merges"),(0,H.hu)(HP(r.viewCache_),"Missing event cache, even though we have a server cache"));const i=r.viewCache_,o=function Nhe(r,t,e,n,i){const o=new Ohe;let s,a;if(e.type===yu.OVERWRITE){const f=e;f.source.fromUser?s=pV(r,t,f.path,f.snap,n,i,o):((0,H.hu)(f.source.fromServer,"Unknown source."),a=f.source.tagged||t.serverCache.isFiltered()&&!kn(f.path),s=WP(r,t,f.path,f.snap,n,i,a,o))}else if(e.type===yu.MERGE){const f=e;f.source.fromUser?s=function xhe(r,t,e,n,i,o,s){let a=t;return n.foreach((d,f)=>{const g=vi(e,d);V6(t,Ln(g))&&(a=pV(r,a,g,f,i,o,s))}),n.foreach((d,f)=>{const g=vi(e,d);V6(t,Ln(g))||(a=pV(r,a,g,f,i,o,s))}),a}(r,t,f.path,f.children,n,i,o):((0,H.hu)(f.source.fromServer,"Unknown source."),a=f.source.tagged||t.serverCache.isFiltered(),s=gV(r,t,f.path,f.children,n,i,a,o))}else if(e.type===yu.ACK_USER_WRITE){const f=e;s=f.revert?function khe(r,t,e,n,i,o){let s;if(null!=jP(n,e))return t;{const a=new fV(n,t,i),d=t.eventCache.getNode();let f;if(kn(e)||".priority"===Ln(e)){let g;if(t.serverCache.isFullyInitialized())g=UP(n,n_(t));else{const C=t.serverCache.getNode();(0,H.hu)(C instanceof bn,"serverChildren would be complete if leaf node"),g=dV(n,C)}f=r.filter.updateFullNode(d,g,o)}else{const g=Ln(e);let C=hV(n,g,t.serverCache);null==C&&t.serverCache.isCompleteForChild(g)&&(C=d.getImmediateChild(g)),f=null!=C?r.filter.updateChild(d,g,C,Hr(e),a,o):t.eventCache.getNode().hasChild(g)?r.filter.updateChild(d,g,bn.EMPTY_NODE,Hr(e),a,o):d,f.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=UP(n,n_(t)),s.isLeafNode()&&(f=r.filter.updateFullNode(f,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=jP(n,or()),FD(t,f,s,r.filter.filtersNodes())}}(r,t,f.path,n,i,o):function Fhe(r,t,e,n,i,o,s){if(null!=jP(i,e))return t;const a=t.serverCache.isFiltered(),d=t.serverCache;if(null!=n.value){if(kn(e)&&d.isFullyInitialized()||d.isCompleteForPath(e))return WP(r,t,e,d.getNode().getChild(e),i,o,a,s);if(kn(e)){let f=new Kr(null);return d.getNode().forEachChild(fh,(g,C)=>{f=f.set(new wr(g),C)}),gV(r,t,e,f,i,o,a,s)}return t}{let f=new Kr(null);return n.foreach((g,C)=>{const E=vi(e,g);d.isCompleteForPath(E)&&(f=f.set(g,d.getNode().getChild(E)))}),gV(r,t,e,f,i,o,a,s)}}(r,t,f.path,f.affectedTree,n,i,o)}else{if(e.type!==yu.LISTEN_COMPLETE)throw(0,H.g5)("Unknown operation type: "+e.type);s=function Lhe(r,t,e,n,i){const o=t.serverCache;return G6(r,O6(t,o.getNode(),o.isFullyInitialized()||kn(e),o.isFiltered()),e,n,k6,i)}(r,t,e.path,n,o)}const d=o.getChanges();return function Mhe(r,t,e){const n=t.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=HP(r);(e.length>0||!r.eventCache.isFullyInitialized()||i&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&e.push(b6(HP(t)))}}(t,s,d),{viewCache:s,changes:d}}(r.processor_,i,t,e,n);return function Phe(r,t){(0,H.hu)(t.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),(0,H.hu)(t.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}(r.processor_,o.viewCache),(0,H.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=o.viewCache,W6(r,o.changes,o.viewCache.eventCache.getNode(),null)}function W6(r,t,e,n){return function che(r,t,e,n){const i=[],o=[];return t.forEach(s=>{"child_changed"===s.type&&r.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function Zde(r,t){return{type:"child_moved",snapshotNode:t,childName:r}}(s.childName,s.snapshotNode))}),xD(r,i,"child_removed",t,n,e),xD(r,i,"child_added",t,n,e),xD(r,i,"child_moved",o,n,e),xD(r,i,"child_changed",t,n,e),xD(r,i,"value",t,n,e),i}(r.eventGenerator_,t,e,n?[n]:r.eventRegistrations_)}let $P,KP;class $6{constructor(){this.views=new Map}}function mV(r,t,e,n){const i=t.source.queryId;if(null!==i){const o=r.views.get(i);return(0,H.hu)(null!=o,"SyncTree gave us an op for an invalid query."),j6(o,t,e,n)}{let o=[];for(const s of r.views.values())o=o.concat(j6(s,t,e,n));return o}}function z6(r,t,e,n,i){const s=r.views.get(t._queryIdentifier);if(!s){let a=UP(e,i?n:null),d=!1;a?d=!0:n instanceof bn?(a=dV(e,n),d=!1):(a=bn.EMPTY_NODE,d=!1);const f=VP(new sm(a,d,!1),new sm(n,i,!1));return new Ghe(t,f)}return s}function K6(r){const t=[];for(const e of r.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function lm(r,t){let e=null;for(const n of r.views.values())e=e||Bhe(n,t);return e}function q6(r,t){return t._queryParams.loadsAllData()?zP(r):r.views.get(t._queryIdentifier)}function Y6(r,t){return null!=q6(r,t)}function um(r){return null!=zP(r)}function zP(r){for(const t of r.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Qhe=1;class Z6{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Kr(null),this.pendingWriteTree_=function The(){return{visibleWrites:Ec.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vV(r,t,e,n,i){return function phe(r,t,e,n,i){(0,H.hu)(n>r.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),r.allWrites.push({path:t,snap:e,writeId:n,visible:i}),i&&(r.visibleWrites=LD(r.visibleWrites,t,e)),r.lastWriteId=n}(r.pendingWriteTree_,t,e,n,i),i?hS(r,new t_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function cm(r,t,e=!1){const n=function mhe(r,t){for(let e=0;e<r.allWrites.length;e++){const n=r.allWrites[e];if(n.writeId===t)return n}return null}(r.pendingWriteTree_,t);if(function vhe(r,t){const e=r.allWrites.findIndex(a=>a.writeId===t);(0,H.hu)(e>=0,"removeWrite called with nonexistent writeId.");const n=r.allWrites[e];r.allWrites.splice(e,1);let i=n.visible,o=!1,s=r.allWrites.length-1;for(;i&&s>=0;){const a=r.allWrites[s];a.visible&&(s>=e&&yhe(a,n.path)?i=!1:vu(n.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function _he(r){r.visibleWrites=N6(r.allWrites,Che,or()),r.lastWriteId=r.allWrites.length>0?r.allWrites[r.allWrites.length-1].writeId:-1}(r),!0):(n.snap?r.visibleWrites=I6(r.visibleWrites,n.path):Qo(n.children,d=>{r.visibleWrites=I6(r.visibleWrites,vi(n.path,d))}),!0))}(r.pendingWriteTree_,t)){let o=new Kr(null);return null!=n.snap?o=o.set(or(),!0):Qo(n.children,s=>{o=o.set(new wr(s),!0)}),hS(r,new GP(n.path,o,e))}return[]}function kD(r,t,e){return hS(r,new t_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function qP(r,t,e,n,i=!1){const o=t._path,s=r.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||Y6(s,t))){const d=function qhe(r,t,e,n){const i=t._queryIdentifier,o=[];let s=[];const a=um(r);if("default"===i)for(const[d,f]of r.views.entries())s=s.concat(U6(f,e,n)),B6(f)&&(r.views.delete(d),f.query._queryParams.loadsAllData()||o.push(f.query));else{const d=r.views.get(i);d&&(s=s.concat(U6(d,e,n)),B6(d)&&(r.views.delete(i),d.query._queryParams.loadsAllData()||o.push(d.query)))}return a&&!um(r)&&o.push(new(function $he(){return(0,H.hu)($P,"Reference.ts has not been loaded"),$P}())(t._repo,t._path)),{removed:o,events:s}}(s,t,e,n);(function zhe(r){return 0===r.views.size})(s)&&(r.syncPointTree_=r.syncPointTree_.remove(o));const f=d.removed;if(a=d.events,!i){const g=-1!==f.findIndex(E=>E._queryParams.loadsAllData()),C=r.syncPointTree_.findOnPath(o,(E,T)=>um(T));if(g&&!C){const E=r.syncPointTree_.subtree(o);if(!E.isEmpty()){const T=function ife(r){return r.fold((t,e,n)=>{if(e&&um(e))return[zP(e)];{let i=[];return e&&(i=K6(e)),Qo(n,(o,s)=>{i=i.concat(s)}),i}})}(E);for(let I=0;I<T.length;++I){const M=T[I],k=M.query,W=eK(r,M);r.listenProvider_.startListening(VD(k),GD(r,k),W.hashFn,W.onComplete)}}}!C&&f.length>0&&!n&&(g?r.listenProvider_.stopListening(VD(t),null):f.forEach(E=>{const T=r.queryToTagMap.get(ZP(E));r.listenProvider_.stopListening(VD(E),T)}))}!function ofe(r,t){for(let e=0;e<t.length;++e){const n=t[e];if(!n._queryParams.loadsAllData()){const i=ZP(n),o=r.queryToTagMap.get(i);r.queryToTagMap.delete(i),r.tagToQueryMap.delete(o)}}}(r,f)}return a}function Q6(r,t,e,n){const i=_V(r,n);if(null!=i){const o=CV(i),s=o.path,a=o.queryId,d=oa(s,t);return wV(r,s,new t_(sV(a),d,e))}return[]}function yV(r,t,e,n=!1){const i=t._path;let o=null,s=!1;r.syncPointTree_.foreachOnPath(i,(E,T)=>{const I=oa(E,i);o=o||lm(T,I),s=s||um(T)});let d,a=r.syncPointTree_.get(i);a?(s=s||um(a),o=o||lm(a,or())):(a=new $6,r.syncPointTree_=r.syncPointTree_.set(i,a)),null!=o?d=!0:(d=!1,o=bn.EMPTY_NODE,r.syncPointTree_.subtree(i).foreachChild((T,I)=>{const M=lm(I,or());M&&(o=o.updateImmediateChild(T,M))}));const f=Y6(a,t);if(!f&&!t._queryParams.loadsAllData()){const E=ZP(t);(0,H.hu)(!r.queryToTagMap.has(E),"View does not exist, but we have a tag");const T=function sfe(){return Qhe++}();r.queryToTagMap.set(E,T),r.tagToQueryMap.set(T,E)}let C=function Khe(r,t,e,n,i,o){const s=z6(r,t,n,i,o);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,s),function Uhe(r,t){r.eventRegistrations_.push(t)}(s,e),function jhe(r,t){const e=r.viewCache_.eventCache,n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(zr,(o,s)=>{n.push(lS(o,s))}),e.isFullyInitialized()&&n.push(b6(e.getNode())),W6(r,n,e.getNode(),t)}(s,e)}(a,t,e,BP(r.pendingWriteTree_,i),o,d);if(!f&&!s&&!n){const E=q6(a,t);C=C.concat(function afe(r,t,e){const n=t._path,i=GD(r,t),o=eK(r,e),s=r.listenProvider_.startListening(VD(t),i,o.hashFn,o.onComplete),a=r.syncPointTree_.subtree(n);if(i)(0,H.hu)(!um(a.value),"If we're adding a query, it shouldn't be shadowed");else{const d=a.fold((f,g,C)=>{if(!kn(f)&&g&&um(g))return[zP(g).query];{let E=[];return g&&(E=E.concat(K6(g).map(T=>T.query))),Qo(C,(T,I)=>{E=E.concat(I)}),E}});for(let f=0;f<d.length;++f){const g=d[f];r.listenProvider_.stopListening(VD(g),GD(r,g))}}return s}(r,t,E))}return C}function YP(r,t,e){const i=r.pendingWriteTree_,o=r.syncPointTree_.findOnPath(t,(s,a)=>{const f=lm(a,oa(s,t));if(f)return f});return M6(i,t,o,e,!0)}function hS(r,t){return J6(t,r.syncPointTree_,null,BP(r.pendingWriteTree_,or()))}function J6(r,t,e,n){if(kn(r.path))return X6(r,t,e,n);{const i=t.get(or());null==e&&null!=i&&(e=lm(i,or()));let o=[];const s=Ln(r.path),a=r.operationForChild(s),d=t.children.get(s);if(d&&a){const f=e?e.getImmediateChild(s):null,g=F6(n,s);o=o.concat(J6(a,d,f,g))}return i&&(o=o.concat(mV(i,r,n,e))),o}}function X6(r,t,e,n){const i=t.get(or());null==e&&null!=i&&(e=lm(i,or()));let o=[];return t.children.inorderTraversal((s,a)=>{const d=e?e.getImmediateChild(s):null,f=F6(n,s),g=r.operationForChild(s);g&&(o=o.concat(X6(g,a,d,f)))}),i&&(o=o.concat(mV(i,r,n,e))),o}function eK(r,t){const e=t.query,n=GD(r,e);return{hashFn:()=>(function Vhe(r){return r.viewCache_.serverCache.getNode()}(t)||bn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return n?function tfe(r,t,e){const n=_V(r,e);if(n){const i=CV(n),o=i.path,s=i.queryId,a=oa(o,t);return wV(r,o,new MD(sV(s),a))}return[]}(r,e._path,n):function efe(r,t){return hS(r,new MD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(r,e._path);{const o=function Xce(r,t){let e="Unknown Error";"too_big"===r?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===r?e="Client doesn't have permission to access the desired data.":"unavailable"===r&&(e="The service is unavailable");const n=new Error(r+" at "+t._path.toString()+": "+e);return n.code=r.toUpperCase(),n}(i,e);return qP(r,e,null,o)}}}}function GD(r,t){const e=ZP(t);return r.queryToTagMap.get(e)}function ZP(r){return r._path.toString()+"$"+r._queryIdentifier}function _V(r,t){return r.tagToQueryMap.get(t)}function CV(r){const t=r.indexOf("$");return(0,H.hu)(-1!==t&&t<r.length-1,"Bad queryKey."),{queryId:r.substr(t+1),path:new wr(r.substr(0,t))}}function wV(r,t,e){const n=r.syncPointTree_.get(t);return(0,H.hu)(n,"Missing sync point for query tag that we're tracking"),mV(n,e,BP(r.pendingWriteTree_,t),null)}function VD(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(function Zhe(){return(0,H.hu)(KP,"Reference.ts has not been loaded"),KP}())(r._repo,r._path):r}class SV{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new SV(e)}node(){return this.node_}}class EV{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=vi(this.path_,t);return new EV(this.syncTree_,e)}node(){return YP(this.syncTree_,this.path_)}}const lfe=function(r){return(r=r||{}).timestamp=r.timestamp||(new Date).getTime(),r},tK=function(r,t,e){return r&&"object"==typeof r?((0,H.hu)(".sv"in r,"Unexpected leaf node or priority contents"),"string"==typeof r[".sv"]?ufe(r[".sv"],t,e):"object"==typeof r[".sv"]?cfe(r[".sv"],t):void(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2))):r},ufe=function(r,t,e){if("timestamp"===r)return e.timestamp;(0,H.hu)(!1,"Unexpected server value: "+r)},cfe=function(r,t,e){r.hasOwnProperty("increment")||(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const n=r.increment;"number"!=typeof n&&(0,H.hu)(!1,"Unexpected increment value: "+n);const i=t.node();if((0,H.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const s=i.getValue();return"number"!=typeof s?n:s+n},nK=function(r,t,e,n){return DV(t,new EV(e,r),n)},bV=function(r,t,e){return DV(r,new SV(t),e)};function DV(r,t,e){const n=r.getPriority().val(),i=tK(n,t.getImmediateChild(".priority"),e);let o;if(r.isLeafNode()){const s=r,a=tK(s.getValue(),t,e);return a!==s.getValue()||i!==s.getPriority().val()?new sS(a,Ri(i)):r}{const s=r;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new sS(i))),s.forEachChild(zr,(a,d)=>{const f=DV(d,t.getImmediateChild(a),e);f!==d&&(o=o.updateImmediateChild(a,f))}),o}}class TV{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function QP(r,t){let e=t instanceof wr?t:new wr(t),n=r,i=Ln(e);for(;null!==i;){const o=(0,H.DV)(n.node.children,i)||{children:{},childCount:0};n=new TV(i,n,o),e=Hr(e),i=Ln(e)}return n}function i_(r){return r.node.value}function RV(r,t){r.node.value=t,OV(r)}function rK(r){return r.node.childCount>0}function JP(r,t){Qo(r.node.children,(e,n)=>{t(new TV(e,r,n))})}function iK(r,t,e,n){e&&!n&&t(r),JP(r,i=>{iK(i,t,!0,n)}),e&&n&&t(r)}function HD(r){return new wr(null===r.parent?r.name:HD(r.parent)+"/"+r.name)}function OV(r){null!==r.parent&&function ffe(r,t,e){const n=function dfe(r){return void 0===i_(r)&&!rK(r)}(e),i=(0,H.r3)(r.node.children,t);n&&i?(delete r.node.children[t],r.node.childCount--,OV(r)):!n&&!i&&(r.node.children[t]=e.node,r.node.childCount++,OV(r))}(r.parent,r.name,r)}const pfe=/[\[\].#$\/\u0000-\u001F\u007F]/,gfe=/[\[\].#$\u0000-\u001F\u007F]/,IV=10485760,XP=function(r){return"string"==typeof r&&0!==r.length&&!pfe.test(r)},oK=function(r){return"string"==typeof r&&0!==r.length&&!gfe.test(r)},BD=function(r){return null===r||"string"==typeof r||"number"==typeof r&&!TP(r)||r&&"object"==typeof r&&(0,H.r3)(r,".sv")},ph=function(r,t,e,n){n&&void 0===t||UD((0,H.gK)(r,"value"),t,e)},UD=function(r,t,e){const n=e instanceof wr?new Nde(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+Xy(n));if("function"==typeof t)throw new Error(r+"contains a function "+Xy(n)+" with contents = "+t.toString());if(TP(t))throw new Error(r+"contains "+t.toString()+" "+Xy(n));if("string"==typeof t&&t.length>IV/3&&(0,H.ug)(t)>IV)throw new Error(r+"contains a string greater than "+IV+" utf8 bytes "+Xy(n)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,o=!1;if(Qo(t,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!XP(s)))throw new Error(r+" contains an invalid key ("+s+") "+Xy(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Mde(r,t){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=(0,H.ug)(t),g6(r)})(n,s),UD(r,a,n),function xde(r){const t=r.parts_.pop();r.byteLength_-=(0,H.ug)(t),r.parts_.length>0&&(r.byteLength_-=1)}(n)}),i&&o)throw new Error(r+' contains ".value" child '+Xy(n)+" in addition to actual children.")}},sK=function(r,t,e,n){if(n&&void 0===t)return;const i=(0,H.gK)(r,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];Qo(t,(s,a)=>{const d=new wr(s);if(UD(i,a,vi(e,d)),".priority"===$G(d)&&!BD(a))throw new Error(i+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(d)}),function(r,t){let e,n;for(e=0;e<t.length;e++){n=t[e];const o=TD(n);for(let s=0;s<o.length;s++)if((".priority"!==o[s]||s!==o.length-1)&&!XP(o[s]))throw new Error(r+"contains an invalid key ("+o[s]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Pde);let i=null;for(e=0;e<t.length;e++){if(n=t[e],null!==i&&vu(i,n))throw new Error(r+"contains a path "+i.toString()+" that is ancestor of another path "+n.toString());i=n}}(i,o)},AV=function(r,t,e){if(!e||void 0!==t){if(TP(t))throw new Error((0,H.gK)(r,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!BD(t))throw new Error((0,H.gK)(r,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jD=function(r,t,e,n){if(!(n&&void 0===e||XP(e)))throw new Error((0,H.gK)(r,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},WD=function(r,t,e,n){if(!(n&&void 0===e||oK(e)))throw new Error((0,H.gK)(r,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yfe=function(r,t,e,n){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),WD(r,t,e,n)},_u=function(r,t){if(".info"===Ln(t))throw new Error(r+" failed = Can't modify data under /.info/")},aK=function(r,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!XP(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),oK(r)}(e))throw new Error((0,H.gK)(r,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _fe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eN(r,t){let e=null;for(let n=0;n<t.length;n++){const i=t[n],o=i.getPath();null!==e&&!zG(o,e.path)&&(r.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(i)}e&&r.eventLists_.push(e)}function lK(r,t,e){eN(r,e),uK(r,n=>zG(n,t))}function ml(r,t,e){eN(r,e),uK(r,n=>vu(n,t)||vu(t,n))}function uK(r,t){r.recursionDepth_++;let e=!0;for(let n=0;n<r.eventLists_.length;n++){const i=r.eventLists_[n];i&&(t(i.path)?(Cfe(r.eventLists_[n]),r.eventLists_[n]=null):e=!1)}e&&(r.eventLists_=[]),r.recursionDepth_--}function Cfe(r){for(let t=0;t<r.events.length;t++){const e=r.events[t];if(null!==e){r.events[t]=null;const n=e.getEventRunner();Qy&&Zo("event: "+e.toString()),iS(n)}}}const cK="repo_interrupt",wfe=25;class Sfe{constructor(t,e,n,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _fe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kP(),this.transactionQueueTree_=new TV,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dK(r){const e=r.infoData_.getNode(new wr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function $D(r){return lfe({timestamp:dK(r)})}function hK(r,t,e,n,i){r.dataUpdateCount++;const o=new wr(t);e=r.interceptServerDataCallback_?r.interceptServerDataCallback_(t,e):e;let s=[];if(i)if(n){const d=(0,H.UI)(e,f=>Ri(f));s=function nfe(r,t,e,n){const i=_V(r,n);if(i){const o=CV(i),s=o.path,a=o.queryId,d=oa(s,t),f=Kr.fromObject(e);return wV(r,s,new cS(sV(a),d,f))}return[]}(r.serverSyncTree_,o,d,i)}else{const d=Ri(e);s=Q6(r.serverSyncTree_,o,d,i)}else if(n){const d=(0,H.UI)(e,f=>Ri(f));s=function Xhe(r,t,e){const n=Kr.fromObject(e);return hS(r,new cS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}(r.serverSyncTree_,o,d)}else{const d=Ri(e);s=kD(r.serverSyncTree_,o,d)}let a=o;s.length>0&&(a=pS(r,o)),ml(r.eventQueue_,a,s)}function fK(r,t){PV(r,"connected",t),!1===t&&function Rfe(r){fS(r,"onDisconnectEvents");const t=$D(r),e=kP();rV(r.onDisconnect_,or(),(i,o)=>{const s=nK(i,o,r.serverSyncTree_,t);uS(e,i,s)});let n=[];rV(e,or(),(i,o)=>{n=n.concat(kD(r.serverSyncTree_,i,o));const s=FV(r,i);pS(r,s)}),r.onDisconnect_=kP(),ml(r.eventQueue_,or(),n)}(r)}function PV(r,t,e){const n=new wr("/.info/"+t),i=Ri(e);r.infoData_.updateSnapshot(n,i);const o=kD(r.infoSyncTree_,n,i);ml(r.eventQueue_,n,o)}function tN(r){return r.nextWriteId_++}function NV(r,t,e,n,i){fS(r,"set",{path:t.toString(),value:e,priority:n});const o=$D(r),s=Ri(e,n),a=YP(r.serverSyncTree_,t),d=bV(s,a,o),f=tN(r),g=vV(r.serverSyncTree_,t,d,f,!0);eN(r.eventQueue_,g),r.server_.put(t.toString(),s.val(!0),(E,T)=>{const I="ok"===E;I||Ms("set at "+t+" failed: "+E);const M=cm(r.serverSyncTree_,f,!I);ml(r.eventQueue_,t,M),dm(0,i,E,T)});const C=FV(r,t);pS(r,C),ml(r.eventQueue_,C,[])}function Ofe(r,t,e){r.server_.onDisconnectCancel(t.toString(),(n,i)=>{"ok"===n&&nV(r.onDisconnect_,t),dm(0,e,n,i)})}function pK(r,t,e,n){const i=Ri(e);r.server_.onDisconnectPut(t.toString(),i.val(!0),(o,s)=>{"ok"===o&&uS(r.onDisconnect_,t,i),dm(0,n,o,s)})}function MV(r,t,e){let n;n=".info"===Ln(t._path)?qP(r.infoSyncTree_,t,e):qP(r.serverSyncTree_,t,e),lK(r.eventQueue_,t._path,n)}function gK(r){r.persistentConnection_&&r.persistentConnection_.interrupt(cK)}function fS(r,...t){let e="";r.persistentConnection_&&(e=r.persistentConnection_.id+":"),Zo(e,...t)}function dm(r,t,e,n){t&&iS(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let o=i;n&&(o+=": "+n);const s=new Error(o);s.code=i,t(s)}})}function xV(r,t,e){return YP(r.serverSyncTree_,t,e)||bn.EMPTY_NODE}function nN(r,t=r.transactionQueueTree_){if(t||rN(r,t),i_(t)){const e=vK(r,t);(0,H.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function xfe(r,t,e){const n=e.map(f=>f.currentWriteId),i=xV(r,t,n);let o=i;const s=i.hash();for(let f=0;f<e.length;f++){const g=e[f];(0,H.hu)(0===g.status,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const C=oa(t,g.path);o=o.updateChild(C,g.currentOutputSnapshotRaw)}const a=o.val(!0),d=t;r.server_.put(d.toString(),a,f=>{fS(r,"transaction put response",{path:d.toString(),status:f});let g=[];if("ok"===f){const C=[];for(let E=0;E<e.length;E++)e[E].status=2,g=g.concat(cm(r.serverSyncTree_,e[E].currentWriteId)),e[E].onComplete&&C.push(()=>e[E].onComplete(null,!0,e[E].currentOutputSnapshotResolved)),e[E].unwatcher();rN(r,QP(r.transactionQueueTree_,t)),nN(r,r.transactionQueueTree_),ml(r.eventQueue_,t,g);for(let E=0;E<C.length;E++)iS(C[E])}else{if("datastale"===f)for(let C=0;C<e.length;C++)e[C].status=3===e[C].status?4:0;else{Ms("transaction at "+d.toString()+" failed: "+f);for(let C=0;C<e.length;C++)e[C].status=4,e[C].abortReason=f}pS(r,t)}},s)}(r,HD(t),e)}else rK(t)&&JP(t,e=>{nN(r,e)})}function pS(r,t){const e=mK(r,t),n=HD(e);return function Ffe(r,t,e){if(0===t.length)return;const n=[];let i=[];const s=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const d=t[a],f=oa(e,d.path);let C,g=!1;if((0,H.hu)(null!==f,"rerunTransactionsUnderNode_: relativePath should not be null."),4===d.status)g=!0,C=d.abortReason,i=i.concat(cm(r.serverSyncTree_,d.currentWriteId,!0));else if(0===d.status)if(d.retryCount>=wfe)g=!0,C="maxretry",i=i.concat(cm(r.serverSyncTree_,d.currentWriteId,!0));else{const E=xV(r,d.path,s);d.currentInputSnapshot=E;const T=t[a].update(E.val());if(void 0!==T){UD("transaction failed: Data returned ",T,d.path);let I=Ri(T);"object"==typeof T&&null!=T&&(0,H.r3)(T,".priority")||(I=I.updatePriority(E.getPriority()));const k=d.currentWriteId,W=$D(r),z=bV(I,E,W);d.currentOutputSnapshotRaw=I,d.currentOutputSnapshotResolved=z,d.currentWriteId=tN(r),s.splice(s.indexOf(k),1),i=i.concat(vV(r.serverSyncTree_,d.path,z,d.currentWriteId,d.applyLocally)),i=i.concat(cm(r.serverSyncTree_,k,!0))}else g=!0,C="nodata",i=i.concat(cm(r.serverSyncTree_,d.currentWriteId,!0))}ml(r.eventQueue_,e,i),i=[],g&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&n.push("nodata"===C?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(C),!1,null)))}rN(r,r.transactionQueueTree_);for(let a=0;a<n.length;a++)iS(n[a]);nN(r,r.transactionQueueTree_)}(r,vK(r,e),n),n}function mK(r,t){let e,n=r.transactionQueueTree_;for(e=Ln(t);null!==e&&void 0===i_(n);)n=QP(n,e),e=Ln(t=Hr(t));return n}function vK(r,t){const e=[];return yK(r,t,e),e.sort((n,i)=>n.order-i.order),e}function yK(r,t,e){const n=i_(t);if(n)for(let i=0;i<n.length;i++)e.push(n[i]);JP(t,i=>{yK(r,i,e)})}function rN(r,t){const e=i_(t);if(e){let n=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[n]=e[i],n++);e.length=n,RV(t,e.length>0?e:void 0)}JP(t,n=>{rN(r,n)})}function FV(r,t){const e=HD(mK(r,t)),n=QP(r.transactionQueueTree_,t);return function hfe(r,t,e){let n=e?r:r.parent;for(;null!==n;){if(t(n))return!0;n=n.parent}}(n,i=>{LV(r,i)}),LV(r,n),iK(n,i=>{LV(r,i)}),e}function LV(r,t){const e=i_(t);if(e){const n=[];let i=[],o=-1;for(let s=0;s<e.length;s++)3===e[s].status||(1===e[s].status?((0,H.hu)(o===s-1,"All SENT items should be at beginning of queue."),o=s,e[s].status=3,e[s].abortReason="set"):((0,H.hu)(0===e[s].status,"Unexpected transaction status in abort"),e[s].unwatcher(),i=i.concat(cm(r.serverSyncTree_,e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?RV(t,void 0):e.length=o+1,ml(r.eventQueue_,HD(t),i);for(let s=0;s<n.length;s++)iS(n[s])}}const kV=function(r,t){const e=Gfe(r),n=e.namespace;return"firebase.com"===e.domain&&hh(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||"undefined"===n)&&"localhost"!==e.domain&&hh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ms("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new VG(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,t,"",n!==e.subdomain),path:new wr(e.pathString)}},Gfe=function(r){let t="",e="",n="",i="",o="",s=!0,a="https",d=443;if("string"==typeof r){let f=r.indexOf("//");f>=0&&(a=r.substring(0,f-1),r=r.substring(f+2));let g=r.indexOf("/");-1===g&&(g=r.length);let C=r.indexOf("?");-1===C&&(C=r.length),t=r.substring(0,Math.min(g,C)),g<C&&(i=function Lfe(r){let t="";const e=r.split("/");for(let n=0;n<e.length;n++)if(e[n].length>0){let i=e[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}(r.substring(g,C)));const E=function kfe(r){const t={};"?"===r.charAt(0)&&(r=r.substring(1));for(const e of r.split("&")){if(0===e.length)continue;const n=e.split("=");2===n.length?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Ms(`Invalid query segment '${e}' in query '${r}'`)}return t}(r.substring(Math.min(r.length,C)));f=t.indexOf(":"),f>=0?(s="https"===a||"wss"===a,d=parseInt(t.substring(f+1),10)):f=t.length;const T=t.slice(0,f);if("localhost"===T.toLowerCase())e="localhost";else if(T.split(".").length<=2)e=T;else{const I=t.indexOf(".");n=t.substring(0,I).toLowerCase(),e=t.substring(I+1),o=n}"ns"in E&&(o=E.ns)}return{host:t,port:d,domain:e,subdomain:n,secure:s,scheme:a,pathString:i,namespace:o}},_K="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Vfe=function(){let r=0;const t=[];return function(e){const n=e===r;let i;r=e;const o=new Array(8);for(i=7;i>=0;i--)o[i]=_K.charAt(e%64),e=Math.floor(e/64);(0,H.hu)(0===e,"Cannot push at time == 0");let s=o.join("");if(n){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=_K.charAt(t[i]);return(0,H.hu)(20===s.length,"nextPushId: Length should be 20."),s}}();class CK{constructor(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.Wl)(this.snapshot.exportVal())}}class wK{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class GV{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,H.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class SK{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new H.BH;return Ofe(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){_u("OnDisconnect.remove",this._path);const t=new H.BH;return pK(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){_u("OnDisconnect.set",this._path),ph("OnDisconnect.set",t,this._path,!1);const e=new H.BH;return pK(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){_u("OnDisconnect.setWithPriority",this._path),ph("OnDisconnect.setWithPriority",t,this._path,!1),AV("OnDisconnect.setWithPriority",e,!1);const n=new H.BH;return function Ife(r,t,e,n,i){const o=Ri(e,n);r.server_.onDisconnectPut(t.toString(),o.val(!0),(s,a)=>{"ok"===s&&uS(r.onDisconnect_,t,o),dm(0,i,s,a)})}(this._repo,this._path,t,e,n.wrapCallback(()=>{})),n.promise}update(t){_u("OnDisconnect.update",this._path),sK("OnDisconnect.update",t,this._path,!1);const e=new H.BH;return function Afe(r,t,e,n){if((0,H.xb)(e))return Zo("onDisconnect().update() called with empty data.  Don't do anything."),void dm(0,n,"ok",void 0);r.server_.onDisconnectMerge(t.toString(),e,(i,o)=>{"ok"===i&&Qo(e,(s,a)=>{const d=Ri(a);uS(r.onDisconnect_,vi(t,s),d)}),dm(0,n,i,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class xa{constructor(t,e,n,i){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=i}get key(){return kn(this._path)?null:$G(this._path)}get ref(){return new Cu(this._repo,this._path)}get _queryIdentifier(){const t=T6(this._queryParams),e=kG(t);return"{}"===e?"default":e}get _queryObject(){return T6(this._queryParams)}isEqual(t){if(!((t=(0,H.m9)(t))instanceof xa))return!1;const e=this._repo===t._repo,n=zG(this._path,t._path);return e&&n&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ade(r){let t="";for(let e=r.pieceNum_;e<r.pieces_.length;e++)""!==r.pieces_[e]&&(t+="/"+encodeURIComponent(String(r.pieces_[e])));return t||"/"}(this._path)}}function iN(r,t){if(!0===r._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function hm(r){let t=null,e=null;if(r.hasStart()&&(t=r.getIndexStartValue()),r.hasEnd()&&(e=r.getIndexEndValue()),r.getIndex()===fh){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(r.hasStart()){if(r.getIndexStartName()!==rm)throw new Error(n);if("string"!=typeof t)throw new Error(i)}if(r.hasEnd()){if(r.getIndexEndName()!==np)throw new Error(n);if("string"!=typeof e)throw new Error(i)}}else if(r.getIndex()===zr){if(null!=t&&!BD(t)||null!=e&&!BD(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,H.hu)(r.getIndex()instanceof QG||r.getIndex()===JG,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function oN(r){if(r.hasStart()&&r.hasEnd()&&r.hasLimit()&&!r.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Cu extends xa{constructor(t,e){super(t,e,new xP,!1)}get parent(){const t=p6(this._path);return null===t?null:new Cu(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class o_{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new wr(t),n=s_(this.ref,t);return new o_(this._node.getChild(e),n,zr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(n,i)=>t(new o_(i,s_(this.ref,n),zr)))}hasChild(t){const e=new wr(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function EK(r,t){return(r=(0,H.m9)(r))._checkNotDeleted("ref"),void 0!==t?s_(r._root,t):r._root}function bK(r,t){(r=(0,H.m9)(r))._checkNotDeleted("refFromURL");const e=kV(t,r._repo.repoInfo_.nodeAdmin);aK("refFromURL",e);const n=e.repoInfo;return!r._repo.repoInfo_.isCustomHost()&&n.host!==r._repo.repoInfo_.host&&hh("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+r._repo.repoInfo_.host+")"),EK(r,e.path.toString())}function s_(r,t){return null===Ln((r=(0,H.m9)(r))._path)?yfe("child","path",t,!1):WD("child","path",t,!1),new Cu(r._repo,vi(r._path,t))}function VV(r,t){r=(0,H.m9)(r),_u("set",r._path),ph("set",t,r._path,!1);const e=new H.BH;return NV(r._repo,r._path,t,null,e.wrapCallback(()=>{})),e.promise}function Wfe(r,t){sK("update",t,r._path,!1);const e=new H.BH;return function Tfe(r,t,e,n){fS(r,"update",{path:t.toString(),value:e});let i=!0;const o=$D(r),s={};if(Qo(e,(a,d)=>{i=!1,s[a]=nK(vi(t,a),Ri(d),r.serverSyncTree_,o)}),i)Zo("update() called with empty data.  Don't do anything."),dm(0,n,"ok",void 0);else{const a=tN(r),d=function Jhe(r,t,e,n){!function ghe(r,t,e,n){(0,H.hu)(n>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:t,children:e,writeId:n,visible:!0}),r.visibleWrites=lV(r.visibleWrites,t,e),r.lastWriteId=n}(r.pendingWriteTree_,t,e,n);const i=Kr.fromObject(e);return hS(r,new cS({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(r.serverSyncTree_,t,s,a);eN(r.eventQueue_,d),r.server_.merge(t.toString(),e,(f,g)=>{const C="ok"===f;C||Ms("update at "+t+" failed: "+f);const E=cm(r.serverSyncTree_,a,!C),T=E.length>0?pS(r,t):t;ml(r.eventQueue_,T,E),dm(0,n,f,g)}),Qo(e,f=>{const g=FV(r,vi(t,f));pS(r,g)}),ml(r.eventQueue_,t,[])}}(r._repo,r._path,t,e.wrapCallback(()=>{})),e.promise}function $fe(r){r=(0,H.m9)(r);const t=new GV(()=>{}),e=new zD(t);return function Dfe(r,t,e){const n=function rfe(r,t){const e=t._path;let n=null;r.syncPointTree_.foreachOnPath(e,(f,g)=>{const C=oa(f,e);n=n||lm(g,C)});let i=r.syncPointTree_.get(e);i?n=n||lm(i,or()):(i=new $6,r.syncPointTree_=r.syncPointTree_.set(e,i));const o=null!=n,s=o?new sm(n,!0,!1):null;return function Hhe(r){return HP(r.viewCache_)}(z6(i,t,BP(r.pendingWriteTree_,t._path),o?s.getNode():bn.EMPTY_NODE,o))}(r.serverSyncTree_,t);return null!=n?Promise.resolve(n):r.server_.get(t).then(i=>{const o=Ri(i).withIndex(t._queryParams.getIndex());let s;if(yV(r.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())s=kD(r.serverSyncTree_,t._path,o);else{const a=GD(r.serverSyncTree_,t);s=Q6(r.serverSyncTree_,t._path,o,a)}return ml(r.eventQueue_,t._path,s),qP(r.serverSyncTree_,t,e,null,!0),o},i=>(fS(r,"get for query "+(0,H.Wl)(t)+" failed: "+i),Promise.reject(new Error(i))))}(r._repo,r,e).then(n=>new o_(n,new Cu(r._repo,r._path),r._queryParams.getIndex()))}class zD{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const n=e._queryParams.getIndex();return new CK("value",this,new o_(t.snapshotNode,new Cu(e._repo,e._path),n))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new wK(this,t,e):null}matches(t){return t instanceof zD&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class sN{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new wK(this,t,e):null}createEvent(t,e){(0,H.hu)(null!=t.childName,"Child events should have a childName.");const n=s_(new Cu(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new CK(t.type,this,new o_(t.snapshotNode,n,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof sN&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function KD(r,t,e,n,i){let o;if("object"==typeof n&&(o=void 0,i=n),"function"==typeof n&&(o=n),i&&i.onlyOnce){const d=e,f=(g,C)=>{MV(r._repo,r,a),d(g,C)};f.userCallback=e.userCallback,f.context=e.context,e=f}const s=new GV(e,o||void 0),a="value"===t?new zD(s):new sN(t,s);return function Pfe(r,t,e){let n;n=".info"===Ln(t._path)?yV(r.infoSyncTree_,t,e):yV(r.serverSyncTree_,t,e),lK(r.eventQueue_,t._path,n)}(r._repo,r,a),()=>MV(r._repo,r,a)}function HV(r,t,e,n){return KD(r,"value",t,e,n)}function DK(r,t,e,n){return KD(r,"child_added",t,e,n)}function TK(r,t,e,n){return KD(r,"child_changed",t,e,n)}function RK(r,t,e,n){return KD(r,"child_moved",t,e,n)}function OK(r,t,e,n){return KD(r,"child_removed",t,e,n)}function IK(r,t,e){let n=null;const i=e?new GV(e):null;"value"===t?n=new zD(i):t&&(n=new sN(t,i)),MV(r._repo,r,n)}class bc{}class AK extends bc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ph("endAt",this._value,t._path,!0);const e=tV(t._queryParams,this._value,this._key);if(oN(e),hm(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xa(t._repo,t._path,e,t._orderByCalled)}}class Kfe extends bc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ph("endBefore",this._value,t._path,!1);const e=function nhe(r,t,e){let n;return n=tV(r,t,r.index_===fh||e?e:rm),n.endBeforeSet_=!0,n}(t._queryParams,this._value,this._key);if(oN(e),hm(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xa(t._repo,t._path,e,t._orderByCalled)}}class PK extends bc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ph("startAt",this._value,t._path,!0);const e=eV(t._queryParams,this._value,this._key);if(oN(e),hm(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xa(t._repo,t._path,e,t._orderByCalled)}}class Zfe extends bc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ph("startAfter",this._value,t._path,!1);const e=function the(r,t,e){let n;return n=eV(r,t,r.index_===fh||e?e:np),n.startAfterSet_=!0,n}(t._queryParams,this._value,this._key);if(oN(e),hm(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xa(t._repo,t._path,e,t._orderByCalled)}}class Jfe extends bc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xa(t._repo,t._path,function Xde(r,t){const e=r.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class epe extends bc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xa(t._repo,t._path,function ehe(r,t){const e=r.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class npe extends bc{constructor(t){super(),this._path=t}_apply(t){iN(t,"orderByChild");const e=new wr(this._path);if(kn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new QG(e),i=FP(t._queryParams,n);return hm(i),new xa(t._repo,t._path,i,!0)}}class ipe extends bc{_apply(t){iN(t,"orderByKey");const e=FP(t._queryParams,fh);return hm(e),new xa(t._repo,t._path,e,!0)}}class spe extends bc{_apply(t){iN(t,"orderByPriority");const e=FP(t._queryParams,zr);return hm(e),new xa(t._repo,t._path,e,!0)}}class lpe extends bc{_apply(t){iN(t,"orderByValue");const e=FP(t._queryParams,JG);return hm(e),new xa(t._repo,t._path,e,!0)}}class cpe extends bc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(ph("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new AK(this._value,this._key)._apply(new PK(this._value,this._key)._apply(t))}}function Dc(r,...t){let e=(0,H.m9)(r);for(const n of t)e=n._apply(e);return e}(function Whe(r){(0,H.hu)(!$P,"__referenceConstructor has already been defined"),$P=r})(Cu),function Yhe(r){(0,H.hu)(!KP,"__referenceConstructor has already been defined"),KP=r}(Cu);const hpe="FIREBASE_DATABASE_EMULATOR_HOST",BV={};let NK=!1;function MK(r,t,e,n,i){let o=n||r.options.databaseURL;void 0===o&&(r.options.projectId||hh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zo("Using default host for project ",r.options.projectId),o=`${r.options.projectId}-default-rtdb.firebaseio.com`);let d,f,s=kV(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(f=process.env[hpe]),f?(d=!0,o=`http://${f}?ns=${a.namespace}`,s=kV(o,i),a=s.repoInfo):d=!s.repoInfo.secure;const g=i&&d?new DD(DD.OWNER):new ode(r.name,r.options,t);aK("Invalid Firebase Database URL",s),kn(s.path)||hh("Database URL must point to the root of a Firebase Database (not including a child path).");const C=function gpe(r,t,e,n){let i=BV[t.name];i||(i={},BV[t.name]=i);let o=i[r.toURLString()];return o&&hh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Sfe(r,NK,e,n),i[r.toURLString()]=o,o}(a,r,g,new ide(r.name,e));return new vpe(C,r)}class vpe{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Efe(r,t,e){if(r.stats_=UG(r.repoInfo_),r.forceRestClient_||rde())r.server_=new LP(r.repoInfo_,(n,i,o,s)=>{hK(r,n,i,o,s)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>fK(r,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.Wl)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}r.persistentConnection_=new e_(r.repoInfo_,t,(n,i,o,s)=>{hK(r,n,i,o,s)},n=>{fK(r,n)},n=>{!function bfe(r,t){Qo(t,(e,n)=>{PV(r,e,n)})}(r,n)},r.authTokenProvider_,r.appCheckProvider_,e),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(n=>{r.server_.refreshAuthToken(n)}),r.appCheckProvider_.addTokenChangeListener(n=>{r.server_.refreshAppCheckToken(n.token)}),r.statsReporter_=function lde(r,t){const e=r.toString();return BG[e]||(BG[e]=t()),BG[e]}(r.repoInfo_,()=>new lhe(r.stats_,r.server_)),r.infoData_=new rhe,r.infoSyncTree_=new Z6({startListening:(n,i,o,s)=>{let a=[];const d=r.infoData_.getNode(n._path);return d.isEmpty()||(a=kD(r.infoSyncTree_,n._path,d),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),PV(r,"connected",!1),r.serverSyncTree_=new Z6({startListening:(n,i,o,s)=>(r.server_.listen(n,o,i,(a,d)=>{const f=s(a,d);ml(r.eventQueue_,n._path,f)}),[]),stopListening:(n,i)=>{r.server_.unlisten(n,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cu(this._repo,or())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ppe(r,t){const e=BV[t];(!e||e[r.key]!==r)&&hh(`Database ${t}(${r.repoInfo_}) has already been deleted.`),gK(r),delete e[r.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&hh("Cannot call "+t+" on a deleted database.")}}function xK(){n6.IS_TRANSPORT_INITIALIZED&&Ms("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ype(){xK(),im.forceDisallow()}function _pe(){xK(),oS.forceDisallow(),im.forceAllow()}function Spe(r,t){Lz(r,t)}const bpe={".sv":"timestamp"};class Rpe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}e_.prototype.simpleListen=function(r,t){this.sendRequest("q",{p:r},t)},e_.prototype.echo=function(r,t){this.sendRequest("echo",{d:r},t)},function Epe(r){Pz(Ki.SDK_VERSION),(0,Ki._registerComponent)(new zs.wA("database",(t,{instanceIdentifier:e})=>MK(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(Iz,"0.14.4",r),(0,Ki.registerVersion)(Iz,"0.14.4","esm2017")}();const Ppe=new Ds.Yd("@firebase/database-compat"),LK=function(r){Ppe.warn("FIREBASE WARNING: "+r)};class xpe{constructor(t){this._delegate=t}cancel(t){(0,H.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,H.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),n=>t(n)),e}remove(t){(0,H.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,H.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),n=>t(n)),e}set(t,e){(0,H.Dv)("OnDisconnect.set",1,2,arguments.length),(0,H.Wj)("OnDisconnect.set","onComplete",e,!0);const n=this._delegate.set(t);return e&&n.then(()=>e(null),i=>e(i)),n}setWithPriority(t,e,n){(0,H.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,H.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const i=this._delegate.setWithPriority(t,e);return n&&i.then(()=>n(null),o=>n(o)),i}update(t,e){if((0,H.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,LK("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,H.Wj)("OnDisconnect.update","onComplete",e,!0);const n=this._delegate.update(t);return e&&n.then(()=>e(null),i=>e(i)),n}}class Fpe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,H.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class fm{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,H.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,H.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,H.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,H.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,H.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),WD("DataSnapshot.child","path",t,!1),new fm(this._database,this._delegate.child(t))}hasChild(t){return(0,H.Dv)("DataSnapshot.hasChild",1,1,arguments.length),WD("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,H.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,H.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,H.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new fm(this._database,e)))}hasChildren(){return(0,H.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,H.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,H.Dv)("DataSnapshot.ref",0,0,arguments.length),new vl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class fs{constructor(t,e){this.database=t,this._delegate=e}on(t,e,n,i){var o;(0,H.Dv)("Query.on",2,4,arguments.length),(0,H.Wj)("Query.on","callback",e,!1);const s=fs.getCancelAndContextArgs_("Query.on",n,i),a=(f,g)=>{e.call(s.context,new fm(this.database,f),g)};a.userCallback=e,a.context=s.context;const d=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return HV(this._delegate,a,d),e;case"child_added":return DK(this._delegate,a,d),e;case"child_removed":return OK(this._delegate,a,d),e;case"child_changed":return TK(this._delegate,a,d),e;case"child_moved":return RK(this._delegate,a,d),e;default:throw new Error((0,H.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,n){if((0,H.Dv)("Query.off",0,3,arguments.length),function(r,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,H.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,H.Wj)("Query.off","callback",e,!0),(0,H.lb)("Query.off","context",n,!0),e){const i=()=>{};i.userCallback=e,i.context=n,IK(this._delegate,t,i)}else IK(this._delegate,t)}get(){return $fe(this._delegate).then(t=>new fm(this.database,t))}once(t,e,n,i){(0,H.Dv)("Query.once",1,4,arguments.length),(0,H.Wj)("Query.once","callback",e,!0);const o=fs.getCancelAndContextArgs_("Query.once",n,i),s=new H.BH,a=(f,g)=>{const C=new fm(this.database,f);e&&e.call(o.context,C,g),s.resolve(C)};a.userCallback=e,a.context=o.context;const d=f=>{o.cancel&&o.cancel.call(o.context,f),s.reject(f)};switch(t){case"value":HV(this._delegate,a,d,{onlyOnce:!0});break;case"child_added":DK(this._delegate,a,d,{onlyOnce:!0});break;case"child_removed":OK(this._delegate,a,d,{onlyOnce:!0});break;case"child_changed":TK(this._delegate,a,d,{onlyOnce:!0});break;case"child_moved":RK(this._delegate,a,d,{onlyOnce:!0});break;default:throw new Error((0,H.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(t){return(0,H.Dv)("Query.limitToFirst",1,1,arguments.length),new fs(this.database,Dc(this._delegate,function Xfe(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Jfe(r)}(t)))}limitToLast(t){return(0,H.Dv)("Query.limitToLast",1,1,arguments.length),new fs(this.database,Dc(this._delegate,function tpe(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new epe(r)}(t)))}orderByChild(t){return(0,H.Dv)("Query.orderByChild",1,1,arguments.length),new fs(this.database,Dc(this._delegate,function rpe(r){if("$key"===r)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===r)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===r)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return WD("orderByChild","path",r,!1),new npe(r)}(t)))}orderByKey(){return(0,H.Dv)("Query.orderByKey",0,0,arguments.length),new fs(this.database,Dc(this._delegate,function ope(){return new ipe}()))}orderByPriority(){return(0,H.Dv)("Query.orderByPriority",0,0,arguments.length),new fs(this.database,Dc(this._delegate,function ape(){return new spe}()))}orderByValue(){return(0,H.Dv)("Query.orderByValue",0,0,arguments.length),new fs(this.database,Dc(this._delegate,function upe(){return new lpe}()))}startAt(t=null,e){return(0,H.Dv)("Query.startAt",0,2,arguments.length),new fs(this.database,Dc(this._delegate,function Yfe(r=null,t){return jD("startAt","key",t,!0),new PK(r,t)}(t,e)))}startAfter(t=null,e){return(0,H.Dv)("Query.startAfter",0,2,arguments.length),new fs(this.database,Dc(this._delegate,function Qfe(r,t){return jD("startAfter","key",t,!0),new Zfe(r,t)}(t,e)))}endAt(t=null,e){return(0,H.Dv)("Query.endAt",0,2,arguments.length),new fs(this.database,Dc(this._delegate,function zfe(r,t){return jD("endAt","key",t,!0),new AK(r,t)}(t,e)))}endBefore(t=null,e){return(0,H.Dv)("Query.endBefore",0,2,arguments.length),new fs(this.database,Dc(this._delegate,function qfe(r,t){return jD("endBefore","key",t,!0),new Kfe(r,t)}(t,e)))}equalTo(t,e){return(0,H.Dv)("Query.equalTo",1,2,arguments.length),new fs(this.database,Dc(this._delegate,function dpe(r,t){return jD("equalTo","key",t,!0),new cpe(r,t)}(t,e)))}toString(){return(0,H.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,H.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,H.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof fs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,n){const i={cancel:void 0,context:void 0};if(e&&n)i.cancel=e,(0,H.Wj)(t,"cancel",i.cancel,!0),i.context=n,(0,H.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,H.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new vl(this.database,new Cu(this._delegate._repo,this._delegate._path))}}class vl extends fs{constructor(t,e){super(t,new xa(e._repo,e._path,new xP,!1)),this.database=t,this._delegate=e}getKey(){return(0,H.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,H.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new vl(this.database,s_(this._delegate,t))}getParent(){(0,H.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new vl(this.database,t):null}getRoot(){return(0,H.Dv)("Reference.root",0,0,arguments.length),new vl(this.database,this._delegate.root)}set(t,e){(0,H.Dv)("Reference.set",1,2,arguments.length),(0,H.Wj)("Reference.set","onComplete",e,!0);const n=VV(this._delegate,t);return e&&n.then(()=>e(null),i=>e(i)),n}update(t,e){if((0,H.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,LK("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_u("Reference.update",this._delegate._path),(0,H.Wj)("Reference.update","onComplete",e,!0);const n=Wfe(this._delegate,t);return e&&n.then(()=>e(null),i=>e(i)),n}setWithPriority(t,e,n){(0,H.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,H.Wj)("Reference.setWithPriority","onComplete",n,!0);const i=function jfe(r,t,e){if(_u("setWithPriority",r._path),ph("setWithPriority",t,r._path,!1),AV("setWithPriority",e,!1),".length"===r.key||".keys"===r.key)throw"setWithPriority failed: "+r.key+" is a read-only object.";const n=new H.BH;return NV(r._repo,r._path,t,e,n.wrapCallback(()=>{})),n.promise}(this._delegate,t,e);return n&&i.then(()=>n(null),o=>n(o)),i}remove(t){(0,H.Dv)("Reference.remove",0,1,arguments.length),(0,H.Wj)("Reference.remove","onComplete",t,!0);const e=function Bfe(r){return _u("remove",r._path),VV(r,null)}(this._delegate);return t&&e.then(()=>t(null),n=>t(n)),e}transaction(t,e,n){(0,H.Dv)("Reference.transaction",1,3,arguments.length),(0,H.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,H.Wj)("Reference.transaction","onComplete",e,!0),function(r,t,e,n){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,H.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const i=function Ope(r,t,e){var n;if(r=(0,H.m9)(r),_u("Reference.transaction",r._path),".length"===r.key||".keys"===r.key)throw"Reference.transaction failed: "+r.key+" is a read-only object.";const i=null===(n=e?.applyLocally)||void 0===n||n,o=new H.BH,a=HV(r,()=>{});return function Mfe(r,t,e,n,i,o){fS(r,"transaction on "+t);const s={path:t,update:e,onComplete:n,status:null,order:Mz(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=xV(r,t,void 0);s.currentInputSnapshot=a;const d=s.update(a.val());if(void 0===d)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{UD("transaction failed: Data returned ",d,s.path),s.status=0;const f=QP(r.transactionQueueTree_,t),g=i_(f)||[];let C;g.push(s),RV(f,g),"object"==typeof d&&null!==d&&(0,H.r3)(d,".priority")?(C=(0,H.DV)(d,".priority"),(0,H.hu)(BD(C),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):C=(YP(r.serverSyncTree_,t)||bn.EMPTY_NODE).getPriority().val();const E=$D(r),T=Ri(d,C),I=bV(T,a,E);s.currentOutputSnapshotRaw=T,s.currentOutputSnapshotResolved=I,s.currentWriteId=tN(r);const M=vV(r.serverSyncTree_,t,I,s.currentWriteId,s.applyLocally);ml(r.eventQueue_,t,M),nN(r,r.transactionQueueTree_)}}(r._repo,r._path,t,(d,f,g)=>{let C=null;d?o.reject(d):(C=new o_(g,new Cu(r._repo,r._path),zr),o.resolve(new Rpe(f,C)))},a,i),o.promise}(this._delegate,t,{applyLocally:n}).then(o=>new Fpe(o.committed,new fm(this.database,o.snapshot)));return e&&i.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),i}setPriority(t,e){(0,H.Dv)("Reference.setPriority",1,2,arguments.length),(0,H.Wj)("Reference.setPriority","onComplete",e,!0);const n=function Ufe(r,t){r=(0,H.m9)(r),_u("setPriority",r._path),AV("setPriority",t,!1);const e=new H.BH;return NV(r._repo,vi(r._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&n.then(()=>e(null),i=>e(i)),n}push(t,e){(0,H.Dv)("Reference.push",0,2,arguments.length),(0,H.Wj)("Reference.push","onComplete",e,!0);const n=function Hfe(r,t){r=(0,H.m9)(r),_u("push",r._path),ph("push",t,r._path,!0);const e=dK(r._repo),n=Vfe(e),i=s_(r,n),o=s_(r,n);let s;return s=null!=t?VV(o,t).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this._delegate,t),i=n.then(s=>new vl(this.database,s));e&&i.then(()=>e(null),s=>e(s));const o=new vl(this.database,n);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return _u("Reference.onDisconnect",this._delegate._path),new xpe(new SK(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class qD{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:ype,forceLongPolling:_pe}}useEmulator(t,e,n={}){!function FK(r,t,e,n={}){(r=(0,H.m9)(r))._checkNotDeleted("useEmulator"),r._instanceStarted&&hh("Cannot call useEmulator() after instance has already been initialized.");const i=r._repoInternal;let o;if(i.repoInfo_.nodeAdmin)n.mockUserToken&&hh('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new DD(DD.OWNER);else if(n.mockUserToken){const s="string"==typeof n.mockUserToken?n.mockUserToken:(0,H.Sg)(n.mockUserToken,r.app.options.projectId);o=new DD(s)}!function fpe(r,t,e,n){r.repoInfo_=new VG(`${t}:${e}`,!1,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0),n&&(r.authTokenProvider_=n)}(i,t,e,o)}(this._delegate,t,e,n)}ref(t){if((0,H.Dv)("database.ref",0,1,arguments.length),t instanceof vl){const e=bK(this._delegate,t.toString());return new vl(this,e)}{const e=EK(this._delegate,t);return new vl(this,e)}}refFromURL(t){(0,H.Dv)("database.refFromURL",1,1,arguments.length);const n=bK(this._delegate,t);return new vl(this,n)}goOffline(){return(0,H.Dv)("database.goOffline",0,0,arguments.length),function Cpe(r){(r=(0,H.m9)(r))._checkNotDeleted("goOffline"),gK(r._repo)}(this._delegate)}goOnline(){return(0,H.Dv)("database.goOnline",0,0,arguments.length),function wpe(r){(r=(0,H.m9)(r))._checkNotDeleted("goOnline"),function Nfe(r){r.persistentConnection_&&r.persistentConnection_.resume(cK)}(r._repo)}(this._delegate)}}qD.ServerValue={TIMESTAMP:function Dpe(){return bpe}(),increment:r=>function Tpe(r){return{".sv":{increment:r}}}(r)};var kpe=Object.freeze({__proto__:null,initStandalone:function Lpe({app:r,url:t,version:e,customAuthImpl:n,namespace:i,nodeAdmin:o=!1}){Pz(e);const s=new zs.zt("auth-internal",new zs.H0("database-standalone"));return s.setComponent(new zs.wA("auth-internal",()=>n,"PRIVATE")),{instance:new qD(MK(r,s,void 0,t,o),r),namespace:i}}});const Gpe=qD.ServerValue;function kK(r){return null==r}function GK(r){return"function"==typeof r.set}function VK(r,t){return GK(t)?t:r.ref(t)}function HK(r,t){if(function Hpe(r){return"string"==typeof r}(r))return t.stringCase();if(GK(r))return t.firebaseCase();if(function Bpe(r){return"function"==typeof r.exportVal}(r))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof r)}function YD(r,t,e="on",n=s0.z){return new br.y(i=>{let o=null;return o=r[e](t,(s,a)=>{n.schedule(()=>{i.next({snapshot:s,prevKey:a})}),"once"===e&&n.schedule(()=>i.complete())},s=>{n.schedule(()=>i.error(s))}),"on"===e?{unsubscribe(){null!=o&&r.off(t,o)}}:{unsubscribe(){}}}).pipe((0,Pt.U)(i=>{const{snapshot:o,prevKey:s}=i;let a=null;return o.exists()&&(a=o.key),{type:t,payload:o,prevKey:s,key:a}}),(0,HB.B)())}function BK(r,t){const e=r.length;for(let n=0;n<e;n++)if(r[n].payload.key===t)return n;return-1}function Wpe(r,t){const{payload:e,prevKey:n,key:i}=t,o=BK(r,i),s=function jpe(r,t){if(kK(t))return 0;{const e=BK(r,t);return-1===e?r.length:e+1}}(r,n);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let a=null;t.payload.forEach(d=>{const f={payload:d,type:"value",prevKey:a,key:d.key};return a=d.key,r=[...r,f],!1})}return r;case"child_added":if(o>-1){const a=r[o-1];(a&&a.key||null)!==n&&(r=r.filter(d=>d.payload.key!==e.key)).splice(s,0,t)}else{if(null==n)return[t,...r];(r=r.slice()).splice(s,0,t)}return r;case"child_removed":return r.filter(a=>a.payload.key!==e.key);case"child_changed":return r.map(a=>a.payload.key===i?t:a);case"child_moved":if(o>-1){const a=r.splice(o,1)[0];return(r=r.slice()).splice(s,0,a),r}return r;default:return r}}function UK(r){return(kK(r)||0===r.length)&&(r=["child_added","child_removed","child_changed","child_moved"]),r}function jK(r,t,e){return function Upe(r,t,e){return YD(r,"value","once",e).pipe(Ur(n=>{const i=[Tt(n)];return t.forEach(o=>i.push(YD(r,o,"on",e))),(0,yI.T)(...i).pipe(Xc(Wpe,[]))}),a0())}(r,t=UK(t),e)}function WK(r,t,e){const n=(t=UK(t)).map(i=>YD(r,i,"on",e));return(0,yI.T)(...n)}function $K(r,t){return function(n,i){return HK(n,{stringCase:()=>r.child(n)[t](i),firebaseCase:()=>n[t](i),snapshotCase:()=>n.ref[t](i)})}}function qpe(r){return function(e){return e?HK(e,{stringCase:()=>r.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):r.remove()}}function zK(r,t){return function(){return YD(r,"value","on",t)}}!function Vpe(r){r.INTERNAL.registerComponent(new zs.wA("database-compat",(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new qD(i,n)},"PUBLIC").setServiceProps({Reference:vl,Query:fs,Database:qD,DataSnapshot:fm,enableLogging:Spe,INTERNAL:kpe,ServerValue:Gpe}).setMultipleInstances(!0)),r.registerVersion("@firebase/database-compat","0.3.4")}(Z1.Z);const Qpe=new c.OlP("angularfire2.realtimeDatabaseURL"),Jpe=new c.OlP("angularfire2.database.use-emulator");let Xpe=(()=>{class r{constructor(e,n,i,o,s,a,d,f,g,C,E,T,I,M,k){this.schedulers=a;const W=d,z=(0,Oo.on)(e,s,n);f&&RF(z,s,g,E,T,I,C,M),this.database=(0,Oo.cc)(`${z.name}.database.${i}`,"AngularFireDatabase",z.name,()=>{const J=s.runOutsideAngular(()=>z.database(i||void 0));return W&&J.useEmulator(...W),J},[W])}list(e,n){const i=this.schedulers.ngZone.runOutsideAngular(()=>VK(this.database,e));let o=i;return n&&(o=n(i)),function Ype(r,t){const e=t.schedulers.outsideAngular,n=t.schedulers.ngZone.run(()=>r.ref);return{query:r,update:$K(n,"update"),set:$K(n,"set"),push:i=>n.push(i),remove:qpe(n),snapshotChanges:i=>jK(r,i,e).pipe(ir.iC),stateChanges:i=>WK(r,i,e).pipe(ir.iC),auditTrail:i=>function $pe(r,t,e){return function Kpe(r,t,e){return function zpe(r,t){return YD(r,"value","on",t).pipe((0,Pt.U)(e=>{let n;return e.payload.forEach(i=>(n=i.key,!1)),{data:e,lastKeyToLoad:n}}))}(r,e).pipe(eP(t),(0,Pt.U)(([i,o])=>{const s=i.lastKeyToLoad,a=o.map(d=>d.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),function $ce(r){return(0,Ir.e)((t,e)=>{let n=!1,i=0;t.subscribe((0,X.x)(e,o=>(n||(n=!r(o,i++)))&&e.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Pt.U)(i=>i.actions))}(r,WK(r,t).pipe(Xc((i,o)=>[...i,o],[])),e)}(r,i,e).pipe(ir.iC),valueChanges:(i,o)=>jK(r,i,e).pipe((0,Pt.U)(a=>a.map(d=>o&&o.idField?Object.assign(Object.assign({},d.payload.val()),{[o.idField]:d.key}):d.payload.val())),ir.iC)}}(o,this)}object(e){return function Zpe(r,t){return{query:r,snapshotChanges:()=>zK(r,t.schedulers.outsideAngular)().pipe(ir.iC),update:e=>r.ref.update(e),set:e=>r.ref.set(e),remove:()=>r.ref.remove(),valueChanges:()=>zK(r,t.schedulers.outsideAngular)().pipe(ir.iC,(0,Pt.U)(n=>n.payload.exists()?n.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>VK(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return r.\u0275fac=function(e){return new(e||r)(c.LFG(Oo.Dh),c.LFG(Oo.xv,8),c.LFG(Qpe,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ir.HU),c.LFG(Jpe,8),c.LFG(OI,8),c.LFG(wF,8),c.LFG(SF,8),c.LFG(EF,8),c.LFG(bF,8),c.LFG(DF,8),c.LFG(TF,8),c.LFG(f0,8))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),ege=(()=>{class r{constructor(){RI.Z.registerVersion("angularfire",ir.q4.full,"rtdb-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[Xpe]}),r})();const tge_firebase={apiKey:"AIzaSyDlNBJF8S3G25KemV_5gpFQaqJIK3jG2Us",authDomain:"pushnotificationfcm-fcd57.firebaseapp.com",databaseURL:"https://pushnotificationfcm-fcd57.firebaseapp.com",projectId:"pushnotificationfcm-fcd57",storageBucket:"pushnotificationfcm-fcd57.appspot.com",messagingSenderId:"131966996029",appId:"1:131966996029:web:2d1406819b6d4c43b02454",measurementId:"G-0F2ZN2QM9L"};let nge=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=c.oAB({type:r,bootstrap:[$re]}),r.\u0275inj=c.cJS({imports:[ma,Wre,eue,_5,Vre,Oo.hO.initializeApp(tge_firebase),uY,vY,Wce,ege]}),r})();Vl().bootstrapModule(nge).catch(r=>console.error(r))},9751:(Lt,Le,U)=>{U.d(Le,{y:()=>Se});var c=U(930),se=U(727),B=U(8822),ge=U(9635),de=U(2416),he=U(576),Oe=U(2806);let Se=(()=>{class ie{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const ct=new ie;return ct.source=this,ct.operator=Be,ct}subscribe(Be,ct,Ft){const De=function Q(ie){return ie&&ie instanceof c.Lv||function Z(ie){return ie&&(0,he.m)(ie.next)&&(0,he.m)(ie.error)&&(0,he.m)(ie.complete)}(ie)&&(0,se.Nn)(ie)}(Be)?Be:new c.Hp(Be,ct,Ft);return(0,Oe.x)(()=>{const{operator:Ge,source:Ve}=this;De.add(Ge?Ge.call(De,Ve):Ve?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Be){try{return this._subscribe(Be)}catch(ct){Be.error(ct)}}forEach(Be,ct){return new(ct=_e(ct))((Ft,De)=>{const Ge=new c.Hp({next:Ve=>{try{Be(Ve)}catch(nt){De(nt),Ge.unsubscribe()}},error:De,complete:Ft});this.subscribe(Ge)})}_subscribe(Be){var ct;return null===(ct=this.source)||void 0===ct?void 0:ct.subscribe(Be)}[B.L](){return this}pipe(...Be){return(0,ge.U)(Be)(this)}toPromise(Be){return new(Be=_e(Be))((ct,Ft)=>{let De;this.subscribe(Ge=>De=Ge,Ge=>Ft(Ge),()=>ct(De))})}}return ie.create=at=>new ie(at),ie})();function _e(ie){var at;return null!==(at=ie??de.v.Promise)&&void 0!==at?at:Promise}},7579:(Lt,Le,U)=>{U.d(Le,{x:()=>Oe});var c=U(9751),se=U(727);const ge=(0,U(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=U(8737),he=U(2806);let Oe=(()=>{class _e extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const ie=new Se(this,this);return ie.operator=Q,ie}_throwIfClosed(){if(this.closed)throw new ge}next(Q){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(Q)}})}error(Q){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:ie}=this;for(;ie.length;)ie.shift().error(Q)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:ie,isStopped:at,observers:Be}=this;return ie||at?se.Lc:(this.currentObservers=null,Be.push(Q),new se.w0(()=>{this.currentObservers=null,(0,de.P)(Be,Q)}))}_checkFinalizedStatuses(Q){const{hasError:ie,thrownError:at,isStopped:Be}=this;ie?Q.error(at):Be&&Q.complete()}asObservable(){const Q=new c.y;return Q.source=this,Q}}return _e.create=(Z,Q)=>new Se(Z,Q),_e})();class Se extends Oe{constructor(Z,Q){super(),this.destination=Z,this.source=Q}next(Z){var Q,ie;null===(ie=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===ie||ie.call(Q,Z)}error(Z){var Q,ie;null===(ie=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===ie||ie.call(Q,Z)}complete(){var Z,Q;null===(Q=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===Q||Q.call(Z)}_subscribe(Z){var Q,ie;return null!==(ie=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(Z))&&void 0!==ie?ie:se.Lc}}},930:(Lt,Le,U)=>{U.d(Le,{Hp:()=>Ft,Lv:()=>ie});var c=U(576),se=U(727),B=U(2416),ge=U(7849),de=U(5032);const he=_e("C",void 0,void 0);function _e(ke,Ie,Ue){return{kind:ke,value:Ie,error:Ue}}var Z=U(3410),Q=U(2806);class ie extends se.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,se.Nn)(Ie)&&Ie.add(this)):this.destination=nt}static create(Ie,Ue,it){return new Ft(Ie,Ue,it)}next(Ie){this.isStopped?Ve(function Se(ke){return _e("N",ke,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Ve(function Oe(ke){return _e("E",void 0,ke)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Ve(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function Be(ke,Ie){return at.call(ke,Ie)}class ct{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Ue}=this;if(Ue.next)try{Ue.next(Ie)}catch(it){De(it)}}error(Ie){const{partialObserver:Ue}=this;if(Ue.error)try{Ue.error(Ie)}catch(it){De(it)}else De(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Ue){De(Ue)}}}class Ft extends ie{constructor(Ie,Ue,it){let Ze;if(super(),(0,c.m)(Ie)||!Ie)Ze={next:Ie??void 0,error:Ue??void 0,complete:it??void 0};else{let q;this&&B.v.useDeprecatedNextContext?(q=Object.create(Ie),q.unsubscribe=()=>this.unsubscribe(),Ze={next:Ie.next&&Be(Ie.next,q),error:Ie.error&&Be(Ie.error,q),complete:Ie.complete&&Be(Ie.complete,q)}):Ze=Ie}this.destination=new ct(Ze)}}function De(ke){B.v.useDeprecatedSynchronousErrorHandling?(0,Q.O)(ke):(0,ge.h)(ke)}function Ve(ke,Ie){const{onStoppedNotification:Ue}=B.v;Ue&&Z.z.setTimeout(()=>Ue(ke,Ie))}const nt={closed:!0,next:de.Z,error:function Ge(ke){throw ke},complete:de.Z}},727:(Lt,Le,U)=>{U.d(Le,{Lc:()=>he,w0:()=>de,Nn:()=>Oe});var c=U(576);const B=(0,U(3888).d)(_e=>function(Q){_e(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((ie,at)=>`${at+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var ge=U(8737);class de{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const Be of Q)Be.remove(this);else Q.remove(this);const{initialTeardown:ie}=this;if((0,c.m)(ie))try{ie()}catch(Be){Z=Be instanceof B?Be.errors:[Be]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const Be of at)try{Se(Be)}catch(ct){Z=Z??[],ct instanceof B?Z=[...Z,...ct.errors]:Z.push(ct)}}if(Z)throw new B(Z)}}add(Z){var Q;if(Z&&Z!==this)if(this.closed)Se(Z);else{if(Z instanceof de){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(Q=this._finalizers)&&void 0!==Q?Q:[]).push(Z)}}_hasParent(Z){const{_parentage:Q}=this;return Q===Z||Array.isArray(Q)&&Q.includes(Z)}_addParent(Z){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(Z),Q):Q?[Q,Z]:Z}_removeParent(Z){const{_parentage:Q}=this;Q===Z?this._parentage=null:Array.isArray(Q)&&(0,ge.P)(Q,Z)}remove(Z){const{_finalizers:Q}=this;Q&&(0,ge.P)(Q,Z),Z instanceof de&&Z._removeParent(this)}}de.EMPTY=(()=>{const _e=new de;return _e.closed=!0,_e})();const he=de.EMPTY;function Oe(_e){return _e instanceof de||_e&&"closed"in _e&&(0,c.m)(_e.remove)&&(0,c.m)(_e.add)&&(0,c.m)(_e.unsubscribe)}function Se(_e){(0,c.m)(_e)?_e():_e.unsubscribe()}},2416:(Lt,Le,U)=>{U.d(Le,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Lt,Le,U)=>{U.d(Le,{E:()=>se});const se=new(U(9751).y)(de=>de.complete())},8996:(Lt,Le,U)=>{U.d(Le,{D:()=>Ie});var c=U(8421),se=U(5363),B=U(9468),he=U(9751),Se=U(2202),_e=U(576),Z=U(9672);function ie(Ue,it){if(!Ue)throw new Error("Iterable cannot be null");return new he.y(Ze=>{(0,Z.f)(Ze,it,()=>{const q=Ue[Symbol.asyncIterator]();(0,Z.f)(Ze,it,()=>{q.next().then(Pe=>{Pe.done?Ze.complete():Ze.next(Pe.value)})},0,!0)})})}var at=U(3670),Be=U(8239),ct=U(1144),Ft=U(6495),De=U(2206),Ge=U(4532),Ve=U(3260);function Ie(Ue,it){return it?function ke(Ue,it){if(null!=Ue){if((0,at.c)(Ue))return function ge(Ue,it){return(0,c.Xf)(Ue).pipe((0,B.R)(it),(0,se.Q)(it))}(Ue,it);if((0,ct.z)(Ue))return function Oe(Ue,it){return new he.y(Ze=>{let q=0;return it.schedule(function(){q===Ue.length?Ze.complete():(Ze.next(Ue[q++]),Ze.closed||this.schedule())})})}(Ue,it);if((0,Be.t)(Ue))return function de(Ue,it){return(0,c.Xf)(Ue).pipe((0,B.R)(it),(0,se.Q)(it))}(Ue,it);if((0,De.D)(Ue))return ie(Ue,it);if((0,Ft.T)(Ue))return function Q(Ue,it){return new he.y(Ze=>{let q;return(0,Z.f)(Ze,it,()=>{q=Ue[Se.h](),(0,Z.f)(Ze,it,()=>{let Pe,tt;try{({value:Pe,done:tt}=q.next())}catch(dt){return void Ze.error(dt)}tt?Ze.complete():Ze.next(Pe)},0,!0)}),()=>(0,_e.m)(q?.return)&&q.return()})}(Ue,it);if((0,Ve.L)(Ue))return function nt(Ue,it){return ie((0,Ve.Q)(Ue),it)}(Ue,it)}throw(0,Ge.z)(Ue)}(Ue,it):(0,c.Xf)(Ue)}},8421:(Lt,Le,U)=>{U.d(Le,{Xf:()=>at});var c=U(655),se=U(1144),B=U(8239),ge=U(9751),de=U(3670),he=U(2206),Oe=U(4532),Se=U(6495),_e=U(3260),Z=U(576),Q=U(7849),ie=U(8822);function at(ke){if(ke instanceof ge.y)return ke;if(null!=ke){if((0,de.c)(ke))return function Be(ke){return new ge.y(Ie=>{const Ue=ke[ie.L]();if((0,Z.m)(Ue.subscribe))return Ue.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,se.z)(ke))return function ct(ke){return new ge.y(Ie=>{for(let Ue=0;Ue<ke.length&&!Ie.closed;Ue++)Ie.next(ke[Ue]);Ie.complete()})}(ke);if((0,B.t)(ke))return function Ft(ke){return new ge.y(Ie=>{ke.then(Ue=>{Ie.closed||(Ie.next(Ue),Ie.complete())},Ue=>Ie.error(Ue)).then(null,Q.h)})}(ke);if((0,he.D)(ke))return Ge(ke);if((0,Se.T)(ke))return function De(ke){return new ge.y(Ie=>{for(const Ue of ke)if(Ie.next(Ue),Ie.closed)return;Ie.complete()})}(ke);if((0,_e.L)(ke))return function Ve(ke){return Ge((0,_e.Q)(ke))}(ke)}throw(0,Oe.z)(ke)}function Ge(ke){return new ge.y(Ie=>{(function nt(ke,Ie){var Ue,it,Ze,q;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ue=(0,c.KL)(ke);!(it=yield Ue.next()).done;)if(Ie.next(it.value),Ie.closed)return}catch(Pe){Ze={error:Pe}}finally{try{it&&!it.done&&(q=Ue.return)&&(yield q.call(Ue))}finally{if(Ze)throw Ze.error}}Ie.complete()})})(ke,Ie).catch(Ue=>Ie.error(Ue))})}},6451:(Lt,Le,U)=>{U.d(Le,{T:()=>he});var c=U(8189),se=U(8421),B=U(515),ge=U(3269),de=U(8996);function he(...Oe){const Se=(0,ge.yG)(Oe),_e=(0,ge._6)(Oe,1/0),Z=Oe;return Z.length?1===Z.length?(0,se.Xf)(Z[0]):(0,c.J)(_e)((0,de.D)(Z,Se)):B.E}},5403:(Lt,Le,U)=>{U.d(Le,{x:()=>se});var c=U(930);function se(ge,de,he,Oe,Se){return new B(ge,de,he,Oe,Se)}class B extends c.Lv{constructor(de,he,Oe,Se,_e,Z){super(de),this.onFinalize=_e,this.shouldUnsubscribe=Z,this._next=he?function(Q){try{he(Q)}catch(ie){de.error(ie)}}:super._next,this._error=Se?function(Q){try{Se(Q)}catch(ie){de.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(Q){de.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(Lt,Le,U)=>{U.d(Le,{U:()=>B});var c=U(4482),se=U(5403);function B(ge,de){return(0,c.e)((he,Oe)=>{let Se=0;he.subscribe((0,se.x)(Oe,_e=>{Oe.next(ge.call(de,_e,Se++))}))})}},8189:(Lt,Le,U)=>{U.d(Le,{J:()=>B});var c=U(5577),se=U(4671);function B(ge=1/0){return(0,c.z)(se.y,ge)}},5577:(Lt,Le,U)=>{U.d(Le,{z:()=>Se});var c=U(4004),se=U(8421),B=U(4482),ge=U(9672),de=U(5403),Oe=U(576);function Se(_e,Z,Q=1/0){return(0,Oe.m)(Z)?Se((ie,at)=>(0,c.U)((Be,ct)=>Z(ie,Be,at,ct))((0,se.Xf)(_e(ie,at))),Q):("number"==typeof Z&&(Q=Z),(0,B.e)((ie,at)=>function he(_e,Z,Q,ie,at,Be,ct,Ft){const De=[];let Ge=0,Ve=0,nt=!1;const ke=()=>{nt&&!De.length&&!Ge&&Z.complete()},Ie=it=>Ge<ie?Ue(it):De.push(it),Ue=it=>{Be&&Z.next(it),Ge++;let Ze=!1;(0,se.Xf)(Q(it,Ve++)).subscribe((0,de.x)(Z,q=>{at?.(q),Be?Ie(q):Z.next(q)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(Ge--;De.length&&Ge<ie;){const q=De.shift();ct?(0,ge.f)(Z,ct,()=>Ue(q)):Ue(q)}ke()}catch(q){Z.error(q)}}))};return _e.subscribe((0,de.x)(Z,Ie,()=>{nt=!0,ke()})),()=>{Ft?.()}}(ie,at,_e,Q)))}},5363:(Lt,Le,U)=>{U.d(Le,{Q:()=>ge});var c=U(9672),se=U(4482),B=U(5403);function ge(de,he=0){return(0,se.e)((Oe,Se)=>{Oe.subscribe((0,B.x)(Se,_e=>(0,c.f)(Se,de,()=>Se.next(_e),he),()=>(0,c.f)(Se,de,()=>Se.complete(),he),_e=>(0,c.f)(Se,de,()=>Se.error(_e),he)))})}},3099:(Lt,Le,U)=>{U.d(Le,{B:()=>de});var c=U(8421),se=U(7579),B=U(930),ge=U(4482);function de(Oe={}){const{connector:Se=(()=>new se.x),resetOnError:_e=!0,resetOnComplete:Z=!0,resetOnRefCountZero:Q=!0}=Oe;return ie=>{let at,Be,ct,Ft=0,De=!1,Ge=!1;const Ve=()=>{Be?.unsubscribe(),Be=void 0},nt=()=>{Ve(),at=ct=void 0,De=Ge=!1},ke=()=>{const Ie=at;nt(),Ie?.unsubscribe()};return(0,ge.e)((Ie,Ue)=>{Ft++,!Ge&&!De&&Ve();const it=ct=ct??Se();Ue.add(()=>{Ft--,0===Ft&&!Ge&&!De&&(Be=he(ke,Q))}),it.subscribe(Ue),!at&&Ft>0&&(at=new B.Hp({next:Ze=>it.next(Ze),error:Ze=>{Ge=!0,Ve(),Be=he(nt,_e,Ze),it.error(Ze)},complete:()=>{De=!0,Ve(),Be=he(nt,Z),it.complete()}}),(0,c.Xf)(Ie).subscribe(at))})(ie)}}function he(Oe,Se,..._e){if(!0===Se)return void Oe();if(!1===Se)return;const Z=new B.Hp({next:()=>{Z.unsubscribe(),Oe()}});return(0,c.Xf)(Se(..._e)).subscribe(Z)}},9468:(Lt,Le,U)=>{U.d(Le,{R:()=>se});var c=U(4482);function se(B,ge=0){return(0,c.e)((de,he)=>{he.add(B.schedule(()=>de.subscribe(he),ge))})}},8505:(Lt,Le,U)=>{U.d(Le,{b:()=>de});var c=U(576),se=U(4482),B=U(5403),ge=U(4671);function de(he,Oe,Se){const _e=(0,c.m)(he)||Oe||Se?{next:he,error:Oe,complete:Se}:he;return _e?(0,se.e)((Z,Q)=>{var ie;null===(ie=_e.subscribe)||void 0===ie||ie.call(_e);let at=!0;Z.subscribe((0,B.x)(Q,Be=>{var ct;null===(ct=_e.next)||void 0===ct||ct.call(_e,Be),Q.next(Be)},()=>{var Be;at=!1,null===(Be=_e.complete)||void 0===Be||Be.call(_e),Q.complete()},Be=>{var ct;at=!1,null===(ct=_e.error)||void 0===ct||ct.call(_e,Be),Q.error(Be)},()=>{var Be,ct;at&&(null===(Be=_e.unsubscribe)||void 0===Be||Be.call(_e)),null===(ct=_e.finalize)||void 0===ct||ct.call(_e)}))}):ge.y}},4408:(Lt,Le,U)=>{U.d(Le,{o:()=>de});var c=U(727);class se extends c.w0{constructor(Oe,Se){super()}schedule(Oe,Se=0){return this}}const B={setInterval(he,Oe,...Se){const{delegate:_e}=B;return _e?.setInterval?_e.setInterval(he,Oe,...Se):setInterval(he,Oe,...Se)},clearInterval(he){const{delegate:Oe}=B;return(Oe?.clearInterval||clearInterval)(he)},delegate:void 0};var ge=U(8737);class de extends se{constructor(Oe,Se){super(Oe,Se),this.scheduler=Oe,this.work=Se,this.pending=!1}schedule(Oe,Se=0){var _e;if(this.closed)return this;this.state=Oe;const Z=this.id,Q=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(Q,Z,Se)),this.pending=!0,this.delay=Se,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(Q,this.id,Se),this}requestAsyncId(Oe,Se,_e=0){return B.setInterval(Oe.flush.bind(Oe,this),_e)}recycleAsyncId(Oe,Se,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return Se;null!=Se&&B.clearInterval(Se)}execute(Oe,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(Oe,Se);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Se){let Z,_e=!1;try{this.work(Oe)}catch(Q){_e=!0,Z=Q||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Se}=this,{actions:_e}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ge.P)(_e,this),null!=Oe&&(this.id=this.recycleAsyncId(Se,Oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Lt,Le,U)=>{U.d(Le,{v:()=>B});var c=U(6063);class se{constructor(de,he=se.now){this.schedulerActionCtor=de,this.now=he}schedule(de,he=0,Oe){return new this.schedulerActionCtor(this,de).schedule(Oe,he)}}se.now=c.l.now;class B extends se{constructor(de,he=se.now){super(de,he),this.actions=[],this._active=!1}flush(de){const{actions:he}=this;if(this._active)return void he.push(de);let Oe;this._active=!0;do{if(Oe=de.execute(de.state,de.delay))break}while(de=he.shift());if(this._active=!1,Oe){for(;de=he.shift();)de.unsubscribe();throw Oe}}}},4986:(Lt,Le,U)=>{U.d(Le,{P:()=>ge,z:()=>B});var c=U(4408);const B=new(U(7565).v)(c.o),ge=B},6063:(Lt,Le,U)=>{U.d(Le,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Lt,Le,U)=>{U.d(Le,{z:()=>c});const c={setTimeout(se,B,...ge){const{delegate:de}=c;return de?.setTimeout?de.setTimeout(se,B,...ge):setTimeout(se,B,...ge)},clearTimeout(se){const{delegate:B}=c;return(B?.clearTimeout||clearTimeout)(se)},delegate:void 0}},2202:(Lt,Le,U)=>{U.d(Le,{h:()=>se});const se=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Lt,Le,U)=>{U.d(Le,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Lt,Le,U)=>{U.d(Le,{_6:()=>he,jO:()=>ge,yG:()=>de});var c=U(576),se=U(3532);function B(Oe){return Oe[Oe.length-1]}function ge(Oe){return(0,c.m)(B(Oe))?Oe.pop():void 0}function de(Oe){return(0,se.K)(B(Oe))?Oe.pop():void 0}function he(Oe,Se){return"number"==typeof B(Oe)?Oe.pop():Se}},8737:(Lt,Le,U)=>{function c(se,B){if(se){const ge=se.indexOf(B);0<=ge&&se.splice(ge,1)}}U.d(Le,{P:()=>c})},3888:(Lt,Le,U)=>{function c(se){const ge=se(de=>{Error.call(de),de.stack=(new Error).stack});return ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge}U.d(Le,{d:()=>c})},2806:(Lt,Le,U)=>{U.d(Le,{O:()=>ge,x:()=>B});var c=U(2416);let se=null;function B(de){if(c.v.useDeprecatedSynchronousErrorHandling){const he=!se;if(he&&(se={errorThrown:!1,error:null}),de(),he){const{errorThrown:Oe,error:Se}=se;if(se=null,Oe)throw Se}}else de()}function ge(de){c.v.useDeprecatedSynchronousErrorHandling&&se&&(se.errorThrown=!0,se.error=de)}},9672:(Lt,Le,U)=>{function c(se,B,ge,de=0,he=!1){const Oe=B.schedule(function(){ge(),he?se.add(this.schedule(null,de)):this.unsubscribe()},de);if(se.add(Oe),!he)return Oe}U.d(Le,{f:()=>c})},4671:(Lt,Le,U)=>{function c(se){return se}U.d(Le,{y:()=>c})},1144:(Lt,Le,U)=>{U.d(Le,{z:()=>c});const c=se=>se&&"number"==typeof se.length&&"function"!=typeof se},2206:(Lt,Le,U)=>{U.d(Le,{D:()=>se});var c=U(576);function se(B){return Symbol.asyncIterator&&(0,c.m)(B?.[Symbol.asyncIterator])}},576:(Lt,Le,U)=>{function c(se){return"function"==typeof se}U.d(Le,{m:()=>c})},3670:(Lt,Le,U)=>{U.d(Le,{c:()=>B});var c=U(8822),se=U(576);function B(ge){return(0,se.m)(ge[c.L])}},6495:(Lt,Le,U)=>{U.d(Le,{T:()=>B});var c=U(2202),se=U(576);function B(ge){return(0,se.m)(ge?.[c.h])}},8239:(Lt,Le,U)=>{U.d(Le,{t:()=>se});var c=U(576);function se(B){return(0,c.m)(B?.then)}},3260:(Lt,Le,U)=>{U.d(Le,{L:()=>ge,Q:()=>B});var c=U(655),se=U(576);function B(de){return(0,c.FC)(this,arguments,function*(){const Oe=de.getReader();try{for(;;){const{value:Se,done:_e}=yield(0,c.qq)(Oe.read());if(_e)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Se)}}finally{Oe.releaseLock()}})}function ge(de){return(0,se.m)(de?.getReader)}},3532:(Lt,Le,U)=>{U.d(Le,{K:()=>se});var c=U(576);function se(B){return B&&(0,c.m)(B.schedule)}},4482:(Lt,Le,U)=>{U.d(Le,{A:()=>se,e:()=>B});var c=U(576);function se(ge){return(0,c.m)(ge?.lift)}function B(ge){return de=>{if(se(de))return de.lift(function(he){try{return ge(he,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Lt,Le,U)=>{function c(){}U.d(Le,{Z:()=>c})},9635:(Lt,Le,U)=>{U.d(Le,{U:()=>B,z:()=>se});var c=U(4671);function se(...ge){return B(ge)}function B(ge){return 0===ge.length?c.y:1===ge.length?ge[0]:function(he){return ge.reduce((Oe,Se)=>Se(Oe),he)}}},7849:(Lt,Le,U)=>{U.d(Le,{h:()=>B});var c=U(2416),se=U(3410);function B(ge){se.z.setTimeout(()=>{const{onUnhandledError:de}=c.v;if(!de)throw ge;de(ge)})}},4532:(Lt,Le,U)=>{function c(se){return new TypeError(`You provided ${null!==se&&"object"==typeof se?"an invalid object":`'${se}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Le,{z:()=>c})},655:(Lt,Le,U)=>{function ge(ve,Ee){var Ae={};for(var je in ve)Object.prototype.hasOwnProperty.call(ve,je)&&Ee.indexOf(je)<0&&(Ae[je]=ve[je]);if(null!=ve&&"function"==typeof Object.getOwnPropertySymbols){var et=0;for(je=Object.getOwnPropertySymbols(ve);et<je.length;et++)Ee.indexOf(je[et])<0&&Object.prototype.propertyIsEnumerable.call(ve,je[et])&&(Ae[je[et]]=ve[je[et]])}return Ae}function ie(ve,Ee,Ae,je){return new(Ae||(Ae=Promise))(function(st,yt){function gt(Nn){try{$t(je.next(Nn))}catch(_t){yt(_t)}}function Gn(Nn){try{$t(je.throw(Nn))}catch(_t){yt(_t)}}function $t(Nn){Nn.done?st(Nn.value):function et(st){return st instanceof Ae?st:new Ae(function(yt){yt(st)})}(Nn.value).then(gt,Gn)}$t((je=je.apply(ve,Ee||[])).next())})}function ke(ve){return this instanceof ke?(this.v=ve,this):new ke(ve)}function Ie(ve,Ee,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,je=Ae.apply(ve,Ee||[]),st=[];return et={},yt("next"),yt("throw"),yt("return"),et[Symbol.asyncIterator]=function(){return this},et;function yt(qt){je[qt]&&(et[qt]=function(Pr){return new Promise(function(Xn,sr){st.push([qt,Pr,Xn,sr])>1||gt(qt,Pr)})})}function gt(qt,Pr){try{!function Gn(qt){qt.value instanceof ke?Promise.resolve(qt.value.v).then($t,Nn):_t(st[0][2],qt)}(je[qt](Pr))}catch(Xn){_t(st[0][3],Xn)}}function $t(qt){gt("next",qt)}function Nn(qt){gt("throw",qt)}function _t(qt,Pr){qt(Pr),st.shift(),st.length&&gt(st[0][0],st[0][1])}}function it(ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Ee=ve[Symbol.asyncIterator];return Ee?Ee.call(ve):(ve=function Ft(ve){var Ee="function"==typeof Symbol&&Symbol.iterator,Ae=Ee&&ve[Ee],je=0;if(Ae)return Ae.call(ve);if(ve&&"number"==typeof ve.length)return{next:function(){return ve&&je>=ve.length&&(ve=void 0),{value:ve&&ve[je++],done:!ve}}};throw new TypeError(Ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(ve),Ae={},je("next"),je("throw"),je("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function je(st){Ae[st]=ve[st]&&function(yt){return new Promise(function(gt,Gn){!function et(st,yt,gt,Gn){Promise.resolve(Gn).then(function($t){st({value:$t,done:gt})},yt)}(gt,Gn,(yt=ve[st](yt)).done,yt.value)})}}}U.d(Le,{FC:()=>Ie,KL:()=>it,_T:()=>ge,mG:()=>ie,qq:()=>ke})},4650:(Lt,Le,U)=>{U.d(Le,{$8M:()=>qc,$WT:()=>aa,$Z:()=>xT,AFp:()=>ZC,ALo:()=>zv,AaK:()=>Se,BQk:()=>wv,CHM:()=>Vc,CRH:()=>lO,CZH:()=>Bd,CqO:()=>iR,D6c:()=>QO,EJc:()=>Rg,EpF:()=>ng,F$t:()=>wE,F4k:()=>RC,FYo:()=>gT,FiY:()=>Xo,Gf:()=>Zv,GfV:()=>mT,Gpc:()=>Q,Hsn:()=>Gr,Ikx:()=>We,JOm:()=>jo,KtG:()=>Cm,LFG:()=>ht,LMc:()=>Kb,Lbi:()=>ux,Lck:()=>$R,MAs:()=>rR,MGl:()=>yd,MMx:()=>rb,MT6:()=>WE,NdJ:()=>_E,OlP:()=>cr,Oqu:()=>ug,P3R:()=>NS,PXZ:()=>xb,Q6J:()=>yv,QGY:()=>nc,Qsj:()=>SN,QtT:()=>jR,R0b:()=>qs,RDi:()=>RS,Rgc:()=>lc,SBq:()=>Xu,SDv:()=>kC,Sil:()=>OO,Suo:()=>aO,TTD:()=>Ba,TgZ:()=>_v,Tol:()=>PE,Udp:()=>IE,VKq:()=>ub,W1O:()=>_b,WLB:()=>cb,X6Q:()=>Ng,XFs:()=>be,Xpm:()=>Tc,Xts:()=>hd,Y36:()=>Wp,YKP:()=>vg,YNc:()=>eg,Yjl:()=>vh,Yz7:()=>_t,Z0I:()=>sr,ZZ4:()=>ly,_Bn:()=>Nd,_UZ:()=>TC,_Vd:()=>pd,_c5:()=>ZO,_uU:()=>GE,aQg:()=>zb,c2e:()=>dx,cJS:()=>Pr,cg1:()=>KE,dDg:()=>_x,dqk:()=>Yt,eFA:()=>oy,eJc:()=>bg,ekj:()=>AE,eoX:()=>Ig,f3M:()=>It,g9A:()=>Ob,h0i:()=>Md,hGG:()=>Rx,hij:()=>Pv,iGM:()=>yb,ifc:()=>ue,ip1:()=>TO,jDz:()=>ib,kEZ:()=>JR,kL8:()=>TR,lG2:()=>mh,lcZ:()=>ru,lqb:()=>gf,lri:()=>MO,n5z:()=>Sp,oAB:()=>Oc,oxw:()=>Ev,pQV:()=>Pf,q4F:()=>BS,qLn:()=>ev,qOj:()=>Yi,qZA:()=>Cv,rWj:()=>xO,s9C:()=>rg,sBO:()=>GO,s_b:()=>Yv,soG:()=>sl,tb:()=>ew,tp0:()=>O,uIk:()=>fE,vHH:()=>De,vpe:()=>jr,wAp:()=>en,xp6:()=>DT,ynx:()=>md,z2F:()=>Hf,zSh:()=>LS,zW0:()=>_C,zs3:()=>Up});var c=U(7579),se=U(727),B=U(9751),ge=U(6451),de=U(3099);function he(l){for(let u in l)if(l[u]===he)return u;throw Error("Could not find renamed property on target object.")}function Oe(l,u){for(const h in u)u.hasOwnProperty(h)&&!l.hasOwnProperty(h)&&(l[h]=u[h])}function Se(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(Se).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const u=l.toString();if(null==u)return""+u;const h=u.indexOf("\n");return-1===h?u:u.substring(0,h)}function _e(l,u){return null==l||""===l?null===u?"":u:null==u||""===u?l:l+" "+u}const Z=he({__forward_ref__:he});function Q(l){return l.__forward_ref__=Q,l.toString=function(){return Se(this())},l}function ie(l){return at(l)?l():l}function at(l){return"function"==typeof l&&l.hasOwnProperty(Z)&&l.__forward_ref__===Q}function Be(l){return l&&!!l.\u0275providers}const Ft="https://g.co/ng/security#xss";class De extends Error{constructor(u,h){super(Ge(u,h)),this.code=u}}function Ge(l,u){return`NG0${Math.abs(l)}${u?": "+u.trim():""}`}function Ve(l){return"string"==typeof l?l:null==l?"":String(l)}function it(l,u){throw new De(-201,!1)}function gt(l,u,h,p){throw new Error(`ASSERTION ERROR: ${l}`+(null==p?"":` [Expected=> ${h} ${p} ${u} <=Actual]`))}function _t(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function Pr(l){return{providers:l.providers||[],imports:l.imports||[]}}function Xn(l){return mr(l,ae)||mr(l,pe)}function sr(l){return null!==Xn(l)}function mr(l,u){return l.hasOwnProperty(u)?l[u]:null}function Gi(l){return l&&(l.hasOwnProperty(oe)||l.hasOwnProperty(xe))?l[oe]:null}const ae=he({\u0275prov:he}),oe=he({\u0275inj:he}),pe=he({ngInjectableDef:he}),xe=he({ngInjectorDef:he});var be=(()=>((be=be||{})[be.Default=0]="Default",be[be.Host=1]="Host",be[be.Self=2]="Self",be[be.SkipSelf=4]="SkipSelf",be[be.Optional=8]="Optional",be))();let wt;function Jt(l){const u=wt;return wt=l,u}function un(l,u,h){const p=Xn(l);return p&&"root"==p.providedIn?void 0===p.value?p.value=p.factory():p.value:h&be.Optional?null:void 0!==u?u:void it(Se(l))}const Yt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tn={},lr="__NG_DI_FLAG__",An="ngTempTokenPath",Nr="ngTokenPath",sa=/\n/gm,Hn="\u0275",No="__source";let Pn;function io(l){const u=Pn;return Pn=l,u}function gs(l,u=be.Default){if(void 0===Pn)throw new De(-203,!1);return null===Pn?un(l,void 0,u):Pn.get(l,u&be.Optional?null:void 0,u)}function ht(l,u=be.Default){return(function Kn(){return wt}()||gs)(ie(l),u)}function It(l,u=be.Default){return ht(l,Xt(u))}function Xt(l){return typeof l>"u"||"number"==typeof l?l:0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)}function sn(l){const u=[];for(let h=0;h<l.length;h++){const p=ie(l[h]);if(Array.isArray(p)){if(0===p.length)throw new De(900,!1);let m,_=be.Default;for(let S=0;S<p.length;S++){const D=p[S],R=Vi(D);"number"==typeof R?-1===R?m=D.token:_|=R:m=D}u.push(ht(m,_))}else u.push(ht(p))}return u}function pn(l,u){return l[lr]=u,l.prototype[lr]=u,l}function Vi(l){return l[lr]}function te(l){return{toString:l}.toString()}var Ne=(()=>((Ne=Ne||{})[Ne.OnPush=0]="OnPush",Ne[Ne.Default=1]="Default",Ne))(),ue=(()=>{return(l=ue||(ue={}))[l.Emulated=0]="Emulated",l[l.None=2]="None",l[l.ShadowDom=3]="ShadowDom",ue;var l})();const Et={},mt=[],er=he({\u0275cmp:he}),Dr=he({\u0275dir:he}),Mr=he({\u0275pipe:he}),ii=he({\u0275mod:he}),cn=he({\u0275fac:he}),oo=he({__NG_ELEMENT_ID__:he});let ms=0;function Tc(l){return te(()=>{const u=Hi(l),h={...u,decls:l.decls,vars:l.vars,template:l.template,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,onPush:l.changeDetection===Ne.OnPush,directiveDefs:null,pipeDefs:null,dependencies:u.standalone&&l.dependencies||null,getStandaloneInjector:null,data:l.data||{},encapsulation:l.encapsulation||ue.Emulated,id:"c"+ms++,styles:l.styles||mt,_:null,schemas:l.schemas||null,tView:null};Ic(h);const p=l.dependencies;return h.directiveDefs=Fa(p,!1),h.pipeDefs=Fa(p,!0),h})}function gh(l){return Mn(l)||qr(l)}function Rc(l){return null!==l}function Oc(l){return te(()=>({type:l.type,bootstrap:l.bootstrap||mt,declarations:l.declarations||mt,imports:l.imports||mt,exports:l.exports||mt,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null}))}function xr(l,u){if(null==l)return Et;const h={};for(const p in l)if(l.hasOwnProperty(p)){let m=l[p],_=m;Array.isArray(m)&&(_=m[1],m=m[0]),h[m]=p,u&&(u[m]=_)}return h}function mh(l){return te(()=>{const u=Hi(l);return Ic(u),u})}function vh(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,standalone:!0===l.standalone,onDestroy:l.type.prototype.ngOnDestroy||null}}function Mn(l){return l[er]||null}function qr(l){return l[Dr]||null}function _i(l){return l[Mr]||null}function aa(l){const u=Mn(l)||qr(l)||_i(l);return null!==u&&u.standalone}function oi(l,u){const h=l[ii]||null;if(!h&&!0===u)throw new Error(`Type ${Se(l)} does not have '\u0275mod' property.`);return h}function Hi(l){const u={};return{type:l.type,providersResolver:null,factory:null,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:u,exportAs:l.exportAs||null,standalone:!0===l.standalone,selectors:l.selectors||mt,viewQuery:l.viewQuery||null,features:l.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:xr(l.inputs,u),outputs:xr(l.outputs)}}function Ic(l){l.features?.forEach(u=>u(l))}function Fa(l,u){if(!l)return null;const h=u?_i:gh;return()=>("function"==typeof l?l():l).map(p=>h(p)).filter(Rc)}const Mo=0,Dt=1,dn=2,ur=3,fo=4,vs=5,$n=6,La=7,Sr=8,Yr=9,Su=10,vn=11,_l=12,Cl=13,ka=14,Eu=15,Ci=16,wl=17,la=18,so=19,Tr=20,yh=21,On=22,_h=1,Ac=2,Ga=7,xo=8,Sl=9,wi=10;function po(l){return Array.isArray(l)&&"object"==typeof l[_h]}function go(l){return Array.isArray(l)&&!0===l[_h]}function Fs(l){return 0!=(4&l.flags)}function Pc(l){return l.componentOffset>-1}function El(l){return 1==(1&l.flags)}function Bi(l){return!!l.template}function ip(l){return 0!=(256&l[dn])}function mo(l,u){return l.hasOwnProperty(cn)?l[cn]:null}class lp{constructor(u,h,p){this.previousValue=u,this.currentValue=h,this.firstChange=p}isFirstChange(){return this.firstChange}}function Ba(){return Du}function Du(l){return l.type.prototype.ngOnChanges&&(l.setInput=Tl),Dl}function Dl(){const l=bh(this),u=l?.current;if(u){const h=l.previous;if(h===Et)l.previous=u;else for(let p in u)h[p]=u[p];l.current=null,this.ngOnChanges(u)}}function Tl(l,u,h,p){const m=this.declaredInputs[h],_=bh(l)||function xc(l,u){return l[Tu]=u}(l,{previous:Et,current:null}),S=_.current||(_.current={}),D=_.previous,R=D[m];S[m]=new lp(R&&R.currentValue,u,D===Et),l[p]=u}Ba.ngInherit=!0;const Tu="__ngSimpleChanges__";function bh(l){return l[Tu]||null}const Bn=function(l,u,h){};function Rr(l){for(;Array.isArray(l);)l=l[Mo];return l}function _s(l,u){return Rr(u[l])}function Ui(l,u){return Rr(u[l.index])}function Dh(l,u){return l.data[u]}function Cs(l,u){return l[u]}function si(l,u){const h=u[l];return po(h)?h:h[Mo]}function Rl(l){return 64==(64&l[dn])}function ks(l,u){return null==u?null:l[u]}function Ol(l){l[la]=0}function Rh(l,u){l[vs]+=u;let h=l,p=l[ur];for(;null!==p&&(1===u&&1===h[vs]||-1===u&&0===h[vs]);)p[vs]+=u,h=p,p=p[ur]}const nn={lFrame:mS(null),bindingsEnabled:!0};function Gc(){return nn.bindingsEnabled}function $e(){return nn.lFrame.lView}function xn(){return nn.lFrame.tView}function Vc(l){return nn.lFrame.contextLView=l,l[Sr]}function Cm(l){return nn.lFrame.contextLView=null,l}function ai(){let l=Oh();for(;null!==l&&64===l.type;)l=l.parent;return l}function Oh(){return nn.lFrame.currentTNode}function Il(){const l=nn.lFrame,u=l.currentTNode;return l.isParent?u:u.parent}function vo(l,u){const h=nn.lFrame;h.currentTNode=l,h.isParent=u}function hp(){return nn.lFrame.isParent}function Al(){nn.lFrame.isParent=!1}function Fr(){const l=nn.lFrame;let u=l.bindingRootIndex;return-1===u&&(u=l.bindingRootIndex=l.tView.bindingStartIndex),u}function yo(){return nn.lFrame.bindingIndex}function Nu(){return nn.lFrame.bindingIndex++}function Lo(l){const u=nn.lFrame,h=u.bindingIndex;return u.bindingIndex=u.bindingIndex+l,h}function pp(l){nn.lFrame.inI18n=l}function gp(l,u){const h=nn.lFrame;h.bindingIndex=h.bindingRootIndex=l,Uc(u)}function Uc(l){nn.lFrame.currentDirectiveIndex=l}function Ph(){return nn.lFrame.currentQueryIndex}function jc(l){nn.lFrame.currentQueryIndex=l}function f_(l){const u=l[Dt];return 2===u.type?u.declTNode:1===u.type?l[$n]:null}function Nh(l,u,h){if(h&be.SkipSelf){let m=u,_=l;for(;!(m=m.parent,null!==m||h&be.Host||(m=f_(_),null===m||(_=_[Eu],10&m.type))););if(null===m)return!1;u=m,l=_}const p=nn.lFrame=p_();return p.currentTNode=u,p.lView=l,!0}function mp(l){const u=p_(),h=l[Dt];nn.lFrame=u,u.currentTNode=h.firstChild,u.lView=l,u.tView=h,u.contextLView=l,u.bindingIndex=h.bindingStartIndex,u.inI18n=!1}function p_(){const l=nn.lFrame,u=null===l?null:l.child;return null===u?mS(l):u}function mS(l){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=u),u}function Mh(){const l=nn.lFrame;return nn.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const g_=Mh;function wm(){const l=Mh();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function ao(){return nn.lFrame.selectedIndex}function Mu(l){nn.lFrame.selectedIndex=l}function vr(){const l=nn.lFrame;return Dh(l.tView,l.selectedIndex)}function xh(l,u){for(let h=u.directiveStart,p=u.directiveEnd;h<p;h++){const _=l.data[h].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:D,ngAfterViewInit:R,ngAfterViewChecked:N,ngOnDestroy:L}=_;S&&(l.contentHooks??(l.contentHooks=[])).push(-h,S),D&&((l.contentHooks??(l.contentHooks=[])).push(h,D),(l.contentCheckHooks??(l.contentCheckHooks=[])).push(h,D)),R&&(l.viewHooks??(l.viewHooks=[])).push(-h,R),N&&((l.viewHooks??(l.viewHooks=[])).push(h,N),(l.viewCheckHooks??(l.viewCheckHooks=[])).push(h,N)),null!=L&&(l.destroyHooks??(l.destroyHooks=[])).push(h,L)}}function Fh(l,u,h){da(l,u,3,h)}function Pl(l,u,h,p){(3&l[dn])===h&&da(l,u,h,p)}function ja(l,u){let h=l[dn];(3&h)===u&&(h&=2047,h+=1,l[dn]=h)}function da(l,u,h,p){const _=p??-1,S=u.length-1;let D=0;for(let R=void 0!==p?65535&l[la]:0;R<S;R++)if("number"==typeof u[R+1]){if(D=u[R],null!=p&&D>=p)break}else u[R]<0&&(l[la]+=65536),(D<_||-1==_)&&(Wc(l,h,u,R),l[la]=(4294901760&l[la])+R+2),R++}function Wc(l,u,h,p){const m=h[p]<0,_=h[p+1],D=l[m?-h[p]:h[p]];if(m){if(l[dn]>>11<l[la]>>16&&(3&l[dn])===u){l[dn]+=2048,Bn(4,D,_);try{_.call(D)}finally{Bn(5,D,_)}}}else{Bn(4,D,_);try{_.call(D)}finally{Bn(5,D,_)}}}const ko=-1;class xu{constructor(u,h,p){this.factory=u,this.resolving=!1,this.canSeeViewProviders=h,this.injectImpl=p}}function ws(l,u,h){let p=0;for(;p<h.length;){const m=h[p];if("number"==typeof m){if(0!==m)break;p++;const _=h[p++],S=h[p++],D=h[p++];l.setAttribute(u,S,D,_)}else{const _=m,S=h[++p];yr(_)?l.setProperty(u,_,S):l.setAttribute(u,_,S),p++}}return p}function Nl(l){return 3===l||4===l||6===l}function yr(l){return 64===l.charCodeAt(0)}function ha(l,u){if(null!==u&&0!==u.length)if(null===l||0===l.length)l=u.slice();else{let h=-1;for(let p=0;p<u.length;p++){const m=u[p];"number"==typeof m?h=m:0===h||Wa(l,h,m,null,-1===h||2===h?u[++p]:null)}}return l}function Wa(l,u,h,p,m){let _=0,S=l.length;if(-1===u)S=-1;else for(;_<l.length;){const D=l[_++];if("number"==typeof D){if(D===u){S=-1;break}if(D>u){S=_-1;break}}}for(;_<l.length;){const D=l[_];if("number"==typeof D)break;if(D===h){if(null===p)return void(null!==m&&(l[_+1]=m));if(p===l[_+1])return void(l[_+2]=m)}_++,null!==p&&_++,null!==m&&_++}-1!==S&&(l.splice(S,0,u),_=S+1),l.splice(_++,0,h),null!==p&&l.splice(_++,0,p),null!==m&&l.splice(_++,0,m)}function Gh(l){return l!==ko}function Ml(l){return 32767&l}function xl(l,u){let h=function Em(l){return l>>16}(l),p=u;for(;h>0;)p=p[Eu],h--;return p}let Fu=!0;function Fl(l){const u=Fu;return Fu=l,u}const Ll=255,$a=5;let fa=0;const Vo={};function kl(l,u){const h=$c(l,u);if(-1!==h)return h;const p=u[Dt];p.firstCreatePass&&(l.injectorIndex=u.length,pa(p.data,l),pa(u,null),pa(p.blueprint,null));const m=ga(l,u),_=l.injectorIndex;if(Gh(m)){const S=Ml(m),D=xl(m,u),R=D[Dt].data;for(let N=0;N<8;N++)u[_+N]=D[S+N]|R[S+N]}return u[_+8]=m,_}function pa(l,u){l.push(0,0,0,0,0,0,0,0,u)}function $c(l,u){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===u[l.injectorIndex+8]?-1:l.injectorIndex}function ga(l,u){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let h=0,p=null,m=u;for(;null!==m;){if(p=bp(m),null===p)return ko;if(h++,m=m[Eu],-1!==p.injectorIndex)return p.injectorIndex|h<<16}return ko}function Gl(l,u,h){!function Lu(l,u,h){let p;"string"==typeof h?p=h.charCodeAt(0)||0:h.hasOwnProperty(oo)&&(p=h[oo]),null==p&&(p=h[oo]=fa++);const m=p&Ll;u.data[l+(m>>$a)]|=1<<m}(l,u,h)}function ku(l,u,h){if(h&be.Optional||void 0!==l)return l;it()}function Dm(l,u,h,p){if(h&be.Optional&&void 0===p&&(p=null),!(h&(be.Self|be.Host))){const m=l[Yr],_=Jt(void 0);try{return m?m.get(u,p,h&be.Optional):un(u,p,h&be.Optional)}finally{Jt(_)}}return ku(p,0,h)}function Gs(l,u,h,p=be.Default,m){if(null!==l){if(1024&u[dn]){const S=function Ep(l,u,h,p,m){let _=l,S=u;for(;null!==_&&null!==S&&1024&S[dn]&&!(256&S[dn]);){const D=Cp(_,S,h,p|be.Self,Vo);if(D!==Vo)return D;let R=_.parent;if(!R){const N=S[yh];if(N){const L=N.get(h,Vo,p);if(L!==Vo)return L}R=bp(S),S=S[Eu]}_=R}return m}(l,u,h,p,Vo);if(S!==Vo)return S}const _=Cp(l,u,h,p,Vo);if(_!==Vo)return _}return Dm(u,h,p,m)}function Cp(l,u,h,p,m){const _=function Ka(l){if("string"==typeof l)return l.charCodeAt(0)||0;const u=l.hasOwnProperty(oo)?l[oo]:void 0;return"number"==typeof u?u>=0?u&Ll:Hh:u}(h);if("function"==typeof _){if(!Nh(u,l,p))return p&be.Host?ku(m,0,p):Dm(u,h,p,m);try{const S=_(p);if(null!=S||p&be.Optional)return S;it()}finally{g_()}}else if("number"==typeof _){let S=null,D=$c(l,u),R=ko,N=p&be.Host?u[Ci][$n]:null;for((-1===D||p&be.SkipSelf)&&(R=-1===D?ga(l,u):u[D+8],R!==ko&&Kc(p,!1)?(S=u[Dt],D=Ml(R),u=xl(R,u)):D=-1);-1!==D;){const L=u[Dt];if(wp(_,D,L.data)){const j=Jo(D,u,h,S,p,N);if(j!==Vo)return j}R=u[D+8],R!==ko&&Kc(p,u[Dt].data[D+8]===N)&&wp(_,D,u)?(S=L,D=Ml(R),u=xl(R,u)):D=-1}}return m}function Jo(l,u,h,p,m,_){const S=u[Dt],D=S.data[l+8],L=zc(D,S,h,null==p?Pc(D)&&Fu:p!=S&&0!=(3&D.type),m&be.Host&&_===D);return null!==L?za(u,S,L,D):Vo}function zc(l,u,h,p,m){const _=l.providerIndexes,S=u.data,D=1048575&_,R=l.directiveStart,L=_>>20,ee=m?D+L:l.directiveEnd;for(let le=p?D:D+L;le<ee;le++){const Me=S[le];if(le<R&&h===Me||le>=R&&Me.type===h)return le}if(m){const le=S[R];if(le&&Bi(le)&&le.type===h)return R}return null}function za(l,u,h,p){let m=l[h];const _=u.data;if(function yp(l){return l instanceof xu}(m)){const S=m;S.resolving&&function ke(l,u){const h=u?`. Dependency path: ${u.join(" > ")} > ${l}`:"";throw new De(-200,`Circular dependency in DI detected for ${l}${h}`)}(function nt(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():Ve(l)}(_[h]));const D=Fl(S.canSeeViewProviders);S.resolving=!0;const R=S.injectImpl?Jt(S.injectImpl):null;Nh(l,p,be.Default);try{m=l[h]=S.factory(void 0,_,l,p),u.firstCreatePass&&h>=p.directiveStart&&function __(l,u,h){const{ngOnChanges:p,ngOnInit:m,ngDoCheck:_}=u.type.prototype;if(p){const S=Du(u);(h.preOrderHooks??(h.preOrderHooks=[])).push(l,S),(h.preOrderCheckHooks??(h.preOrderCheckHooks=[])).push(l,S)}m&&(h.preOrderHooks??(h.preOrderHooks=[])).push(0-l,m),_&&((h.preOrderHooks??(h.preOrderHooks=[])).push(l,_),(h.preOrderCheckHooks??(h.preOrderCheckHooks=[])).push(l,_))}(h,_[h],u)}finally{null!==R&&Jt(R),Fl(D),S.resolving=!1,g_()}}return m}function wp(l,u,h){return!!(h[u+(l>>$a)]&1<<l)}function Kc(l,u){return!(l&be.Self||l&be.Host&&u)}class ji{constructor(u,h){this._tNode=u,this._lView=h}get(u,h,p){return Gs(this._tNode,this._lView,u,Xt(p),h)}}function Hh(){return new ji(ai(),$e())}function Sp(l){return te(()=>{const u=l.prototype.constructor,h=u[cn]||Vl(u),p=Object.prototype;let m=Object.getPrototypeOf(l.prototype).constructor;for(;m&&m!==p;){const _=m[cn]||Vl(m);if(_&&_!==h)return _;m=Object.getPrototypeOf(m)}return _=>new _})}function Vl(l){return at(l)?()=>{const u=Vl(ie(l));return u&&u()}:mo(l)}function bp(l){const u=l[Dt],h=u.type;return 2===h?u.declTNode:1===h?l[$n]:null}function qc(l){return function bm(l,u){if("class"===u)return l.classes;if("style"===u)return l.styles;const h=l.attrs;if(h){const p=h.length;let m=0;for(;m<p;){const _=h[m];if(Nl(_))break;if(0===_)m+=2;else if("number"==typeof _)for(m++;m<p&&"string"==typeof h[m];)m++;else{if(_===u)return h[m+1];m+=2}}}return null}(ai(),l)}const qa="__parameters__";function Hl(l,u,h){return te(()=>{const p=function Dp(l){return function(...h){if(l){const p=l(...h);for(const m in p)this[m]=p[m]}}}(u);function m(..._){if(this instanceof m)return p.apply(this,_),this;const S=new m(..._);return D.annotation=S,D;function D(R,N,L){const j=R.hasOwnProperty(qa)?R[qa]:Object.defineProperty(R,qa,{value:[]})[qa];for(;j.length<=L;)j.push(null);return(j[L]=j[L]||[]).push(S),R}}return h&&(m.prototype=Object.create(h.prototype)),m.prototype.ngMetadataName=l,m.annotationCls=m,m})}class cr{constructor(u,h){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof h?this.__NG_ELEMENT_ID__=h:void 0!==h&&(this.\u0275prov=_t({token:this,providedIn:h.providedIn||"root",factory:h.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ya(l,u){l.forEach(h=>Array.isArray(h)?ya(h,u):u(h))}function Bh(l,u,h){u>=l.length?l.push(h):l.splice(u,0,h)}function Bu(l,u){return u>=l.length-1?l.pop():l.splice(u,1)[0]}function _a(l,u){const h=[];for(let p=0;p<l;p++)h.push(u);return h}function yn(l,u,h){let p=Tt(l,u);return p>=0?l[1|p]=h:(p=~p,function b_(l,u,h,p){let m=l.length;if(m==u)l.push(h,p);else if(1===m)l.push(p,l[0]),l[0]=h;else{for(m--,l.push(l[m-1],l[m]);m>u;)l[m]=l[m-2],m--;l[u]=h,l[u+1]=p}}(l,p,u,h)),p}function Ho(l,u){const h=Tt(l,u);if(h>=0)return l[1|h]}function Tt(l,u){return function Or(l,u,h){let p=0,m=l.length>>h;for(;m!==p;){const _=p+(m-p>>1),S=l[_<<h];if(u===S)return _<<h;S>u?m=_:p=_+1}return~(m<<h)}(l,u,1)}const Xo=pn(Hl("Optional"),8),O=pn(Hl("SkipSelf"),4);var jo=(()=>((jo=jo||{})[jo.Important=1]="Important",jo[jo.DashCase=2]="DashCase",jo))();const yS=/^>|^->|<!--|-->|--!>|<!-$/g,ed=/(<|>)/,R_="\u200b$1\u200b";const Es=new Map;let I_=0;const Ip="__ngContext__";function wo(l,u){po(u)?(l[Ip]=u[Tr],function Op(l){Es.set(l[Tr],l)}(u)):l[Ip]=u}let zu;function Ap(l,u){return zu(l,u)}function Kl(l){const u=l[ur];return go(u)?u[ur]:u}function rd(l){return Np(l[Cl])}function Yh(l){return Np(l[fo])}function Np(l){for(;null!==l&&!go(l);)l=l[fo];return l}function Ya(l,u,h,p,m){if(null!=p){let _,S=!1;go(p)?_=p:po(p)&&(S=!0,p=p[Mo]);const D=Rr(p);0===l&&null!==h?null==m?x_(u,h,D):ql(u,h,D,m||null,!0):1===l&&null!==h?ql(u,h,D,m||null,!0):2===l?Yu(u,D,S):3===l&&u.destroyNode(D),null!=_&&function wa(l,u,h,p,m){const _=h[Ga];_!==Rr(h)&&Ya(u,l,p,_,m);for(let D=wi;D<h.length;D++){const R=h[D];Zu(R[Dt],R,l,u,p,_)}}(u,l,_,h,m)}}function id(l,u){return l.createText(u)}function Um(l,u,h){l.setValue(u,h)}function CS(l,u){return l.createComment(function O_(l){return l.replace(yS,u=>u.replace(ed,R_))}(u))}function Zh(l,u,h){return l.createElement(u,h)}function xp(l,u){const h=l[Sl],p=h.indexOf(u),m=u[ur];512&u[dn]&&(u[dn]&=-513,Rh(m,-1)),h.splice(p,1)}function Qh(l,u){if(l.length<=wi)return;const h=wi+u,p=l[h];if(p){const m=p[wl];null!==m&&m!==l&&xp(m,p),u>0&&(l[h-1][fo]=p[fo]);const _=Bu(l,wi+u);!function wS(l,u){Zu(l,u,u[vn],2,null,null),u[Mo]=null,u[$n]=null}(p[Dt],p);const S=_[so];null!==S&&S.detachView(_[Dt]),p[ur]=null,p[fo]=null,p[dn]&=-65}return p}function Jh(l,u){if(!(128&u[dn])){const h=u[vn];h.destroyNode&&Zu(l,u,h,3,null,null),function ES(l){let u=l[Cl];if(!u)return Xh(l[Dt],l);for(;u;){let h=null;if(po(u))h=u[Cl];else{const p=u[wi];p&&(h=p)}if(!h){for(;u&&!u[fo]&&u!==l;)po(u)&&Xh(u[Dt],u),u=u[ur];null===u&&(u=l),po(u)&&Xh(u[Dt],u),h=u&&u[fo]}u=h}}(u)}}function Xh(l,u){if(!(128&u[dn])){u[dn]&=-65,u[dn]|=128,function jm(l,u){let h;if(null!=l&&null!=(h=l.destroyHooks))for(let p=0;p<h.length;p+=2){const m=u[h[p]];if(!(m instanceof xu)){const _=h[p+1];if(Array.isArray(_))for(let S=0;S<_.length;S+=2){const D=m[_[S]],R=_[S+1];Bn(4,D,R);try{R.call(D)}finally{Bn(5,D,R)}}else{Bn(4,m,_);try{_.call(m)}finally{Bn(5,m,_)}}}}}(l,u),function Za(l,u){const h=l.cleanup,p=u[La];let m=-1;if(null!==h)for(let _=0;_<h.length-1;_+=2)if("string"==typeof h[_]){const S=h[_+3];S>=0?p[m=S]():p[m=-S].unsubscribe(),_+=2}else{const S=p[m=h[_+1]];h[_].call(S)}if(null!==p){for(let _=m+1;_<p.length;_++)(0,p[_])();u[La]=null}}(l,u),1===u[Dt].type&&u[vn].destroy();const h=u[wl];if(null!==h&&go(u[ur])){h!==u[ur]&&xp(h,u);const p=u[so];null!==p&&p.detachView(l)}!function Si(l){Es.delete(l[Tr])}(u)}}function DS(l,u,h){return od(l,u.parent,h)}function od(l,u,h){let p=u;for(;null!==p&&40&p.type;)p=(u=p).parent;if(null===p)return h[Mo];{const{componentOffset:m}=p;if(m>-1){const{encapsulation:_}=l.data[p.directiveStart+m];if(_===ue.None||_===ue.Emulated)return null}return Ui(p,h)}}function ql(l,u,h,p,m){l.insertBefore(u,h,p,m)}function x_(l,u,h){l.appendChild(u,h)}function sd(l,u,h,p,m){null!==p?ql(l,u,h,p,m):x_(l,u,h)}function tf(l,u){return l.parentNode(u)}function Wm(l,u,h){return L_(l,u,h)}function Bs(l,u,h){return 40&l.type?Ui(l,h):null}let Fp,Zl,zm,af,L_=Bs;function $m(l,u){L_=l,Fp=u}function Lp(l,u,h,p){const m=DS(l,p,u),_=u[vn],D=Wm(p.parent||u[$n],p,u);if(null!=m)if(Array.isArray(h))for(let R=0;R<h.length;R++)sd(_,m,h[R],D,!1);else sd(_,m,h,D,!1);void 0!==Fp&&Fp(_,p,u,h,m)}function ld(l,u){if(null!==u){const h=u.type;if(3&h)return Ui(u,l);if(4&h)return kp(-1,l[u.index]);if(8&h){const p=u.child;if(null!==p)return ld(l,p);{const m=l[u.index];return go(m)?kp(-1,m):Rr(m)}}if(32&h)return Ap(u,l)()||Rr(l[u.index]);{const p=qu(l,u);return null!==p?Array.isArray(p)?p[0]:ld(Kl(l[Ci]),p):ld(l,u.next)}}return null}function qu(l,u){return null!==u?l[Ci][$n].projection[u.projection]:null}function kp(l,u){const h=wi+l+1;if(h<u.length){const p=u[h],m=p[Dt].firstChild;if(null!==m)return ld(p,m)}return u[Ga]}function Yu(l,u,h){const p=tf(l,u);p&&function ad(l,u,h,p){l.removeChild(u,h,p)}(l,p,u,h)}function nf(l,u,h,p,m,_,S){for(;null!=h;){const D=p[h.index],R=h.type;if(S&&0===u&&(D&&wo(Rr(D),p),h.flags|=2),32!=(32&h.flags))if(8&R)nf(l,u,h.child,p,m,_,!1),Ya(u,l,m,D,_);else if(32&R){const N=Ap(h,p);let L;for(;L=N();)Ya(u,l,m,L,_);Ya(u,l,m,D,_)}else 16&R?Yl(l,u,p,h,m,_):Ya(u,l,m,D,_);h=S?h.projectionNext:h.next}}function Zu(l,u,h,p,m,_){nf(h,p,l.firstChild,u,m,_,!1)}function Yl(l,u,h,p,m,_){const S=h[Ci],R=S[$n].projection[p.projection];if(Array.isArray(R))for(let N=0;N<R.length;N++)Ya(u,l,m,R[N],_);else nf(l,u,R,S[ur],m,_,!0)}function ud(l,u,h){""===h?l.removeAttribute(u,"class"):l.setAttribute(u,"class",h)}function rf(l,u,h){const{mergedAttrs:p,classes:m,styles:_}=h;null!==p&&ws(l,u,p),null!==m&&ud(l,u,m),null!==_&&function Us(l,u,h){l.setAttribute(u,"style",h)}(l,u,_)}function cd(l){return function sf(){if(void 0===Zl&&(Zl=null,Yt.trustedTypes))try{Zl=Yt.trustedTypes.createPolicy("angular",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch{}return Zl}()?.createHTML(l)||l}function RS(l){zm=l}function B_(l){return function lo(){if(void 0===af&&(af=null,Yt.trustedTypes))try{af=Yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch{}return af}()?.createScriptURL(l)||l}class Sa{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ft})`}}function uo(l){return l instanceof Sa?l.changingThisBreaksApplicationSecurity:l}function Ea(l,u){const h=function j_(l){return l instanceof Sa&&l.getTypeName()||null}(l);if(null!=h&&h!==u){if("ResourceURL"===h&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${h} (see ${Ft})`)}return h===u}class G{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const h=(new window.DOMParser).parseFromString(cd(u),"text/html").body;return null===h?this.inertDocumentHelper.getInertBodyElement(u):(h.removeChild(h.firstChild),h)}catch{return null}}}class ne{constructor(u){this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(u){const h=this.inertDocument.createElement("template");return h.innerHTML=cd(u),h}}const lt=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bt(l){return(l=String(l)).match(lt)?l:"unsafe:"+l}function jt(l){const u={};for(const h of l.split(","))u[h]=!0;return u}function kt(...l){const u={};for(const h of l)for(const p in h)h.hasOwnProperty(p)&&(u[p]=!0);return u}const ui=jt("area,br,col,hr,img,wbr"),bs=jt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ju=jt("rp,rt"),df=kt(ui,kt(bs,jt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),kt(Ju,jt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),kt(Ju,bs)),hf=jt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dd=kt(hf,jt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Ii=(()=>((Ii=Ii||{})[Ii.NONE=0]="NONE",Ii[Ii.HTML=1]="HTML",Ii[Ii.STYLE=2]="STYLE",Ii[Ii.SCRIPT=3]="SCRIPT",Ii[Ii.URL=4]="URL",Ii[Ii.RESOURCE_URL=5]="RESOURCE_URL",Ii))();function q_(l){const u=Qm();return u?u.sanitize(Ii.URL,l)||"":Ea(l,"URL")?uo(l):bt(Ve(l))}function js(l){const u=Qm();if(u)return B_(u.sanitize(Ii.RESOURCE_URL,l)||"");if(Ea(l,"ResourceURL"))return B_(uo(l));throw new De(904,!1)}function NS(l,u,h){return function gN(l,u){return"src"===u&&("embed"===l||"frame"===l||"iframe"===l||"media"===l||"script"===l)||"href"===u&&("base"===l||"link"===l)?js:q_}(u,h)(l)}function Qm(){const l=$e();return l&&l[_l]}const hd=new cr("ENVIRONMENT_INITIALIZER"),Hp=new cr("INJECTOR",-1),nT=new cr("INJECTOR_DEF_TYPES");class rT{get(u,h=Tn){if(h===Tn){const p=new Error(`NullInjectorError: No provider for ${Se(u)}!`);throw p.name="NullInjectorError",p}return h}}function Jm(...l){return{\u0275providers:iT(0,l),\u0275fromNgModule:!0}}function iT(l,...u){const h=[],p=new Set;let m;return ya(u,_=>{const S=_;xS(S,h,[],p)&&(m||(m=[]),m.push(S))}),void 0!==m&&oT(m,h),h}function oT(l,u){for(let h=0;h<l.length;h++){const{providers:m}=l[h];FS(m,_=>{u.push(_)})}}function xS(l,u,h,p){if(!(l=ie(l)))return!1;let m=null,_=Gi(l);const S=!_&&Mn(l);if(_||S){if(S&&!S.standalone)return!1;m=l}else{const R=l.ngModule;if(_=Gi(R),!_)return!1;m=R}const D=p.has(m);if(S){if(D)return!1;if(p.add(m),S.dependencies){const R="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const N of R)xS(N,u,h,p)}}else{if(!_)return!1;{if(null!=_.imports&&!D){let N;p.add(m);try{ya(_.imports,L=>{xS(L,u,h,p)&&(N||(N=[]),N.push(L))})}finally{}void 0!==N&&oT(N,u)}if(!D){const N=mo(m)||(()=>new m);u.push({provide:m,useFactory:N,deps:mt},{provide:nT,useValue:m,multi:!0},{provide:hd,useValue:()=>ht(m),multi:!0})}const R=_.providers;null==R||D||FS(R,L=>{u.push(L)})}}return m!==l&&void 0!==l.providers}function FS(l,u){for(let h of l)Be(h)&&(h=h.\u0275providers),Array.isArray(h)?FS(h,u):u(h)}const mN=he({provide:String,useValue:he});function sT(l){return null!==l&&"object"==typeof l&&mN in l}function Ql(l){return"function"==typeof l}const LS=new cr("Set Injector scope."),Q_={},vN={};let kS;function J_(){return void 0===kS&&(kS=new rT),kS}class gf{}class lT extends gf{get destroyed(){return this._destroyed}constructor(u,h,p,m){super(),this.parent=h,this.source=p,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,HS(u,S=>this.processProvider(S)),this.records.set(Hp,fd(void 0,this)),m.has("environment")&&this.records.set(gf,fd(void 0,this));const _=this.records.get(LS);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(nT.multi,mt,be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();for(const u of this._onDestroyHooks)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(u){this._onDestroyHooks.push(u)}runInContext(u){this.assertNotDestroyed();const h=io(this),p=Jt(void 0);try{return u()}finally{io(h),Jt(p)}}get(u,h=Tn,p=be.Default){this.assertNotDestroyed(),p=Xt(p);const m=io(this),_=Jt(void 0);try{if(!(p&be.SkipSelf)){let D=this.records.get(u);if(void 0===D){const R=function X_(l){return"function"==typeof l||"object"==typeof l&&l instanceof cr}(u)&&Xn(u);D=R&&this.injectableDefInScope(R)?fd(GS(u),Q_):null,this.records.set(u,D)}if(null!=D)return this.hydrate(u,D)}return(p&be.Self?J_():this.parent).get(u,h=p&be.Optional&&h===Tn?null:h)}catch(S){if("NullInjectorError"===S.name){if((S[An]=S[An]||[]).unshift(Se(u)),m)throw S;return function Y(l,u,h,p){const m=l[An];throw u[No]&&m.unshift(u[No]),l.message=function K(l,u,h,p=null){l=l&&"\n"===l.charAt(0)&&l.charAt(1)==Hn?l.slice(2):l;let m=Se(u);if(Array.isArray(u))m=u.map(Se).join(" -> ");else if("object"==typeof u){let _=[];for(let S in u)if(u.hasOwnProperty(S)){let D=u[S];_.push(S+":"+("string"==typeof D?JSON.stringify(D):Se(D)))}m=`{${_.join(", ")}}`}return`${h}${p?"("+p+")":""}[${m}]: ${l.replace(sa,"\n  ")}`}("\n"+l.message,m,h,p),l[Nr]=m,l[An]=null,l}(S,u,"R3InjectorError",this.source)}throw S}finally{Jt(_),io(m)}}resolveInjectorInitializers(){const u=io(this),h=Jt(void 0);try{const p=this.get(hd.multi,mt,be.Self);for(const m of p)m()}finally{io(u),Jt(h)}}toString(){const u=[],h=this.records;for(const p of h.keys())u.push(Se(p));return`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(u){let h=Ql(u=ie(u))?u:ie(u&&u.provide);const p=function uT(l){return sT(l)?fd(void 0,l.useValue):fd(cT(l),Q_)}(u);if(Ql(u)||!0!==u.multi)this.records.get(h);else{let m=this.records.get(h);m||(m=fd(void 0,Q_,!0),m.factory=()=>sn(m.multi),this.records.set(h,m)),h=u,m.multi.push(u)}this.records.set(h,p)}hydrate(u,h){return h.value===Q_&&(h.value=vN,h.value=h.factory()),"object"==typeof h.value&&h.value&&function VS(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(h.value)&&this._ngOnDestroyHooks.add(h.value),h.value}injectableDefInScope(u){if(!u.providedIn)return!1;const h=ie(u.providedIn);return"string"==typeof h?"any"===h||this.scopes.has(h):this.injectorDefTypes.has(h)}}function GS(l){const u=Xn(l),h=null!==u?u.factory:mo(l);if(null!==h)return h;if(l instanceof cr)throw new De(204,!1);if(l instanceof Function)return function yN(l){const u=l.length;if(u>0)throw _a(u,"?"),new De(204,!1);const h=function yi(l){const u=l&&(l[ae]||l[pe]);return u?(function ps(l){if(l.hasOwnProperty("name"))return l.name;(""+l).match(/^function\s*([^\s(]+)/)}(l),u):null}(l);return null!==h?()=>h.factory(l):()=>new l}(l);throw new De(204,!1)}function cT(l,u,h){let p;if(Ql(l)){const m=ie(l);return mo(m)||GS(m)}if(sT(l))p=()=>ie(l.useValue);else if(function Z_(l){return!(!l||!l.useFactory)}(l))p=()=>l.useFactory(...sn(l.deps||[]));else if(function aT(l){return!(!l||!l.useExisting)}(l))p=()=>ht(ie(l.useExisting));else{const m=ie(l&&(l.useClass||l.provide));if(!function dT(l){return!!l.deps}(l))return mo(m)||GS(m);p=()=>new m(...sn(l.deps))}return p}function fd(l,u,h=!1){return{factory:l,value:u,multi:h?[]:void 0}}function HS(l,u){for(const h of l)Array.isArray(h)?HS(h,u):h&&Be(h)?HS(h.\u0275providers,u):u(h)}class _N{}class hT{}class fT{resolveComponentFactory(u){throw function CN(l){const u=Error(`No component factory found for ${Se(l)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=l,u}(u)}}let pd=(()=>{class l{}return l.NULL=new fT,l})();function eC(){return mf(ai(),$e())}function mf(l,u){return new Xu(Ui(l,u))}let Xu=(()=>{class l{constructor(h){this.nativeElement=h}}return l.__NG_ELEMENT_ID__=eC,l})();function pT(l){return l instanceof Xu?l.nativeElement:l}class gT{}let SN=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>function EN(){const l=$e(),h=si(ai().index,l);return(po(h)?h:l)[vn]}(),l})(),bN=(()=>{class l{}return l.\u0275prov=_t({token:l,providedIn:"root",factory:()=>null}),l})();class mT{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const BS=new mT("15.2.6"),US={},jS="ngOriginalError";function WS(l){return l[jS]}class ev{constructor(){this._console=console}handleError(u){const h=this._findOriginalError(u);this._console.error("ERROR",u),h&&this._console.error("ORIGINAL ERROR",h)}_findOriginalError(u){let h=u&&WS(u);for(;h&&WS(h);)h=WS(h);return h||null}}function Jl(l){return l instanceof Function?l():l}function $S(l,u,h){let p=l.length;for(;;){const m=l.indexOf(u,h);if(-1===m)return m;if(0===m||l.charCodeAt(m-1)<=32){const _=u.length;if(m+_===p||l.charCodeAt(m+_)<=32)return m}h=m+1}}const tC="ng-template";function wT(l,u,h){let p=0,m=!0;for(;p<l.length;){let _=l[p++];if("string"==typeof _&&m){const S=l[p++];if(h&&"class"===_&&-1!==$S(S.toLowerCase(),u,0))return!0}else{if(1===_){for(;p<l.length&&"string"==typeof(_=l[p++]);)if(_.toLowerCase()===u)return!0;return!1}"number"==typeof _&&(m=!1)}}return!1}function yf(l){return 4===l.type&&l.value!==tC}function zS(l,u,h){return u===(4!==l.type||h?l.value:tC)}function PN(l,u,h){let p=4;const m=l.attrs||[],_=function ET(l){for(let u=0;u<l.length;u++)if(Nl(l[u]))return u;return l.length}(m);let S=!1;for(let D=0;D<u.length;D++){const R=u[D];if("number"!=typeof R){if(!S)if(4&p){if(p=2|1&p,""!==R&&!zS(l,R,h)||""===R&&1===u.length){if(ba(p))return!1;S=!0}}else{const N=8&p?R:u[++D];if(8&p&&null!==l.attrs){if(!wT(l.attrs,N,h)){if(ba(p))return!1;S=!0}continue}const j=nC(8&p?"class":R,m,yf(l),h);if(-1===j){if(ba(p))return!1;S=!0;continue}if(""!==N){let ee;ee=j>_?"":m[j+1].toLowerCase();const le=8&p?ee:null;if(le&&-1!==$S(le,N,0)||2&p&&N!==ee){if(ba(p))return!1;S=!0}}}}else{if(!S&&!ba(p)&&!ba(R))return!1;if(S&&ba(R))continue;S=!1,p=R|1&p}}return ba(p)||S}function ba(l){return 0==(1&l)}function nC(l,u,h,p){if(null===u)return-1;let m=0;if(p||!h){let _=!1;for(;m<u.length;){const S=u[m];if(S===l)return m;if(3===S||6===S)_=!0;else{if(1===S||2===S){let D=u[++m];for(;"string"==typeof D;)D=u[++m];continue}if(4===S)break;if(0===S){m+=4;continue}}m+=_?1:2}return-1}return function NN(l,u){let h=l.indexOf(4);if(h>-1)for(h++;h<l.length;){const p=l[h];if("number"==typeof p)return-1;if(p===u)return h;h++}return-1}(u,l)}function tv(l,u,h=!1){for(let p=0;p<u.length;p++)if(PN(l,u[p],h))return!0;return!1}function MN(l,u){e:for(let h=0;h<u.length;h++){const p=u[h];if(l.length===p.length){for(let m=0;m<l.length;m++)if(l[m]!==p[m])continue e;return!0}}return!1}function bT(l,u){return l?":not("+u.trim()+")":u}function xN(l){let u=l[0],h=1,p=2,m="",_=!1;for(;h<l.length;){let S=l[h];if("string"==typeof S)if(2&p){const D=l[++h];m+="["+S+(D.length>0?'="'+D+'"':"")+"]"}else 8&p?m+="."+S:4&p&&(m+=" "+S);else""!==m&&!ba(S)&&(u+=bT(_,m),m=""),p=S,_=_||!ba(p);h++}return""!==m&&(u+=bT(_,m)),u}const _n={};function DT(l){iC(xn(),$e(),ao()+l,!1)}function iC(l,u,h,p){if(!p)if(3==(3&u[dn])){const _=l.preOrderCheckHooks;null!==_&&Fh(u,_,h)}else{const _=l.preOrderHooks;null!==_&&Pl(u,_,0,h)}Mu(h)}function qS(l,u=null,h=null,p){const m=VN(l,u,h,p);return m.resolveInjectorInitializers(),m}function VN(l,u=null,h=null,p,m=new Set){const _=[h||mt,Jm(l)];return p=p||("object"==typeof l?void 0:Se(l)),new lT(_,u||J_(),p||null,m)}let Up=(()=>{class l{static create(h,p){if(Array.isArray(h))return qS({name:""},p,h,"");{const m=h.name??"";return qS({name:m},h.parent,h.providers,m)}}}return l.THROW_IF_NOT_FOUND=Tn,l.NULL=new rT,l.\u0275prov=_t({token:l,providedIn:"any",factory:()=>ht(Hp)}),l.__NG_ELEMENT_ID__=-1,l})();function Wp(l,u=be.Default){const h=$e();return null===h?ht(l,u):Gs(ai(),h,ie(l),u)}function xT(){throw new Error("invalid")}function FT(l,u){const h=l.contentQueries;if(null!==h)for(let p=0;p<h.length;p+=2){const _=h[p+1];if(-1!==_){const S=l.data[_];jc(h[p]),S.contentQueries(2,u[_],_)}}}function JS(l,u,h,p,m,_,S,D,R,N,L){const j=u.blueprint.slice();return j[Mo]=m,j[dn]=76|p,(null!==L||l&&1024&l[dn])&&(j[dn]|=1024),Ol(j),j[ur]=j[Eu]=l,j[Sr]=h,j[Su]=S||l&&l[Su],j[vn]=D||l&&l[vn],j[_l]=R||l&&l[_l]||null,j[Yr]=N||l&&l[Yr]||null,j[$n]=_,j[Tr]=function A_(){return I_++}(),j[yh]=L,j[Ci]=2==u.type?l[Ci]:j,j}function $p(l,u,h,p,m){let _=l.data[u];if(null===_)_=Te(l,u,h,p,m),function Bc(){return nn.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=h,_.value=p,_.attrs=m;const S=Il();_.injectorIndex=null===S?-1:S.injectorIndex}return vo(_,!0),_}function Te(l,u,h,p,m){const _=Oh(),S=hp(),R=l.data[u]=function YN(l,u,h,p,m,_){return{type:h,index:p,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?_:_&&_.parent,h,u,p,m);return null===l.firstChild&&(l.firstChild=R),null!==_&&(S?null==_.child&&null!==R.parent&&(_.child=R):null===_.next&&(_.next=R,R.prev=_)),R}function Ki(l,u,h,p){if(0===h)return-1;const m=u.length;for(let _=0;_<h;_++)u.push(p),l.blueprint.push(p),l.data.push(null);return m}function zs(l,u,h){mp(u);try{const p=l.viewQuery;null!==p&&Cf(1,p,h);const m=l.template;null!==m&&H(l,u,m,1,h),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&FT(l,u),l.staticViewQueries&&Cf(2,l.viewQuery,h);const _=l.components;null!==_&&function qN(l,u){for(let h=0;h<u.length;h++)sE(l,u[h])}(u,_)}catch(p){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),p}finally{u[dn]&=-5,wm()}}function Ds(l,u,h,p){const m=u[dn];if(128!=(128&m)){mp(u);try{Ol(u),function Pu(l){return nn.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==h&&H(l,u,h,2,p);const S=3==(3&m);if(S){const N=l.preOrderCheckHooks;null!==N&&Fh(u,N,null)}else{const N=l.preOrderHooks;null!==N&&Pl(u,N,0,null),ja(u,0)}if(function pC(l){for(let u=rd(l);null!==u;u=Yh(u)){if(!u[Ac])continue;const h=u[Sl];for(let p=0;p<h.length;p++){const m=h[p];512&m[dn]||Rh(m[ur],1),m[dn]|=512}}}(u),function jT(l){for(let u=rd(l);null!==u;u=Yh(u))for(let h=wi;h<u.length;h++){const p=u[h],m=p[Dt];Rl(p)&&Ds(m,p,m.template,p[Sr])}}(u),null!==l.contentQueries&&FT(l,u),S){const N=l.contentCheckHooks;null!==N&&Fh(u,N)}else{const N=l.contentHooks;null!==N&&Pl(u,N,1),ja(u,1)}!function KN(l,u){const h=l.hostBindingOpCodes;if(null!==h)try{for(let p=0;p<h.length;p++){const m=h[p];if(m<0)Mu(~m);else{const _=m,S=h[++p],D=h[++p];gp(S,_),D(2,u[_])}}}finally{Mu(-1)}}(l,u);const D=l.components;null!==D&&function LT(l,u){for(let h=0;h<u.length;h++)oE(l,u[h])}(u,D);const R=l.viewQuery;if(null!==R&&Cf(2,R,p),S){const N=l.viewCheckHooks;null!==N&&Fh(u,N)}else{const N=l.viewHooks;null!==N&&Pl(u,N,2),ja(u,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),u[dn]&=-41,512&u[dn]&&(u[dn]&=-513,Rh(u[ur],-1))}finally{wm()}}}function H(l,u,h,p,m){const _=ao(),S=2&p;try{Mu(-1),S&&u.length>On&&iC(l,u,On,!1),Bn(S?2:0,m),h(p,m)}finally{Mu(_),Bn(S?3:1,m)}}function XS(l,u,h){if(Fs(u)){const m=u.directiveEnd;for(let _=u.directiveStart;_<m;_++){const S=l.data[_];S.contentQueries&&S.contentQueries(1,h[_],_)}}}function Qa(l,u,h){Gc()&&(function Wo(l,u,h,p){const m=h.directiveStart,_=h.directiveEnd;Pc(h)&&function XN(l,u,h){const p=Ui(u,l),m=aC(h),_=l[Su],S=gC(l,JS(l,m,null,h.onPush?32:16,p,u,_,_.createRenderer(p,h),null,null,null));l[u.index]=S}(u,h,l.data[m+h.componentOffset]),l.firstCreatePass||kl(h,u),wo(p,u);const S=h.initialInputs;for(let D=m;D<_;D++){const R=l.data[D],N=za(u,l,D,h);wo(N,u),null!==S&&iE(0,D-m,N,R,0,S),Bi(R)&&(si(h.index,u)[Sr]=za(u,l,D,h))}}(l,u,h,Ui(h,u)),64==(64&h.flags)&&VT(l,u,h))}function Bt(l,u,h=Ui){const p=u.localNames;if(null!==p){let m=u.index+1;for(let _=0;_<p.length;_+=2){const S=p[_+1],D=-1===S?h(u,l):l[S];l[m++]=D}}}function aC(l){const u=l.tView;return null===u||u.incompleteFirstPass?l.tView=hn(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):u}function hn(l,u,h,p,m,_,S,D,R,N){const L=On+p,j=L+m,ee=function lC(l,u){const h=[];for(let p=0;p<u;p++)h.push(p<l?null:_n);return h}(L,j),le="function"==typeof N?N():N;return ee[Dt]={type:l,blueprint:ee,template:h,queries:null,viewQuery:D,declTNode:u,data:ee.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:R,consts:le,incompleteFirstPass:!1}}function zp(l,u,h,p){const m=Kp(u);null===h?m.push(p):(m.push(h),l.firstCreatePass&&WT(l).push(p,m.length-1))}function cC(l,u,h,p){for(let m in l)if(l.hasOwnProperty(m)){h=null===h?{}:h;const _=l[m];null===p?kT(h,u,m,_):p.hasOwnProperty(m)&&kT(h,u,p[m],_)}return h}function kT(l,u,h,p){l.hasOwnProperty(h)?l[h].push(u,p):l[h]=[u,p]}function _r(l,u,h,p,m,_,S,D){const R=Ui(u,h);let L,N=u.inputs;!D&&null!=N&&(L=N[p])?(hv(l,h,L,p,m),Pc(u)&&sv(h,u.index)):3&u.type&&(p=function QN(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(p),m=null!=S?S(m,u.value||"",p):m,_.setProperty(R,p,m))}function sv(l,u){const h=si(u,l);16&h[dn]||(h[dn]|=32)}function eE(l,u,h,p){if(Gc()){const m=null===p?null:{"":-1},_=function HT(l,u){const h=l.directiveRegistry;let p=null,m=null;if(h)for(let _=0;_<h.length;_++){const S=h[_];if(tv(u,S.selectors,!1))if(p||(p=[]),Bi(S))if(null!==S.findHostDirectiveDefs){const D=[];m=m||new Map,S.findHostDirectiveDefs(S,D,m),p.unshift(...D,S),av(l,u,D.length)}else p.unshift(S),av(l,u,0);else m=m||new Map,S.findHostDirectiveDefs?.(S,p,m),p.push(S)}return null===p?null:[p,m]}(l,h);let S,D;null===_?S=D=null:[S,D]=_,null!==S&&tE(l,u,h,S,m,D),m&&function hC(l,u,h){if(u){const p=l.localNames=[];for(let m=0;m<u.length;m+=2){const _=h[u[m+1]];if(null==_)throw new De(-301,!1);p.push(u[m],_)}}}(h,p,m)}h.mergedAttrs=ha(h.mergedAttrs,h.attrs)}function tE(l,u,h,p,m,_){for(let N=0;N<p.length;N++)Gl(kl(h,u),l,p[N].type);!function rE(l,u,h){l.flags|=1,l.directiveStart=u,l.directiveEnd=u+h,l.providerIndexes=u}(h,l.data.length,p.length);for(let N=0;N<p.length;N++){const L=p[N];L.providersResolver&&L.providersResolver(L)}let S=!1,D=!1,R=Ki(l,u,p.length,null);for(let N=0;N<p.length;N++){const L=p[N];h.mergedAttrs=ha(h.mergedAttrs,L.hostAttrs),JN(l,h,u,R,L),Xl(R,L,m),null!==L.contentQueries&&(h.flags|=4),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(h.flags|=64);const j=L.type.prototype;!S&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((l.preOrderHooks??(l.preOrderHooks=[])).push(h.index),S=!0),!D&&(j.ngOnChanges||j.ngDoCheck)&&((l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(h.index),D=!0),R++}!function ZN(l,u,h){const m=u.directiveEnd,_=l.data,S=u.attrs,D=[];let R=null,N=null;for(let L=u.directiveStart;L<m;L++){const j=_[L],ee=h?h.get(j):null,Me=ee?ee.outputs:null;R=cC(j.inputs,L,R,ee?ee.inputs:null),N=cC(j.outputs,L,N,Me);const ot=null===R||null===S||yf(u)?null:BT(R,L,S);D.push(ot)}null!==R&&(R.hasOwnProperty("class")&&(u.flags|=8),R.hasOwnProperty("style")&&(u.flags|=16)),u.initialInputs=D,u.inputs=R,u.outputs=N}(l,h,_)}function VT(l,u,h){const p=h.directiveStart,m=h.directiveEnd,_=h.index,S=function Ah(){return nn.lFrame.currentDirectiveIndex}();try{Mu(_);for(let D=p;D<m;D++){const R=l.data[D],N=u[D];Uc(D),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&dC(R,N)}}finally{Mu(-1),Uc(S)}}function dC(l,u){null!==l.hostBindings&&l.hostBindings(1,u)}function av(l,u,h){u.componentOffset=h,(l.components??(l.components=[])).push(u.index)}function Xl(l,u,h){if(h){if(u.exportAs)for(let p=0;p<u.exportAs.length;p++)h[u.exportAs[p]]=l;Bi(u)&&(h[""]=l)}}function JN(l,u,h,p,m){l.data[p]=m;const _=m.factory||(m.factory=mo(m.type)),S=new xu(_,Bi(m),Wp);l.blueprint[p]=S,h[p]=S,function nE(l,u,h,p,m){const _=m.hostBindings;if(_){let S=l.hostBindingOpCodes;null===S&&(S=l.hostBindingOpCodes=[]);const D=~u.index;(function GT(l){let u=l.length;for(;u>0;){const h=l[--u];if("number"==typeof h&&h<0)return h}return 0})(S)!=D&&S.push(D),S.push(h,p,_)}}(l,u,p,Ki(l,h,m.hostVars,_n),m)}function fC(l,u,h,p,m,_,S){if(null==_)l.removeAttribute(u,m,h);else{const D=null==S?Ve(_):S(_,p||"",m);l.setAttribute(u,m,D,h)}}function iE(l,u,h,p,m,_){const S=_[u];if(null!==S){const D=p.setInput;for(let R=0;R<S.length;){const N=S[R++],L=S[R++],j=S[R++];null!==D?p.setInput(h,j,N,L):h[L]=j}}}function BT(l,u,h){let p=null,m=0;for(;m<h.length;){const _=h[m];if(0!==_)if(5!==_){if("number"==typeof _)break;if(l.hasOwnProperty(_)){null===p&&(p=[]);const S=l[_];for(let D=0;D<S.length;D+=2)if(S[D]===u){p.push(_,S[D+1],h[m+1]);break}}m+=2}else m+=2;else m+=4}return p}function UT(l,u,h,p){return[l,!0,!1,u,null,0,p,h,null,null]}function oE(l,u){const h=si(u,l);if(Rl(h)){const p=h[Dt];48&h[dn]?Ds(p,h,p.template,h[Sr]):h[vs]>0&&lv(h)}}function lv(l){for(let p=rd(l);null!==p;p=Yh(p))for(let m=wi;m<p.length;m++){const _=p[m];if(Rl(_))if(512&_[dn]){const S=_[Dt];Ds(S,_,S.template,_[Sr])}else _[vs]>0&&lv(_)}const h=l[Dt].components;if(null!==h)for(let p=0;p<h.length;p++){const m=si(h[p],l);Rl(m)&&m[vs]>0&&lv(m)}}function sE(l,u){const h=si(u,l),p=h[Dt];(function eM(l,u){for(let h=u.length;h<l.blueprint.length;h++)u.push(l.blueprint[h])})(p,h),zs(p,h,h[Sr])}function gC(l,u){return l[Cl]?l[ka][fo]=u:l[Cl]=u,l[ka]=u,u}function uv(l){for(;l;){l[dn]|=32;const u=Kl(l);if(ip(l)&&!u)return l;l=u}return null}function cv(l,u,h,p=!0){const m=u[Su];m.begin&&m.begin();try{Ds(l,u,l.template,h)}catch(S){throw p&&dv(u,S),S}finally{m.end&&m.end()}}function Cf(l,u,h){jc(0),u(l,h)}function Kp(l){return l[La]||(l[La]=[])}function WT(l){return l.cleanup||(l.cleanup=[])}function dv(l,u){const h=l[Yr],p=h?h.get(ev,null):null;p&&p.handleError(u)}function hv(l,u,h,p,m){for(let _=0;_<h.length;){const S=h[_++],D=h[_++],R=u[S],N=l.data[S];null!==N.setInput?N.setInput(R,m,p,D):R[D]=m}}function fv(l,u,h){let p=h?l.styles:null,m=h?l.classes:null,_=0;if(null!==u)for(let S=0;S<u.length;S++){const D=u[S];"number"==typeof D?_=D:1==_?m=_e(m,D):2==_&&(p=_e(p,D+": "+u[++S]+";"))}h?l.styles=p:l.stylesWithoutHost=p,h?l.classes=m:l.classesWithoutHost=m}function pv(l,u,h,p,m=!1){for(;null!==h;){const _=u[h.index];if(null!==_&&p.push(Rr(_)),go(_))for(let D=wi;D<_.length;D++){const R=_[D],N=R[Dt].firstChild;null!==N&&pv(R[Dt],R,N,p)}const S=h.type;if(8&S)pv(l,u,h.child,p);else if(32&S){const D=Ap(h,u);let R;for(;R=D();)p.push(R)}else if(16&S){const D=qu(u,h);if(Array.isArray(D))p.push(...D);else{const R=Kl(u[Ci]);pv(R[Dt],R,D,p,!0)}}h=m?h.projectionNext:h.next}return p}class gd{get rootNodes(){const u=this._lView,h=u[Dt];return pv(h,u,h.firstChild,[])}constructor(u,h){this._lView=u,this._cdRefInjectingView=h,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sr]}set context(u){this._lView[Sr]=u}get destroyed(){return 128==(128&this._lView[dn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[ur];if(go(u)){const h=u[xo],p=h?h.indexOf(this):-1;p>-1&&(Qh(u,p),Bu(h,p))}this._attachedToViewContainer=!1}Jh(this._lView[Dt],this._lView)}onDestroy(u){zp(this._lView[Dt],this._lView,null,u)}markForCheck(){uv(this._cdRefInjectingView||this._lView)}detach(){this._lView[dn]&=-65}reattach(){this._lView[dn]|=64}detectChanges(){cv(this._lView[Dt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function SS(l,u){Zu(l,u,u[vn],2,null,null)}(this._lView[Dt],this._lView)}attachToAppRef(u){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=u}}class aE extends gd{constructor(u){super(u),this._view=u}detectChanges(){const u=this._view;cv(u[Dt],u,u[Sr],!1)}checkNoChanges(){}get context(){return null}}class mC extends pd{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const h=Mn(u);return new qp(h,this.ngModule)}}function vC(l){const u=[];for(let h in l)l.hasOwnProperty(h)&&u.push({propName:l[h],templateName:h});return u}class zT{constructor(u,h){this.injector=u,this.parentInjector=h}get(u,h,p){p=Xt(p);const m=this.injector.get(u,US,p);return m!==US||h===US?m:this.parentInjector.get(u,h,p)}}class qp extends hT{get inputs(){return vC(this.componentDef.inputs)}get outputs(){return vC(this.componentDef.outputs)}constructor(u,h){super(),this.componentDef=u,this.ngModule=h,this.componentType=u.type,this.selector=function FN(l){return l.map(xN).join(",")}(u.selectors),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!h}create(u,h,p,m){let _=(m=m||this.ngModule)instanceof gf?m:m?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const S=_?new zT(u,_):u,D=S.get(gT,null);if(null===D)throw new De(407,!1);const R=S.get(bN,null),N=D.createRenderer(null,this.componentDef),L=this.componentDef.selectors[0][0]||"div",j=p?function uC(l,u,h){return l.selectRootElement(u,h===ue.ShadowDom)}(N,p,this.componentDef.encapsulation):Zh(N,L,function lE(l){const u=l.toLowerCase();return"svg"===u?"svg":"math"===u?"math":null}(L)),ee=this.componentDef.onPush?288:272,le=hn(0,null,null,1,0,null,null,null,null,null),Me=JS(null,le,null,ee,null,null,D,N,R,S,null);let ot,Ct;mp(Me);try{const pt=this.componentDef;let rn,qe=null;pt.findHostDirectiveDefs?(rn=[],qe=new Map,pt.findHostDirectiveDefs(pt,rn,qe),rn.push(pt)):rn=[pt];const ln=function KT(l,u){const h=l[Dt],p=On;return l[p]=u,$p(h,p,2,"#host",null)}(Me,j),Cr=function uE(l,u,h,p,m,_,S,D){const R=m[Dt];!function qT(l,u,h,p){for(const m of l)u.mergedAttrs=ha(u.mergedAttrs,m.hostAttrs);null!==u.mergedAttrs&&(fv(u,u.mergedAttrs,!0),null!==h&&rf(p,h,u))}(p,l,u,S);const N=_.createRenderer(u,h),L=JS(m,aC(h),null,h.onPush?32:16,m[l.index],l,_,N,D||null,null,null);return R.firstCreatePass&&av(R,l,p.length-1),gC(m,L),m[l.index]=L}(ln,j,pt,rn,Me,D,N);Ct=Dh(le,On),j&&function cE(l,u,h,p){if(p)ws(l,h,["ng-version",BS.full]);else{const{attrs:m,classes:_}=function rC(l){const u=[],h=[];let p=1,m=2;for(;p<l.length;){let _=l[p];if("string"==typeof _)2===m?""!==_&&u.push(_,l[++p]):8===m&&h.push(_);else{if(!ba(m))break;m=_}p++}return{attrs:u,classes:h}}(u.selectors[0]);m&&ws(l,h,m),_&&_.length>0&&ud(l,h,_.join(" "))}}(N,pt,j,p),void 0!==h&&function dE(l,u,h){const p=l.projection=[];for(let m=0;m<u.length;m++){const _=h[m];p.push(null!=_?Array.from(_):null)}}(Ct,this.ngContentSelectors,h),ot=function rM(l,u,h,p,m,_){const S=ai(),D=m[Dt],R=Ui(S,m);tE(D,m,S,h,null,p);for(let L=0;L<h.length;L++)wo(za(m,D,S.directiveStart+L,S),m);VT(D,m,S),R&&wo(R,m);const N=za(m,D,S.directiveStart+S.componentOffset,S);if(l[Sr]=m[Sr]=N,null!==_)for(const L of _)L(N,u);return XS(D,S,l),N}(Cr,pt,rn,qe,Me,[hE]),zs(le,Me,null)}finally{wm()}return new tM(this.componentType,ot,mf(Ct,Me),Me,Ct)}}class tM extends _N{constructor(u,h,p,m,_){super(),this.location=p,this._rootLView=m,this._tNode=_,this.instance=h,this.hostView=this.changeDetectorRef=new aE(m),this.componentType=u}setInput(u,h){const p=this._tNode.inputs;let m;if(null!==p&&(m=p[u])){const _=this._rootLView;hv(_[Dt],_,m,u,h),sv(_,this._tNode.index)}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}function hE(){const l=ai();xh($e()[Dt],l)}function Yi(l){let u=function qi(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),h=!0;const p=[l];for(;u;){let m;if(Bi(l))m=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new De(903,!1);m=u.\u0275dir}if(m){if(h){p.push(m);const S=l;S.inputs=gv(l.inputs),S.declaredInputs=gv(l.declaredInputs),S.outputs=gv(l.outputs);const D=m.hostBindings;D&&YT(l,D);const R=m.viewQuery,N=m.contentQueries;if(R&&iM(l,R),N&&oM(l,N),Oe(l.inputs,m.inputs),Oe(l.declaredInputs,m.declaredInputs),Oe(l.outputs,m.outputs),Bi(m)&&m.data.animation){const L=l.data;L.animation=(L.animation||[]).concat(m.data.animation)}}const _=m.features;if(_)for(let S=0;S<_.length;S++){const D=_[S];D&&D.ngInherit&&D(l),D===Yi&&(h=!1)}}u=Object.getPrototypeOf(u)}!function yC(l){let u=0,h=null;for(let p=l.length-1;p>=0;p--){const m=l[p];m.hostVars=u+=m.hostVars,m.hostAttrs=ha(m.hostAttrs,h=ha(h,m.hostAttrs))}}(p)}function gv(l){return l===Et?{}:l===mt?[]:l}function iM(l,u){const h=l.viewQuery;l.viewQuery=h?(p,m)=>{u(p,m),h(p,m)}:u}function oM(l,u){const h=l.contentQueries;l.contentQueries=h?(p,m,_)=>{u(p,m,_),h(p,m,_)}:u}function YT(l,u){const h=l.hostBindings;l.hostBindings=h?(p,m)=>{u(p,m),h(p,m)}:u}function _C(l){return u=>{u.findHostDirectiveDefs=QT,u.hostDirectives=(Array.isArray(l)?l:l()).map(h=>"function"==typeof h?{directive:ie(h),inputs:Et,outputs:Et}:{directive:ie(h.directive),inputs:CC(h.inputs),outputs:CC(h.outputs)})}}function QT(l,u,h){if(null!==l.hostDirectives)for(const p of l.hostDirectives){const m=qr(p.directive);JT(m.declaredInputs,p.inputs),QT(m,u,h),h.set(m,p),u.push(m)}}function CC(l){if(void 0===l||0===l.length)return Et;const u={};for(let h=0;h<l.length;h+=2)u[l[h]]=l[h+1];return u}function JT(l,u){for(const h in u)u.hasOwnProperty(h)&&(l[u[h]]=l[h])}function Yp(l){return!!wf(l)&&(Array.isArray(l)||!(l instanceof Map)&&Symbol.iterator in l)}function wf(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function Ja(l,u,h){return l[u]=h}function Zi(l,u,h){return!Object.is(l[u],h)&&(l[u]=h,!0)}function Sf(l,u,h,p){const m=Zi(l,u,h);return Zi(l,u+1,p)||m}function fE(l,u,h,p){const m=$e();return Zi(m,Nu(),u)&&(xn(),function es(l,u,h,p,m,_){const S=Ui(l,u);fC(u[vn],S,_,l.value,h,p,m)}(vr(),m,l,u,h,p)),fE}function Da(l,u,h,p){return Zi(l,Nu(),h)?u+Ve(h)+p:_n}function eg(l,u,h,p,m,_,S,D){const R=$e(),N=xn(),L=l+On,j=N.firstCreatePass?function DC(l,u,h,p,m,_,S,D,R){const N=u.consts,L=$p(u,l,4,S||null,ks(N,D));eE(u,h,L,ks(N,R)),xh(u,L);const j=L.tView=hn(2,L,p,m,_,u.directiveRegistry,u.pipeRegistry,null,u.schemas,N);return null!==u.queries&&(u.queries.template(u,L),j.queries=u.queries.embeddedTView(L)),L}(L,N,R,u,h,p,m,_,S):N.data[L];vo(j,!1);const ee=R[vn].createComment("");Lp(N,R,ee,j),wo(ee,R),gC(R,R[L]=UT(ee,R,ee,j)),El(j)&&Qa(N,R,j),null!=S&&Bt(R,j,D)}function rR(l){return Cs(function fp(){return nn.lFrame.contextLView}(),On+l)}function yv(l,u,h){const p=$e();return Zi(p,Nu(),u)&&_r(xn(),vr(),p,l,u,p[vn],h,!1),yv}function tg(l,u,h,p,m){const S=m?"class":"style";hv(l,h,u.inputs[S],S,p)}function _v(l,u,h,p){const m=$e(),_=xn(),S=On+l,D=m[vn],R=_.firstCreatePass?function yE(l,u,h,p,m,_){const S=u.consts,R=$p(u,l,2,p,ks(S,m));return eE(u,h,R,ks(S,_)),null!==R.attrs&&fv(R,R.attrs,!1),null!==R.mergedAttrs&&fv(R,R.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,R),R}(S,_,m,u,h,p):_.data[S],N=m[S]=Zh(D,u,function y_(){return nn.lFrame.currentNamespace}()),L=El(R);return vo(R,!0),rf(D,N,R),32!=(32&R.flags)&&Lp(_,m,N,R),0===function dp(){return nn.lFrame.elementDepthCount}()&&wo(N,m),function Au(){nn.lFrame.elementDepthCount++}(),L&&(Qa(_,m,R),XS(_,R,m)),null!==p&&Bt(m,R),_v}function Cv(){let l=ai();hp()?Al():(l=l.parent,vo(l,!1));const u=l;!function ym(){nn.lFrame.elementDepthCount--}();const h=xn();return h.firstCreatePass&&(xh(h,l),Fs(l)&&h.queries.elementEnd(l)),null!=u.classesWithoutHost&&function w_(l){return 0!=(8&l.flags)}(u)&&tg(h,u,$e(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function Go(l){return 0!=(16&l.flags)}(u)&&tg(h,u,$e(),u.stylesWithoutHost,!1),Cv}function TC(l,u,h,p){return _v(l,u,h,p),Cv(),TC}function md(l,u,h){const p=$e(),m=xn(),_=l+On,S=m.firstCreatePass?function uM(l,u,h,p,m){const _=u.consts,S=ks(_,p),D=$p(u,l,8,"ng-container",S);return null!==S&&fv(D,S,!0),eE(u,h,D,ks(_,m)),null!==u.queries&&u.queries.elementStart(u,D),D}(_,m,p,u,h):m.data[_];vo(S,!0);const D=p[_]=p[vn].createComment("");return Lp(m,p,D,S),wo(D,p),El(S)&&(Qa(m,p,S),XS(m,S,p)),null!=h&&Bt(p,S),md}function wv(){let l=ai();const u=xn();return hp()?Al():(l=l.parent,vo(l,!1)),u.firstCreatePass&&(xh(u,l),Fs(l)&&u.queries.elementEnd(l)),wv}function ng(){return $e()}function nc(l){return!!l&&"function"==typeof l.then}function RC(l){return!!l&&"function"==typeof l.subscribe}const iR=RC;function _E(l,u,h,p){const m=$e(),_=xn(),S=ai();return function sR(l,u,h,p,m,_,S){const D=El(p),N=l.firstCreatePass&&WT(l),L=u[Sr],j=Kp(u);let ee=!0;if(3&p.type||S){const ot=Ui(p,u),Ct=S?S(ot):ot,pt=j.length,rn=S?ln=>S(Rr(ln[p.index])):p.index;let qe=null;if(!S&&D&&(qe=function oR(l,u,h,p){const m=l.cleanup;if(null!=m)for(let _=0;_<m.length-1;_+=2){const S=m[_];if(S===h&&m[_+1]===p){const D=u[La],R=m[_+2];return D.length>R?D[R]:null}"string"==typeof S&&(_+=2)}return null}(l,u,m,p.index)),null!==qe)(qe.__ngLastListenerFn__||qe).__ngNextListenerFn__=_,qe.__ngLastListenerFn__=_,ee=!1;else{_=nu(p,u,L,_,!1);const ln=h.listen(Ct,m,_);j.push(_,ln),N&&N.push(m,rn,pt,pt+1)}}else _=nu(p,u,L,_,!1);const le=p.outputs;let Me;if(ee&&null!==le&&(Me=le[m])){const ot=Me.length;if(ot)for(let Ct=0;Ct<ot;Ct+=2){const Cr=u[Me[Ct]][Me[Ct+1]].subscribe(_),ei=j.length;j.push(_,Cr),N&&N.push(m,p.index,ei,-(ei+1))}}}(_,m,m[vn],S,l,u,p),_E}function vd(l,u,h,p){try{return Bn(6,u,h),!1!==h(p)}catch(m){return dv(l,m),!1}finally{Bn(7,u,h)}}function nu(l,u,h,p,m){return function _(S){if(S===Function)return p;uv(l.componentOffset>-1?si(l.index,u):u);let R=vd(u,h,p,S),N=_.__ngNextListenerFn__;for(;N;)R=vd(u,h,N,S)&&R,N=N.__ngNextListenerFn__;return m&&!1===R&&(S.preventDefault(),S.returnValue=!1),R}}function Ev(l=1){return function vp(l){return(nn.lFrame.contextLView=function m_(l,u){for(;l>0;)u=u[Eu],l--;return u}(l,nn.lFrame.contextLView))[Sr]}(l)}function OC(l,u){let h=null;const p=function ST(l){const u=l.attrs;if(null!=u){const h=u.indexOf(5);if(!(1&h))return u[h+1]}return null}(l);for(let m=0;m<u.length;m++){const _=u[m];if("*"!==_){if(null===p?tv(l,_,!0):MN(p,_))return m}else h=m}return h}function wE(l){const u=$e()[Ci][$n];if(!u.projection){const p=u.projection=_a(l?l.length:1,null),m=p.slice();let _=u.child;for(;null!==_;){const S=l?OC(_,l):0;null!==S&&(m[S]?m[S].projectionNext=_:p[S]=_,m[S]=_),_=_.next}}}function Gr(l,u=0,h){const p=$e(),m=xn(),_=$p(m,On+l,16,null,h||null);null===_.projection&&(_.projection=u),Al(),32!=(32&_.flags)&&function k_(l,u,h){Yl(u[vn],0,u,h,DS(l,h,u),Wm(h.parent||u[$n],h,u))}(m,p,_)}function rg(l,u,h){return yd(l,"",u,"",h),rg}function yd(l,u,h,p,m){const _=$e(),S=Da(_,u,h,p);return S!==_n&&_r(xn(),vr(),_,l,S,_[vn],m,!1),yd}function Xa(l,u){return l<<17|u<<2}function rc(l){return l>>17&32767}function _d(l){return 2|l}function Rf(l){return(131068&l)>>2}function EE(l,u){return-131069&l|u<<2}function bE(l){return 1|l}function RE(l,u,h,p,m){const _=l[h+1],S=null===u;let D=p?rc(_):Rf(_),R=!1;for(;0!==D&&(!1===R||S);){const L=l[D+1];gR(l[D],u)&&(R=!0,l[D+1]=p?bE(L):_d(L)),D=p?rc(L):Rf(L)}R&&(l[h+1]=p?_d(_):bE(_))}function gR(l,u){return null===l||null==u||(Array.isArray(l)?l[1]:l)===u||!(!Array.isArray(l)||"string"!=typeof u)&&Tt(l,u)>=0}const Ei={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mR(l){return l.substring(Ei.key,Ei.keyEnd)}function bv(l,u){const h=Ei.textEnd;return h===u?-1:(u=Ei.keyEnd=function Rv(l,u,h){for(;u<h&&l.charCodeAt(u)>32;)u++;return u}(l,Ei.key=u,h),Of(l,u,h))}function Of(l,u,h){for(;u<h&&l.charCodeAt(u)<=32;)u++;return u}function IE(l,u,h){return Ta(l,u,h,!1),IE}function AE(l,u){return Ta(l,u,null,!0),AE}function PE(l){Qi(yn,Ks,l,!0)}function Ks(l,u){for(let h=function fM(l){return function IC(l){Ei.key=0,Ei.keyEnd=0,Ei.value=0,Ei.valueEnd=0,Ei.textEnd=l.length}(l),bv(l,Of(l,0,Ei.textEnd))}(u);h>=0;h=bv(u,h))yn(l,mR(u),!0)}function Ta(l,u,h,p){const m=$e(),_=xn(),S=Lo(2);_.firstUpdatePass&&ME(_,l,S,p),u!==_n&&Zi(m,S,u)&&lg(_,_.data[ao()],m,m[vn],l,m[S+1]=function kE(l,u){return null==l||""===l||("string"==typeof u?l+=u:"object"==typeof l&&(l=Se(uo(l)))),l}(u,h),p,S)}function Qi(l,u,h,p){const m=xn(),_=Lo(2);m.firstUpdatePass&&ME(m,null,_,p);const S=$e();if(h!==_n&&Zi(S,_,h)){const D=m.data[ao()];if(PC(D,p)&&!NE(m,_)){let R=p?D.classesWithoutHost:D.stylesWithoutHost;null!==R&&(h=_e(R,h||"")),tg(m,D,S,h,p)}else!function wR(l,u,h,p,m,_,S,D){m===_n&&(m=mt);let R=0,N=0,L=0<m.length?m[0]:null,j=0<_.length?_[0]:null;for(;null!==L||null!==j;){const ee=R<m.length?m[R+1]:void 0,le=N<_.length?_[N+1]:void 0;let ot,Me=null;L===j?(R+=2,N+=2,ee!==le&&(Me=j,ot=le)):null===j||null!==L&&L<j?(R+=2,Me=L):(N+=2,Me=j,ot=le),null!==Me&&lg(l,u,h,p,Me,ot,S,D),L=R<m.length?m[R]:null,j=N<_.length?_[N]:null}}(m,D,S,S[vn],S[_+1],S[_+1]=function AC(l,u,h){if(null==h||""===h)return mt;const p=[],m=uo(h);if(Array.isArray(m))for(let _=0;_<m.length;_++)l(p,m[_],!0);else if("object"==typeof m)for(const _ in m)m.hasOwnProperty(_)&&l(p,_,m[_]);else"string"==typeof m&&u(p,m);return p}(l,u,h),p,_)}}function NE(l,u){return u>=l.expandoStartIndex}function ME(l,u,h,p){const m=l.data;if(null===m[h+1]){const _=m[ao()],S=NE(l,h);PC(_,p)&&null===u&&!S&&(u=!1),u=function xE(l,u,h,p){const m=function Ua(l){const u=nn.lFrame.currentDirectiveIndex;return-1===u?null:l[u]}(l);let _=p?u.residualClasses:u.residualStyles;if(null===m)0===(p?u.classBindings:u.styleBindings)&&(h=ag(h=sg(null,l,u,h,p),u.attrs,p),_=null);else{const S=u.directiveStylingLast;if(-1===S||l[S]!==m)if(h=sg(m,l,u,h,p),null===_){let R=function Iv(l,u,h){const p=h?u.classBindings:u.styleBindings;if(0!==Rf(p))return l[rc(p)]}(l,u,p);void 0!==R&&Array.isArray(R)&&(R=sg(null,l,u,R[1],p),R=ag(R,u.attrs,p),function _R(l,u,h,p){l[rc(h?u.classBindings:u.styleBindings)]=p}(l,u,p,R))}else _=function FE(l,u,h){let p;const m=u.directiveEnd;for(let _=1+u.directiveStylingLast;_<m;_++)p=ag(p,l[_].hostAttrs,h);return ag(p,u.attrs,h)}(l,u,p)}return void 0!==_&&(p?u.residualClasses=_:u.residualStyles=_),h}(m,_,u,p),function DE(l,u,h,p,m,_){let S=_?u.classBindings:u.styleBindings,D=rc(S),R=Rf(S);l[p]=h;let L,N=!1;if(Array.isArray(h)?(L=h[1],(null===L||Tt(h,L)>0)&&(N=!0)):L=h,m)if(0!==R){const ee=rc(l[D+1]);l[p+1]=Xa(ee,D),0!==ee&&(l[ee+1]=EE(l[ee+1],p)),l[D+1]=function fR(l,u){return 131071&l|u<<17}(l[D+1],p)}else l[p+1]=Xa(D,0),0!==D&&(l[D+1]=EE(l[D+1],p)),D=p;else l[p+1]=Xa(R,0),0===D?D=p:l[R+1]=EE(l[R+1],p),R=p;N&&(l[p+1]=_d(l[p+1])),RE(l,L,p,!0),RE(l,L,p,!1),function TE(l,u,h,p,m){const _=m?l.residualClasses:l.residualStyles;null!=_&&"string"==typeof u&&Tt(_,u)>=0&&(h[p+1]=bE(h[p+1]))}(u,L,l,p,_),S=Xa(D,R),_?u.classBindings=S:u.styleBindings=S}(m,_,u,h,S,p)}}function sg(l,u,h,p,m){let _=null;const S=h.directiveEnd;let D=h.directiveStylingLast;for(-1===D?D=h.directiveStart:D++;D<S&&(_=u[D],p=ag(p,_.hostAttrs,m),_!==l);)D++;return null!==l&&(h.directiveStylingLast=D),p}function ag(l,u,h){const p=h?1:2;let m=-1;if(null!==u)for(let _=0;_<u.length;_++){const S=u[_];"number"==typeof S?m=S:m===p&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),yn(l,S,!!h||u[++_]))}return void 0===l?null:l}function lg(l,u,h,p,m,_,S,D){if(!(3&u.type))return;const R=l.data,N=R[D+1],L=function pR(l){return 1==(1&l)}(N)?LE(R,u,h,m,Rf(N),S):void 0;Av(L)||(Av(_)||function hR(l){return 2==(2&l)}(N)&&(_=LE(R,null,h,m,D,S)),function So(l,u,h,p,m){if(u)m?l.addClass(h,p):l.removeClass(h,p);else{let _=-1===p.indexOf("-")?void 0:jo.DashCase;null==m?l.removeStyle(h,p,_):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),_|=jo.Important),l.setStyle(h,p,m,_))}}(p,S,_s(ao(),h),m,_))}function LE(l,u,h,p,m,_){const S=null===u;let D;for(;m>0;){const R=l[m],N=Array.isArray(R),L=N?R[1]:R,j=null===L;let ee=h[m+1];ee===_n&&(ee=j?mt:void 0);let le=j?Ho(ee,p):L===p?ee:void 0;if(N&&!Av(le)&&(le=Ho(R,p)),Av(le)&&(D=le,S))return D;const Me=l[m+1];m=S?rc(Me):Rf(Me)}if(null!==u){let R=_?u.residualClasses:u.residualStyles;null!=R&&(D=Ho(R,p))}return D}function Av(l){return void 0!==l}function PC(l,u){return 0!=(l.flags&(u?8:16))}function GE(l,u=""){const h=$e(),p=xn(),m=l+On,_=p.firstCreatePass?$p(p,m,1,u,null):p.data[m],S=h[m]=id(h[vn],u);Lp(p,h,S,_),vo(_,!1)}function ug(l){return Pv("",l,""),ug}function Pv(l,u,h){const p=$e(),m=Da(p,l,u,h);return m!==_n&&function eu(l,u,h){const p=_s(u,l);Um(l[vn],p,h)}(p,ao(),m),Pv}function WE(l,u,h,p,m){Qi(yn,Ks,function Ef(l,u,h,p,m,_){const D=Sf(l,yo(),h,m);return Lo(2),D?u+Ve(h)+p+Ve(m)+_:_n}($e(),l,u,h,p,m),!0)}function We(l,u,h){const p=$e();return Zi(p,Nu(),u)&&_r(xn(),vr(),p,l,u,p[vn],h,!0),We}const Sd=void 0;var SM=["en",[["a","p"],["AM","PM"],Sd],[["AM","PM"],Sd,Sd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sd,"{1} 'at' {0}",Sd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wM(l){const h=Math.floor(Math.abs(l)),p=l.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===p?1:5}];let hg={};function KE(l){const u=function gn(l){return l.toLowerCase().replace(/_/g,"-")}(l);let h=bM(u);if(h)return h;const p=u.split("-")[0];if(h=bM(p),h)return h;if("en"===p)return SM;throw new De(701,!1)}function TR(l){return KE(l)[en.PluralCase]}function bM(l){return l in hg||(hg[l]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[l]),hg[l]}var en=(()=>((en=en||{})[en.LocaleId=0]="LocaleId",en[en.DayPeriodsFormat=1]="DayPeriodsFormat",en[en.DayPeriodsStandalone=2]="DayPeriodsStandalone",en[en.DaysFormat=3]="DaysFormat",en[en.DaysStandalone=4]="DaysStandalone",en[en.MonthsFormat=5]="MonthsFormat",en[en.MonthsStandalone=6]="MonthsStandalone",en[en.Eras=7]="Eras",en[en.FirstDayOfWeek=8]="FirstDayOfWeek",en[en.WeekendRange=9]="WeekendRange",en[en.DateFormat=10]="DateFormat",en[en.TimeFormat=11]="TimeFormat",en[en.DateTimeFormat=12]="DateTimeFormat",en[en.NumberSymbols=13]="NumberSymbols",en[en.NumberFormats=14]="NumberFormats",en[en.CurrencyCode=15]="CurrencyCode",en[en.CurrencySymbol=16]="CurrencySymbol",en[en.CurrencyName=17]="CurrencyName",en[en.Currencies=18]="Currencies",en[en.Directionality=19]="Directionality",en[en.PluralCase=20]="PluralCase",en[en.ExtraData=21]="ExtraData",en))();const fg=["zero","one","two","few","many"],hr="en-US",Ed={marker:"element"},Fn={marker:"ICU"};var hi=(()=>((hi=hi||{})[hi.SHIFT=2]="SHIFT",hi[hi.APPEND_EAGERLY=1]="APPEND_EAGERLY",hi[hi.COMMENT=2]="COMMENT",hi))();let ft=hr;function Mv(l){(function yt(l,u){null==l&&gt(u,l,null,"!=")})(l,"Expected localeId to be defined"),"string"==typeof l&&(ft=l.toLowerCase().replace(/_/g,"-"))}function bd(l,u,h){const p=u.insertBeforeIndex,m=Array.isArray(p)?p[0]:p;return null===m?Bs(l,0,h):Rr(h[m])}function OR(l,u,h,p,m){const _=u.insertBeforeIndex;if(Array.isArray(_)){let S=p,D=null;if(3&u.type||(D=S,S=m),null!==S&&-1===u.componentOffset)for(let R=1;R<_.length;R++)ql(l,S,h[_[R]],D,!1)}}function xv(l,u){if(l.push(u),l.length>1)for(let h=l.length-2;h>=0;h--){const p=l[h];IR(p)||Fv(p,u)&&null===AR(p)&&PR(p,u.index)}}function IR(l){return!(64&l.type)}function Fv(l,u){return IR(u)||l.index>u.index}function AR(l){const u=l.insertBeforeIndex;return Array.isArray(u)?u[0]:u}function PR(l,u){const h=l.insertBeforeIndex;Array.isArray(h)?h[0]=u:($m(bd,OR),l.insertBeforeIndex=u)}function Do(l,u){const h=l.data[u];return null===h||"string"==typeof h?null:h.hasOwnProperty("currentCaseLViewIndex")?h:h.value}function MR(l,u,h){const p=Te(l,h,64,null,null);return xv(u,p),p}function nl(l,u){const h=u[l.currentCaseLViewIndex];return null===h?h:h<0?~h:h}function xC(l){return l>>>17}function me(l){return(131070&l)>>>1}let kv=0,ic=0;function ZE(l,u,h,p){const m=h[vn];let S,_=null;for(let D=0;D<u.length;D++){const R=u[D];if("string"==typeof R){const N=u[++D];null===h[N]&&(h[N]=id(m,R))}else if("number"==typeof R)switch(1&R){case 0:const N=xC(R);let L,j;if(null===_&&(_=N,S=tf(m,p)),N===_?(L=p,j=S):(L=null,j=Rr(h[N])),null!==j){const ot=me(R);ql(m,j,h[ot],L,!1);const pt=Do(l,ot);if(null!==pt&&"object"==typeof pt){const rn=nl(pt,h);null!==rn&&ZE(l,pt.create[rn],h,h[pt.anchorIdx])}}break;case 1:const le=u[++D],Me=u[++D];fC(m,_s(R>>>1,h),null,null,le,Me,null)}else switch(R){case Fn:const N=u[++D],L=u[++D];null===h[L]&&wo(h[L]=CS(m,N),h);break;case Ed:const j=u[++D],ee=u[++D];null===h[ee]&&wo(h[ee]=Zh(m,j,null),h)}}}function FC(l,u,h,p,m){for(let _=0;_<h.length;_++){const S=h[_],D=h[++_];if(S&m){let R="";for(let N=_+1;N<=_+D;N++){const L=h[N];if("string"==typeof L)R+=L;else if("number"==typeof L)if(L<0)R+=Ve(u[p-L]);else{const j=L>>>2;switch(3&L){case 1:const ee=h[++N],le=h[++N],Me=l.data[j];"string"==typeof Me?fC(u[vn],u[j],null,Me,ee,R,le):_r(l,Me,u,ee,R,u[vn],le,!1);break;case 0:const ot=u[j];null!==ot&&Um(u[vn],ot,R);break;case 2:TM(l,Do(l,j),u,R);break;case 3:xR(l,Do(l,j),p,u)}}}}else{const R=h[_+1];if(R>0&&3==(3&R)){const L=Do(l,R>>>2);u[L.currentCaseLViewIndex]<0&&xR(l,L,p,u)}}_+=D}}function xR(l,u,h,p){let m=p[u.currentCaseLViewIndex];if(null!==m){let _=kv;m<0&&(m=p[u.currentCaseLViewIndex]=~m,_=-1),FC(l,p,u.update[m],h,_)}}function TM(l,u,h,p){const m=function Gv(l,u){let h=l.cases.indexOf(u);if(-1===h)switch(l.type){case 1:{const p=function RR(l,u){const h=TR(u)(parseInt(l,10)),p=fg[h];return void 0!==p?p:"other"}(u,function qE(){return ft}());h=l.cases.indexOf(p),-1===h&&"other"!==p&&(h=l.cases.indexOf("other"));break}case 0:h=l.cases.indexOf("other")}return-1===h?null:h}(u,p);if(nl(u,h)!==m&&(Rs(l,u,h),h[u.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const S=h[u.anchorIdx];S&&ZE(l,u.create[m],h,S)}}function Rs(l,u,h){let p=nl(u,h);if(null!==p){const m=u.remove[p];for(let _=0;_<m.length;_++){const S=m[_];if(S>0){const D=_s(S,h);null!==D&&Yu(h[vn],D)}else Rs(l,Do(l,~S),h)}}}function Vv(){const l=[];let h,p,u=-1;function _(D,R){u=0;const N=nl(D,R);p=null!==N?D.remove[N]:mt}function S(){if(u<p.length){const D=p[u++];return D>0?h[D]:(l.push(u,p),_(h[Dt].data[~D],h),S())}return 0===l.length?null:(p=l.pop(),u=l.pop(),S())}return function m(D,R){for(h=R;l.length;)l.pop();return _(D.value,R),S}}const Hv=/\ufffd(\d+):?\d*\ufffd/gi,FR=/\ufffd(\d+)\ufffd/,LR=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Bv="\ufffd",IM=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,AM=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,PM=/\uE500/g;function kR(l,u,h,p,m,_,S){const D=Ki(l,p,1,null);let R=D<<hi.SHIFT,N=Il();u===N&&(N=null),null===N&&(R|=hi.APPEND_EAGERLY),S&&(R|=hi.COMMENT,function Ku(l){void 0===zu&&(zu=l())}(Vv)),m.push(R,null===_?"":_);const L=Te(l,D,S?32:1,null===_?"":_,null);xv(h,L);const j=L.index;return vo(L,!1),null!==N&&u!==N&&function NR(l,u){let h=l.insertBeforeIndex;null===h?($m(bd,OR),h=l.insertBeforeIndex=[null,u]):(function dt(l,u,h){l!=u&&gt(h,l,u,"==")}(Array.isArray(h),!0,"Expecting array here"),h.push(u))}(N,j),L}function xM(l,u,h,p,m,_,S){const D=S.match(Hv),R=kR(l,u,h,_,p,D?null:S,!1);D&&Uv(m,S,R.index,null,0,null)}function Uv(l,u,h,p,m,_){const S=l.length,D=S+1;l.push(null,null);const R=S+2,N=u.split(Hv);let L=0;for(let j=0;j<N.length;j++){const ee=N[j];if(1&j){const le=m+parseInt(ee,10);l.push(-1-le),L|=GR(le)}else""!==ee&&l.push(ee)}return l.push(h<<2|(p?1:0)),p&&l.push(p,_),l[S]=L,l[D]=l.length-R,L}function GR(l){return 1<<Math.min(l,31)}function QE(l){let u,_,h="",p=0,m=!1;for(;null!==(u=IM.exec(l));)m?u[0]===`${Bv}/*${_}${Bv}`&&(p=u.index,m=!1):(h+=l.substring(p,u.index+u[0].length),_=u[1],m=!0);return h+=l.slice(p),h}function JE(l,u,h,p,m,_){let S=0;const D={type:m.type,currentCaseLViewIndex:Ki(l,u,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function HR(l,u,h){l.push(GR(u.mainBinding),2,-1-u.mainBinding,h<<2|2)})(h,m,_),function YE(l,u,h){const p=l.data[u];null===p?l.data[u]=h:p.value=h}(l,_,D);const R=m.values;for(let N=0;N<R.length;N++){const L=R[N],j=[];for(let ee=0;ee<L.length;ee++){const le=L[ee];if("string"!=typeof le){const Me=j.push(le)-1;L[ee]=`\x3c!--\ufffd${Me}\ufffd--\x3e`}}S=eb(l,D,u,h,p,m.cases[N],L.join(""),j)|S}S&&function fi(l,u,h){l.push(u,1,h<<2|3)}(h,S,_)}function VR(l){const u=[],h=[];let p=1,m=0;const _=XE(l=l.replace(LR,function(S,D,R){return p="select"===R?0:1,m=parseInt(D.slice(1),10),""}));for(let S=0;S<_.length;){let D=_[S++].trim();1===p&&(D=D.replace(/\s*(?:=)?(\w+)\s*/,"$1")),D.length&&u.push(D);const R=XE(_[S++]);u.length>h.length&&h.push(R)}return{type:p,mainBinding:m,cases:u,values:h}}function XE(l){if(!l)return[];let u=0;const h=[],p=[],m=/[{}]/g;let _;for(m.lastIndex=0;_=m.exec(l);){const D=_.index;if("}"==_[0]){if(h.pop(),0==h.length){const R=l.substring(u,D);LR.test(R)?p.push(VR(R)):p.push(R),u=D+1}}else{if(0==h.length){const R=l.substring(u,D);p.push(R),u=D+1}h.push("{")}}const S=l.substring(u);return p.push(S),p}function eb(l,u,h,p,m,_,S,D){const R=[],N=[],L=[];u.cases.push(_),u.create.push(R),u.remove.push(N),u.update.push(L);const ee=function P(l){const u=new ne(l);return function Ce(){try{return!!(new window.DOMParser).parseFromString(cd(""),"text/html")}catch{return!1}}()?new G(u):u}(function H_(){return void 0!==zm?zm:typeof document<"u"?document:void 0}()).getInertBodyElement(S),le=function eT(l){return"content"in l&&function PS(l){return l.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===l.nodeName}(l)?l.content:null}(ee)||ee;return le?Ji(l,u,h,p,R,N,L,le,m,D,0):0}function Ji(l,u,h,p,m,_,S,D,R,N,L){let j=0,ee=D.firstChild;for(;ee;){const le=Ki(l,h,1,null);switch(ee.nodeType){case Node.ELEMENT_NODE:const Me=ee,ot=Me.tagName.toLowerCase();if(df.hasOwnProperty(ot)){pg(m,Ed,ot,R,le),l.data[le]=ot;const qe=Me.attributes;for(let ln=0;ln<qe.length;ln++){const Cr=qe.item(ln),ei=Cr.name.toLowerCase();Cr.value.match(Hv)?dd.hasOwnProperty(ei)&&Uv(S,Cr.value,le,Cr.name,0,hf[ei]?bt:null):To(m,le,Cr)}j=Ji(l,u,h,p,m,_,S,ee,le,N,L+1)|j,tb(_,le,L)}break;case Node.TEXT_NODE:const Ct=ee.textContent||"",pt=Ct.match(Hv);pg(m,null,pt?"":Ct,R,le),tb(_,le,L),pt&&(j=Uv(S,Ct,le,null,0,null)|j);break;case Node.COMMENT_NODE:const rn=FR.exec(ee.textContent||"");if(rn){const ln=N[parseInt(rn[1],10)];pg(m,Fn,"",R,le),JE(l,h,p,R,ln,le),Af(_,le,L)}}ee=ee.nextSibling}return j}function tb(l,u,h){0===h&&l.push(u)}function Af(l,u,h){0===h&&(l.push(~u),l.push(u))}function pg(l,u,h,p,m){null!==u&&l.push(u),l.push(h,m,function rl(l,u,h){return l|u<<17|h<<1}(0,p,m))}function To(l,u,h){l.push(u<<1|1,h.name,h.value)}function Xr(l,u,h=-1){const p=xn(),m=$e(),_=On+l,S=ks(p.consts,u),D=Il();p.firstCreatePass&&function MM(l,u,h,p,m,_){const S=Il(),D=[],R=[],N=[[]];m=function GM(l,u){if(function kM(l){return-1===l}(u))return QE(l);{const h=l.indexOf(`:${u}${Bv}`)+2+u.toString().length,p=l.search(new RegExp(`${Bv}\\/\\*\\d+:${u}${Bv}`));return QE(l.substring(h,p))}}(m,_);const L=function NM(l){return l.replace(PM," ")}(m).split(AM);for(let j=0;j<L.length;j++){let ee=L[j];if(1&j){const le=47===ee.charCodeAt(0),ot=(ee.charCodeAt(le?1:0),On+Number.parseInt(ee.substring(le?2:1)));if(le)N.shift(),vo(Il(),!1);else{const Ct=MR(l,N[0],ot);N.unshift([]),vo(Ct,!0)}}else{const le=XE(ee);for(let Me=0;Me<le.length;Me++){let ot=le[Me];if(1&Me){const Ct=ot;if("object"!=typeof Ct)throw new Error(`Unable to parse ICU expression in "${m}" message.`);JE(l,h,R,u,Ct,kR(l,S,N[0],h,D,"",!0).index)}else""!==ot&&xM(l,S,N[0],D,R,h,ot)}}}l.data[p]={create:D,update:R}}(p,null===D?0:D.index,m,_,S,h);const R=p.data[_],L=od(p,D===m[$n]?null:D,m);(function If(l,u,h,p){const m=l[vn];for(let _=0;_<u.length;_++){const S=u[_++],D=u[_],N=(S&hi.APPEND_EAGERLY)===hi.APPEND_EAGERLY,L=S>>>hi.SHIFT;let j=l[L];null===j&&(j=l[L]=(S&hi.COMMENT)===hi.COMMENT?m.createComment(D):id(m,D)),N&&null!==h&&ql(m,h,j,p,!1)}})(m,R.create,L,D&&8&D.type?m[D.index]:null),pp(!0)}function kC(l,u,h){Xr(l,u,h),function Rd(){pp(!1)}()}function Pf(l){return function Dd(l){l&&(kv|=1<<Math.min(ic,31)),ic++}(Zi($e(),Nu(),l)),Pf}function jR(l){!function DM(l,u,h){if(ic>0){const p=l.data[h];FC(l,u,Array.isArray(p)?p:p.update,yo()-ic-1,kv)}kv=0,ic=0}(xn(),$e(),l+On)}function mg(l,u,h,p,m){if(l=ie(l),Array.isArray(l))for(let _=0;_<l.length;_++)mg(l[_],u,h,p,m);else{const _=xn(),S=$e();let D=Ql(l)?l:ie(l.provide),R=cT(l);const N=ai(),L=1048575&N.providerIndexes,j=N.directiveStart,ee=N.providerIndexes>>20;if(Ql(l)||!l.multi){const le=new xu(R,m,Wp),Me=Nf(D,u,m?L:L+ee,j);-1===Me?(Gl(kl(N,S),_,D),oc(_,l,u.length),u.push(D),N.directiveStart++,N.directiveEnd++,m&&(N.providerIndexes+=1048576),h.push(le),S.push(le)):(h[Me]=le,S[Me]=le)}else{const le=Nf(D,u,L+ee,j),Me=Nf(D,u,L,L+ee),Ct=Me>=0&&h[Me];if(m&&!Ct||!m&&!(le>=0&&h[le])){Gl(kl(N,S),_,D);const pt=function nb(l,u,h,p,m){const _=new xu(l,h,Wp);return _.multi=[],_.index=u,_.componentProviders=0,ol(_,m,p&&!h),_}(m?WR:Ad,h.length,m,p,R);!m&&Ct&&(h[Me].providerFactory=pt),oc(_,l,u.length,0),u.push(D),N.directiveStart++,N.directiveEnd++,m&&(N.providerIndexes+=1048576),h.push(pt),S.push(pt)}else oc(_,l,le>-1?le:Me,ol(h[m?Me:le],R,!m&&p));!m&&p&&Ct&&h[Me].componentProviders++}}}function oc(l,u,h,p){const m=Ql(u),_=function Bp(l){return!!l.useClass}(u);if(m||_){const R=(_?ie(u.useClass):u).prototype.ngOnDestroy;if(R){const N=l.destroyHooks||(l.destroyHooks=[]);if(!m&&u.multi){const L=N.indexOf(h);-1===L?N.push(h,[p,R]):N[L+1].push(p,R)}else N.push(h,R)}}}function ol(l,u,h){return h&&l.componentProviders++,l.multi.push(u)-1}function Nf(l,u,h,p){for(let m=h;m<p;m++)if(u[m]===l)return m;return-1}function Ad(l,u,h,p){return Pd(this.multi,[])}function WR(l,u,h,p){const m=this.multi;let _;if(this.providerFactory){const S=this.providerFactory.componentProviders,D=za(h,h[Dt],this.providerFactory.index,p);_=D.slice(0,S),Pd(m,_);for(let R=S;R<D.length;R++)_.push(D[R])}else _=[],Pd(m,_);return _}function Pd(l,u){for(let h=0;h<l.length;h++)u.push((0,l[h])());return u}function Nd(l,u=[]){return h=>{h.providersResolver=(p,m)=>function Id(l,u,h){const p=xn();if(p.firstCreatePass){const m=Bi(l);mg(h,p.data,p.blueprint,m,!0),mg(u,p.data,p.blueprint,m,!1)}}(p,m?m(l):l,u)}}class Md{}class vg{}function $R(l,u){return new jv(l,u??null)}class jv extends Md{constructor(u,h){super(),this._parent=h,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mC(this);const p=oi(u);this._bootstrapComponents=Jl(p.bootstrap),this._r3Injector=VN(u,h,[{provide:Md,useValue:this},{provide:pd,useValue:this.componentFactoryResolver}],Se(u),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(u)}get injector(){return this._r3Injector}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(h=>h()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class Mf extends vg{constructor(u){super(),this.moduleType=u}create(u){return new jv(this.moduleType,u)}}class zR extends Md{constructor(u,h,p){super(),this.componentFactoryResolver=new mC(this),this.instance=null;const m=new lT([...u,{provide:Md,useValue:this},{provide:pd,useValue:this.componentFactoryResolver}],h||J_(),p,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(u){this.injector.onDestroy(u)}}function rb(l,u,h=null){return new zR(l,u,h).injector}let jM=(()=>{class l{constructor(h){this._injector=h,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(h){if(!h.standalone)return null;if(!this.cachedInjectors.has(h.id)){const p=iT(0,h.type),m=p.length>0?rb([p],this._injector,`Standalone[${h.type.name}]`):null;this.cachedInjectors.set(h.id,m)}return this.cachedInjectors.get(h.id)}ngOnDestroy(){try{for(const h of this.cachedInjectors.values())null!==h&&h.destroy()}finally{this.cachedInjectors.clear()}}}return l.\u0275prov=_t({token:l,providedIn:"environment",factory:()=>new l(ht(gf))}),l})();function ib(l){l.getStandaloneInjector=u=>u.get(jM).getOrCreateStandaloneInjector(l)}function ub(l,u,h,p){return tO($e(),Fr(),l,u,h,p)}function cb(l,u,h,p,m){return function VC(l,u,h,p,m,_,S){const D=u+h;return Sf(l,D,m,_)?Ja(l,D+2,S?p.call(S,m,_):p(m,_)):Wv(l,D+2)}($e(),Fr(),l,u,h,p,m)}function JR(l,u,h,p,m,_){return function xd(l,u,h,p,m,_,S,D){const R=u+h;return function wC(l,u,h,p,m){const _=Sf(l,u,h,p);return Zi(l,u+2,m)||_}(l,R,m,_,S)?Ja(l,R+3,D?p.call(D,m,_,S):p(m,_,S)):Wv(l,R+3)}($e(),Fr(),l,u,h,p,m,_)}function Wv(l,u){const h=l[u];return h===_n?void 0:h}function tO(l,u,h,p,m,_){const S=u+h;return Zi(l,S,m)?Ja(l,S+1,_?p.call(_,m):p(m)):Wv(l,S+1)}function zv(l,u){const h=xn();let p;const m=l+On;h.firstCreatePass?(p=function nO(l,u){if(u)for(let h=u.length-1;h>=0;h--){const p=u[h];if(l===p.name)return p}}(u,h.pipeRegistry),h.data[m]=p,p.onDestroy&&(h.destroyHooks??(h.destroyHooks=[])).push(m,p.onDestroy)):p=h.data[m];const _=p.factory||(p.factory=mo(p.type)),S=Jt(Wp);try{const D=Fl(!1),R=_();return Fl(D),function nR(l,u,h,p){h>=l.data.length&&(l.data[h]=null,l.blueprint[h]=null),u[h]=p}(h,$e(),m,R),R}finally{Jt(S)}}function ru(l,u,h){const p=l+On,m=$e(),_=Cs(m,p);return function Fd(l,u){return l[Dt].data[u].pure}(m,p)?tO(m,Fr(),u,_.transform,h,_):_.transform(h)}function ac(l){return u=>{setTimeout(l,void 0,u)}}const jr=class hb extends c.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,h,p){let m=u,_=h||(()=>null),S=p;if(u&&"object"==typeof u){const R=u;m=R.next?.bind(R),_=R.error?.bind(R),S=R.complete?.bind(R)}this.__isAsync&&(_=ac(_),m&&(m=ac(m)),S&&(S=ac(S)));const D=super.subscribe({next:m,error:_,complete:S});return u instanceof se.w0&&u.add(D),D}};function fb(){return this._results[Symbol.iterator]()}class Sg{get changes(){return this._changes||(this._changes=new jr)}constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const h=Sg.prototype;h[Symbol.iterator]||(h[Symbol.iterator]=fb)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,h){return this._results.reduce(u,h)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,h){const p=this;p.dirty=!1;const m=function Wi(l){return l.flat(Number.POSITIVE_INFINITY)}(u);(this._changesDetected=!function Ul(l,u,h){if(l.length!==u.length)return!1;for(let p=0;p<l.length;p++){let m=l[p],_=u[p];if(h&&(m=h(m),_=h(_)),_!==m)return!1}return!0}(p._results,m,h))&&(p._results=m,p.length=m.length,p.last=m[this.length-1],p.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let lc=(()=>{class l{}return l.__NG_ELEMENT_ID__=Kv,l})();const oO=lc,pb=class extends oO{constructor(u,h,p){super(),this._declarationLView=u,this._declarationTContainer=h,this.elementRef=p}createEmbeddedView(u,h){const p=this._declarationTContainer.tView,m=JS(this._declarationLView,p,u,16,null,p.declTNode,null,null,null,null,h||null);m[wl]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[so];return null!==S&&(m[so]=S.createEmbeddedView(p)),zs(p,m,u),new gd(m)}};function Kv(){return qv(ai(),$e())}function qv(l,u){return 4&l.type?new pb(u,l,mf(l,u)):null}let Yv=(()=>{class l{}return l.__NG_ELEMENT_ID__=ZM,l})();function ZM(){return Eg(ai(),$e())}const Ld=Yv,sO=class extends Ld{constructor(u,h,p){super(),this._lContainer=u,this._hostTNode=h,this._hostLView=p}get element(){return mf(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const u=ga(this._hostTNode,this._hostLView);if(Gh(u)){const h=xl(u,this._hostLView),p=Ml(u);return new ji(h[Dt].data[p+8],h)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const h=ts(this._lContainer);return null!==h&&h[u]||null}get length(){return this._lContainer.length-wi}createEmbeddedView(u,h,p){let m,_;"number"==typeof p?m=p:null!=p&&(m=p.index,_=p.injector);const S=u.createEmbeddedView(h||{},_);return this.insert(S,m),S}createComponent(u,h,p,m,_){const S=u&&!function Vs(l){return"function"==typeof l}(u);let D;if(S)D=h;else{const j=h||{};D=j.index,p=j.injector,m=j.projectableNodes,_=j.environmentInjector||j.ngModuleRef}const R=S?u:new qp(Mn(u)),N=p||this.parentInjector;if(!_&&null==R.ngModule){const ee=(S?N:this.parentInjector).get(gf,null);ee&&(_=ee)}const L=R.create(N,m,void 0,_);return this.insert(L.hostView,D),L}insert(u,h){const p=u._lView,m=p[Dt];if(function Iu(l){return go(l[ur])}(p)){const L=this.indexOf(u);if(-1!==L)this.detach(L);else{const j=p[ur],ee=new sO(j,j[$n],j[ur]);ee.detach(ee.indexOf(u))}}const _=this._adjustIndex(h),S=this._lContainer;!function bS(l,u,h,p){const m=wi+p,_=h.length;p>0&&(h[m-1][fo]=u),p<_-wi?(u[fo]=h[m],Bh(h,wi+p,u)):(h.push(u),u[fo]=null),u[ur]=h;const S=u[wl];null!==S&&h!==S&&function M_(l,u){const h=l[Sl];u[Ci]!==u[ur][ur][Ci]&&(l[Ac]=!0),null===h?l[Sl]=[u]:h.push(u)}(S,u);const D=u[so];null!==D&&D.insertView(l),u[dn]|=64}(m,p,S,_);const D=kp(_,S),R=p[vn],N=tf(R,S[Ga]);return null!==N&&function Mp(l,u,h,p,m,_){p[Mo]=m,p[$n]=u,Zu(l,p,h,1,m,_)}(m,S[$n],R,p,N,D),u.attachToViewContainerRef(),Bh(HC(S),_,u),u}move(u,h){return this.insert(u,h)}indexOf(u){const h=ts(this._lContainer);return null!==h?h.indexOf(u):-1}remove(u){const h=this._adjustIndex(u,-1),p=Qh(this._lContainer,h);p&&(Bu(HC(this._lContainer),h),Jh(p[Dt],p))}detach(u){const h=this._adjustIndex(u,-1),p=Qh(this._lContainer,h);return p&&null!=Bu(HC(this._lContainer),h)?new gd(p):null}_adjustIndex(u,h=0){return u??this.length+h}};function ts(l){return l[xo]}function HC(l){return l[xo]||(l[xo]=[])}function Eg(l,u){let h;const p=u[l.index];if(go(p))h=p;else{let m;if(8&l.type)m=Rr(p);else{const _=u[vn];m=_.createComment("");const S=Ui(l,u);ql(_,tf(_,S),m,function F_(l,u){return l.nextSibling(u)}(_,S),!1)}u[l.index]=h=UT(p,u,m,l),gC(u,h)}return new sO(h,l,u)}class BC{constructor(u){this.queryList=u,this.matches=null}clone(){return new BC(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ra{constructor(u=[]){this.queries=u}createEmbeddedView(u){const h=u.queries;if(null!==h){const p=null!==u.contentQueries?u.contentQueries[0]:h.length,m=[];for(let _=0;_<p;_++){const S=h.getByIndex(_);m.push(this.queries[S.indexInDeclarationView].clone())}return new Ra(m)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let h=0;h<this.queries.length;h++)null!==Gd(u,h).matches&&this.queries[h].setDirty()}}class gb{constructor(u,h,p=null){this.predicate=u,this.flags=h,this.read=p}}class xf{constructor(u=[]){this.queries=u}elementStart(u,h){for(let p=0;p<this.queries.length;p++)this.queries[p].elementStart(u,h)}elementEnd(u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementEnd(u)}embeddedTView(u){let h=null;for(let p=0;p<this.length;p++){const m=null!==h?h.length:0,_=this.getByIndex(p).embeddedTView(u,m);_&&(_.indexInDeclarationView=p,null!==h?h.push(_):h=[_])}return null!==h?new xf(h):null}template(u,h){for(let p=0;p<this.queries.length;p++)this.queries[p].template(u,h)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class mb{constructor(u,h=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=h}elementStart(u,h){this.isApplyingToNode(h)&&this.matchTNode(u,h)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,h){this.elementStart(u,h)}embeddedTView(u,h){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,h),new mb(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const h=this._declarationNodeIndex;let p=u.parent;for(;null!==p&&8&p.type&&p.index!==h;)p=p.parent;return h===(null!==p?p.index:-1)}return this._appliesToNextNode}matchTNode(u,h){const p=this.metadata.predicate;if(Array.isArray(p))for(let m=0;m<p.length;m++){const _=p[m];this.matchTNodeWithReadOption(u,h,QM(h,_)),this.matchTNodeWithReadOption(u,h,zc(h,u,_,!1,!1))}else p===lc?4&h.type&&this.matchTNodeWithReadOption(u,h,-1):this.matchTNodeWithReadOption(u,h,zc(h,u,p,!1,!1))}matchTNodeWithReadOption(u,h,p){if(null!==p){const m=this.metadata.read;if(null!==m)if(m===Xu||m===Yv||m===lc&&4&h.type)this.addMatch(h.index,-2);else{const _=zc(h,u,m,!1,!1);null!==_&&this.addMatch(h.index,_)}else this.addMatch(h.index,p)}}addMatch(u,h){null===this.matches?this.matches=[u,h]:this.matches.push(u,h)}}function QM(l,u){const h=l.localNames;if(null!==h)for(let p=0;p<h.length;p+=2)if(h[p]===u)return h[p+1];return null}function JM(l,u,h,p){return-1===h?function En(l,u){return 11&l.type?mf(l,u):4&l.type?qv(l,u):null}(u,l):-2===h?function UC(l,u,h){return h===Xu?mf(u,l):h===lc?qv(u,l):h===Yv?Eg(u,l):void 0}(l,u,p):za(l,l[Dt],h,u)}function vb(l,u,h,p){const m=u[so].queries[p];if(null===m.matches){const _=l.data,S=h.matches,D=[];for(let R=0;R<S.length;R+=2){const N=S[R];D.push(N<0?null:JM(u,_[N],S[R+1],h.metadata.read))}m.matches=D}return m.matches}function jC(l,u,h,p){const m=l.queries.getByIndex(h),_=m.matches;if(null!==_){const S=vb(l,u,m,h);for(let D=0;D<_.length;D+=2){const R=_[D];if(R>0)p.push(S[D/2]);else{const N=_[D+1],L=u[-R];for(let j=wi;j<L.length;j++){const ee=L[j];ee[wl]===ee[ur]&&jC(ee[Dt],ee,N,p)}if(null!==L[Sl]){const j=L[Sl];for(let ee=0;ee<j.length;ee++){const le=j[ee];jC(le[Dt],le,N,p)}}}}}return p}function yb(l){const u=$e(),h=xn(),p=Ph();jc(p+1);const m=Gd(h,p);if(l.dirty&&function Th(l){return 4==(4&l[dn])}(u)===(2==(2&m.metadata.flags))){if(null===m.matches)l.reset([]);else{const _=m.crossesNgTemplate?jC(h,u,p,[]):vb(h,u,m,p);l.reset(_,pT),l.notifyOnChanges()}return!0}return!1}function Zv(l,u,h){const p=xn();p.firstCreatePass&&(kd(p,new gb(l,u,h),-1),2==(2&u)&&(p.staticViewQueries=!0)),Ff(p,$e(),u)}function aO(l,u,h,p){const m=xn();if(m.firstCreatePass){const _=ai();kd(m,new gb(u,h,p),_.index),function cO(l,u){const h=l.contentQueries||(l.contentQueries=[]);u!==(h.length?h[h.length-1]:-1)&&h.push(l.queries.length-1,u)}(m,l),2==(2&h)&&(m.staticContentQueries=!0)}Ff(m,$e(),h)}function lO(){return function uO(l,u){return l[so].queries[u].queryList}($e(),Ph())}function Ff(l,u,h){const p=new Sg(4==(4&h));zp(l,u,p,p.destroy),null===u[so]&&(u[so]=new Ra),u[so].queries.push(new BC(p))}function kd(l,u,h){null===l.queries&&(l.queries=new xf),l.queries.track(new mb(u,h))}function Gd(l,u){return l.queries.getByIndex(u)}function _b(l,u){return qv(l,u)}function bg(l){return!!oi(l)}function ny(...l){}const TO=new cr("Application Initializer");let Bd=(()=>{class l{constructor(h){this.appInits=h,this.resolve=ny,this.reject=ny,this.initialized=!1,this.done=!1,this.donePromise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}runInitializers(){if(this.initialized)return;const h=[],p=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const _=this.appInits[m]();if(nc(_))h.push(_);else if(iR(_)){const S=new Promise((D,R)=>{_.subscribe({complete:D,error:R})});h.push(S)}}Promise.all(h).then(()=>{p()}).catch(m=>{this.reject(m)}),0===h.length&&p(),this.initialized=!0}}return l.\u0275fac=function(h){return new(h||l)(ht(TO,8))},l.\u0275prov=_t({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const ZC=new cr("AppId",{providedIn:"root",factory:function RO(){return`${ry()}${ry()}${ry()}`}});function ry(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ob=new cr("Platform Initializer"),ux=new cr("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let dx=(()=>{class l{log(h){console.log(h)}warn(h){console.warn(h)}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=_t({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();const sl=new cr("LocaleId",{providedIn:"root",factory:()=>It(sl,be.Optional|be.SkipSelf)||function hx(){return typeof $localize<"u"&&$localize.locale||hr}()}),Rg=new cr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ud{constructor(u,h){this.ngModuleFactory=u,this.componentFactories=h}}let OO=(()=>{class l{compileModuleSync(h){return new Mf(h)}compileModuleAsync(h){return Promise.resolve(this.compileModuleSync(h))}compileModuleAndAllComponentsSync(h){const p=this.compileModuleSync(h),_=Jl(oi(h).declarations).reduce((S,D)=>{const R=Mn(D);return R&&S.push(new qp(R)),S},[]);return new Ud(p,_)}compileModuleAndAllComponentsAsync(h){return Promise.resolve(this.compileModuleAndAllComponentsSync(h))}clearCache(){}clearCacheFor(h){}getModuleId(h){}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=_t({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const IO=(()=>Promise.resolve(0))();function iy(l){typeof Zone>"u"?IO.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class qs{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:h=!1,shouldCoalesceRunChangeDetection:p=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jr(!1),this.onMicrotaskEmpty=new jr(!1),this.onStable=new jr(!1),this.onError=new jr(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!p&&h,m.shouldCoalesceRunChangeDetection=p,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function Ib(){let l=Yt.requestAnimationFrame,u=Yt.cancelAnimationFrame;if(typeof Zone<"u"&&l&&u){const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h);const p=u[Zone.__symbol__("OriginalDelegate")];p&&(u=p)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function XC(l){const u=()=>{!function AO(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(Yt,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,Gf(l),l.isCheckStableRunning=!0,JC(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),Gf(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(h,p,m,_,S,D)=>{try{return $d(l),h.invokeTask(m,_,S,D)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||l.shouldCoalesceRunChangeDetection)&&u(),PO(l)}},onInvoke:(h,p,m,_,S,D,R)=>{try{return $d(l),h.invoke(m,_,S,D,R)}finally{l.shouldCoalesceRunChangeDetection&&u(),PO(l)}},onHasTask:(h,p,m,_)=>{h.hasTask(m,_),p===m&&("microTask"==_.change?(l._hasPendingMicrotasks=_.microTask,Gf(l),JC(l)):"macroTask"==_.change&&(l.hasPendingMacrotasks=_.macroTask))},onHandleError:(h,p,m,_)=>(h.handleError(m,_),l.runOutsideAngular(()=>l.onError.emit(_)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qs.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(qs.isInAngularZone())throw new De(909,!1)}run(u,h,p){return this._inner.run(u,h,p)}runTask(u,h,p,m){const _=this._inner,S=_.scheduleEventTask("NgZoneEvent: "+m,u,yx,ny,ny);try{return _.runTask(S,h,p)}finally{_.cancelTask(S)}}runGuarded(u,h,p){return this._inner.runGuarded(u,h,p)}runOutsideAngular(u){return this._outer.run(u)}}const yx={};function JC(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function Gf(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function $d(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function PO(l){l._nesting--,JC(l)}class NO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jr,this.onMicrotaskEmpty=new jr,this.onStable=new jr,this.onError=new jr}run(u,h,p){return u.apply(h,p)}runGuarded(u,h,p){return u.apply(h,p)}runOutsideAngular(u){return u()}runTask(u,h,p,m){return u.apply(h,p)}}const MO=new cr(""),xO=new cr("");let iu,_x=(()=>{class l{constructor(h,p,m){this._ngZone=h,this.registry=p,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,iu||(function Vf(l){iu=l}(m),m.addToWindow(p)),this._watchAngularEvents(),h.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qs.assertNotInAngularZone(),iy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())iy(()=>{for(;0!==this._callbacks.length;){let h=this._callbacks.pop();clearTimeout(h.timeoutId),h.doneCb(this._didWork)}this._didWork=!1});else{let h=this.getPendingTasks();this._callbacks=this._callbacks.filter(p=>!p.updateCb||!p.updateCb(h)||(clearTimeout(p.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(h=>({source:h.source,creationLocation:h.creationLocation,data:h.data})):[]}addCallback(h,p,m){let _=-1;p&&p>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==_),h(this._didWork,this.getPendingTasks())},p)),this._callbacks.push({doneCb:h,timeoutId:_,updateCb:m})}whenStable(h,p,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(h,p,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(h){this.registry.registerApplication(h,this)}unregisterApplication(h){this.registry.unregisterApplication(h)}findProviders(h,p,m){return[]}}return l.\u0275fac=function(h){return new(h||l)(ht(qs),ht(Ig),ht(xO))},l.\u0275prov=_t({token:l,factory:l.\u0275fac}),l})(),Ig=(()=>{class l{constructor(){this._applications=new Map}registerApplication(h,p){this._applications.set(h,p)}unregisterApplication(h){this._applications.delete(h)}unregisterAllApplications(){this._applications.clear()}getTestability(h){return this._applications.get(h)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(h,p=!0){return iu?.findTestabilityInTree(this,h,p)??null}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=_t({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();const ou=!1;let zd=null;const Ab=new cr("AllowMultipleToken"),Pb=new cr("PlatformDestroyListeners"),ew=new cr("appBootstrapListener");class xb{constructor(u,h){this.name=u,this.token=h}}function oy(l,u,h=[]){const p=`Platform: ${u}`,m=new cr(p);return(_=[])=>{let S=Ag();if(!S||S.injector.get(Ab,!1)){const D=[...h,..._,{provide:m,useValue:!0}];l?l(D):function FO(l){if(zd&&!zd.get(Ab,!1))throw new De(400,!1);zd=l;const u=l.get(Pg);(function LO(l){const u=l.get(Ob,null);u&&u.forEach(h=>h())})(l)}(function Fb(l=[],u){return Up.create({name:u,providers:[{provide:LS,useValue:"platform"},{provide:Pb,useValue:new Set([()=>zd=null])},...l]})}(D,p))}return function wx(l){const u=Ag();if(!u)throw new De(401,!1);return u}()}}function Ag(){return zd?.get(Pg)??null}let Pg=(()=>{class l{constructor(h){this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(h,p){const m=function kb(l,u){let h;return h="noop"===l?new NO:("zone.js"===l?void 0:l)||new qs(u),h}(p?.ngZone,function Lb(l){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!l||!l.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!l||!l.ngZoneRunCoalescing)||!1}}(p)),_=[{provide:qs,useValue:m}];return m.run(()=>{const S=Up.create({providers:_,parent:this.injector,name:h.moduleType.name}),D=h.create(S),R=D.injector.get(ev,null);if(!R)throw new De(402,!1);return m.runOutsideAngular(()=>{const N=m.onError.subscribe({next:L=>{R.handleError(L)}});D.onDestroy(()=>{Bf(this._modules,D),N.unsubscribe()})}),function rs(l,u,h){try{const p=h();return nc(p)?p.catch(m=>{throw u.runOutsideAngular(()=>l.handleError(m)),m}):p}catch(p){throw u.runOutsideAngular(()=>l.handleError(p)),p}}(R,m,()=>{const N=D.injector.get(Bd);return N.runInitializers(),N.donePromise.then(()=>(Mv(D.injector.get(sl,hr)||hr),this._moduleDoBootstrap(D),D))})})}bootstrapModule(h,p=[]){const m=Gb({},p);return function Nb(l,u,h){const p=new Mf(h);return Promise.resolve(p)}(0,0,h).then(_=>this.bootstrapModuleFactory(_,m))}_moduleDoBootstrap(h){const p=h.injector.get(Hf);if(h._bootstrapComponents.length>0)h._bootstrapComponents.forEach(m=>p.bootstrap(m));else{if(!h.instance.ngDoBootstrap)throw new De(-403,!1);h.instance.ngDoBootstrap(p)}this._modules.push(h)}onDestroy(h){this._destroyListeners.push(h)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(p=>p.destroy()),this._destroyListeners.forEach(p=>p());const h=this._injector.get(Pb,null);h&&(h.forEach(p=>p()),h.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(h){return new(h||l)(ht(Up))},l.\u0275prov=_t({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();function Gb(l,u){return Array.isArray(u)?u.reduce(Gb,l):{...l,...u}}let Hf=(()=>{class l{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(h,p,m){this._zone=h,this._injector=p,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new B.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),S=new B.y(D=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{qs.assertNotInAngularZone(),iy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{R.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ge.T)(_,S.pipe((0,de.B)()))}bootstrap(h,p){const m=h instanceof hT;if(!this._injector.get(Bd).done){!m&&aa(h);throw new De(405,ou)}let S;S=m?h:this._injector.get(pd).resolveComponentFactory(h),this.componentTypes.push(S.componentType);const D=function Mb(l){return l.isBoundToModule}(S)?void 0:this._injector.get(Md),N=S.create(Up.NULL,[],p||S.selector,D),L=N.location.nativeElement,j=N.injector.get(MO,null);return j?.registerApplication(L),N.onDestroy(()=>{this.detachView(N.hostView),Bf(this.components,N),j?.unregisterApplication(L)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let h of this._views)h.detectChanges()}catch(h){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(h))}finally{this._runningTick=!1}}attachView(h){const p=h;this._views.push(p),p.attachToAppRef(this)}detachView(h){const p=h;Bf(this._views,p),p.detachFromAppRef()}_loadComponent(h){this.attachView(h.hostView),this.tick(),this.components.push(h);const p=this._injector.get(ew,[]);p.push(...this._bootstrapListeners),p.forEach(m=>m(h))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(h=>h()),this._views.slice().forEach(h=>h.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(h){return this._destroyListeners.push(h),()=>Bf(this._destroyListeners,h)}destroy(){if(this._destroyed)throw new De(406,!1);const h=this._injector;h.destroy&&!h.destroyed&&h.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return l.\u0275fac=function(h){return new(h||l)(ht(qs),ht(gf),ht(ev))},l.\u0275prov=_t({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function Bf(l,u){const h=l.indexOf(u);h>-1&&l.splice(h,1)}function Ng(){return!1}let GO=(()=>{class l{}return l.__NG_ELEMENT_ID__=qd,l})();function qd(l){return function VO(l,u,h){if(Pc(l)&&!h){const p=si(l.index,u);return new gd(p,p)}return 47&l.type?new gd(u[Ci],u):null}(ai(),$e(),16==(16&l))}class jO{constructor(){}supports(u){return Yp(u)}create(u){return new WO(u)}}const Dx=(l,u)=>u;class WO{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||Dx}forEachItem(u){let h;for(h=this._itHead;null!==h;h=h._next)u(h)}forEachOperation(u){let h=this._itHead,p=this._removalsHead,m=0,_=null;for(;h||p;){const S=!p||h&&h.currentIndex<jb(p,m,_)?h:p,D=jb(S,m,_),R=S.currentIndex;if(S===p)m--,p=p._nextRemoved;else if(h=h._next,null==S.previousIndex)m++;else{_||(_=[]);const N=D-m,L=R-m;if(N!=L){for(let ee=0;ee<N;ee++){const le=ee<_.length?_[ee]:_[ee]=0,Me=le+ee;L<=Me&&Me<N&&(_[ee]=le+1)}_[S.previousIndex]=L-N}}D!==R&&u(S,D,R)}}forEachPreviousItem(u){let h;for(h=this._previousItHead;null!==h;h=h._nextPrevious)u(h)}forEachAddedItem(u){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)u(h)}forEachMovedItem(u){let h;for(h=this._movesHead;null!==h;h=h._nextMoved)u(h)}forEachRemovedItem(u){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)u(h)}forEachIdentityChange(u){let h;for(h=this._identityChangesHead;null!==h;h=h._nextIdentityChange)u(h)}diff(u){if(null==u&&(u=[]),!Yp(u))throw new De(900,!1);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let m,_,S,h=this._itHead,p=!1;if(Array.isArray(u)){this.length=u.length;for(let D=0;D<this.length;D++)_=u[D],S=this._trackByFn(D,_),null!==h&&Object.is(h.trackById,S)?(p&&(h=this._verifyReinsertion(h,_,S,D)),Object.is(h.item,_)||this._addIdentityChange(h,_)):(h=this._mismatch(h,_,S,D),p=!0),h=h._next}else m=0,function lM(l,u){if(Array.isArray(l))for(let h=0;h<l.length;h++)u(l[h]);else{const h=l[Symbol.iterator]();let p;for(;!(p=h.next()).done;)u(p.value)}}(u,D=>{S=this._trackByFn(m,D),null!==h&&Object.is(h.trackById,S)?(p&&(h=this._verifyReinsertion(h,D,S,m)),Object.is(h.item,D)||this._addIdentityChange(h,D)):(h=this._mismatch(h,D,S,m),p=!0),h=h._next,m++}),this.length=m;return this._truncate(h),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,h,p,m){let _;return null===u?_=this._itTail:(_=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null))?(Object.is(u.item,h)||this._addIdentityChange(u,h),this._reinsertAfter(u,_,m)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(p,m))?(Object.is(u.item,h)||this._addIdentityChange(u,h),this._moveAfter(u,_,m)):u=this._addAfter(new Tx(h,p),_,m),u}_verifyReinsertion(u,h,p,m){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null);return null!==_?u=this._reinsertAfter(_,u._prev,m):u.currentIndex!=m&&(u.currentIndex=m,this._addToMoves(u,m)),u}_truncate(u){for(;null!==u;){const h=u._next;this._addToRemovals(this._unlink(u)),u=h}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,h,p){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const m=u._prevRemoved,_=u._nextRemoved;return null===m?this._removalsHead=_:m._nextRemoved=_,null===_?this._removalsTail=m:_._prevRemoved=m,this._insertAfter(u,h,p),this._addToMoves(u,p),u}_moveAfter(u,h,p){return this._unlink(u),this._insertAfter(u,h,p),this._addToMoves(u,p),u}_addAfter(u,h,p){return this._insertAfter(u,h,p),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,h,p){const m=null===h?this._itHead:h._next;return u._next=m,u._prev=h,null===m?this._itTail=u:m._prev=u,null===h?this._itHead=u:h._next=u,null===this._linkedRecords&&(this._linkedRecords=new $O),this._linkedRecords.put(u),u.currentIndex=p,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const h=u._prev,p=u._next;return null===h?this._itHead=p:h._next=p,null===p?this._itTail=h:p._prev=h,u}_addToMoves(u,h){return u.previousIndex===h||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $O),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,h){return u.item=h,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class Tx{constructor(u,h){this.item=u,this.trackById=h,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lw{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,h){let p;for(p=this._head;null!==p;p=p._nextDup)if((null===h||h<=p.currentIndex)&&Object.is(p.trackById,u))return p;return null}remove(u){const h=u._prevDup,p=u._nextDup;return null===h?this._head=p:h._nextDup=p,null===p?this._tail=h:p._prevDup=h,null===this._head}}class $O{constructor(){this.map=new Map}put(u){const h=u.trackById;let p=this.map.get(h);p||(p=new lw,this.map.set(h,p)),p.add(u)}get(u,h){const m=this.map.get(u);return m?m.get(u,h):null}remove(u){const h=u.trackById;return this.map.get(h).remove(u)&&this.map.delete(h),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jb(l,u,h){const p=l.previousIndex;if(null===p)return p;let m=0;return h&&p<h.length&&(m=h[p]),p+u+m}class uw{constructor(){}supports(u){return u instanceof Map||wf(u)}create(){return new Wb}}class Wb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let h;for(h=this._mapHead;null!==h;h=h._next)u(h)}forEachPreviousItem(u){let h;for(h=this._previousMapHead;null!==h;h=h._nextPrevious)u(h)}forEachChangedItem(u){let h;for(h=this._changesHead;null!==h;h=h._nextChanged)u(h)}forEachAddedItem(u){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)u(h)}forEachRemovedItem(u){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)u(h)}diff(u){if(u){if(!(u instanceof Map||wf(u)))throw new De(900,!1)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let h=this._mapHead;if(this._appendAfter=null,this._forEach(u,(p,m)=>{if(h&&h.key===m)this._maybeAddToChanges(h,p),this._appendAfter=h,h=h._next;else{const _=this._getOrCreateRecordForKey(m,p);h=this._insertBeforeOrAppend(h,_)}}),h){h._prev&&(h._prev._next=null),this._removalsHead=h;for(let p=h;null!==p;p=p._nextRemoved)p===this._mapHead&&(this._mapHead=null),this._records.delete(p.key),p._nextRemoved=p._next,p.previousValue=p.currentValue,p.currentValue=null,p._prev=null,p._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,h){if(u){const p=u._prev;return h._next=u,h._prev=p,u._prev=h,p&&(p._next=h),u===this._mapHead&&(this._mapHead=h),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=h,h._prev=this._appendAfter):this._mapHead=h,this._appendAfter=h,null}_getOrCreateRecordForKey(u,h){if(this._records.has(u)){const m=this._records.get(u);this._maybeAddToChanges(m,h);const _=m._prev,S=m._next;return _&&(_._next=S),S&&(S._prev=_),m._next=null,m._prev=null,m}const p=new sy(u);return this._records.set(u,p),p.currentValue=h,this._addToAdditions(p),p}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,h){Object.is(h,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=h,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,h){u instanceof Map?u.forEach(h):Object.keys(u).forEach(p=>h(u[p],p))}}class sy{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ay(){return new ly([new jO])}let ly=(()=>{class l{constructor(h){this.factories=h}static create(h,p){if(null!=p){const m=p.factories.slice();h=h.concat(m)}return new l(h)}static extend(h){return{provide:l,useFactory:p=>l.create(h,p||ay()),deps:[[l,new O,new Xo]]}}find(h){const p=this.factories.find(m=>m.supports(h));if(null!=p)return p;throw new De(901,!1)}}return l.\u0275prov=_t({token:l,providedIn:"root",factory:ay}),l})();function $b(){return new zb([new uw])}let zb=(()=>{class l{constructor(h){this.factories=h}static create(h,p){if(p){const m=p.factories.slice();h=h.concat(m)}return new l(h)}static extend(h){return{provide:l,useFactory:p=>l.create(h,p||$b()),deps:[[l,new O,new Xo]]}}find(h){const p=this.factories.find(m=>m.supports(h));if(p)return p;throw new De(901,!1)}}return l.\u0275prov=_t({token:l,providedIn:"root",factory:$b}),l})();const ZO=oy(null,"core",[]);let Rx=(()=>{class l{constructor(h){}}return l.\u0275fac=function(h){return new(h||l)(ht(Hf))},l.\u0275mod=Oc({type:l}),l.\u0275inj=Pr({}),l})();function QO(l){return"boolean"==typeof l?l:null!=l&&"false"!==l}function Kb(l,u){const h=Mn(l),p=u.elementInjector||J_();return new qp(h).create(p,u.projectableNodes,u.hostElement,u.environmentInjector)}},1321:()=>{const Lt=":";class yt extends Error{constructor(oe){super(`No translation found for ${qt(oe)}.`),this.parsedMessage=oe,this.type="MissingTranslationError"}}const yi=function(ae,...oe){if(yi.translate){const xe=yi.translate(ae,oe);ae=xe[0],oe=xe[1]}let pe=Gi(ae[0],ae.raw[0]);for(let xe=1;xe<ae.length;xe++)pe+=oe[xe-1]+Gi(ae[xe],ae.raw[xe]);return pe},ps=":";function Gi(ae,oe){return oe.charAt(0)===ps?ae.substring(function st(ae,oe){for(let pe=1,xe=1;pe<ae.length;pe++,xe++)if("\\"===oe[xe])xe++;else if(ae[pe]===Lt)return pe;throw new Error(`Unterminated $localize metadata block in "${oe}".`)}(ae,oe)+1):ae}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=yi},3942:(Lt,Le,U)=>{U.d(Le,{Z:()=>ct});var c=U(2090),se=U(4859),B=U(9681),ge=U(1877);class de{constructor(De,Ge){this._delegate=De,this.firebase=Ge,(0,B._addComponent)(De,new se.wA("app-compat",()=>this,"PUBLIC")),this.container=De.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this._delegate.automaticDataCollectionEnabled=De}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(De=>{this._delegate.checkDestroyed(),De()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(De,Ge=B._DEFAULT_ENTRY_NAME){var Ve;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(De);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ve=nt.getComponent())||void 0===Ve?void 0:Ve.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:Ge})}_removeServiceInstance(De,Ge=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(De).clearInstance(Ge)}_addComponent(De){(0,B._addComponent)(this._delegate,De)}_addOrOverwriteComponent(De){(0,B._addOrOverwriteComponent)(this._delegate,De)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function _e(){const Ft=function Se(Ft){const De={},Ge={__esModule:!0,initializeApp:function ke(Ze,q={}){const Pe=B.initializeApp(Ze,q);if((0,c.r3)(De,Pe.name))return De[Pe.name];const tt=new Ft(Pe,Ge);return De[Pe.name]=tt,tt},app:nt,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function Ue(Ze){const q=Ze.name,Pe=q.replace("-compat","");if(B._registerComponent(Ze)&&"PUBLIC"===Ze.type){const tt=(dt=nt())=>{if("function"!=typeof dt[Pe])throw Oe.create("invalid-app-argument",{appName:q});return dt[Pe]()};void 0!==Ze.serviceProps&&(0,c.ZB)(tt,Ze.serviceProps),Ge[Pe]=tt,Ft.prototype[Pe]=function(...dt){return this._getService.bind(this,q).apply(this,Ze.multipleInstances?dt:[])}}return"PUBLIC"===Ze.type?Ge[Pe]:null},removeApp:function Ve(Ze){delete De[Ze]},useAsService:function it(Ze,q){return"serverAuth"===q?null:q},modularAPIs:B}};function nt(Ze){if(!(0,c.r3)(De,Ze=Ze||B._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:Ze});return De[Ze]}return Ge.default=Ge,Object.defineProperty(Ge,"apps",{get:function Ie(){return Object.keys(De).map(Ze=>De[Ze])}}),nt.App=Ft,Ge}(de);return Ft.INTERNAL=Object.assign(Object.assign({},Ft.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function De(Ge){(0,c.ZB)(Ft,Ge)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ft}(),Q=new ge.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ft=self.firebase.SDK_VERSION;Ft&&Ft.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ct=Z;!function Be(Ft){(0,B.registerVersion)("@firebase/app-compat","0.2.7",Ft)}()},9681:(Lt,Le,U)=>{U.r(Le),U.d(Le,{FirebaseError:()=>ge.ZR,SDK_VERSION:()=>yi,_DEFAULT_ENTRY_NAME:()=>et,_addComponent:()=>Gn,_addOrOverwriteComponent:()=>$t,_apps:()=>yt,_clearComponents:()=>Pr,_components:()=>gt,_getProvider:()=>_t,_registerComponent:()=>Nn,_removeServiceInstance:()=>qt,deleteApp:()=>oe,getApp:()=>Gi,getApps:()=>ae,initializeApp:()=>ps,onLog:()=>be,registerVersion:()=>xe,setLogLevel:()=>wt});var c=U(5861),se=U(4859),B=U(1877),ge=U(2090),de=U(8766);class he{constructor(He){this.container=He}getPlatformInfoString(){return this.container.getProviders().map(It=>{if(function Oe(ht){return"VERSION"===ht.getComponent()?.type}(It)){const Xt=It.getImmediate();return`${Xt.library}/${Xt.version}`}return null}).filter(It=>It).join(" ")}}const Se="@firebase/app",Z=new B.Yd("@firebase/app"),et="[DEFAULT]",st={[Se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yt=new Map,gt=new Map;function Gn(ht,He){try{ht.container.addComponent(He)}catch(It){Z.debug(`Component ${He.name} failed to register with FirebaseApp ${ht.name}`,It)}}function $t(ht,He){ht.container.addOrOverwriteComponent(He)}function Nn(ht){const He=ht.name;if(gt.has(He))return Z.debug(`There were multiple attempts to register component ${He}.`),!1;gt.set(He,ht);for(const It of yt.values())Gn(It,ht);return!0}function _t(ht,He){const It=ht.container.getProvider("heartbeat").getImmediate({optional:!0});return It&&It.triggerHeartbeat(),ht.container.getProvider(He)}function qt(ht,He,It=et){_t(ht,He).clearInstance(It)}function Pr(){gt.clear()}const sr=new ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mr{constructor(He,It,Xt){this._isDeleted=!1,this._options=Object.assign({},He),this._config=Object.assign({},It),this._name=It.name,this._automaticDataCollectionEnabled=It.automaticDataCollectionEnabled,this._container=Xt,this.container.addComponent(new se.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this.checkDestroyed(),this._automaticDataCollectionEnabled=He}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(He){this._isDeleted=He}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const yi="9.19.1";function ps(ht,He={}){let It=ht;"object"!=typeof He&&(He={name:He});const Xt=Object.assign({name:et,automaticDataCollectionEnabled:!1},He),sn=Xt.name;if("string"!=typeof sn||!sn)throw sr.create("bad-app-name",{appName:String(sn)});if(It||(It=(0,ge.aH)()),!It)throw sr.create("no-options");const pn=yt.get(sn);if(pn){if((0,ge.vZ)(It,pn.options)&&(0,ge.vZ)(Xt,pn.config))return pn;throw sr.create("duplicate-app",{appName:sn})}const Vi=new se.H0(sn);for(const K of gt.values())Vi.addComponent(K);const Y=new mr(It,Xt,Vi);return yt.set(sn,Y),Y}function Gi(ht=et){const He=yt.get(ht);if(!He&&ht===et)return ps();if(!He)throw sr.create("no-app",{appName:ht});return He}function ae(){return Array.from(yt.values())}function oe(ht){return pe.apply(this,arguments)}function pe(){return(pe=(0,c.Z)(function*(ht){const He=ht.name;yt.has(He)&&(yt.delete(He),yield Promise.all(ht.container.getProviders().map(It=>It.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function xe(ht,He,It){var Xt;let sn=null!==(Xt=st[ht])&&void 0!==Xt?Xt:ht;It&&(sn+=`-${It}`);const pn=sn.match(/\s|\//),Vi=He.match(/\s|\//);if(pn||Vi){const Y=[`Unable to register library "${sn}" with version "${He}":`];return pn&&Y.push(`library name "${sn}" contains illegal characters (whitespace or "/")`),pn&&Vi&&Y.push("and"),Vi&&Y.push(`version name "${He}" contains illegal characters (whitespace or "/")`),void Z.warn(Y.join(" "))}Nn(new se.wA(`${sn}-version`,()=>({library:sn,version:He}),"VERSION"))}function be(ht,He){if(null!==ht&&"function"!=typeof ht)throw sr.create("invalid-log-argument");(0,B.Am)(ht,He)}function wt(ht){(0,B.Ub)(ht)}const Kn="firebase-heartbeat-database",Jt=1,un="firebase-heartbeat-store";let ar=null;function Yt(){return ar||(ar=(0,de.X3)(Kn,Jt,{upgrade:(ht,He)=>{0===He&&ht.createObjectStore(un)}}).catch(ht=>{throw sr.create("idb-open",{originalErrorMessage:ht.message})})),ar}function zt(){return(zt=(0,c.Z)(function*(ht){try{return(yield Yt()).transaction(un).objectStore(un).get(lr(ht))}catch(He){if(He instanceof ge.ZR)Z.warn(He.message);else{const It=sr.create("idb-get",{originalErrorMessage:He?.message});Z.warn(It.message)}}})).apply(this,arguments)}function Po(ht,He){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,c.Z)(function*(ht,He){try{const Xt=(yield Yt()).transaction(un,"readwrite");return yield Xt.objectStore(un).put(He,lr(ht)),Xt.done}catch(It){if(It instanceof ge.ZR)Z.warn(It.message);else{const Xt=sr.create("idb-set",{originalErrorMessage:It?.message});Z.warn(Xt.message)}}})).apply(this,arguments)}function lr(ht){return`${ht.name}!${ht.options.appId}`}class sa{constructor(He){this.container=He,this._heartbeatsCache=null;const It=this.container.getProvider("app").getImmediate();this._storage=new Pn(It),this._heartbeatsCachePromise=this._storage.read().then(Xt=>(this._heartbeatsCache=Xt,Xt))}triggerHeartbeat(){var He=this;return(0,c.Z)(function*(){const Xt=He.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sn=Hn();if(null===He._heartbeatsCache&&(He._heartbeatsCache=yield He._heartbeatsCachePromise),He._heartbeatsCache.lastSentHeartbeatDate!==sn&&!He._heartbeatsCache.heartbeats.some(pn=>pn.date===sn))return He._heartbeatsCache.heartbeats.push({date:sn,agent:Xt}),He._heartbeatsCache.heartbeats=He._heartbeatsCache.heartbeats.filter(pn=>{const Vi=new Date(pn.date).valueOf();return Date.now()-Vi<=2592e6}),He._storage.overwrite(He._heartbeatsCache)})()}getHeartbeatsHeader(){var He=this;return(0,c.Z)(function*(){if(null===He._heartbeatsCache&&(yield He._heartbeatsCachePromise),null===He._heartbeatsCache||0===He._heartbeatsCache.heartbeats.length)return"";const It=Hn(),{heartbeatsToSend:Xt,unsentEntries:sn}=function No(ht,He=1024){const It=[];let Xt=ht.slice();for(const sn of ht){const pn=It.find(Vi=>Vi.agent===sn.agent);if(pn){if(pn.dates.push(sn.date),io(It)>He){pn.dates.pop();break}}else if(It.push({agent:sn.agent,dates:[sn.date]}),io(It)>He){It.pop();break}Xt=Xt.slice(1)}return{heartbeatsToSend:It,unsentEntries:Xt}}(He._heartbeatsCache.heartbeats),pn=(0,ge.L)(JSON.stringify({version:2,heartbeats:Xt}));return He._heartbeatsCache.lastSentHeartbeatDate=It,sn.length>0?(He._heartbeatsCache.heartbeats=sn,yield He._storage.overwrite(He._heartbeatsCache)):(He._heartbeatsCache.heartbeats=[],He._storage.overwrite(He._heartbeatsCache)),pn})()}}function Hn(){return(new Date).toISOString().substring(0,10)}class Pn{constructor(He){this.app=He,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ge.hl)()&&(0,ge.eu)().then(()=>!0).catch(()=>!1)})()}read(){var He=this;return(0,c.Z)(function*(){return(yield He._canUseIndexedDBPromise)&&(yield function Vt(ht){return zt.apply(this,arguments)}(He.app))||{heartbeats:[]}})()}overwrite(He){var It=this;return(0,c.Z)(function*(){var Xt;if(yield It._canUseIndexedDBPromise){const pn=yield It.read();return Po(It.app,{lastSentHeartbeatDate:null!==(Xt=He.lastSentHeartbeatDate)&&void 0!==Xt?Xt:pn.lastSentHeartbeatDate,heartbeats:He.heartbeats})}})()}add(He){var It=this;return(0,c.Z)(function*(){var Xt;if(yield It._canUseIndexedDBPromise){const pn=yield It.read();return Po(It.app,{lastSentHeartbeatDate:null!==(Xt=He.lastSentHeartbeatDate)&&void 0!==Xt?Xt:pn.lastSentHeartbeatDate,heartbeats:[...pn.heartbeats,...He.heartbeats]})}})()}}function io(ht){return(0,ge.L)(JSON.stringify({version:2,heartbeats:ht})).length}!function gs(ht){Nn(new se.wA("platform-logger",He=>new he(He),"PRIVATE")),Nn(new se.wA("heartbeat",He=>new sa(He),"PRIVATE")),xe(Se,"0.9.7",ht),xe(Se,"0.9.7","esm2017"),xe("fire-js","")}("")},4859:(Lt,Le,U)=>{U.d(Le,{H0:()=>Se,wA:()=>B,zt:()=>de});var c=U(5861),se=U(2090);class B{constructor(Z,Q,ie){this.name=Z,this.instanceFactory=Q,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ge="[DEFAULT]";class de{constructor(Z,Q){this.name=Z,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const Q=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(Q)){const ie=new se.BH;if(this.instancesDeferred.set(Q,ie),this.isInitialized(Q)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:Q});at&&ie.resolve(at)}catch{}}return this.instancesDeferred.get(Q).promise}getImmediate(Z){var Q;const ie=this.normalizeInstanceIdentifier(Z?.identifier),at=null!==(Q=Z?.optional)&&void 0!==Q&&Q;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Be){if(at)return null;throw Be}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function Oe(_e){return"EAGER"===_e.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ge})}catch{}for(const[Q,ie]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(Q);try{const Be=this.getOrInitializeService({instanceIdentifier:at});ie.resolve(Be)}catch{}}}}clearInstance(Z=ge){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,c.Z)(function*(){const Q=Array.from(Z.instances.values());yield Promise.all([...Q.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...Q.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ge){return this.instances.has(Z)}getOptions(Z=ge){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:Q={}}=Z,ie=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:ie,options:Q});for(const[Be,ct]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Be)&&ct.resolve(at);return at}onInit(Z,Q){var ie;const at=this.normalizeInstanceIdentifier(Q),Be=null!==(ie=this.onInitCallbacks.get(at))&&void 0!==ie?ie:new Set;Be.add(Z),this.onInitCallbacks.set(at,Be);const ct=this.instances.get(at);return ct&&Z(ct,at),()=>{Be.delete(Z)}}invokeOnInitCallbacks(Z,Q){const ie=this.onInitCallbacks.get(Q);if(ie)for(const at of ie)try{at(Z,Q)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:Q={}}){let ie=this.instances.get(Z);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=Z,_e===ge?void 0:_e),options:Q}),this.instances.set(Z,ie),this.instancesOptions.set(Z,Q),this.invokeOnInitCallbacks(ie,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,ie)}catch{}var _e;return ie||null}normalizeInstanceIdentifier(Z=ge){return this.component?this.component.multipleInstances?Z:ge:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const Q=this.getProvider(Z.name);if(Q.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);Q.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const Q=new de(Z,this);return this.providers.set(Z,Q),Q}getProviders(){return Array.from(this.providers.values())}}},1877:(Lt,Le,U)=>{U.d(Le,{Am:()=>_e,Ub:()=>Se,Yd:()=>Oe,in:()=>se});const c=[];var se=(()=>{return(Z=se||(se={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",se;var Z})();const B={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},ge=se.INFO,de={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},he=(Z,Q,...ie)=>{if(Q<Z.logLevel)return;const at=(new Date).toISOString(),Be=de[Q];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[Be](`[${at}]  ${Z.name}:`,...ie)};class Oe{constructor(Q){this.name=Q,this._logLevel=ge,this._logHandler=he,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in se))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?B[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...Q),this._logHandler(this,se.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...Q),this._logHandler(this,se.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,se.INFO,...Q),this._logHandler(this,se.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,se.WARN,...Q),this._logHandler(this,se.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...Q),this._logHandler(this,se.ERROR,...Q)}}function Se(Z){c.forEach(Q=>{Q.setLogLevel(Z)})}function _e(Z,Q){for(const ie of c){let at=null;Q&&Q.level&&(at=B[Q.level]),ie.userLogHandler=null===Z?null:(Be,ct,...Ft)=>{const De=Ft.map(Ge=>{if(null==Ge)return null;if("string"==typeof Ge)return Ge;if("number"==typeof Ge||"boolean"==typeof Ge)return Ge.toString();if(Ge instanceof Error)return Ge.message;try{return JSON.stringify(Ge)}catch{return null}}).filter(Ge=>Ge).join(" ");ct>=(at??Be.logLevel)&&Z({level:se[ct].toLowerCase(),message:De,args:Ft,type:Be.name})}}}},259:(Lt,Le,U)=>{U.d(Le,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=U(9681);(0,c.registerVersion)("firebase","9.19.1","app")},9260:(Lt,Le,U)=>{U.d(Le,{Z:()=>c.Z});var c=U(3942);c.Z.registerVersion("firebase","9.19.1","app-compat")},9800:(Lt,Le,U)=>{U.r(Le);var c=U(5861),se=U(3942),B=U(2090),ge=U(9681),de=U(1877),he=U(655),Oe=U(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie_EMAIL_SIGNIN="EMAIL_SIGNIN",ie_PASSWORD_RESET="PASSWORD_RESET",ie_RECOVER_EMAIL="RECOVER_EMAIL",ie_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ie_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ie_VERIFY_EMAIL="VERIFY_EMAIL";const ct=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ft=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},De=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ve=new de.Yd("@firebase/auth");function nt(w,...v){Ve.logLevel<=de.in.ERROR&&Ve.error(`Auth (${ge.SDK_VERSION}): ${w}`,...v)}function ke(w,...v){throw Ze(w,...v)}function Ie(w,...v){return Ze(w,...v)}function Ue(w,v,y){const b=Object.assign(Object.assign({},Ft()),{[v]:y});return new B.LL("auth","Firebase",b).create(v,{appName:w.name})}function it(w,v,y){if(!(v instanceof y))throw y.name!==v.constructor.name&&ke(w,"argument-error"),Ue(w,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(w,...v){if("string"!=typeof w){const y=v[0],b=[...v.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(y,...b)}return De.create(w,...v)}function q(w,v,...y){if(!w)throw Ze(v,...y)}function Pe(w){const v="INTERNAL ASSERTION FAILED: "+w;throw nt(v),new Error(v)}function tt(w,v){w||Pe(v)}const dt=new Map;function Gt(w){tt(w instanceof Function,"Expected a class definition");let v=dt.get(w);return v?(tt(v instanceof w,"Instance stored in cache mismatched with class"),v):(v=new w,dt.set(w,v),v)}function Ee(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ae(){return"http:"===je()||"https:"===je()}function je(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class yt{constructor(v,y){this.shortDelay=v,this.longDelay=y,tt(y>v,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function et(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ae()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gt(w,v){tt(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return v?`${y}${v.startsWith("/")?v.slice(1):v}`:y}class Gn{static initialize(v,y,b){this.fetchImpl=v,y&&(this.headersImpl=y),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Nn=new yt(3e4,6e4);function _t(w,v){return w.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:w.tenantId}):v}function qt(w,v,y,b){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,c.Z)(function*(w,v,y,b,P={}){return Xn(w,P,(0,c.Z)(function*(){let G={},ne={};b&&("GET"===v?ne=b:G={body:JSON.stringify(b)});const Ce=(0,B.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),lt=yield w._getAdditionalHeaders();return lt["Content-Type"]="application/json",w.languageCode&&(lt["X-Firebase-Locale"]=w.languageCode),Gn.fetch()(ps(w,w.config.apiHost,y,Ce),Object.assign({method:v,headers:lt,referrerPolicy:"no-referrer"},G))}))})).apply(this,arguments)}function Xn(w,v,y){return sr.apply(this,arguments)}function sr(){return(sr=(0,c.Z)(function*(w,v,y){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},$t),v);try{const P=new Gi(w),G=yield Promise.race([y(),P.promise]);P.clearNetworkTimeout();const ne=yield G.json();if("needConfirmation"in ne)throw ae(w,"account-exists-with-different-credential",ne);if(G.ok&&!("errorMessage"in ne))return ne;{const Ce=G.ok?ne.errorMessage:ne.error.message,[lt,bt]=Ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw ae(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===lt)throw ae(w,"email-already-in-use",ne);if("USER_DISABLED"===lt)throw ae(w,"user-disabled",ne);const jt=b[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(bt)throw Ue(w,jt,bt);ke(w,jt)}}catch(P){if(P instanceof B.ZR)throw P;ke(w,"network-request-failed",{message:String(P)})}})).apply(this,arguments)}function mr(w,v,y,b){return yi.apply(this,arguments)}function yi(){return(yi=(0,c.Z)(function*(w,v,y,b,P={}){const G=yield qt(w,v,y,b,P);return"mfaPendingCredential"in G&&ke(w,"multi-factor-auth-required",{_serverResponse:G}),G})).apply(this,arguments)}function ps(w,v,y,b){const P=`${v}${y}?${b}`;return w.config.emulator?gt(w.config,P):`${w.config.apiScheme}://${P}`}class Gi{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((y,b)=>{this.timer=setTimeout(()=>b(Ie(this.auth,"network-request-failed")),Nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ae(w,v,y){const b={appName:w.name};y.email&&(b.email=y.email),y.phoneNumber&&(b.phoneNumber=y.phoneNumber);const P=Ie(w,v,b);return P.customData._tokenResponse=y,P}function pe(){return(pe=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function be(){return(be=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Kn(){return(Kn=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function Jt(w){if(w)try{const v=new Date(Number(w));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function Yt(){return(Yt=(0,c.Z)(function*(w,v=!1){const y=(0,B.m9)(w),b=yield y.getIdToken(v),P=zt(b);q(P&&P.exp&&P.auth_time&&P.iat,y.auth,"internal-error");const G="object"==typeof P.firebase?P.firebase:void 0,ne=G?.sign_in_provider;return{claims:P,token:b,authTime:Jt(Vt(P.auth_time)),issuedAtTime:Jt(Vt(P.iat)),expirationTime:Jt(Vt(P.exp)),signInProvider:ne||null,signInSecondFactor:G?.sign_in_second_factor||null}})).apply(this,arguments)}function Vt(w){return 1e3*Number(w)}function zt(w){const[v,y,b]=w.split(".");if(void 0===v||void 0===y||void 0===b)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,B.tV)(y);return P?JSON.parse(P):(nt("Failed to decode base64 JWT payload"),null)}catch(P){return nt("Caught error parsing JWT payload as JSON",P?.toString()),null}}function Tn(w,v){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(w,v,y=!1){if(y)return v;try{return yield v}catch(b){throw b instanceof B.ZR&&function An({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}class Nr{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var y;if(v){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const P=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(v=!1){var y=this;if(!this.isRunning)return;const b=this.getInterval(v);this.timerId=setTimeout((0,c.Z)(function*(){yield y.iteration()}),b)}iteration(){var v=this;return(0,c.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&v.schedule(!0))}v.schedule()})()}}class sa{constructor(v,y){this.createdAt=v,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jt(this.lastLoginAt),this.creationTime=Jt(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hn(w){return No.apply(this,arguments)}function No(){return No=(0,c.Z)(function*(w){var v;const y=w.auth,b=yield w.getIdToken(),P=yield Tn(w,function wt(w,v){return Kn.apply(this,arguments)}(y,{idToken:b}));q(P?.users.length,y,"internal-error");const G=P.users[0];w._notifyReloadListener(G);const ne=null!==(v=G.providerUserInfo)&&void 0!==v&&v.length?function ht(w){return w.map(v=>{var{providerId:y}=v,b=(0,he._T)(v,["providerId"]);return{providerId:y,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}(G.providerUserInfo):[],Ce=function gs(w,v){return[...w.filter(b=>!v.some(P=>P.providerId===b.providerId)),...v]}(w.providerData,ne),jt=!!w.isAnonymous&&!(w.email&&G.passwordHash||Ce?.length),kt={uid:G.localId,displayName:G.displayName||null,photoURL:G.photoUrl||null,email:G.email||null,emailVerified:G.emailVerified||!1,phoneNumber:G.phoneNumber||null,tenantId:G.tenantId||null,providerData:Ce,metadata:new sa(G.createdAt,G.lastLoginAt),isAnonymous:jt};Object.assign(w,kt)}),No.apply(this,arguments)}function io(){return(io=(0,c.Z)(function*(w){const v=(0,B.m9)(w);yield Hn(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function It(){return(It=(0,c.Z)(function*(w,v){const y=yield Xn(w,{},(0,c.Z)(function*(){const b=(0,B.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:P,apiKey:G}=w.config,ne=ps(w,P,"/v1/token",`key=${G}`),Ce=yield w._getAdditionalHeaders();return Ce["Content-Type"]="application/x-www-form-urlencoded",Gn.fetch()(ne,{method:"POST",headers:Ce,body:b})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Xt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){q(v.idToken,"internal-error"),q(typeof v.idToken<"u","internal-error"),q(typeof v.refreshToken<"u","internal-error");const y="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function Po(w){const v=zt(w);return q(v,"internal-error"),q(typeof v.exp<"u","internal-error"),q(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,y)}getToken(v,y=!1){var b=this;return(0,c.Z)(function*(){return q(!b.accessToken||b.refreshToken,v,"user-token-expired"),y||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(v,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,y){var b=this;return(0,c.Z)(function*(){const{accessToken:P,refreshToken:G,expiresIn:ne}=yield function He(w,v){return It.apply(this,arguments)}(v,y);b.updateTokensAndExpiration(P,G,Number(ne))})()}updateTokensAndExpiration(v,y,b){this.refreshToken=y||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(v,y){const{refreshToken:b,accessToken:P,expirationTime:G}=y,ne=new Xt;return b&&(q("string"==typeof b,"internal-error",{appName:v}),ne.refreshToken=b),P&&(q("string"==typeof P,"internal-error",{appName:v}),ne.accessToken=P),G&&(q("number"==typeof G,"internal-error",{appName:v}),ne.expirationTime=G),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Xt,this.toJSON())}_performRefresh(){return Pe("not implemented")}}function sn(w,v){q("string"==typeof w||typeof w>"u","internal-error",{appName:v})}class pn{constructor(v){var{uid:y,auth:b,stsTokenManager:P}=v,G=(0,he._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=b,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=G.displayName||null,this.email=G.email||null,this.emailVerified=G.emailVerified||!1,this.phoneNumber=G.phoneNumber||null,this.photoURL=G.photoURL||null,this.isAnonymous=G.isAnonymous||!1,this.tenantId=G.tenantId||null,this.providerData=G.providerData?[...G.providerData]:[],this.metadata=new sa(G.createdAt||void 0,G.lastLoginAt||void 0)}getIdToken(v){var y=this;return(0,c.Z)(function*(){const b=yield Tn(y,y.stsTokenManager.getToken(y.auth,v));return q(b,y.auth,"internal-error"),y.accessToken!==b&&(y.accessToken=b,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),b})()}getIdTokenResult(v){return function ar(w){return Yt.apply(this,arguments)}(this,v)}reload(){return function Pn(w){return io.apply(this,arguments)}(this)}_assign(v){this!==v&&(q(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(y=>Object.assign({},y)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const y=new pn(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(v){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,y=!1){var b=this;return(0,c.Z)(function*(){let P=!1;v.idToken&&v.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(v),P=!0),y&&(yield Hn(b)),yield b.auth._persistUserIfCurrent(b),P&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var v=this;return(0,c.Z)(function*(){const y=yield v.getIdToken();return yield Tn(v,function oe(w,v){return pe.apply(this,arguments)}(v.auth,{idToken:y})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,y){var b,P,G,ne,Ce,lt,bt,jt;const kt=null!==(b=y.displayName)&&void 0!==b?b:void 0,ui=null!==(P=y.email)&&void 0!==P?P:void 0,bs=null!==(G=y.phoneNumber)&&void 0!==G?G:void 0,Ju=null!==(ne=y.photoURL)&&void 0!==ne?ne:void 0,W_=null!==(Ce=y.tenantId)&&void 0!==Ce?Ce:void 0,Ym=null!==(lt=y._redirectEventId)&&void 0!==lt?lt:void 0,$_=null!==(bt=y.createdAt)&&void 0!==bt?bt:void 0,df=null!==(jt=y.lastLoginAt)&&void 0!==jt?jt:void 0,{uid:hf,emailVerified:ff,isAnonymous:Vp,providerData:dd,stsTokenManager:z_}=y;q(hf&&z_,v,"internal-error");const IS=Xt.fromJSON(this.name,z_);q("string"==typeof hf,v,"internal-error"),sn(kt,v.name),sn(ui,v.name),q("boolean"==typeof ff,v,"internal-error"),q("boolean"==typeof Vp,v,"internal-error"),sn(bs,v.name),sn(Ju,v.name),sn(W_,v.name),sn(Ym,v.name),sn($_,v.name),sn(df,v.name);const pf=new pn({uid:hf,auth:v,email:ui,emailVerified:ff,displayName:kt,isAnonymous:Vp,photoURL:Ju,phoneNumber:bs,tenantId:W_,stsTokenManager:IS,createdAt:$_,lastLoginAt:df});return dd&&Array.isArray(dd)&&(pf.providerData=dd.map(K_=>Object.assign({},K_))),Ym&&(pf._redirectEventId=Ym),pf}static _fromIdTokenResponse(v,y,b=!1){return(0,c.Z)(function*(){const P=new Xt;P.updateFromServerResponse(y);const G=new pn({uid:y.localId,auth:v,stsTokenManager:P,isAnonymous:b});return yield Hn(G),G})()}}const Y=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(y,b){var P=this;return(0,c.Z)(function*(){P.storage[y]=b})()}_get(y){var b=this;return(0,c.Z)(function*(){const P=b.storage[y];return void 0===P?null:P})()}_remove(y){var b=this;return(0,c.Z)(function*(){delete b.storage[y]})()}_addListener(y,b){}_removeListener(y,b){}}return w.type="NONE",w})();function K(w,v,y){return`firebase:${w}:${v}:${y}`}class te{constructor(v,y,b){this.persistence=v,this.auth=y,this.userKey=b;const{config:P,name:G}=this.auth;this.fullUserKey=K(this.userKey,P.apiKey,G),this.fullPersistenceKey=K("persistence",P.apiKey,G),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,c.Z)(function*(){const y=yield v.persistence._get(v.fullUserKey);return y?pn._fromJSON(v.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var y=this;return(0,c.Z)(function*(){if(y.persistence===v)return;const b=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=v,b?y.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,y,b="authUser"){return(0,c.Z)(function*(){if(!y.length)return new te(Gt(Y),v,b);const P=(yield Promise.all(y.map(function(){var bt=(0,c.Z)(function*(jt){if(yield jt._isAvailable())return jt});return function(jt){return bt.apply(this,arguments)}}()))).filter(bt=>bt);let G=P[0]||Gt(Y);const ne=K(b,v.config.apiKey,v.name);let Ce=null;for(const bt of y)try{const jt=yield bt._get(ne);if(jt){const kt=pn._fromJSON(v,jt);bt!==G&&(Ce=kt),G=bt;break}}catch{}const lt=P.filter(bt=>bt._shouldAllowMigration);return G._shouldAllowMigration&&lt.length?(G=lt[0],Ce&&(yield G._set(ne,Ce.toJSON())),yield Promise.all(y.map(function(){var bt=(0,c.Z)(function*(jt){if(jt!==G)try{yield jt._remove(ne)}catch{}});return function(jt){return bt.apply(this,arguments)}}())),new te(G,v,b)):new te(G,v,b)})()}}function Ne(w){const v=w.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(er(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(ue(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(Mr(v))return"Blackberry";if(ii(v))return"Webos";if(Et(v))return"Safari";if((v.includes("chrome/")||mt(v))&&!v.includes("edge/"))return"Chrome";if(Dr(v))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function ue(w=(0,B.z$)()){return/firefox\//i.test(w)}function Et(w=(0,B.z$)()){const v=w.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function mt(w=(0,B.z$)()){return/crios\//i.test(w)}function er(w=(0,B.z$)()){return/iemobile/i.test(w)}function Dr(w=(0,B.z$)()){return/android/i.test(w)}function Mr(w=(0,B.z$)()){return/blackberry/i.test(w)}function ii(w=(0,B.z$)()){return/webos/i.test(w)}function cn(w=(0,B.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function gm(w=(0,B.z$)()){return cn(w)||Dr(w)||ii(w)||Mr(w)||/windows phone/i.test(w)||er(w)}function Rc(w,v=[]){let y;switch(w){case"Browser":y=Ne((0,B.z$)());break;case"Worker":y=`${Ne((0,B.z$)())}-${w}`;break;default:y=w}const b=v.length?v.join(","):"FirebaseCore-web";return`${y}/JsCore/${ge.SDK_VERSION}/${b}`}class Oc{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,y){const b=G=>new Promise((ne,Ce)=>{try{ne(v(G))}catch(lt){Ce(lt)}});b.onAbort=y,this.queue.push(b);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(v){var y=this;return(0,c.Z)(function*(){if(y.auth.currentUser===v)return;const b=[];try{for(const P of y.queue)yield P(v),P.onAbort&&b.push(P.onAbort)}catch(P){b.reverse();for(const G of b)try{G()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:P?.message})}})()}}class mm{constructor(v,y,b){this.app=v,this.heartbeatServiceProvider=y,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mh(this),this.idTokenSubscription=new mh(this),this.beforeStateQueue=new Oc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=De,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(v,y){var b=this;return y&&(this._popupRedirectResolver=Gt(y)),this._initializationPromise=this.queue((0,c.Z)(function*(){var P,G;if(!b._deleted&&(b.persistenceManager=yield te.create(b,v),!b._deleted)){if(null!==(P=b._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(y),b.lastNotifiedUid=(null===(G=b.currentUser)||void 0===G?void 0:G.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,c.Z)(function*(){if(v._deleted)return;const y=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||y){if(v.currentUser&&y&&v.currentUser.uid===y.uid)return v._currentUser._assign(y),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(y,!0)}})()}initializeCurrentUser(v){var y=this;return(0,c.Z)(function*(){var b;const P=yield y.assertedPersistence.getCurrentUser();let G=P,ne=!1;if(v&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Ce=null===(b=y.redirectUser)||void 0===b?void 0:b._redirectEventId,lt=G?._redirectEventId,bt=yield y.tryRedirectSignIn(v);(!Ce||Ce===lt)&&bt?.user&&(G=bt.user,ne=!0)}if(!G)return y.directlySetCurrentUser(null);if(!G._redirectEventId){if(ne)try{yield y.beforeStateQueue.runMiddleware(G)}catch(Ce){G=P,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Ce))}return G?y.reloadAndSetCurrentUserOrClear(G):y.directlySetCurrentUser(null)}return q(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===G._redirectEventId?y.directlySetCurrentUser(G):y.reloadAndSetCurrentUserOrClear(G)})()}tryRedirectSignIn(v){var y=this;return(0,c.Z)(function*(){let b=null;try{b=yield y._popupRedirectResolver._completeRedirectFn(y,v,!0)}catch{yield y._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(v){var y=this;return(0,c.Z)(function*(){try{yield Hn(v)}catch(b){if("auth/network-request-failed"!==b?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function st(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var v=this;return(0,c.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var y=this;return(0,c.Z)(function*(){const b=v?(0,B.m9)(v):null;return b&&q(b.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(b&&b._clone(y))})()}_updateCurrentUser(v,y=!1){var b=this;return(0,c.Z)(function*(){if(!b._deleted)return v&&q(b.tenantId===v.tenantId,b,"tenant-id-mismatch"),y||(yield b.beforeStateQueue.runMiddleware(v)),b.queue((0,c.Z)(function*(){yield b.directlySetCurrentUser(v),b.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,c.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var y=this;return this.queue((0,c.Z)(function*(){yield y.assertedPersistence.setPersistence(Gt(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new B.LL("auth","Firebase",v())}onAuthStateChanged(v,y,b){return this.registerStateListener(this.authStateSubscription,v,y,b)}beforeAuthStateChanged(v,y){return this.beforeStateQueue.pushCallback(v,y)}onIdTokenChanged(v,y,b){return this.registerStateListener(this.idTokenSubscription,v,y,b)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,y){var b=this;return(0,c.Z)(function*(){const P=yield b.getOrInitRedirectPersistenceManager(y);return null===v?P.removeCurrentUser():P.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var y=this;return(0,c.Z)(function*(){if(!y.redirectPersistenceManager){const b=v&&Gt(v)||y._popupRedirectResolver;q(b,y,"argument-error"),y.redirectPersistenceManager=yield te.create(y,[Gt(b._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(v){var y=this;return(0,c.Z)(function*(){var b,P;return y._isInitialized&&(yield y.queue((0,c.Z)(function*(){}))),(null===(b=y._currentUser)||void 0===b?void 0:b._redirectEventId)===v?y._currentUser:(null===(P=y.redirectUser)||void 0===P?void 0:P._redirectEventId)===v?y.redirectUser:null})()}_persistUserIfCurrent(v){var y=this;return(0,c.Z)(function*(){if(v===y.currentUser)return y.queue((0,c.Z)(function*(){return y.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(y=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,y,b,P){if(this._deleted)return()=>{};const G="function"==typeof y?y:y.next.bind(y),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return q(ne,this,"internal-error"),ne.then(()=>G(this.currentUser)),"function"==typeof y?v.addObserver(y,b,P):v.addObserver(y)}directlySetCurrentUser(v){var y=this;return(0,c.Z)(function*(){y.currentUser&&y.currentUser!==v&&y._currentUser._stopProactiveRefresh(),v&&y.isProactiveRefreshEnabled&&v._startProactiveRefresh(),y.currentUser=v,v?yield y.assertedPersistence.setCurrentUser(v):yield y.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=Rc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,c.Z)(function*(){var y;const b={"X-Client-Version":v.clientVersion};v.app.options.appId&&(b["X-Firebase-gmpid"]=v.app.options.appId);const P=yield null===(y=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return P&&(b["X-Firebase-Client"]=P),b})()}}function xr(w){return(0,B.m9)(w)}class mh{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,B.ne)(y=>this.observer=y)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mn(w){const v=w.indexOf(":");return v<0?"":w.substr(0,v+1)}function _i(w){if(!w)return null;const v=Number(w);return isNaN(v)?null:v}class oi{constructor(v,y){this.providerId=v,this.signInMethod=y}toJSON(){return Pe("not implemented")}_getIdTokenResponse(v){return Pe("not implemented")}_linkToIdToken(v,y){return Pe("not implemented")}_getReauthenticationResolver(v){return Pe("not implemented")}}function Hi(w,v){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:resetPassword",_t(w,v))})).apply(this,arguments)}function Fa(w,v){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function dn(){return(dn=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:update",_t(w,v))})).apply(this,arguments)}function fo(){return(fo=(0,c.Z)(function*(w,v){return mr(w,"POST","/v1/accounts:signInWithPassword",_t(w,v))})).apply(this,arguments)}function vs(w,v){return $n.apply(this,arguments)}function $n(){return($n=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:sendOobCode",_t(w,v))})).apply(this,arguments)}function Sr(){return(Sr=(0,c.Z)(function*(w,v){return vs(w,v)})).apply(this,arguments)}function Su(){return(Su=(0,c.Z)(function*(w,v){return vs(w,v)})).apply(this,arguments)}function _l(){return(_l=(0,c.Z)(function*(w,v){return vs(w,v)})).apply(this,arguments)}function ka(){return(ka=(0,c.Z)(function*(w,v){return vs(w,v)})).apply(this,arguments)}function Ci(){return(Ci=(0,c.Z)(function*(w,v){return mr(w,"POST","/v1/accounts:signInWithEmailLink",_t(w,v))})).apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(w,v){return mr(w,"POST","/v1/accounts:signInWithEmailLink",_t(w,v))})).apply(this,arguments)}class so extends oi{constructor(v,y,b,P=null){super("password",b),this._email=v,this._password=y,this._tenantId=P}static _fromEmailAndPassword(v,y){return new so(v,y,"password")}static _fromEmailAndCode(v,y,b=null){return new so(v,y,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const y="string"==typeof v?JSON.parse(v):v;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(v){var y=this;return(0,c.Z)(function*(){switch(y.signInMethod){case"password":return function ur(w,v){return fo.apply(this,arguments)}(v,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Eu(w,v){return Ci.apply(this,arguments)}(v,{email:y._email,oobCode:y._password});default:ke(v,"internal-error")}})()}_linkToIdToken(v,y){var b=this;return(0,c.Z)(function*(){switch(b.signInMethod){case"password":return Fa(v,{idToken:y,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function wl(w,v){return la.apply(this,arguments)}(v,{idToken:y,email:b._email,oobCode:b._password});default:ke(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function Tr(w,v){return yh.apply(this,arguments)}function yh(){return(yh=(0,c.Z)(function*(w,v){return mr(w,"POST","/v1/accounts:signInWithIdp",_t(w,v))})).apply(this,arguments)}class xs extends oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const y=new xs(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(y.idToken=v.idToken),v.accessToken&&(y.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(y.nonce=v.nonce),v.pendingToken&&(y.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(y.accessToken=v.oauthToken,y.secret=v.oauthTokenSecret):ke("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const y="string"==typeof v?JSON.parse(v):v,{providerId:b,signInMethod:P}=y,G=(0,he._T)(y,["providerId","signInMethod"]);if(!b||!P)return null;const ne=new xs(b,P);return ne.idToken=G.idToken||void 0,ne.accessToken=G.accessToken||void 0,ne.secret=G.secret,ne.nonce=G.nonce,ne.pendingToken=G.pendingToken||null,ne}_getIdTokenResponse(v){return Tr(v,this.buildRequest())}_linkToIdToken(v,y){const b=this.buildRequest();return b.idToken=y,Tr(v,b)}_getReauthenticationResolver(v){const y=this.buildRequest();return y.autoCreate=!1,Tr(v,y)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),v.postBody=(0,B.xO)(y)}return v}}function Ac(){return(Ac=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:sendVerificationCode",_t(w,v))})).apply(this,arguments)}function xo(){return(xo=(0,c.Z)(function*(w,v){return mr(w,"POST","/v1/accounts:signInWithPhoneNumber",_t(w,v))})).apply(this,arguments)}function wi(){return(wi=(0,c.Z)(function*(w,v){const y=yield mr(w,"POST","/v1/accounts:signInWithPhoneNumber",_t(w,v));if(y.temporaryProof)throw ae(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const u_={USER_NOT_FOUND:"user-not-found"};function go(){return(go=(0,c.Z)(function*(w,v){return mr(w,"POST","/v1/accounts:signInWithPhoneNumber",_t(w,Object.assign(Object.assign({},v),{operation:"REAUTH"})),u_)})).apply(this,arguments)}class Fs extends oi{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,y){return new Fs({verificationId:v,verificationCode:y})}static _fromTokenResponse(v,y){return new Fs({phoneNumber:v,temporaryProof:y})}_getIdTokenResponse(v){return function Ga(w,v){return xo.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,y){return function Sl(w,v){return wi.apply(this,arguments)}(v,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function po(w,v){return go.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:y,verificationId:b,verificationCode:P}=this.params;return v&&y?{temporaryProof:v,phoneNumber:y}:{sessionInfo:b,code:P}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:y,verificationCode:b,phoneNumber:P,temporaryProof:G}=v;return b||y||P||G?new Fs({verificationId:y,verificationCode:b,phoneNumber:P,temporaryProof:G}):null}}class Bi{constructor(v){var y,b,P,G,ne,Ce;const lt=(0,B.zd)((0,B.pd)(v)),bt=null!==(y=lt.apiKey)&&void 0!==y?y:null,jt=null!==(b=lt.oobCode)&&void 0!==b?b:null,kt=function Pc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=lt.mode)&&void 0!==P?P:null);q(bt&&jt&&kt,"argument-error"),this.apiKey=bt,this.operation=kt,this.code=jt,this.continueUrl=null!==(G=lt.continueUrl)&&void 0!==G?G:null,this.languageCode=null!==(ne=lt.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Ce=lt.tenantId)&&void 0!==Ce?Ce:null}static parseLink(v){const y=function El(w){const v=(0,B.zd)((0,B.pd)(w)).link,y=v?(0,B.zd)((0,B.pd)(v)).deep_link_id:null,b=(0,B.zd)((0,B.pd)(w)).deep_link_id;return(b?(0,B.zd)((0,B.pd)(b)).link:null)||b||y||v||w}(v);try{return new Bi(y)}catch{return null}}}let op=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,b){return so._fromEmailAndPassword(y,b)}static credentialWithLink(y,b){const P=Bi.parseLink(b);return q(P,"argument-error"),so._fromEmailAndCode(y,P.code,P.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ls{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class Va extends Ls{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class bu extends Va{static credentialFromJSON(v){const y="string"==typeof v?JSON.parse(v):v;return q("providerId"in y&&"signInMethod"in y,"argument-error"),xs._fromParams(y)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return q(v.idToken||v.accessToken,"argument-error"),xs._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return bu.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return bu.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:P,pendingToken:G,nonce:ne,providerId:Ce}=v;if(!b&&!P&&!y&&!G||!Ce)return null;try{return new bu(Ce)._credential({idToken:y,accessToken:b,nonce:ne,pendingToken:G})}catch{return null}}}let Ch=(()=>{class w extends Va{constructor(){super("facebook.com")}static credential(y){return xs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),vm=(()=>{class w extends Va{constructor(){super("google.com"),this.addScope("profile")}static credential(y,b){return xs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:b})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:b,oauthAccessToken:P}=y;if(!b&&!P)return null;try{return w.credential(b,P)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),sp=(()=>{class w extends Va{constructor(){super("github.com")}static credential(y){return xs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class bl extends oi{constructor(v,y){super(v,v),this.pendingToken=y}_getIdTokenResponse(v){return Tr(v,this.buildRequest())}_linkToIdToken(v,y){const b=this.buildRequest();return b.idToken=y,Tr(v,b)}_getReauthenticationResolver(v){const y=this.buildRequest();return y.autoCreate=!1,Tr(v,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const y="string"==typeof v?JSON.parse(v):v,{providerId:b,signInMethod:P,pendingToken:G}=y;return b&&P&&G&&b===P?new bl(b,G):null}static _create(v,y){return new bl(v,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ys extends Ls{constructor(v){q(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return ys.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return ys.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const y=bl.fromJSON(v);return q(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:y,providerId:b}=v;if(!y||!b)return null;try{return bl._create(b,y)}catch{return null}}}let d_=(()=>{class w extends Va{constructor(){super("twitter.com")}static credential(y,b){return xs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:b})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:b,oauthTokenSecret:P}=y;if(!b||!P)return null;try{return w.credential(b,P)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function wh(w,v){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,c.Z)(function*(w,v){return mr(w,"POST","/v1/accounts:signUp",_t(w,v))})).apply(this,arguments)}class Fo{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,y,b,P=!1){return(0,c.Z)(function*(){const G=yield pn._fromIdTokenResponse(v,b,P),ne=Eh(b);return new Fo({user:G,providerId:ne,_tokenResponse:b,operationType:y})})()}static _forOperation(v,y,b){return(0,c.Z)(function*(){yield v._updateTokensIfNecessary(b,!0);const P=Eh(b);return new Fo({user:v,providerId:P,_tokenResponse:b,operationType:y})})()}}function Eh(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function ap(){return(ap=(0,c.Z)(function*(w){var v;const y=xr(w);if(yield y._initializationPromise,null!==(v=y.currentUser)&&void 0!==v&&v.isAnonymous)return new Fo({user:y.currentUser,providerId:null,operationType:"signIn"});const b=yield wh(y,{returnSecureToken:!0}),P=yield Fo._fromIdTokenResponse(y,"signIn",b,!0);return yield y._updateCurrentUser(P.user),P})).apply(this,arguments)}class Mc extends B.ZR{constructor(v,y,b,P){var G;super(y.code,y.message),this.operationType=b,this.user=P,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:v.name,tenantId:null!==(G=v.tenantId)&&void 0!==G?G:void 0,_serverResponse:y.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(v,y,b,P){return new Mc(v,y,b,P)}}function h_(w,v,y,b){return("reauthenticate"===v?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(G=>{throw"auth/multi-factor-auth-required"===G.code?Mc._fromErrorAndOperation(w,G,v,b):G})}function mo(w){return new Set(w.map(({providerId:v})=>v).filter(v=>!!v))}function Ba(){return Ba=(0,c.Z)(function*(w,v){const y=(0,B.m9)(w);yield Tl(!0,y,v);const{providerUserInfo:b}=yield function xe(w,v){return be.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[v]}),P=mo(b||[]);return y.providerData=y.providerData.filter(G=>P.has(G.providerId)),P.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),Ba.apply(this,arguments)}function Du(w,v){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,c.Z)(function*(w,v,y=!1){const b=yield Tn(w,v._linkToIdToken(w.auth,yield w.getIdToken()),y);return Fo._forOperation(w,"link",b)})).apply(this,arguments)}function Tl(w,v,y){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,c.Z)(function*(w,v,y){yield Hn(v);const P=!1===w?"provider-already-linked":"no-such-provider";q(mo(v.providerData).has(y)===w,v.auth,P)})).apply(this,arguments)}function bh(w,v){return xc.apply(this,arguments)}function xc(){return(xc=(0,c.Z)(function*(w,v,y=!1){const{auth:b}=w,P="reauthenticate";try{const G=yield Tn(w,h_(b,P,v,w),y);q(G.idToken,b,"internal-error");const ne=zt(G.idToken);q(ne,b,"internal-error");const{sub:Ce}=ne;return q(w.uid===Ce,b,"user-mismatch"),Fo._forOperation(w,P,G)}catch(G){throw"auth/user-not-found"===G?.code&&ke(b,"user-mismatch"),G}})).apply(this,arguments)}function ua(w,v){return up.apply(this,arguments)}function up(){return(up=(0,c.Z)(function*(w,v,y=!1){const b="signIn",P=yield h_(w,b,v),G=yield Fo._fromIdTokenResponse(w,b,P);return y||(yield w._updateCurrentUser(G.user)),G})).apply(this,arguments)}function Bn(w,v){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,c.Z)(function*(w,v){return ua(xr(w),v)})).apply(this,arguments)}function Ru(w,v){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,c.Z)(function*(w,v){const y=(0,B.m9)(w);return yield Tl(!1,y,v.providerId),Du(y,v)})).apply(this,arguments)}function Lc(w,v){return _s.apply(this,arguments)}function _s(){return(_s=(0,c.Z)(function*(w,v){return bh((0,B.m9)(w),v)})).apply(this,arguments)}function Ou(){return(Ou=(0,c.Z)(function*(w,v){return mr(w,"POST","/v1/accounts:signInWithCustomToken",_t(w,v))})).apply(this,arguments)}function Cs(){return Cs=(0,c.Z)(function*(w,v){const y=xr(w),b=yield function Ui(w,v){return Ou.apply(this,arguments)}(y,{token:v,returnSecureToken:!0}),P=yield Fo._fromIdTokenResponse(y,"signIn",b);return yield y._updateCurrentUser(P.user),P}),Cs.apply(this,arguments)}class si{constructor(v,y){this.factorId=v,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(v,y){return"phoneInfo"in y?Th._fromServerResponse(v,y):"totpInfo"in y?Rl._fromServerResponse(v,y):ke(v,"internal-error")}}class Th extends si{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,y){return new Th(y)}}class Rl extends si{constructor(v){super("totp",v)}static _fromServerResponse(v,y){return new Rl(y)}}function Iu(w,v,y){var b;q((null===(b=y.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),q(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),v.continueUrl=y.url,v.dynamicLinkDomain=y.dynamicLinkDomain,v.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(q(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),v.iOSBundleId=y.iOS.bundleId),y.android&&(q(y.android.packageName.length>0,w,"missing-android-pkg-name"),v.androidInstallApp=y.android.installApp,v.androidMinimumVersionCode=y.android.minimumVersion,v.androidPackageName=y.android.packageName)}function Ol(){return Ol=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w),P={requestType:"PASSWORD_RESET",email:v};y&&Iu(b,P,y),yield function Yr(w,v){return Su.apply(this,arguments)}(b,P)}),Ol.apply(this,arguments)}function nn(){return(nn=(0,c.Z)(function*(w,v,y){yield Hi((0,B.m9)(w),{oobCode:v,newPassword:y})})).apply(this,arguments)}function kc(){return kc=(0,c.Z)(function*(w,v){yield function Dt(w,v){return dn.apply(this,arguments)}((0,B.m9)(w),{oobCode:v})}),kc.apply(this,arguments)}function dp(w,v){return Au.apply(this,arguments)}function Au(){return(Au=(0,c.Z)(function*(w,v){const y=(0,B.m9)(w),b=yield Hi(y,{oobCode:v}),P=b.requestType;switch(q(P,y,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(b.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(b.mfaInfo,y,"internal-error");default:q(b.email,y,"internal-error")}let G=null;return b.mfaInfo&&(G=si._fromServerResponse(xr(y),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:G},operation:P}})).apply(this,arguments)}function Gc(){return(Gc=(0,c.Z)(function*(w,v){const{data:y}=yield dp((0,B.m9)(w),v);return y.email})).apply(this,arguments)}function Er(){return(Er=(0,c.Z)(function*(w,v,y){const b=xr(w),P=yield wh(b,{returnSecureToken:!0,email:v,password:y}),G=yield Fo._fromIdTokenResponse(b,"signIn",P);return yield b._updateCurrentUser(G.user),G})).apply(this,arguments)}function Vc(){return Vc=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w),P={requestType:"EMAIL_SIGNIN",email:v};q(y.handleCodeInApp,b,"argument-error"),y&&Iu(b,P,y),yield function vn(w,v){return _l.apply(this,arguments)}(b,P)}),Vc.apply(this,arguments)}function Oh(){return(Oh=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w),P=op.credentialWithLink(v,y||Ee());return q(P._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Bn(b,P)})).apply(this,arguments)}function vo(){return(vo=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:createAuthUri",_t(w,v))})).apply(this,arguments)}function Al(){return Al=(0,c.Z)(function*(w,v){const b={identifier:v,continueUri:Ae()?Ee():"http://localhost"},{signinMethods:P}=yield function Il(w,v){return vo.apply(this,arguments)}((0,B.m9)(w),b);return P||[]}),Al.apply(this,arguments)}function Hc(){return Hc=(0,c.Z)(function*(w,v){const y=(0,B.m9)(w),P={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};v&&Iu(y.auth,P,v);const{email:G}=yield function La(w,v){return Sr.apply(this,arguments)}(y.auth,P);G!==w.email&&(yield w.reload())}),Hc.apply(this,arguments)}function Fr(){return Fr=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w),G={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:v};y&&Iu(b.auth,G,y);const{email:ne}=yield function Cl(w,v){return ka.apply(this,arguments)}(b.auth,G);ne!==w.email&&(yield w.reload())}),Fr.apply(this,arguments)}function Pu(){return(Pu=(0,c.Z)(function*(w,v){return qt(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Lo(){return Lo=(0,c.Z)(function*(w,{displayName:v,photoURL:y}){if(void 0===v&&void 0===y)return;const b=(0,B.m9)(w),G={idToken:yield b.getIdToken(),displayName:v,photoUrl:y,returnSecureToken:!0},ne=yield Tn(b,function yo(w,v){return Pu.apply(this,arguments)}(b.auth,G));b.displayName=ne.displayName||null,b.photoURL=ne.photoUrl||null;const Ce=b.providerData.find(({providerId:lt})=>"password"===lt);Ce&&(Ce.displayName=b.displayName,Ce.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ne)}),Lo.apply(this,arguments)}function gp(w,v,y){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,c.Z)(function*(w,v,y){const{auth:b}=w,G={idToken:yield w.getIdToken(),returnSecureToken:!0};v&&(G.email=v),y&&(G.password=y);const ne=yield Tn(w,Fa(b,G));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Ua{constructor(v,y,b={}){this.isNewUser=v,this.providerId=y,this.profile=b}}class Ph extends Ua{constructor(v,y,b,P){super(v,y,b),this.username=P}}class jc extends Ua{constructor(v,y){super(v,"facebook.com",y)}}class f_ extends Ph{constructor(v,y){super(v,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Nh extends Ua{constructor(v,y){super(v,"google.com",y)}}class mp extends Ph{constructor(v,y,b){super(v,"twitter.com",y,b)}}function p_(w){const{user:v,_tokenResponse:y}=w;return v.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Uc(w){var v,y;if(!w)return null;const{providerId:b}=w,P=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},G=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&w?.idToken){const ne=null===(y=null===(v=zt(w.idToken))||void 0===v?void 0:v.firebase)||void 0===y?void 0:y.sign_in_provider;if(ne)return new Ua(G,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!b)return null;switch(b){case"facebook.com":return new jc(G,P);case"github.com":return new f_(G,P);case"google.com":return new Nh(G,P);case"twitter.com":return new mp(G,P,w.screenName||null);case"custom":case"anonymous":return new Ua(G,null);default:return new Ua(G,b,P)}}(y)}class ca{constructor(v,y,b){this.type=v,this.credential=y,this.auth=b}static _fromIdtoken(v,y){return new ca("enroll",v,y)}static _fromMfaPendingCredential(v){return new ca("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var y,b;if(v?.multiFactorSession){if(null!==(y=v.multiFactorSession)&&void 0!==y&&y.pendingCredential)return ca._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(b=v.multiFactorSession)&&void 0!==b&&b.idToken)return ca._fromIdtoken(v.multiFactorSession.idToken)}return null}}class Zr{constructor(v,y,b){this.session=v,this.hints=y,this.signInResolver=b}static _fromError(v,y){const b=xr(v),P=y.customData._serverResponse,G=(P.mfaInfo||[]).map(Ce=>si._fromServerResponse(b,Ce));q(P.mfaPendingCredential,b,"internal-error");const ne=ca._fromMfaPendingCredential(P.mfaPendingCredential);return new Zr(ne,G,function(){var Ce=(0,c.Z)(function*(lt){const bt=yield lt._process(b,ne);delete P.mfaInfo,delete P.mfaPendingCredential;const jt=Object.assign(Object.assign({},P),{idToken:bt.idToken,refreshToken:bt.refreshToken});switch(y.operationType){case"signIn":const kt=yield Fo._fromIdTokenResponse(b,y.operationType,jt);return yield b._updateCurrentUser(kt.user),kt;case"reauthenticate":return q(y.user,b,"internal-error"),Fo._forOperation(y.user,y.operationType,jt);default:ke(b,"internal-error")}});return function(lt){return Ce.apply(this,arguments)}}())}resolveSignIn(v){var y=this;return(0,c.Z)(function*(){return y.signInResolver(v)})()}}class Pl{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(b=>si._fromServerResponse(v.auth,b)))})}static _fromUser(v){return new Pl(v)}getSession(){var v=this;return(0,c.Z)(function*(){return ca._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,y){var b=this;return(0,c.Z)(function*(){const P=v,G=yield b.getSession(),ne=yield Tn(b.user,P._process(b.user.auth,G,y));return yield b.user._updateTokensIfNecessary(ne),b.user.reload()})()}unenroll(v){var y=this;return(0,c.Z)(function*(){const b="string"==typeof v?v:v.uid,P=yield y.user.getIdToken();try{const G=yield Tn(y.user,function Fh(w,v){return qt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",_t(w,v))}(y.user.auth,{idToken:P,mfaEnrollmentId:b}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ne})=>ne!==b),yield y.user._updateTokensIfNecessary(G),yield y.user.reload()}catch(G){throw G}})()}}const ja=new WeakMap,Wc="__sak";class ko{constructor(v,y){this.storageRetriever=v,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Wc,"1"),this.storage.removeItem(Wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,y){return this.storage.setItem(v,JSON.stringify(y)),Promise.resolve()}_get(v){const y=this.storage.getItem(v);return Promise.resolve(y?JSON.parse(y):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const Lh=(()=>{class w extends ko{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,b)=>this.onStorageEvent(y,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xu(){const w=(0,B.z$)();return Et(w)||cn(w)}()&&function gh(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gm(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const b of Object.keys(this.listeners)){const P=this.storage.getItem(b),G=this.localCache[b];P!==G&&y(b,G,P)}}onStorageEvent(y,b=!1){if(!y.key)return void this.forAllChangedKeys((Ce,lt,bt)=>{this.notifyListeners(Ce,bt)});const P=y.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ce=this.storage.getItem(P);if(y.newValue!==Ce)null!==y.newValue?this.storage.setItem(P,y.newValue):this.storage.removeItem(P);else if(this.localCache[P]===y.newValue&&!b)return}const G=()=>{const Ce=this.storage.getItem(P);!b&&this.localCache[P]===Ce||this.notifyListeners(P,Ce)},ne=this.storage.getItem(P);!function Tc(){return(0,B.w1)()&&10===document.documentMode}()||ne===y.newValue||y.newValue===y.oldValue?G():setTimeout(G,10)}notifyListeners(y,b){this.localCache[y]=b;const P=this.listeners[y];if(P)for(const G of Array.from(P))G(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,b,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:b,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,b){var P=()=>super._set,G=this;return(0,c.Z)(function*(){yield P().call(G,y,b),G.localCache[y]=JSON.stringify(b)})()}_get(y){var b=()=>super._get,P=this;return(0,c.Z)(function*(){const G=yield b().call(P,y);return P.localCache[y]=JSON.stringify(G),G})()}_remove(y){var b=()=>super._remove,P=this;return(0,c.Z)(function*(){yield b().call(P,y),delete P.localCache[y]})()}}return w.type="LOCAL",w})(),Go=(()=>{class w extends ko{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,b){}_removeListener(y,b){}}return w.type="SESSION",w})();let Sm=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const b=this.receivers.find(G=>G.isListeningto(y));if(b)return b;const P=new w(y);return this.receivers.push(P),P}isListeningto(y){return this.eventTarget===y}handleEvent(y){var b=this;return(0,c.Z)(function*(){const P=y,{eventId:G,eventType:ne,data:Ce}=P.data,lt=b.handlersMap[ne];if(!lt?.size)return;P.ports[0].postMessage({status:"ack",eventId:G,eventType:ne});const bt=Array.from(lt).map(function(){var kt=(0,c.Z)(function*(ui){return ui(P.origin,Ce)});return function(ui){return kt.apply(this,arguments)}}()),jt=yield function kh(w){return Promise.all(w.map(function(){var v=(0,c.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(b){return{fulfilled:!1,reason:b}}});return function(y){return v.apply(this,arguments)}}()))}(bt);P.ports[0].postMessage({status:"done",eventId:G,eventType:ne,response:jt})})()}_subscribe(y,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(b)}_unsubscribe(y,b){this.handlersMap[y]&&b&&this.handlersMap[y].delete(b),(!b||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ws(w="",v=10){let y="";for(let b=0;b<v;b++)y+=Math.floor(10*Math.random());return w+y}class Nl{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,y,b=50){var P=this;return(0,c.Z)(function*(){const G=typeof MessageChannel<"u"?new MessageChannel:null;if(!G)throw new Error("connection_unavailable");let ne,Ce;return new Promise((lt,bt)=>{const jt=ws("",20);G.port1.start();const kt=setTimeout(()=>{bt(new Error("unsupported_event"))},b);Ce={messageChannel:G,onMessage(ui){const bs=ui;if(bs.data.eventId===jt)switch(bs.data.status){case"ack":clearTimeout(kt),ne=setTimeout(()=>{bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),lt(bs.data.response);break;default:clearTimeout(kt),clearTimeout(ne),bt(new Error("invalid_response"))}}},P.handlers.add(Ce),G.port1.addEventListener("message",Ce.onMessage),P.target.postMessage({eventType:v,eventId:jt,data:y},[G.port2])}).finally(()=>{Ce&&P.removeMessageHandler(Ce)})})()}}function yr(){return window}function Wa(){return typeof yr().WorkerGlobalScope<"u"&&"function"==typeof yr().importScripts}function Ml(){return(Ml=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Fu="firebaseLocalStorageDb",Fl=1,Vh="firebaseLocalStorage",Ll="fbase_key";class $a{constructor(v){this.request=v}toPromise(){return new Promise((v,y)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function fa(w,v){return w.transaction([Vh],v?"readwrite":"readonly").objectStore(Vh)}function Lu(){const w=indexedDB.open(Fu,Fl);return new Promise((v,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(Vh,{keyPath:Ll})}catch(P){y(P)}}),w.addEventListener("success",(0,c.Z)(function*(){const b=w.result;b.objectStoreNames.contains(Vh)?v(b):(b.close(),yield function Vo(){const w=indexedDB.deleteDatabase(Fu);return new $a(w).toPromise()}(),v(yield Lu()))}))})}function kl(w,v,y){return pa.apply(this,arguments)}function pa(){return(pa=(0,c.Z)(function*(w,v,y){const b=fa(w,!0).put({[Ll]:v,value:y});return new $a(b).toPromise()})).apply(this,arguments)}function ga(){return(ga=(0,c.Z)(function*(w,v){const y=fa(w,!1).get(v),b=yield new $a(y).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Gl(w,v){const y=fa(w,!0).delete(v);return new $a(y).toPromise()}const Gs=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,c.Z)(function*(){return y.db||(y.db=yield Lu()),y.db})()}_withRetries(y){var b=this;return(0,c.Z)(function*(){let P=0;for(;;)try{const G=yield b._openDb();return yield y(G)}catch(G){if(P++>3)throw G;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,c.Z)(function*(){return Wa()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,c.Z)(function*(){y.receiver=Sm._getInstance(function xl(){return Wa()?self:null}()),y.receiver._subscribe("keyChanged",function(){var b=(0,c.Z)(function*(P,G){return{keyProcessed:(yield y._poll()).includes(G.key)}});return function(P,G){return b.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var b=(0,c.Z)(function*(P,G){return["keyChanged"]});return function(P,G){return b.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,c.Z)(function*(){var b,P;if(y.activeServiceWorker=yield function Gh(){return Ml.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Nl(y.activeServiceWorker);const G=yield y.sender._send("ping",{},800);G&&null!==(b=G[0])&&void 0!==b&&b.fulfilled&&null!==(P=G[0])&&void 0!==P&&P.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var b=this;return(0,c.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Em(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:y},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Lu();return yield kl(y,Wc,"1"),yield Gl(y,Wc),!0}catch{}return!1})()}_withPendingWrite(y){var b=this;return(0,c.Z)(function*(){b.pendingWrites++;try{yield y()}finally{b.pendingWrites--}})()}_set(y,b){var P=this;return(0,c.Z)(function*(){return P._withPendingWrite((0,c.Z)(function*(){return yield P._withRetries(G=>kl(G,y,b)),P.localCache[y]=b,P.notifyServiceWorker(y)}))})()}_get(y){var b=this;return(0,c.Z)(function*(){const P=yield b._withRetries(G=>function $c(w,v){return ga.apply(this,arguments)}(G,y));return b.localCache[y]=P,P})()}_remove(y){var b=this;return(0,c.Z)(function*(){return b._withPendingWrite((0,c.Z)(function*(){return yield b._withRetries(P=>Gl(P,y)),delete b.localCache[y],b.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,c.Z)(function*(){const b=yield y._withRetries(ne=>{const Ce=fa(ne,!1).getAll();return new $a(Ce).toPromise()});if(!b)return[];if(0!==y.pendingWrites)return[];const P=[],G=new Set;for(const{fbase_key:ne,value:Ce}of b)G.add(ne),JSON.stringify(y.localCache[ne])!==JSON.stringify(Ce)&&(y.notifyListeners(ne,Ce),P.push(ne));for(const ne of Object.keys(y.localCache))y.localCache[ne]&&!G.has(ne)&&(y.notifyListeners(ne,null),P.push(ne));return P})()}notifyListeners(y,b){this.localCache[y]=b;const P=this.listeners[y];if(P)for(const G of Array.from(P))G(b)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ka(){return(Ka=(0,c.Z)(function*(w){return(yield qt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kc(w){return new Promise((v,y)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=v,b.onerror=P=>{const G=Ie("internal-error");G.customData=P,y(G)},b.type="text/javascript",b.charset="UTF-8",function wp(){var w,v;return null!==(v=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==v?v:document}().appendChild(b)})}function ji(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Vl=1e12;class Ep{constructor(v){this.auth=v,this.counter=Vl,this._widgets=new Map}render(v,y){const b=this.counter;return this._widgets.set(b,new bp(v,this.auth.name,y||{})),this.counter++,b}reset(v){var y;const b=v||Vl;null===(y=this._widgets.get(b))||void 0===y||y.delete(),this._widgets.delete(b)}getResponse(v){var y;return(null===(y=this._widgets.get(v||Vl))||void 0===y?void 0:y.getResponse())||""}execute(v){var y=this;return(0,c.Z)(function*(){var b;return null===(b=y._widgets.get(v||Vl))||void 0===b||b.execute(),""})()}}class bp{constructor(v,y,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof v?document.getElementById(v):v;q(P,"argument-error",{appName:y}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qc(w){const v=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)v.push(y.charAt(Math.floor(Math.random()*y.length)));return v.join("")}(50);const{callback:v,"expired-callback":y}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ma=ji("rcb"),qa=new yt(3e4,6e4);class S_{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=yr().grecaptcha)||void 0===v||!v.render)}load(v,y=""){return q(function Dp(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),v,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(yr().grecaptcha):new Promise((b,P)=>{const G=yr().setTimeout(()=>{P(Ie(v,"network-request-failed"))},qa.get());yr()[ma]=()=>{yr().clearTimeout(G),delete yr()[ma];const Ce=yr().grecaptcha;if(!Ce)return void P(Ie(v,"internal-error"));const lt=Ce.render;Ce.render=(bt,jt)=>{const kt=lt(bt,jt);return this.counter++,kt},this.hostLanguage=y,b(Ce)},Kc(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:ma,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(G),P(Ie(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var y;return!(null===(y=yr().grecaptcha)||void 0===y||!y.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hl{load(v){return(0,c.Z)(function*(){return new Ep(v)})()}clearedOneInstance(){}}const Tm="recaptcha",va={theme:"light",type:"image"};class cr{constructor(v,y=Object.assign({},va),b){this.parameters=y,this.type=Tm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xr(b),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof v?document.getElementById(v):v;q(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hl:new S_,this.validateStartingState()}verify(){var v=this;return(0,c.Z)(function*(){v.assertNotDestroyed();const y=yield v.render(),b=v.getAssertedRecaptcha();return b.getResponse(y)||new Promise(G=>{const ne=Ce=>{Ce&&(v.tokenChangeListeners.delete(ne),G(Ce))};v.tokenChangeListeners.add(ne),v.isInvisible&&b.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return y=>{if(this.tokenChangeListeners.forEach(b=>b(y)),"function"==typeof v)v(y);else if("string"==typeof v){const b=yr()[v];"function"==typeof b&&b(y)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,c.Z)(function*(){if(yield v.init(),!v.widgetId){let y=v.container;if(!v.isInvisible){const b=document.createElement("div");y.appendChild(b),y=b}v.widgetId=v.getAssertedRecaptcha().render(y,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,c.Z)(function*(){q(Ae()&&!Wa(),v.auth,"internal-error"),yield function Rm(){let w=null;return new Promise(v=>{"complete"!==document.readyState?(w=()=>v(),window.addEventListener("load",w)):v()}).catch(v=>{throw w&&window.removeEventListener("load",w),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const y=yield function za(w){return Ka.apply(this,arguments)}(v.auth);q(y,v.auth,"internal-error"),v.parameters.sitekey=y})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vu{constructor(v,y){this.verificationId=v,this.onConfirmation=y}confirm(v){const y=Fs._fromVerification(this.verificationId,v);return this.onConfirmation(y)}}function Im(){return(Im=(0,c.Z)(function*(w,v,y){const b=xr(w),P=yield Pm(b,v,(0,B.m9)(y));return new Vu(P,G=>Bn(b,G))})).apply(this,arguments)}function Am(){return(Am=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w);yield Tl(!1,b,"phone");const P=yield Pm(b.auth,v,(0,B.m9)(y));return new Vu(P,G=>Ru(b,G))})).apply(this,arguments)}function Bl(){return(Bl=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w),P=yield Pm(b.auth,v,(0,B.m9)(y));return new Vu(P,G=>Lc(b,G))})).apply(this,arguments)}function Pm(w,v,y){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,c.Z)(function*(w,v,y){var b;const P=yield y.verify();try{let G;if(q("string"==typeof P,w,"argument-error"),q(y.type===Tm,w,"argument-error"),G="string"==typeof v?{phoneNumber:v}:v,"session"in G){const ne=G.session;if("phoneNumber"in G)return q("enroll"===ne.type,w,"internal-error"),(yield function _o(w,v){return qt(w,"POST","/v2/accounts/mfaEnrollment:start",_t(w,v))}(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:G.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{q("signin"===ne.type,w,"internal-error");const Ce=(null===(b=G.multiFactorHint)||void 0===b?void 0:b.uid)||G.multiFactorUid;return q(Ce,w,"missing-multi-factor-info"),(yield function Cp(w,v){return qt(w,"POST","/v2/accounts/mfaSignIn:start",_t(w,v))}(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Ce,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield function _h(w,v){return Ac.apply(this,arguments)}(w,{phoneNumber:G.phoneNumber,recaptchaToken:P});return ne}}finally{y._reset()}}),Nm.apply(this,arguments)}function Hu(){return(Hu=(0,c.Z)(function*(w,v){yield Du((0,B.m9)(w),v)})).apply(this,arguments)}let Vs=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=xr(y)}verifyPhoneNumber(y,b){return Pm(this.auth,y,(0,B.m9)(b))}static credential(y,b){return Fs._fromVerification(y,b)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:b,temporaryProof:P}=y;return b&&P?Fs._fromTokenResponse(b,P):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Ul(w,v){return v?Gt(v):(q(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Wi extends oi{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return Tr(v,this._buildIdpRequest())}_linkToIdToken(v,y){return Tr(v,this._buildIdpRequest(y))}_getReauthenticationResolver(v){return Tr(v,this._buildIdpRequest())}_buildIdpRequest(v){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(y.idToken=v),y}}function ya(w){return ua(w.auth,new Wi(w),w.bypassAuthState)}function Bh(w){const{auth:v,user:y}=w;return q(y,v,"internal-error"),bh(y,new Wi(w),w.bypassAuthState)}function Bu(w){return _a.apply(this,arguments)}function _a(){return(_a=(0,c.Z)(function*(w){const{auth:v,user:y}=w;return q(y,v,"internal-error"),Du(y,new Wi(w),w.bypassAuthState)})).apply(this,arguments)}class Uh{constructor(v,y,b,P,G=!1){this.auth=v,this.resolver=b,this.user=P,this.bypassAuthState=G,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var v=this;return new Promise(function(){var y=(0,c.Z)(function*(b,P){v.pendingPromise={resolve:b,reject:P};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(G){v.reject(G)}});return function(b,P){return y.apply(this,arguments)}}())}onAuthEvent(v){var y=this;return(0,c.Z)(function*(){const{urlResponse:b,sessionId:P,postBody:G,tenantId:ne,error:Ce,type:lt}=v;if(Ce)return void y.reject(Ce);const bt={auth:y.auth,requestUri:b,sessionId:P,tenantId:ne||void 0,postBody:G||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(lt)(bt))}catch(jt){y.reject(jt)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return ya;case"linkViaPopup":case"linkViaRedirect":return Bu;case"reauthViaPopup":case"reauthViaRedirect":return Bh;default:ke(this.auth,"internal-error")}}resolve(v){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mm=new yt(2e3,1e4);function D_(){return(D_=(0,c.Z)(function*(w,v,y){const b=xr(w);it(w,v,Ls);const P=Ul(b,y);return new Or(b,"signInViaPopup",v,P).executeNotNull()})).apply(this,arguments)}function Ho(){return(Ho=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w);it(b.auth,v,Ls);const P=Ul(b.auth,y);return new Or(b.auth,"reauthViaPopup",v,P,b).executeNotNull()})).apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w);it(b.auth,v,Ls);const P=Ul(b.auth,y);return new Or(b.auth,"linkViaPopup",v,P,b).executeNotNull()})).apply(this,arguments)}let Or=(()=>{class w extends Uh{constructor(y,b,P,G,ne){super(y,b,G,ne),this.provider=P,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,c.Z)(function*(){const b=yield y.execute();return q(b,y.auth,"internal-error"),b})()}onExecution(){var y=this;return(0,c.Z)(function*(){tt(1===y.filter.length,"Popup operations only handle one event");const b=ws();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],b),y.authWindow.associatedEvent=b,y.resolver._originValidation(y.auth).catch(P=>{y.reject(P)}),y.resolver._isIframeWebStorageSupported(y.auth,P=>{P||y.reject(Ie(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var b,P;this.pollId=null!==(P=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Mm.get())};y()}}return w.currentPopupAction=null,w})();const xm="pendingRedirect",Ca=new Map;class br extends Uh{constructor(v,y,b=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,b),this.eventId=null}execute(){var v=()=>super.execute,y=this;return(0,c.Z)(function*(){let b=Ca.get(y.auth._key());if(!b){try{const G=(yield function Fm(w,v){return Hs.apply(this,arguments)}(y.resolver,y.auth))?yield v().call(y):null;b=()=>Promise.resolve(G)}catch(P){b=()=>Promise.reject(P)}Ca.set(y.auth._key(),b)}return y.bypassAuthState||Ca.set(y.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(v){var y=()=>super.onAuthEvent,b=this;return(0,c.Z)(function*(){if("signInViaRedirect"===v.type)return y().call(b,v);if("unknown"!==v.type){if(v.eventId){const P=yield b.auth._redirectUserForId(v.eventId);if(P)return b.user=P,y().call(b,v);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Hs(){return(Hs=(0,c.Z)(function*(w,v){const y=Pt(v),b=Xo(w);if(!(yield b._isAvailable()))return!1;const P="true"===(yield b._get(y));return yield b._remove(y),P})).apply(this,arguments)}function jh(w,v){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,c.Z)(function*(w,v){return Xo(w)._set(Pt(v),"true")})).apply(this,arguments)}function Uu(w,v){Ca.set(w._key(),v)}function Xo(w){return Gt(w._redirectPersistence)}function Pt(w){return K(xm,w.config.apiKey,w.name)}function O(w,v,y){return function A(w,v,y){return x.apply(this,arguments)}(w,v,y)}function x(){return(x=(0,c.Z)(function*(w,v,y){const b=xr(w);it(w,v,Ls),yield b._initializationPromise;const P=Ul(b,y);return yield jh(P,b),P._openRedirect(b,v,"signInViaRedirect")})).apply(this,arguments)}function $(w,v,y){return function X(w,v,y){return fe.apply(this,arguments)}(w,v,y)}function fe(){return(fe=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w);it(b.auth,v,Ls),yield b.auth._initializationPromise;const P=Ul(b.auth,y);yield jh(P,b.auth);const G=yield Qr(b);return P._openRedirect(b.auth,v,"reauthViaRedirect",G)})).apply(this,arguments)}function ze(w,v,y){return function Mt(w,v,y){return xt.apply(this,arguments)}(w,v,y)}function xt(){return(xt=(0,c.Z)(function*(w,v,y){const b=(0,B.m9)(w);it(b.auth,v,Ls),yield b.auth._initializationPromise;const P=Ul(b.auth,y);yield Tl(!1,b,v.providerId),yield jh(P,b.auth);const G=yield Qr(b);return P._openRedirect(b.auth,v,"linkViaRedirect",G)})).apply(this,arguments)}function wn(){return(wn=(0,c.Z)(function*(w,v){return yield xr(w)._initializationPromise,Zt(w,v,!1)})).apply(this,arguments)}function Zt(w,v){return dr.apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(w,v,y=!1){const b=xr(w),P=Ul(b,v),ne=yield new br(b,P,y).execute();return ne&&!y&&(delete ne.user._redirectEventId,yield b._persistUserIfCurrent(ne.user),yield b._setRedirectUser(null,v)),ne})).apply(this,arguments)}function Qr(w){return ju.apply(this,arguments)}function ju(){return(ju=(0,c.Z)(function*(w){const v=ws(`${w.uid}:::`);return w._redirectEventId=v,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),v})).apply(this,arguments)}class Ss{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let y=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(v,b)&&(y=!0,this.sendToConsumer(v,b),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function Ir(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Co(w);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=v,y=!0)),y}sendToConsumer(v,y){var b;if(v.error&&!Co(v)){const P=(null===(b=v.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";y.onError(Ie(this.auth,P))}else y.onAuthEvent(v)}isEventForConsumer(v,y){const b=null===y.eventId||!!v.eventId&&v.eventId===y.eventId;return y.filter.includes(v.type)&&b}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lr(v))}saveEventToCache(v){this.cachedEventUids.add(Lr(v)),this.lastProcessedEventTime=Date.now()}}function Lr(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(v=>v).join("-")}function Co({type:w,error:v}){return"unknown"===w&&"auth/no-auth-event"===v?.code}function Tp(w){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,c.Z)(function*(w,v={}){return qt(w,"GET","/v1/projects",v)})).apply(this,arguments)}const Ur=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jr=/^https?/;function kr(){return(kr=(0,c.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:v}=yield Tp(w);for(const y of v)try{if($i(y))return}catch{}ke(w,"unauthorized-domain")})).apply(this,arguments)}function $i(w){const v=Ee(),{protocol:y,hostname:b}=new URL(v);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===b?"chrome-extension:"===y&&w.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===y&&ne.hostname===b}if(!Jr.test(y))return!1;if(Ur.test(w))return b===w;const P=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(b)}const Qc=new yt(3e4,6e4);function T_(){const w=yr().___jsl;if(w?.H)for(const v of Object.keys(w.H))if(w.H[v].r=w.H[v].r||[],w.H[v].L=w.H[v].L||[],w.H[v].r=[...w.H[v].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Uo=null;const zi=new yt(5e3,15e3),Wu="__/auth/iframe",XD="emulator/auth/iframe",Xc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function km(w){const v=w.config;q(v.authDomain,w,"auth-domain-config-required");const y=v.emulator?gt(v,XD):`https://${w.config.authDomain}/${Wu}`,b={apiKey:v.apiKey,appName:w.name,v:ge.SDK_VERSION},P=Lm.get(w.config.apiHost);P&&(b.eid=P);const G=w._getFrameworks();return G.length&&(b.fw=G.join(",")),`${y}?${(0,B.xO)(b).slice(1)}`}function $h(){return $h=(0,c.Z)(function*(w){const v=yield function Jc(w){return Uo=Uo||function JD(w){return new Promise((v,y)=>{var b,P,G;function ne(){T_(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{T_(),y(Ie(w,"network-request-failed"))},timeout:Qc.get()})}if(null!==(P=null===(b=yr().gapi)||void 0===b?void 0:b.iframes)&&void 0!==P&&P.Iframe)v(gapi.iframes.getContext());else{if(null===(G=yr().gapi)||void 0===G||!G.load){const Ce=ji("iframefcb");return yr()[Ce]=()=>{gapi.load?ne():y(Ie(w,"network-request-failed"))},Kc(`https://apis.google.com/js/api.js?onload=${Ce}`).catch(lt=>y(lt))}ne()}}).catch(v=>{throw Uo=null,v})}(w),Uo}(w),y=yr().gapi;return q(y,w,"internal-error"),v.open({where:document.body,url:km(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xc,dontclear:!0},b=>new Promise(function(){var P=(0,c.Z)(function*(G,ne){yield b.restyle({setHideOnLeave:!1});const Ce=Ie(w,"network-request-failed"),lt=yr().setTimeout(()=>{ne(Ce)},zi.get());function bt(){yr().clearTimeout(lt),G(b)}b.ping(bt).then(bt,()=>{ne(Ce)})});return function(G,ne){return P.apply(this,arguments)}}()))}),$h.apply(this,arguments)}const Rp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fn=500,jo=600,yS="_blank",ed="http://localhost";class R_{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const I_="__/auth/handler",A_="emulator/auth/handler";function Op(w,v,y,b,P,G){q(w.config.authDomain,w,"auth-domain-config-required"),q(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:b,v:ge.SDK_VERSION,eventId:P};if(v instanceof Ls){v.setDefaultLanguage(w.languageCode),ne.providerId=v.providerId||"",(0,B.xb)(v.getCustomParameters())||(ne.customParameters=JSON.stringify(v.getCustomParameters()));for(const[lt,bt]of Object.entries(G||{}))ne[lt]=bt}if(v instanceof Va){const lt=v.getScopes().filter(bt=>""!==bt);lt.length>0&&(ne.scopes=lt.join(","))}w.tenantId&&(ne.tid=w.tenantId);const Ce=ne;for(const lt of Object.keys(Ce))void 0===Ce[lt]&&delete Ce[lt];return`${function _S({config:w}){return w.emulator?gt(w,A_):`https://${w.authDomain}/${I_}`}(w)}?${(0,B.xO)(Ce).slice(1)}`}const Si="webStorageSupport",Oi=class Wl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Go,this._completeRedirectFn=Zt,this._overrideRedirectResult=Uu}_openPopup(v,y,b,P){var G=this;return(0,c.Z)(function*(){var ne;tt(null===(ne=G.eventManagers[v._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Ce=Op(v,y,b,Ee(),P);return function O_(w,v,y,b=fn,P=jo){const G=Math.max((window.screen.availHeight-P)/2,0).toString(),ne=Math.max((window.screen.availWidth-b)/2,0).toString();let Ce="";const lt=Object.assign(Object.assign({},Rp),{width:b.toString(),height:P.toString(),top:G,left:ne}),bt=(0,B.z$)().toLowerCase();y&&(Ce=mt(bt)?yS:y),ue(bt)&&(v=v||ed,lt.scrollbars="yes");const jt=Object.entries(lt).reduce((ui,[bs,Ju])=>`${ui}${bs}=${Ju},`,"");if(function ms(w=(0,B.z$)()){var v;return cn(w)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(bt)&&"_self"!==Ce)return function Es(w,v){const y=document.createElement("a");y.href=w,y.target=v;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(b)}(v||"",Ce),new R_(null);const kt=window.open(v||"",Ce,jt);q(kt,w,"popup-blocked");try{kt.focus()}catch{}return new R_(kt)}(v,Ce,ws())})()}_openRedirect(v,y,b,P){var G=this;return(0,c.Z)(function*(){return yield G._originValidation(v),function ha(w){yr().location.href=w}(Op(v,y,b,Ee(),P)),new Promise(()=>{})})()}_initialize(v){const y=v._key();if(this.eventManagers[y]){const{manager:P,promise:G}=this.eventManagers[y];return P?Promise.resolve(P):(tt(G,"If manager is not set, promise should be"),G)}const b=this.initAndGetManager(v);return this.eventManagers[y]={promise:b},b.catch(()=>{delete this.eventManagers[y]}),b}initAndGetManager(v){var y=this;return(0,c.Z)(function*(){const b=yield function Gm(w){return $h.apply(this,arguments)}(v),P=new Ss(v);return b.register("authEvent",G=>(q(G?.authEvent,v,"invalid-auth-event"),{status:P.onEvent(G.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[v._key()]={manager:P},y.iframes[v._key()]=b,P})()}_isIframeWebStorageSupported(v,y){this.iframes[v._key()].send(Si,{type:Si},P=>{var G;const ne=null===(G=P?.[0])||void 0===G?void 0:G[Si];void 0!==ne&&y(!!ne),ke(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const y=v._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Zc(w){return kr.apply(this,arguments)}(v)),this.originValidationPromises[y]}get _shouldInitProactively(){return gm()||Et()||cn()}};class Vm{constructor(v){this.factorId=v}_process(v,y,b){switch(y.type){case"enroll":return this._finalizeEnroll(v,y.credential,b);case"signin":return this._finalizeSignIn(v,y.credential);default:return Pe("unexpected MultiFactorSessionType")}}}class zh extends Vm{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new zh(v)}_finalizeEnroll(v,y,b){return function y_(w,v){return qt(w,"POST","/v2/accounts/mfaEnrollment:finalize",_t(w,v))}(v,{idToken:y,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,y){return function Jo(w,v){return qt(w,"POST","/v2/accounts/mfaSignIn:finalize",_t(w,v))}(v,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ip=(()=>{class w{constructor(){}static assertion(y){return zh._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var Bm="@firebase/auth";class zl{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var y=this;return(0,c.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const y=this.auth.onIdTokenChanged(b=>{v(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,y),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const y=this.internalListeners.get(v);y&&(this.internalListeners.delete(v),y(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ku(){return window}(0,B.Pz)("authIdTokenMaxAge"),function Kh(w){(0,ge._registerComponent)(new Oe.wA("auth",(v,{options:y})=>{const b=v.getProvider("app").getImmediate(),P=v.getProvider("heartbeat"),{apiKey:G,authDomain:ne}=b.options;return((Ce,lt)=>{q(G&&!G.includes(":"),"invalid-api-key",{appName:Ce.name}),q(!ne?.includes(":"),"argument-error",{appName:Ce.name});const bt={apiKey:G,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rc(w)},jt=new mm(Ce,lt,bt);return function ve(w,v){const y=v?.persistence||[],b=(Array.isArray(y)?y:[y]).map(Gt);v?.errorMap&&w._updateErrorMap(v.errorMap),w._initializeWithPersistence(b,v?.popupRedirectResolver)}(jt,y),jt})(b,P)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,y,b)=>{v.getProvider("auth-internal").initialize()})),(0,ge._registerComponent)(new Oe.wA("auth-internal",v=>{const y=xr(v.getProvider("auth").getImmediate());return new zl(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ge.registerVersion)(Bm,"0.22.0",function Sn(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,ge.registerVersion)(Bm,"0.22.0","esm2017")}("Browser");const Kl=2e3;function Pp(){return Pp=(0,c.Z)(function*(w,v,y){var b;const{BuildInfo:P}=Ku();tt(v.sessionId,"AuthEvent did not contain a session ID");const G=yield function CS(w){return Zh.apply(this,arguments)}(v.sessionId),ne={};return cn()?ne.ibi=P.packageName:Dr()?ne.apn=P.packageName:ke(w,"operation-not-supported-in-this-environment"),P.displayName&&(ne.appDisplayName=P.displayName),ne.sessionId=G,Op(w,y,v.type,void 0,null!==(b=v.eventId)&&void 0!==b?b:void 0,ne)}),Pp.apply(this,arguments)}function Yh(){return(Yh=(0,c.Z)(function*(w){const{BuildInfo:v}=Ku(),y={};cn()?y.iosBundleId=v.packageName:Dr()?y.androidPackageName=v.packageName:ke(w,"operation-not-supported-in-this-environment"),yield Tp(w,y)})).apply(this,arguments)}function id(){return(id=(0,c.Z)(function*(w,v,y){const{cordova:b}=Ku();let P=()=>{};try{yield new Promise((G,ne)=>{let Ce=null;function lt(){var kt;G();const ui=null===(kt=b.plugins.browsertab)||void 0===kt?void 0:kt.close;"function"==typeof ui&&ui(),"function"==typeof y?.close&&y.close()}function bt(){Ce||(Ce=window.setTimeout(()=>{ne(Ie(w,"redirect-cancelled-by-user"))},Kl))}function jt(){"visible"===document?.visibilityState&&bt()}v.addPassiveListener(lt),document.addEventListener("resume",bt,!1),Dr()&&document.addEventListener("visibilitychange",jt,!1),P=()=>{v.removePassiveListener(lt),document.removeEventListener("resume",bt,!1),document.removeEventListener("visibilitychange",jt,!1),Ce&&window.clearTimeout(Ce)}})}finally{P()}})).apply(this,arguments)}function Zh(){return(Zh=(0,c.Z)(function*(w){const v=function wS(w){if(tt(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const v=new ArrayBuffer(w.length),y=new Uint8Array(v);for(let b=0;b<w.length;b++)y[b]=w.charCodeAt(b);return y}(w),y=yield crypto.subtle.digest("SHA-256",v);return Array.from(new Uint8Array(y)).map(P=>P.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Mp=20;class SS extends Ss{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(v=>{this.resolveInialized=v})}addPassiveListener(v){this.passiveListeners.add(v)}removePassiveListener(v){this.passiveListeners.delete(v)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(v){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(v)),super.onEvent(v)}initialized(){var v=this;return(0,c.Z)(function*(){yield v.initPromise})()}}function M_(w){return xp.apply(this,arguments)}function xp(){return(xp=(0,c.Z)(function*(w){const v=yield Xh()._get(Za(w));return v&&(yield Xh()._remove(Za(w))),v})).apply(this,arguments)}function Jh(){const w=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<Mp;y++){const b=Math.floor(Math.random()*v.length);w.push(v.charAt(b))}return w.join("")}function Xh(){return Gt(Lh)}function Za(w){return K("authEvent",w.config.apiKey,w.name)}function od(w){if(!w?.includes("?"))return{};const[v,...y]=w.split("?");return(0,B.zd)(y.join("?"))}const sd=class x_{constructor(){this._redirectPersistence=Go,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Zt,this._overrideRedirectResult=Uu}_initialize(v){var y=this;return(0,c.Z)(function*(){const b=v._key();let P=y.eventManagers.get(b);return P||(P=new SS(v),y.eventManagers.set(b,P),y.attachCallbackListeners(v,P)),P})()}_openPopup(v){ke(v,"operation-not-supported-in-this-environment")}_openRedirect(v,y,b,P){var G=this;return(0,c.Z)(function*(){!function Um(w){var v,y,b,P,G,ne,Ce,lt,bt,jt;const kt=Ku();q("function"==typeof(null===(v=kt?.universalLinks)||void 0===v?void 0:v.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(y=kt?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(G=null===(P=null===(b=kt?.cordova)||void 0===b?void 0:b.plugins)||void 0===P?void 0:P.browsertab)||void 0===G?void 0:G.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(lt=null===(Ce=null===(ne=kt?.cordova)||void 0===ne?void 0:ne.plugins)||void 0===Ce?void 0:Ce.browsertab)||void 0===lt?void 0:lt.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(jt=null===(bt=kt?.cordova)||void 0===bt?void 0:bt.InAppBrowser)||void 0===jt?void 0:jt.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(v);const ne=yield G._initialize(v);yield ne.initialized(),ne.resetRedirect(),function jl(){Ca.clear()}(),yield G._originValidation(v);const Ce=function ES(w,v,y=null){return{type:v,eventId:y,urlResponse:null,sessionId:Jh(),postBody:null,tenantId:w.tenantId,error:Ie(w,"no-auth-event")}}(v,b,P);yield function bS(w,v){return Xh()._set(Za(w),v)}(v,Ce);const lt=yield function qh(w,v,y){return Pp.apply(this,arguments)}(v,Ce,y),bt=yield function Np(w){const{cordova:v}=Ku();return new Promise(y=>{v.plugins.browsertab.isAvailable(b=>{let P=null;b?v.plugins.browsertab.openUrl(w):P=v.InAppBrowser.open(w,function oo(w=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),y(P)})})}(lt);return function Ya(w,v,y){return id.apply(this,arguments)}(v,ne,bt)})()}_isIframeWebStorageSupported(v,y){throw new Error("Method not implemented.")}_originValidation(v){const y=v._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function rd(w){return Yh.apply(this,arguments)}(v)),this.originValidationPromises[y]}attachCallbackListeners(v,y){const{universalLinks:b,handleOpenURL:P,BuildInfo:G}=Ku(),ne=setTimeout((0,c.Z)(function*(){yield M_(v),y.onEvent(ad())}),500),Ce=function(){var jt=(0,c.Z)(function*(kt){clearTimeout(ne);const ui=yield M_(v);let bs=null;ui&&kt?.url&&(bs=function Qh(w,v){var y,b;const P=function DS(w){const v=od(w),y=v.link?decodeURIComponent(v.link):void 0,b=od(y).link,P=v.deep_link_id?decodeURIComponent(v.deep_link_id):void 0;return od(P).link||P||b||y||w}(v);if(P.includes("/__/auth/callback")){const G=od(P),ne=G.firebaseError?function jm(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(G.firebaseError)):null,Ce=null===(b=null===(y=ne?.code)||void 0===y?void 0:y.split("auth/"))||void 0===b?void 0:b[1],lt=Ce?Ie(Ce):null;return lt?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:P,postBody:null}}return null}(ui,kt.url)),y.onEvent(bs||ad())});return function(ui){return jt.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,Ce);const lt=P,bt=`${G.packageName.toLowerCase()}://`;Ku().handleOpenURL=function(){var jt=(0,c.Z)(function*(kt){if(kt.toLowerCase().startsWith(bt)&&Ce({url:kt}),"function"==typeof lt)try{lt(kt)}catch(ui){console.error(ui)}});return function(kt){return jt.apply(this,arguments)}}()}};function ad(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}const Wm=1e3;function Bs(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function Fp(w=(0,B.z$)()){return!("file:"!==Bs()&&"ionic:"!==Bs()&&"capacitor:"!==Bs()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function kp(){try{const w=self.localStorage,v=ws();if(w)return w.setItem(v,"1"),w.removeItem(v),!function qu(w=(0,B.z$)()){return function Lp(){return(0,B.w1)()&&11===document?.documentMode}()||function ld(w=(0,B.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,B.hl)()}catch{return Yu()&&(0,B.hl)()}return!1}function Yu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nf(){return(function L_(){return"http:"===Bs()||"https:"===Bs()}()||(0,B.ru)()||Fp())&&!function $m(){return(0,B.b$)()||(0,B.UG)()}()&&kp()&&!Yu()}function Zu(){return Fp()&&typeof document<"u"}function Yl(){return(Yl=(0,c.Z)(function*(){return!!Zu()&&new Promise(w=>{const v=setTimeout(()=>{w(!1)},Wm);document.addEventListener("deviceready",()=>{clearTimeout(v),w(!0)})})})).apply(this,arguments)}const So={LOCAL:"local",NONE:"none",SESSION:"session"},Us=q,ud="persistence";function Zl(w){return sf.apply(this,arguments)}function sf(){return(sf=(0,c.Z)(function*(w){yield w._initializationPromise;const v=G_(),y=K(ud,w.config.apiKey,w.name);v&&v.setItem(y,w._getPersistence())})).apply(this,arguments)}function G_(){var w;try{return(null===(w=function wa(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const TS=q;class Qu{constructor(){this.browserResolver=Gt(Oi),this.cordovaResolver=Gt(sd),this.underlyingResolver=null,this._redirectPersistence=Go,this._completeRedirectFn=Zt,this._overrideRedirectResult=Uu}_initialize(v){var y=this;return(0,c.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(v)})()}_openPopup(v,y,b,P){var G=this;return(0,c.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openPopup(v,y,b,P)})()}_openRedirect(v,y,b,P){var G=this;return(0,c.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openRedirect(v,y,b,P)})()}_isIframeWebStorageSupported(v,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(v,y)}_originValidation(v){return this.assertedUnderlyingResolver._originValidation(v)}get _shouldInitProactively(){return Zu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return TS(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var v=this;return(0,c.Z)(function*(){if(v.underlyingResolver)return;const y=yield function k_(){return Yl.apply(this,arguments)}();v.underlyingResolver=y?v.cordovaResolver:v.browserResolver})()}}function V_(w){return w.unwrap()}function RS(w){return af(w)}function af(w){const{_tokenResponse:v}=w instanceof B.ZR?w.customData:w;if(!v)return null;if(!(w instanceof B.ZR)&&"temporaryProof"in v&&"phoneNumber"in v)return Vs.credentialFromResult(w);const y=v.providerId;if(!y||y===_e.PASSWORD)return null;let b;switch(y){case _e.GOOGLE:b=vm;break;case _e.FACEBOOK:b=Ch;break;case _e.GITHUB:b=sp;break;case _e.TWITTER:b=d_;break;default:const{oauthIdToken:P,oauthAccessToken:G,oauthTokenSecret:ne,pendingToken:Ce,nonce:lt}=v;return G||ne||P||Ce?Ce?y.startsWith("saml.")?bl._create(y,Ce):xs._fromParams({providerId:y,signInMethod:y,pendingToken:Ce,idToken:P,accessToken:G}):new bu(y).credential({idToken:P,accessToken:G,rawNonce:lt}):null}return w instanceof B.ZR?b.credentialFromError(w):b.credentialFromResult(w)}function lo(w,v){return v.catch(y=>{throw y instanceof B.ZR&&function H_(w,v){var y;const b=null===(y=v.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===v?.code)v.resolver=new B_(w,function v_(w,v){var y;const b=(0,B.m9)(w),P=v;return q(v.customData.operationType,b,"argument-error"),q(null===(y=P.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,b,"argument-error"),Zr._fromError(b,P)}(w,v));else if(b){const P=af(v),G=v;P&&(G.credential=P,G.tenantId=b.tenantId||void 0,G.email=b.email||void 0,G.phoneNumber=b.phoneNumber||void 0)}}(w,y),y}).then(y=>{const P=y.user;return{operationType:y.operationType,credential:RS(y),additionalUserInfo:p_(y),user:Sa.getOrCreate(P)}})}function lf(w,v){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,c.Z)(function*(w,v){const y=yield v;return{verificationId:y.verificationId,confirm:b=>lo(w,y.confirm(b))}})).apply(this,arguments)}class B_{constructor(v,y){this.resolver=y,this.auth=function zm(w){return w.wrapped()}(v)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(v){return lo(V_(this.auth),this.resolver.resolveSignIn(v))}}class Sa{constructor(v){this._delegate=v,this.multiFactor=function da(w){const v=(0,B.m9)(w);return ja.has(v)||ja.set(v,Pl._fromUser(v)),ja.get(v)}(v)}static getOrCreate(v){return Sa.USER_MAP.has(v)||Sa.USER_MAP.set(v,new Sa(v)),Sa.USER_MAP.get(v)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(v){return this._delegate.getIdTokenResult(v)}getIdToken(v){return this._delegate.getIdToken(v)}linkAndRetrieveDataWithCredential(v){return this.linkWithCredential(v)}linkWithCredential(v){var y=this;return(0,c.Z)(function*(){return lo(y.auth,Ru(y._delegate,v))})()}linkWithPhoneNumber(v,y){var b=this;return(0,c.Z)(function*(){return lf(b.auth,function vS(w,v,y){return Am.apply(this,arguments)}(b._delegate,v,y))})()}linkWithPopup(v){var y=this;return(0,c.Z)(function*(){return lo(y.auth,function Tt(w,v,y){return Un.apply(this,arguments)}(y._delegate,v,Qu))})()}linkWithRedirect(v){var y=this;return(0,c.Z)(function*(){return yield Zl(xr(y.auth)),ze(y._delegate,v,Qu)})()}reauthenticateAndRetrieveDataWithCredential(v){return this.reauthenticateWithCredential(v)}reauthenticateWithCredential(v){var y=this;return(0,c.Z)(function*(){return lo(y.auth,Lc(y._delegate,v))})()}reauthenticateWithPhoneNumber(v,y){return lf(this.auth,function E_(w,v,y){return Bl.apply(this,arguments)}(this._delegate,v,y))}reauthenticateWithPopup(v){return lo(this.auth,function yn(w,v,y){return Ho.apply(this,arguments)}(this._delegate,v,Qu))}reauthenticateWithRedirect(v){var y=this;return(0,c.Z)(function*(){return yield Zl(xr(y.auth)),$(y._delegate,v,Qu)})()}sendEmailVerification(v){return function fp(w,v){return Hc.apply(this,arguments)}(this._delegate,v)}unlink(v){var y=this;return(0,c.Z)(function*(){return yield function lp(w,v){return Ba.apply(this,arguments)}(y._delegate,v),y})()}updateEmail(v){return function Bc(w,v){return gp((0,B.m9)(w),v,null)}(this._delegate,v)}updatePassword(v){return function pp(w,v){return gp((0,B.m9)(w),null,v)}(this._delegate,v)}updatePhoneNumber(v){return function li(w,v){return Hu.apply(this,arguments)}(this._delegate,v)}updateProfile(v){return function Nu(w,v){return Lo.apply(this,arguments)}(this._delegate,v)}verifyBeforeUpdateEmail(v,y){return function Ih(w,v,y){return Fr.apply(this,arguments)}(this._delegate,v,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sa.USER_MAP=new WeakMap;const uf=q;let U_=(()=>{class w{constructor(y,b){if(this.app=y,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:P}=y.options;uf(P,"invalid-api-key",{appName:y.name}),uf(P,"invalid-api-key",{appName:y.name});const G=typeof window<"u"?Qu:void 0;this._delegate=b.initialize({options:{persistence:qm(P,y.name),popupRedirectResolver:G}}),this._delegate._updateErrorMap(ct),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,b){!function vh(w,v,y){const b=xr(w);q(b._canInitEmulator,b,"emulator-config-failed"),q(/^https?:\/\//.test(v),b,"invalid-emulator-scheme");const P=!!y?.disableWarnings,G=Mn(v),{host:ne,port:Ce}=function qr(w){const v=Mn(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(v.length));if(!y)return{host:"",port:null};const b=y[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(b);if(P){const G=P[1];return{host:G,port:_i(b.substr(G.length+1))}}{const[G,ne]=b.split(":");return{host:G,port:_i(ne)}}}(v);b.config.emulator={url:`${G}//${ne}${null===Ce?"":`:${Ce}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ne,port:Ce,protocol:G.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function aa(){function w(){const v=document.createElement("p"),y=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,y,b)}applyActionCode(y){return function cp(w,v){return kc.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return dp(this._delegate,y)}confirmPasswordReset(y,b){return function Rh(w,v,y){return nn.apply(this,arguments)}(this._delegate,y,b)}createUserWithEmailAndPassword(y,b){var P=this;return(0,c.Z)(function*(){return lo(P._delegate,function _m(w,v,y){return Er.apply(this,arguments)}(P._delegate,y,b))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function hp(w,v){return Al.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Cm(w,v){return"EMAIL_SIGNIN"===Bi.parseLink(v)?.operation}(0,y)}getRedirectResult(){var y=this;return(0,c.Z)(function*(){uf(nf(),y._delegate,"operation-not-supported-in-this-environment");const b=yield function Ht(w,v){return wn.apply(this,arguments)}(y._delegate,Qu);return b?lo(y._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function ef(w,v){xr(w)._logFramework(v)}(this._delegate,y)}onAuthStateChanged(y,b,P){const{next:G,error:ne,complete:Ce}=Km(y,b,P);return this._delegate.onAuthStateChanged(G,ne,Ce)}onIdTokenChanged(y,b,P){const{next:G,error:ne,complete:Ce}=Km(y,b,P);return this._delegate.onIdTokenChanged(G,ne,Ce)}sendSignInLinkToEmail(y,b){return function xn(w,v,y){return Vc.apply(this,arguments)}(this._delegate,y,b)}sendPasswordResetEmail(y,b){return function ks(w,v,y){return Ol.apply(this,arguments)}(this._delegate,y,b||void 0)}setPersistence(y){var b=this;return(0,c.Z)(function*(){let P;switch(function rf(w,v){Us(Object.values(So).includes(v),w,"invalid-persistence-type"),(0,B.b$)()?Us(v!==So.SESSION,w,"unsupported-persistence-type"):(0,B.UG)()?Us(v===So.NONE,w,"unsupported-persistence-type"):Yu()?Us(v===So.NONE||v===So.LOCAL&&(0,B.hl)(),w,"unsupported-persistence-type"):Us(v===So.NONE||kp(),w,"unsupported-persistence-type")}(b._delegate,y),y){case So.SESSION:P=Go;break;case So.LOCAL:P=(yield Gt(Gs)._isAvailable())?Gs:Lh;break;case So.NONE:P=Y;break;default:return ke("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(P)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return lo(this._delegate,function Nc(w){return ap.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return lo(this._delegate,Bn(this._delegate,y))}signInWithCustomToken(y){return lo(this._delegate,function Dh(w,v){return Cs.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,b){return lo(this._delegate,function $e(w,v,y){return Bn((0,B.m9)(w),op.credential(v,y))}(this._delegate,y,b))}signInWithEmailLink(y,b){return lo(this._delegate,function ai(w,v,y){return Oh.apply(this,arguments)}(this._delegate,y,b))}signInWithPhoneNumber(y,b){return lf(this._delegate,function Om(w,v,y){return Im.apply(this,arguments)}(this._delegate,y,b))}signInWithPopup(y){var b=this;return(0,c.Z)(function*(){return uf(nf(),b._delegate,"operation-not-supported-in-this-environment"),lo(b._delegate,function b_(w,v,y){return D_.apply(this,arguments)}(b._delegate,y,Qu))})()}signInWithRedirect(y){var b=this;return(0,c.Z)(function*(){return uf(nf(),b._delegate,"operation-not-supported-in-this-environment"),yield Zl(b._delegate),O(b._delegate,y,Qu)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function ym(w,v){return Gc.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=So,w})();function Km(w,v,y){let b=w;"function"!=typeof w&&({next:b,error:v,complete:y}=w);const P=b;return{next:ne=>P(ne&&Sa.getOrCreate(ne)),error:v,complete:y}}function qm(w,v){const y=function cd(w,v){const y=G_();if(!y)return[];const b=K(ud,w,v);switch(y.getItem(b)){case So.NONE:return[Y];case So.LOCAL:return[Gs,Go];case So.SESSION:return[Go];default:return[]}}(w,v);if(typeof self<"u"&&!y.includes(Gs)&&y.push(Gs),typeof window<"u")for(const b of[Lh,Go])y.includes(b)||y.push(b);return y.includes(Y)||y.push(Y),y}class cf{constructor(){this.providerId="phone",this._delegate=new Vs(V_(se.Z.auth()))}static credential(v,y){return Vs.credential(v,y)}verifyPhoneNumber(v,y){return this._delegate.verifyPhoneNumber(v,y)}unwrap(){return this._delegate}}cf.PHONE_SIGN_IN_METHOD=Vs.PHONE_SIGN_IN_METHOD,cf.PROVIDER_ID=Vs.PROVIDER_ID;const uo=q;class Ea{constructor(v,y,b=se.Z.app()){var P;uo(null===(P=b.options)||void 0===P?void 0:P.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new cr(v,y,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function OS(w){w.INTERNAL.registerComponent(new Oe.wA("auth-compat",v=>{const y=v.getProvider("app-compat").getImmediate(),b=v.getProvider("auth");return new U_(y,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ie_EMAIL_SIGNIN,PASSWORD_RESET:ie_PASSWORD_RESET,RECOVER_EMAIL:ie_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ie_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ie_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ie_VERIFY_EMAIL}},EmailAuthProvider:op,FacebookAuthProvider:Ch,GithubAuthProvider:sp,GoogleAuthProvider:vm,OAuthProvider:bu,SAMLAuthProvider:ys,PhoneAuthProvider:cf,PhoneMultiFactorGenerator:Ip,RecaptchaVerifier:Ea,TwitterAuthProvider:d_,Auth:U_,AuthCredential:oi,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.3.7")}(se.Z)},8766:(Lt,Le,U)=>{U.d(Le,{Lj:()=>ke,X3:()=>nt});var c=U(5861);const se=(q,Pe)=>Pe.some(tt=>q instanceof tt);let B,ge;const Oe=new WeakMap,Se=new WeakMap,_e=new WeakMap,Z=new WeakMap,Q=new WeakMap;let Be={get(q,Pe,tt){if(q instanceof IDBTransaction){if("done"===Pe)return Se.get(q);if("objectStoreNames"===Pe)return q.objectStoreNames||_e.get(q);if("store"===Pe)return tt.objectStoreNames[1]?void 0:tt.objectStore(tt.objectStoreNames[0])}return Ge(q[Pe])},set:(q,Pe,tt)=>(q[Pe]=tt,!0),has:(q,Pe)=>q instanceof IDBTransaction&&("done"===Pe||"store"===Pe)||Pe in q};function De(q){return"function"==typeof q?function Ft(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...Pe){return q.apply(Ve(this),Pe),Ge(Oe.get(this))}:function(...Pe){return Ge(q.apply(Ve(this),Pe))}:function(Pe,...tt){const dt=q.call(Ve(this),Pe,...tt);return _e.set(dt,Pe.sort?Pe.sort():[Pe]),Ge(dt)}}(q):(q instanceof IDBTransaction&&function at(q){if(Se.has(q))return;const Pe=new Promise((tt,dt)=>{const Gt=()=>{q.removeEventListener("complete",St),q.removeEventListener("error",ve),q.removeEventListener("abort",ve)},St=()=>{tt(),Gt()},ve=()=>{dt(q.error||new DOMException("AbortError","AbortError")),Gt()};q.addEventListener("complete",St),q.addEventListener("error",ve),q.addEventListener("abort",ve)});Se.set(q,Pe)}(q),se(q,function de(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,Be):q)}function Ge(q){if(q instanceof IDBRequest)return function ie(q){const Pe=new Promise((tt,dt)=>{const Gt=()=>{q.removeEventListener("success",St),q.removeEventListener("error",ve)},St=()=>{tt(Ge(q.result)),Gt()},ve=()=>{dt(q.error),Gt()};q.addEventListener("success",St),q.addEventListener("error",ve)});return Pe.then(tt=>{tt instanceof IDBCursor&&Oe.set(tt,q)}).catch(()=>{}),Q.set(Pe,q),Pe}(q);if(Z.has(q))return Z.get(q);const Pe=De(q);return Pe!==q&&(Z.set(q,Pe),Q.set(Pe,q)),Pe}const Ve=q=>Q.get(q);function nt(q,Pe,{blocked:tt,upgrade:dt,blocking:Gt,terminated:St}={}){const ve=indexedDB.open(q,Pe),Ee=Ge(ve);return dt&&ve.addEventListener("upgradeneeded",Ae=>{dt(Ge(ve.result),Ae.oldVersion,Ae.newVersion,Ge(ve.transaction))}),tt&&ve.addEventListener("blocked",()=>tt()),Ee.then(Ae=>{St&&Ae.addEventListener("close",()=>St()),Gt&&Ae.addEventListener("versionchange",()=>Gt())}).catch(()=>{}),Ee}function ke(q,{blocked:Pe}={}){const tt=indexedDB.deleteDatabase(q);return Pe&&tt.addEventListener("blocked",()=>Pe()),Ge(tt).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],Ue=["put","add","delete","clear"],it=new Map;function Ze(q,Pe){if(!(q instanceof IDBDatabase)||Pe in q||"string"!=typeof Pe)return;if(it.get(Pe))return it.get(Pe);const tt=Pe.replace(/FromIndex$/,""),dt=Pe!==tt,Gt=Ue.includes(tt);if(!(tt in(dt?IDBIndex:IDBObjectStore).prototype)||!Gt&&!Ie.includes(tt))return;const St=function(){var ve=(0,c.Z)(function*(Ee,...Ae){const je=this.transaction(Ee,Gt?"readwrite":"readonly");let et=je.store;return dt&&(et=et.index(Ae.shift())),(yield Promise.all([et[tt](...Ae),Gt&&je.done]))[0]});return function(Ae){return ve.apply(this,arguments)}}();return it.set(Pe,St),St}!function ct(q){Be=q(Be)}(q=>({...q,get:(Pe,tt,dt)=>Ze(Pe,tt)||q.get(Pe,tt,dt),has:(Pe,tt)=>!!Ze(Pe,tt)||q.has(Pe,tt)}))},5861:(Lt,Le,U)=>{function c(B,ge,de,he,Oe,Se,_e){try{var Z=B[Se](_e),Q=Z.value}catch(ie){return void de(ie)}Z.done?ge(Q):Promise.resolve(Q).then(he,Oe)}function se(B){return function(){var ge=this,de=arguments;return new Promise(function(he,Oe){var Se=B.apply(ge,de);function _e(Q){c(Se,he,Oe,_e,Z,"next",Q)}function Z(Q){c(Se,he,Oe,_e,Z,"throw",Q)}_e(void 0)})}}U.d(Le,{Z:()=>se})}},Lt=>{var Le=c=>Lt(Lt.s=c);Le(1321),Le(6122)}]);